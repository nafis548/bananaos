var ZN=Object.defineProperty,eP=Object.defineProperties;var tP=Object.getOwnPropertyDescriptors;var Xf=Object.getOwnPropertySymbols;var Ib=Object.prototype.hasOwnProperty,Db=Object.prototype.propertyIsEnumerable;var Tb=(n,e,t)=>e in n?ZN(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,P=(n,e)=>{for(var t in e||={})Ib.call(e,t)&&Tb(n,t,e[t]);if(Xf)for(var t of Xf(e))Db.call(e,t)&&Tb(n,t,e[t]);return n},Z=(n,e)=>eP(n,tP(e));var Zf=(n,e)=>{var t={};for(var i in n)Ib.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&Xf)for(var i of Xf(n))e.indexOf(i)<0&&Db.call(n,i)&&(t[i]=n[i]);return t};var Ab=new RegExp(`(\\:not\\()|(([\\.\\#]?)[-\\w]+)|(?:\\[([-.\\w*\\\\$]+)(?:=(["']?)([^\\]"']*)\\5)?\\])|(\\))|(\\s*,\\s*)`,"g"),il=class n{element=null;classNames=[];attrs=[];notSelectors=[];static parse(e){let t=[],i=(l,c)=>{c.notSelectors.length>0&&!c.element&&c.classNames.length==0&&c.attrs.length==0&&(c.element="*"),l.push(c)},r=new n,o,s=r,a=!1;for(Ab.lastIndex=0;o=Ab.exec(e);){if(o[1]){if(a)throw new Error("Nesting :not in a selector is not allowed");a=!0,s=new n,r.notSelectors.push(s)}let l=o[2];if(l){let d=o[3];d==="#"?s.addAttribute("id",l.slice(1)):d==="."?s.addClassName(l.slice(1)):s.setElement(l)}let c=o[4];if(c&&s.addAttribute(s.unescapeAttribute(c),o[6]),o[7]&&(a=!1,s=r),o[8]){if(a)throw new Error("Multiple selectors in :not are not supported");i(t,r),r=s=new n}}return i(t,r),t}unescapeAttribute(e){let t="",i=!1;for(let r=0;r<e.length;r++){let o=e.charAt(r);if(o==="\\"){i=!0;continue}if(o==="$"&&!i)throw new Error(`Error in attribute selector "${e}". Unescaped "$" is not supported. Please escape with "\\$".`);i=!1,t+=o}return t}escapeAttribute(e){return e.replace(/\\/g,"\\\\").replace(/\$/g,"\\$")}isElementSelector(){return this.hasElementSelector()&&this.classNames.length==0&&this.attrs.length==0&&this.notSelectors.length===0}hasElementSelector(){return!!this.element}setElement(e=null){this.element=e}getAttrs(){let e=[];return this.classNames.length>0&&e.push("class",this.classNames.join(" ")),e.concat(this.attrs)}addAttribute(e,t=""){this.attrs.push(e,t&&t.toLowerCase()||"")}addClassName(e){this.classNames.push(e.toLowerCase())}toString(){let e=this.element||"";if(this.classNames&&this.classNames.forEach(t=>e+=`.${t}`),this.attrs)for(let t=0;t<this.attrs.length;t+=2){let i=this.escapeAttribute(this.attrs[t]),r=this.attrs[t+1];e+=`[${i}${r?"="+r:""}]`}return this.notSelectors.forEach(t=>e+=`:not(${t})`),e}},Cp=class n{static createNotMatcher(e){let t=new n;return t.addSelectables(e,null),t}_elementMap=new Map;_elementPartialMap=new Map;_classMap=new Map;_classPartialMap=new Map;_attrValueMap=new Map;_attrValuePartialMap=new Map;_listContexts=[];addSelectables(e,t){let i=null;e.length>1&&(i=new Vy(e),this._listContexts.push(i));for(let r=0;r<e.length;r++)this._addSelectable(e[r],t,i)}_addSelectable(e,t,i){let r=this,o=e.element,s=e.classNames,a=e.attrs,l=new By(e,t,i);if(o&&(a.length===0&&s.length===0?this._addTerminal(r._elementMap,o,l):r=this._addPartial(r._elementPartialMap,o)),s)for(let c=0;c<s.length;c++){let d=a.length===0&&c===s.length-1,p=s[c];d?this._addTerminal(r._classMap,p,l):r=this._addPartial(r._classPartialMap,p)}if(a)for(let c=0;c<a.length;c+=2){let d=c===a.length-2,p=a[c],h=a[c+1];if(d){let y=r._attrValueMap,E=y.get(p);E||(E=new Map,y.set(p,E)),this._addTerminal(E,h,l)}else{let y=r._attrValuePartialMap,E=y.get(p);E||(E=new Map,y.set(p,E)),r=this._addPartial(E,h)}}}_addTerminal(e,t,i){let r=e.get(t);r||(r=[],e.set(t,r)),r.push(i)}_addPartial(e,t){let i=e.get(t);return i||(i=new n,e.set(t,i)),i}match(e,t){let i=!1,r=e.element,o=e.classNames,s=e.attrs;for(let a=0;a<this._listContexts.length;a++)this._listContexts[a].alreadyMatched=!1;if(i=this._matchTerminal(this._elementMap,r,e,t)||i,i=this._matchPartial(this._elementPartialMap,r,e,t)||i,o)for(let a=0;a<o.length;a++){let l=o[a];i=this._matchTerminal(this._classMap,l,e,t)||i,i=this._matchPartial(this._classPartialMap,l,e,t)||i}if(s)for(let a=0;a<s.length;a+=2){let l=s[a],c=s[a+1],d=this._attrValueMap.get(l);c&&(i=this._matchTerminal(d,"",e,t)||i),i=this._matchTerminal(d,c,e,t)||i;let p=this._attrValuePartialMap.get(l);c&&(i=this._matchPartial(p,"",e,t)||i),i=this._matchPartial(p,c,e,t)||i}return i}_matchTerminal(e,t,i,r){if(!e||typeof t!="string")return!1;let o=e.get(t)||[],s=e.get("*");if(s&&(o=o.concat(s)),o.length===0)return!1;let a,l=!1;for(let c=0;c<o.length;c++)a=o[c],l=a.finalize(i,r)||l;return l}_matchPartial(e,t,i,r){if(!e||typeof t!="string")return!1;let o=e.get(t);return o?o.match(i,r):!1}},Vy=class{selectors;alreadyMatched=!1;constructor(e){this.selectors=e}},By=class{selector;cbContext;listContext;notSelectors;constructor(e,t,i){this.selector=e,this.cbContext=t,this.listContext=i,this.notSelectors=e.notSelectors}finalize(e,t){let i=!0;return this.notSelectors.length>0&&(!this.listContext||!this.listContext.alreadyMatched)&&(i=!Cp.createNotMatcher(this.notSelectors).match(e,null)),i&&t&&(!this.listContext||!this.listContext.alreadyMatched)&&(this.listContext&&(this.listContext.alreadyMatched=!0),t(this.selector,this.cbContext)),i}},Ep=class{registry;constructor(e){this.registry=e}match(e){return this.registry.has(e)?this.registry.get(e):[]}};var ps=(function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n})(ps||{}),l_=(function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n})(l_||{}),Du=(function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n})(Du||{}),kb={name:"custom-elements"},Mb={name:"no-errors-schema"};var tt=(function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n})(tt||{});function nP(n){let e=n.classNames&&n.classNames.length?[8,...n.classNames]:[];return[n.element&&n.element!=="*"?n.element:"",...n.attrs,...e]}function iP(n){let e=n.classNames&&n.classNames.length?[8,...n.classNames]:[];return n.element?[5,n.element,...n.attrs,...e]:n.attrs.length?[3,...n.attrs,...e]:n.classNames&&n.classNames.length?[9,...n.classNames]:[]}function rP(n){let e=nP(n),t=n.notSelectors&&n.notSelectors.length?n.notSelectors.map(i=>iP(i)):[];return e.concat(...t)}function c_(n){return n?il.parse(n).map(rP):[]}var Ur=(function(n){return n[n.Directive=0]="Directive",n[n.Component=1]="Component",n[n.Injectable=2]="Injectable",n[n.Pipe=3]="Pipe",n[n.NgModule=4]="NgModule",n})(Ur||{});var xp;function oP(n){return cP(lP(n.nodes).join("")+`[${n.meaning}]`)}function sP(n){return n.id||w1(n)}function w1(n){let e=new Uy,t=n.nodes.map(i=>i.visit(e,null));return C1(t.join(""),n.meaning)}var bp=class{visitText(e,t){return e.value}visitContainer(e,t){return`[${e.children.map(i=>i.visit(this)).join(", ")}]`}visitIcu(e,t){let i=Object.keys(e.cases).map(r=>`${r} {${e.cases[r].visit(this)}}`);return`{${e.expression}, ${e.type}, ${i.join(", ")}}`}visitTagPlaceholder(e,t){return e.isVoid?`<ph tag name="${e.startName}"/>`:`<ph tag name="${e.startName}">${e.children.map(i=>i.visit(this)).join(", ")}</ph name="${e.closeName}">`}visitPlaceholder(e,t){return e.value?`<ph name="${e.name}">${e.value}</ph>`:`<ph name="${e.name}"/>`}visitIcuPlaceholder(e,t){return`<ph icu name="${e.name}">${e.value.visit(this)}</ph>`}visitBlockPlaceholder(e,t){return`<ph block name="${e.startName}">${e.children.map(i=>i.visit(this)).join(", ")}</ph name="${e.closeName}">`}},aP=new bp;function lP(n){return n.map(e=>e.visit(aP,null))}var Uy=class extends bp{visitIcu(e){let t=Object.keys(e.cases).map(i=>`${i} {${e.cases[i].visit(this)}}`);return`{${e.type}, ${t.join(", ")}}`}};function cP(n){xp??=new TextEncoder;let e=[...xp.encode(n)],t=fP(e,u_.Big),i=e.length*8,r=new Uint32Array(80),o=1732584193,s=4023233417,a=2562383102,l=271733878,c=3285377520;t[i>>5]|=128<<24-i%32,t[(i+64>>9<<4)+15]=i;for(let d=0;d<t.length;d+=16){let p=o,h=s,y=a,E=l,A=c;for(let R=0;R<80;R++){R<16?r[R]=t[d+R]:r[R]=yy(r[R-3]^r[R-8]^r[R-14]^r[R-16],1);let k=uP(R,s,a,l),H=k[0],K=k[1],z=[yy(o,5),H,c,K,r[R]].reduce(Va);c=l,l=a,a=yy(s,30),s=o,o=z}o=Va(o,p),s=Va(s,h),a=Va(a,y),l=Va(l,E),c=Va(c,A)}return Eu(o)+Eu(s)+Eu(a)+Eu(l)+Eu(c)}function Eu(n){return(n>>>0).toString(16).padStart(8,"0")}function uP(n,e,t,i){return n<20?[e&t|~e&i,1518500249]:n<40?[e^t^i,1859775393]:n<60?[e&t|e&i|t&i,2400959708]:[e^t^i,3395469782]}function Nb(n){xp??=new TextEncoder;let e=xp.encode(n),t=new DataView(e.buffer,e.byteOffset,e.byteLength),i=Pb(t,e.length,0),r=Pb(t,e.length,102072);return i==0&&(r==0||r==1)&&(i=i^319790063,r=r^-1801410264),BigInt.asUintN(32,BigInt(i))<<BigInt(32)|BigInt.asUintN(32,BigInt(r))}function C1(n,e=""){let t=Nb(n);return e&&(t=BigInt.asUintN(64,t<<BigInt(1))|t>>BigInt(63)&BigInt(1),t+=Nb(e)),BigInt.asUintN(63,t).toString()}function Pb(n,e,t){let i=2654435769,r=2654435769,o=0,s=e-12;for(;o<=s;o+=12){i+=n.getUint32(o,!0),r+=n.getUint32(o+4,!0),t+=n.getUint32(o+8,!0);let l=Rb(i,r,t);i=l[0],r=l[1],t=l[2]}let a=e-o;return t+=e,a>=4?(i+=n.getUint32(o,!0),o+=4,a>=8?(r+=n.getUint32(o,!0),o+=4,a>=9&&(t+=n.getUint8(o++)<<8),a>=10&&(t+=n.getUint8(o++)<<16),a===11&&(t+=n.getUint8(o++)<<24)):(a>=5&&(r+=n.getUint8(o++)),a>=6&&(r+=n.getUint8(o++)<<8),a===7&&(r+=n.getUint8(o++)<<16))):(a>=1&&(i+=n.getUint8(o++)),a>=2&&(i+=n.getUint8(o++)<<8),a===3&&(i+=n.getUint8(o++)<<16)),Rb(i,r,t)[2]}function Rb(n,e,t){return n-=e,n-=t,n^=t>>>13,e-=t,e-=n,e^=n<<8,t-=n,t-=e,t^=e>>>13,n-=e,n-=t,n^=t>>>12,e-=t,e-=n,e^=n<<16,t-=n,t-=e,t^=e>>>5,n-=e,n-=t,n^=t>>>3,e-=t,e-=n,e^=n<<10,t-=n,t-=e,t^=e>>>15,[n,e,t]}var u_=(function(n){return n[n.Little=0]="Little",n[n.Big=1]="Big",n})(u_||{});function Va(n,e){return dP(n,e)[1]}function dP(n,e){let t=(n&65535)+(e&65535),i=(n>>>16)+(e>>>16)+(t>>>16);return[i>>>16,i<<16|t&65535]}function yy(n,e){return n<<e|n>>>32-e}function fP(n,e){let t=n.length+3>>>2,i=[];for(let r=0;r<t;r++)i[r]=pP(n,r*4,e);return i}function Fb(n,e){return e>=n.length?0:n[e]}function pP(n,e,t){let i=0;if(t===u_.Big)for(let r=0;r<4;r++)i+=Fb(n,e+r)<<24-8*r;else for(let r=0;r<4;r++)i+=Fb(n,e+r)<<8*r;return i}var E1=(function(n){return n[n.None=0]="None",n[n.Const=1]="Const",n})(E1||{}),Sp=class{modifiers;constructor(e=E1.None){this.modifiers=e}hasModifier(e){return(this.modifiers&e)!==0}},Qr=(function(n){return n[n.Dynamic=0]="Dynamic",n[n.Bool=1]="Bool",n[n.String=2]="String",n[n.Int=3]="Int",n[n.Number=4]="Number",n[n.Function=5]="Function",n[n.Inferred=6]="Inferred",n[n.None=7]="None",n})(Qr||{}),dr=class extends Sp{name;constructor(e,t){super(t),this.name=e}visitType(e,t){return e.visitBuiltinType(this,t)}},_i=class extends Sp{value;typeParams;constructor(e,t,i=null){super(t),this.value=e,this.typeParams=i}visitType(e,t){return e.visitExpressionType(this,t)}};var Rd=new dr(Qr.Dynamic),Zn=new dr(Qr.Inferred),hP=new dr(Qr.Bool),jee=new dr(Qr.Int),d_=new dr(Qr.Number),f_=new dr(Qr.String),Kee=new dr(Qr.Function),fr=new dr(Qr.None),Uu=(function(n){return n[n.Minus=0]="Minus",n[n.Plus=1]="Plus",n})(Uu||{}),j=(function(n){return n[n.Equals=0]="Equals",n[n.NotEquals=1]="NotEquals",n[n.Assign=2]="Assign",n[n.Identical=3]="Identical",n[n.NotIdentical=4]="NotIdentical",n[n.Minus=5]="Minus",n[n.Plus=6]="Plus",n[n.Divide=7]="Divide",n[n.Multiply=8]="Multiply",n[n.Modulo=9]="Modulo",n[n.And=10]="And",n[n.Or=11]="Or",n[n.BitwiseOr=12]="BitwiseOr",n[n.BitwiseAnd=13]="BitwiseAnd",n[n.Lower=14]="Lower",n[n.LowerEquals=15]="LowerEquals",n[n.Bigger=16]="Bigger",n[n.BiggerEquals=17]="BiggerEquals",n[n.NullishCoalesce=18]="NullishCoalesce",n[n.Exponentiation=19]="Exponentiation",n[n.In=20]="In",n[n.AdditionAssignment=21]="AdditionAssignment",n[n.SubtractionAssignment=22]="SubtractionAssignment",n[n.MultiplicationAssignment=23]="MultiplicationAssignment",n[n.DivisionAssignment=24]="DivisionAssignment",n[n.RemainderAssignment=25]="RemainderAssignment",n[n.ExponentiationAssignment=26]="ExponentiationAssignment",n[n.AndAssignment=27]="AndAssignment",n[n.OrAssignment=28]="OrAssignment",n[n.NullishCoalesceAssignment=29]="NullishCoalesceAssignment",n})(j||{});function mP(n,e){return n==null||e==null?n==e:n.isEquivalent(e)}function x1(n,e,t){let i=n.length;if(i!==e.length)return!1;for(let r=0;r<i;r++)if(!t(n[r],e[r]))return!1;return!0}function ii(n,e){return x1(n,e,(t,i)=>t.isEquivalent(i))}var je=class{type;sourceSpan;constructor(e,t){this.type=e||null,this.sourceSpan=t||null}prop(e,t){return new ri(this,e,null,t)}key(e,t,i){return new jr(this,e,t,i)}callFn(e,t,i){return new Fn(this,e,null,t,i)}instantiate(e,t,i){return new Hu(this,e,t,i)}conditional(e,t=null,i){return new pr(this,e,t,null,i)}equals(e,t){return new Le(j.Equals,this,e,null,t)}notEquals(e,t){return new Le(j.NotEquals,this,e,null,t)}identical(e,t){return new Le(j.Identical,this,e,null,t)}notIdentical(e,t){return new Le(j.NotIdentical,this,e,null,t)}minus(e,t){return new Le(j.Minus,this,e,null,t)}plus(e,t){return new Le(j.Plus,this,e,null,t)}divide(e,t){return new Le(j.Divide,this,e,null,t)}multiply(e,t){return new Le(j.Multiply,this,e,null,t)}modulo(e,t){return new Le(j.Modulo,this,e,null,t)}power(e,t){return new Le(j.Exponentiation,this,e,null,t)}and(e,t){return new Le(j.And,this,e,null,t)}bitwiseOr(e,t){return new Le(j.BitwiseOr,this,e,null,t)}bitwiseAnd(e,t){return new Le(j.BitwiseAnd,this,e,null,t)}or(e,t){return new Le(j.Or,this,e,null,t)}lower(e,t){return new Le(j.Lower,this,e,null,t)}lowerEquals(e,t){return new Le(j.LowerEquals,this,e,null,t)}bigger(e,t){return new Le(j.Bigger,this,e,null,t)}biggerEquals(e,t){return new Le(j.BiggerEquals,this,e,null,t)}isBlank(e){return this.equals(wP,e)}nullishCoalesce(e,t){return new Le(j.NullishCoalesce,this,e,null,t)}toStmt(){return new Ci(this,null)}},wi=class n extends je{name;constructor(e,t,i){super(t,i),this.name=e}isEquivalent(e){return e instanceof n&&this.name===e.name}isConstant(){return!1}visitExpression(e,t){return e.visitReadVarExpr(this,t)}clone(){return new n(this.name,this.type,this.sourceSpan)}set(e){return new Le(j.Assign,this,e,null,this.sourceSpan)}},rl=class n extends je{expr;constructor(e,t,i){super(t,i),this.expr=e}visitExpression(e,t){return e.visitTypeofExpr(this,t)}isEquivalent(e){return e instanceof n&&e.expr.isEquivalent(this.expr)}isConstant(){return this.expr.isConstant()}clone(){return new n(this.expr.clone())}},Tp=class n extends je{expr;constructor(e,t,i){super(t,i),this.expr=e}visitExpression(e,t){return e.visitVoidExpr(this,t)}isEquivalent(e){return e instanceof n&&e.expr.isEquivalent(this.expr)}isConstant(){return this.expr.isConstant()}clone(){return new n(this.expr.clone())}},Pe=class n extends je{node;constructor(e,t,i){super(t,i),this.node=e}isEquivalent(e){return e instanceof n&&this.node===e.node}isConstant(){return!1}visitExpression(e,t){return e.visitWrappedNodeExpr(this,t)}clone(){return new n(this.node,this.type,this.sourceSpan)}},Fn=class n extends je{fn;args;pure;constructor(e,t,i,r,o=!1){super(i,r),this.fn=e,this.args=t,this.pure=o}get receiver(){return this.fn}isEquivalent(e){return e instanceof n&&this.fn.isEquivalent(e.fn)&&ii(this.args,e.args)&&this.pure===e.pure}isConstant(){return!1}visitExpression(e,t){return e.visitInvokeFunctionExpr(this,t)}clone(){return new n(this.fn.clone(),this.args.map(e=>e.clone()),this.type,this.sourceSpan,this.pure)}},$u=class n extends je{tag;template;constructor(e,t,i,r){super(i,r),this.tag=e,this.template=t}isEquivalent(e){return e instanceof n&&this.tag.isEquivalent(e.tag)&&this.template.isEquivalent(e.template)}isConstant(){return!1}visitExpression(e,t){return e.visitTaggedTemplateLiteralExpr(this,t)}clone(){return new n(this.tag.clone(),this.template.clone(),this.type,this.sourceSpan)}},Hu=class n extends je{classExpr;args;constructor(e,t,i,r){super(i,r),this.classExpr=e,this.args=t}isEquivalent(e){return e instanceof n&&this.classExpr.isEquivalent(e.classExpr)&&ii(this.args,e.args)}isConstant(){return!1}visitExpression(e,t){return e.visitInstantiateExpr(this,t)}clone(){return new n(this.classExpr.clone(),this.args.map(e=>e.clone()),this.type,this.sourceSpan)}},en=class n extends je{value;constructor(e,t,i){super(t,i),this.value=e}isEquivalent(e){return e instanceof n&&this.value===e.value}isConstant(){return!0}visitExpression(e,t){return e.visitLiteralExpr(this,t)}clone(){return new n(this.value,this.type,this.sourceSpan)}},qu=class n extends je{elements;expressions;constructor(e,t,i){super(null,i),this.elements=e,this.expressions=t}isEquivalent(e){return e instanceof n&&x1(this.elements,e.elements,(t,i)=>t.text===i.text)&&ii(this.expressions,e.expressions)}isConstant(){return!1}visitExpression(e,t){return e.visitTemplateLiteralExpr(this,t)}clone(){return new n(this.elements.map(e=>e.clone()),this.expressions.map(e=>e.clone()))}},Ip=class n extends je{text;rawText;constructor(e,t,i){super(f_,t),this.text=e,this.rawText=i??$y(mp(e))}visitExpression(e,t){return e.visitTemplateLiteralElementExpr(this,t)}isEquivalent(e){return e instanceof n&&e.text===this.text&&e.rawText===this.rawText}isConstant(){return!0}clone(){return new n(this.text,this.sourceSpan,this.rawText)}},Es=class{text;sourceSpan;constructor(e,t){this.text=e,this.sourceSpan=t}},Xa=class{text;sourceSpan;associatedMessage;constructor(e,t,i){this.text=e,this.sourceSpan=t,this.associatedMessage=i}},gP="|",Lb="@@",yP="\u241F",Dp=class n extends je{metaBlock;messageParts;placeHolderNames;expressions;constructor(e,t,i,r,o){super(f_,o),this.metaBlock=e,this.messageParts=t,this.placeHolderNames=i,this.expressions=r}isEquivalent(e){return!1}isConstant(){return!1}visitExpression(e,t){return e.visitLocalizedString(this,t)}clone(){return new n(this.metaBlock,this.messageParts,this.placeHolderNames,this.expressions.map(e=>e.clone()),this.sourceSpan)}serializeI18nHead(){let e=this.metaBlock.description||"";return this.metaBlock.meaning&&(e=`${this.metaBlock.meaning}${gP}${e}`),this.metaBlock.customId&&(e=`${e}${Lb}${this.metaBlock.customId}`),this.metaBlock.legacyIds&&this.metaBlock.legacyIds.forEach(t=>{e=`${e}${yP}${t}`}),Ob(e,this.messageParts[0].text,this.getMessagePartSourceSpan(0))}getMessagePartSourceSpan(e){return this.messageParts[e]?.sourceSpan??this.sourceSpan}getPlaceholderSourceSpan(e){return this.placeHolderNames[e]?.sourceSpan??this.expressions[e]?.sourceSpan??this.sourceSpan}serializeI18nTemplatePart(e){let t=this.placeHolderNames[e-1],i=this.messageParts[e],r=t.text;return t.associatedMessage?.legacyIds.length===0&&(r+=`${Lb}${C1(t.associatedMessage.messageString,t.associatedMessage.meaning)}`),Ob(r,i.text,this.getMessagePartSourceSpan(e))}},mp=n=>n.replace(/\\/g,"\\\\"),vP=n=>n.replace(/^:/,"\\:"),_P=n=>n.replace(/:/g,"\\:"),$y=n=>n.replace(/`/g,"\\`").replace(/\${/g,"$\\{");function Ob(n,e,t){return n===""?{cooked:e,raw:$y(vP(mp(e))),range:t}:{cooked:`:${n}:${e}`,raw:$y(`:${_P(mp(n))}:${mp(e)}`),range:t}}var As=class n extends je{value;typeParams;constructor(e,t,i=null,r){super(t,r),this.value=e,this.typeParams=i}isEquivalent(e){return e instanceof n&&this.value.name===e.value.name&&this.value.moduleName===e.value.moduleName}isConstant(){return!1}visitExpression(e,t){return e.visitExternalExpr(this,t)}clone(){return new n(this.value,this.type,this.typeParams,this.sourceSpan)}};var pr=class n extends je{condition;falseCase;trueCase;constructor(e,t,i=null,r,o){super(r||t.type,o),this.condition=e,this.falseCase=i,this.trueCase=t}isEquivalent(e){return e instanceof n&&this.condition.isEquivalent(e.condition)&&this.trueCase.isEquivalent(e.trueCase)&&mP(this.falseCase,e.falseCase)}isConstant(){return!1}visitExpression(e,t){return e.visitConditionalExpr(this,t)}clone(){return new n(this.condition.clone(),this.trueCase.clone(),this.falseCase?.clone(),this.type,this.sourceSpan)}};var Gu=class n extends je{condition;constructor(e,t){super(hP,t),this.condition=e}isEquivalent(e){return e instanceof n&&this.condition.isEquivalent(e.condition)}isConstant(){return!1}visitExpression(e,t){return e.visitNotExpr(this,t)}clone(){return new n(this.condition.clone(),this.sourceSpan)}},$t=class n{name;type;constructor(e,t=null){this.name=e,this.type=t}isEquivalent(e){return this.name===e.name}clone(){return new n(this.name,this.type)}},So=class n extends je{params;statements;name;constructor(e,t,i,r,o){super(i,r),this.params=e,this.statements=t,this.name=o}isEquivalent(e){return(e instanceof n||e instanceof Wu)&&ii(this.params,e.params)&&ii(this.statements,e.statements)}isConstant(){return!1}visitExpression(e,t){return e.visitFunctionExpr(this,t)}toDeclStmt(e,t){return new Wu(e,this.params,this.statements,this.type,t,this.sourceSpan)}clone(){return new n(this.params.map(e=>e.clone()),this.statements,this.type,this.sourceSpan,this.name)}},ks=class n extends je{params;body;constructor(e,t,i,r){super(i,r),this.params=e,this.body=t}isEquivalent(e){return!(e instanceof n)||!ii(this.params,e.params)?!1:this.body instanceof je&&e.body instanceof je?this.body.isEquivalent(e.body):Array.isArray(this.body)&&Array.isArray(e.body)?ii(this.body,e.body):!1}isConstant(){return!1}visitExpression(e,t){return e.visitArrowFunctionExpr(this,t)}clone(){return new n(this.params.map(e=>e.clone()),Array.isArray(this.body)?this.body:this.body.clone(),this.type,this.sourceSpan)}toDeclStmt(e,t){return new Rt(e,this,Zn,t,this.sourceSpan)}},Ms=class n extends je{operator;expr;parens;constructor(e,t,i,r,o=!0){super(i||d_,r),this.operator=e,this.expr=t,this.parens=o}isEquivalent(e){return e instanceof n&&this.operator===e.operator&&this.expr.isEquivalent(e.expr)}isConstant(){return!1}visitExpression(e,t){return e.visitUnaryOperatorExpr(this,t)}clone(){return new n(this.operator,this.expr.clone(),this.type,this.sourceSpan,this.parens)}},Wi=class n extends je{expr;constructor(e,t,i){super(t,i),this.expr=e}visitExpression(e,t){return e.visitParenthesizedExpr(this,t)}isEquivalent(e){return e instanceof n&&e.expr.isEquivalent(this.expr)}isConstant(){return this.expr.isConstant()}clone(){return new n(this.expr.clone())}},Le=class n extends je{operator;rhs;lhs;constructor(e,t,i,r,o){super(r||t.type,o),this.operator=e,this.rhs=i,this.lhs=t}isEquivalent(e){return e instanceof n&&this.operator===e.operator&&this.lhs.isEquivalent(e.lhs)&&this.rhs.isEquivalent(e.rhs)}isConstant(){return!1}visitExpression(e,t){return e.visitBinaryOperatorExpr(this,t)}clone(){return new n(this.operator,this.lhs.clone(),this.rhs.clone(),this.type,this.sourceSpan)}isAssignment(){let e=this.operator;return e===j.Assign||e===j.AdditionAssignment||e===j.SubtractionAssignment||e===j.MultiplicationAssignment||e===j.DivisionAssignment||e===j.RemainderAssignment||e===j.ExponentiationAssignment||e===j.AndAssignment||e===j.OrAssignment||e===j.NullishCoalesceAssignment}},ri=class n extends je{receiver;name;constructor(e,t,i,r){super(i,r),this.receiver=e,this.name=t}get index(){return this.name}isEquivalent(e){return e instanceof n&&this.receiver.isEquivalent(e.receiver)&&this.name===e.name}isConstant(){return!1}visitExpression(e,t){return e.visitReadPropExpr(this,t)}set(e){return new Le(j.Assign,this.receiver.prop(this.name),e,null,this.sourceSpan)}clone(){return new n(this.receiver.clone(),this.name,this.type,this.sourceSpan)}},jr=class n extends je{receiver;index;constructor(e,t,i,r){super(i,r),this.receiver=e,this.index=t}isEquivalent(e){return e instanceof n&&this.receiver.isEquivalent(e.receiver)&&this.index.isEquivalent(e.index)}isConstant(){return!1}visitExpression(e,t){return e.visitReadKeyExpr(this,t)}set(e){return new Le(j.Assign,this.receiver.key(this.index),e,null,this.sourceSpan)}clone(){return new n(this.receiver.clone(),this.index.clone(),this.type,this.sourceSpan)}},zi=class n extends je{entries;constructor(e,t,i){super(t,i),this.entries=e}isConstant(){return this.entries.every(e=>e.isConstant())}isEquivalent(e){return e instanceof n&&ii(this.entries,e.entries)}visitExpression(e,t){return e.visitLiteralArrayExpr(this,t)}clone(){return new n(this.entries.map(e=>e.clone()),this.type,this.sourceSpan)}},ol=class n{key;value;quoted;constructor(e,t,i){this.key=e,this.value=t,this.quoted=i}isEquivalent(e){return this.key===e.key&&this.value.isEquivalent(e.value)}clone(){return new n(this.key,this.value.clone(),this.quoted)}},hr=class n extends je{entries;valueType=null;constructor(e,t,i){super(t,i),this.entries=e,t&&(this.valueType=t.valueType)}isEquivalent(e){return e instanceof n&&ii(this.entries,e.entries)}isConstant(){return this.entries.every(e=>e.value.isConstant())}visitExpression(e,t){return e.visitLiteralMapExpr(this,t)}clone(){let e=this.entries.map(t=>t.clone());return new n(e,this.type,this.sourceSpan)}};var sl=new en(null,null,null),wP=new en(null,Zn,null),Qt=(function(n){return n[n.None=0]="None",n[n.Final=1]="Final",n[n.Private=2]="Private",n[n.Exported=4]="Exported",n[n.Static=8]="Static",n})(Qt||{}),Hy=class{text;multiline;trailingNewline;constructor(e,t,i){this.text=e,this.multiline=t,this.trailingNewline=i}toString(){return this.multiline?` ${this.text} `:this.text}},Ap=class extends Hy{tags;constructor(e){super("",!0,!0),this.tags=e}toString(){return SP(this.tags)}},Ns=class{modifiers;sourceSpan;leadingComments;constructor(e=Qt.None,t=null,i){this.modifiers=e,this.sourceSpan=t,this.leadingComments=i}hasModifier(e){return(this.modifiers&e)!==0}addLeadingComment(e){this.leadingComments=this.leadingComments??[],this.leadingComments.push(e)}},Rt=class n extends Ns{name;value;type;constructor(e,t,i,r,o,s){super(r,o,s),this.name=e,this.value=t,this.type=i||t&&t.type||null}isEquivalent(e){return e instanceof n&&this.name===e.name&&(this.value?!!e.value&&this.value.isEquivalent(e.value):!e.value)}visitStatement(e,t){return e.visitDeclareVarStmt(this,t)}},Wu=class n extends Ns{name;params;statements;type;constructor(e,t,i,r,o,s,a){super(o,s,a),this.name=e,this.params=t,this.statements=i,this.type=r||null}isEquivalent(e){return e instanceof n&&ii(this.params,e.params)&&ii(this.statements,e.statements)}visitStatement(e,t){return e.visitDeclareFunctionStmt(this,t)}},Ci=class n extends Ns{expr;constructor(e,t,i){super(Qt.None,t,i),this.expr=e}isEquivalent(e){return e instanceof n&&this.expr.isEquivalent(e.expr)}visitStatement(e,t){return e.visitExpressionStmt(this,t)}},Xt=class n extends Ns{value;constructor(e,t=null,i){super(Qt.None,t,i),this.value=e}isEquivalent(e){return e instanceof n&&this.value.isEquivalent(e.value)}visitStatement(e,t){return e.visitReturnStmt(this,t)}},kp=class n extends Ns{condition;trueCase;falseCase;constructor(e,t,i=[],r,o){super(Qt.None,r,o),this.condition=e,this.trueCase=t,this.falseCase=i}isEquivalent(e){return e instanceof n&&this.condition.isEquivalent(e.condition)&&ii(this.trueCase,e.trueCase)&&ii(this.falseCase,e.falseCase)}visitStatement(e,t){return e.visitIfStmt(this,t)}};function CP(n=[]){return new Ap(n)}function De(n,e,t){return new wi(n,e,t)}function ce(n,e=null,t){return new As(n,null,e,t)}function Zt(n,e,t){return new _i(n,e,t)}function Fd(n){return new rl(n)}function Ge(n,e,t){return new zi(n,e,t)}function xn(n,e=null){return new hr(n.map(t=>new ol(t.key,t.value,t.quoted)),e,null)}function EP(n,e){return new Gu(n,e)}function Io(n,e,t,i,r){return new So(n,e,t,i,r)}function ji(n,e,t,i){return new ks(n,e,t,i)}function Ph(n,e,t,i,r){return new kp(n,e,t,i,r)}function xP(n,e,t,i){return new $u(n,e,t,i)}function L(n,e,t){return new en(n,e,t)}function bP(n,e,t,i,r){return new Dp(n,e,t,i,r)}function Vb(n){let e="";if(n.tagName&&(e+=` @${n.tagName}`),n.text){if(n.text.match(/\/\*|\*\//))throw new Error('JSDoc text cannot contain "/*" and "*/"');e+=" "+n.text.replace(/@/g,"\\@")}return e}function SP(n){if(n.length===0)return"";if(n.length===1&&n[0].tagName&&!n[0].text)return`*${Vb(n[0])} `;let e=`*
`;for(let t of n)e+=" *",e+=Vb(t).replace(/\n/g,`
 * `),e+=`
`;return e+=" ",e}var TP="_c",Bb=De("<unknown>"),IP={},DP=50,Mp=class n extends je{resolved;original;shared=!1;constructor(e){super(e.type),this.resolved=e,this.original=e}visitExpression(e,t){return t===IP?this.original.visitExpression(e,t):this.resolved.visitExpression(e,t)}isEquivalent(e){return e instanceof n&&this.resolved.isEquivalent(e.resolved)}isConstant(){return!0}clone(){throw new Error("Not supported.")}fixup(e){this.resolved=e,this.shared=!0}},Np=class{isClosureCompilerEnabled;statements=[];literals=new Map;literalFactories=new Map;sharedConstants=new Map;_claimedNames=new Map;nextNameIndex=0;constructor(e=!1){this.isClosureCompilerEnabled=e}getConstLiteral(e,t){if(e instanceof en&&!Ub(e)||e instanceof Mp)return e;let i=Za.INSTANCE.keyOf(e),r=this.literals.get(i),o=!1;if(r||(r=new Mp(e),this.literals.set(i,r),o=!0),!o&&!r.shared||o&&t){let s=this.freshName(),a,l;this.isClosureCompilerEnabled&&Ub(e)?(a=new So([],[new Xt(e)]),l=De(s).callFn([])):(a=e,l=De(s)),this.statements.push(new Rt(s,a,Zn,Qt.Final)),r.fixup(l)}return r}getSharedConstant(e,t){let i=e.keyOf(t);if(!this.sharedConstants.has(i)){let r=this.freshName();this.sharedConstants.set(i,De(r)),this.statements.push(e.toSharedConstantDeclaration(r,t))}return this.sharedConstants.get(i)}getLiteralFactory(e){if(e instanceof zi){let t=e.entries.map(r=>r.isConstant()?r:Bb),i=Za.INSTANCE.keyOf(Ge(t));return this._getLiteralFactory(i,e.entries,r=>Ge(r))}else{let t=xn(e.entries.map(r=>({key:r.key,value:r.value.isConstant()?r.value:Bb,quoted:r.quoted}))),i=Za.INSTANCE.keyOf(t);return this._getLiteralFactory(i,e.entries.map(r=>r.value),r=>xn(r.map((o,s)=>({key:e.entries[s].key,value:o,quoted:e.entries[s].quoted}))))}}getSharedFunctionReference(e,t,i=!0){let r=e instanceof ks;for(let s of this.statements)if(r&&s instanceof Rt&&s.value?.isEquivalent(e)||!r&&s instanceof Wu&&e instanceof So&&e.isEquivalent(s))return De(s.name);let o=i?this.uniqueName(t):t;return this.statements.push(e instanceof So?e.toDeclStmt(o,Qt.Final):new Rt(o,e,Zn,Qt.Final,e.sourceSpan)),De(o)}_getLiteralFactory(e,t,i){let r=this.literalFactories.get(e),o=t.filter(s=>!s.isConstant());if(!r){let s=t.map((d,p)=>d.isConstant()?this.getConstLiteral(d,!0):De(`a${p}`)),a=s.filter(AP).map(d=>new $t(d.name,Rd)),l=ji(a,i(s),Zn),c=this.freshName();this.statements.push(new Rt(c,l,Zn,Qt.Final)),r=De(c),this.literalFactories.set(e,r)}return{literalFactory:r,literalFactoryArguments:o}}uniqueName(e,t=!0){let i=this._claimedNames.get(e)??0,r=i===0&&!t?`${e}`:`${e}${i}`;return this._claimedNames.set(e,i+1),r}freshName(){return this.uniqueName(TP)}},Za=class n{static INSTANCE=new n;keyOf(e){if(e instanceof en&&typeof e.value=="string")return`"${e.value}"`;if(e instanceof en)return String(e.value);if(e instanceof zi){let t=[];for(let i of e.entries)t.push(this.keyOf(i));return`[${t.join(",")}]`}else if(e instanceof hr){let t=[];for(let i of e.entries){let r=i.key;i.quoted&&(r=`"${r}"`),t.push(r+":"+this.keyOf(i.value))}return`{${t.join(",")}}`}else{if(e instanceof As)return`import("${e.value.moduleName}", ${e.value.name})`;if(e instanceof wi)return`read(${e.name})`;if(e instanceof rl)return`typeof(${this.keyOf(e.expr)})`;throw new Error(`${this.constructor.name} does not handle expressions of type ${e.constructor.name}`)}}};function AP(n){return n instanceof wi}function Ub(n){return n instanceof en&&typeof n.value=="string"&&n.value.length>=DP}var M="@angular/core",D=(()=>{class n{static NEW_METHOD="factory";static TRANSFORM_METHOD="transform";static PATCH_DEPS="patchedDeps";static core={name:null,moduleName:M};static namespaceHTML={name:"\u0275\u0275namespaceHTML",moduleName:M};static namespaceMathML={name:"\u0275\u0275namespaceMathML",moduleName:M};static namespaceSVG={name:"\u0275\u0275namespaceSVG",moduleName:M};static element={name:"\u0275\u0275element",moduleName:M};static elementStart={name:"\u0275\u0275elementStart",moduleName:M};static elementEnd={name:"\u0275\u0275elementEnd",moduleName:M};static domElement={name:"\u0275\u0275domElement",moduleName:M};static domElementStart={name:"\u0275\u0275domElementStart",moduleName:M};static domElementEnd={name:"\u0275\u0275domElementEnd",moduleName:M};static domElementContainer={name:"\u0275\u0275domElementContainer",moduleName:M};static domElementContainerStart={name:"\u0275\u0275domElementContainerStart",moduleName:M};static domElementContainerEnd={name:"\u0275\u0275domElementContainerEnd",moduleName:M};static domTemplate={name:"\u0275\u0275domTemplate",moduleName:M};static domListener={name:"\u0275\u0275domListener",moduleName:M};static advance={name:"\u0275\u0275advance",moduleName:M};static syntheticHostProperty={name:"\u0275\u0275syntheticHostProperty",moduleName:M};static syntheticHostListener={name:"\u0275\u0275syntheticHostListener",moduleName:M};static attribute={name:"\u0275\u0275attribute",moduleName:M};static classProp={name:"\u0275\u0275classProp",moduleName:M};static elementContainerStart={name:"\u0275\u0275elementContainerStart",moduleName:M};static elementContainerEnd={name:"\u0275\u0275elementContainerEnd",moduleName:M};static elementContainer={name:"\u0275\u0275elementContainer",moduleName:M};static styleMap={name:"\u0275\u0275styleMap",moduleName:M};static classMap={name:"\u0275\u0275classMap",moduleName:M};static styleProp={name:"\u0275\u0275styleProp",moduleName:M};static interpolate={name:"\u0275\u0275interpolate",moduleName:M};static interpolate1={name:"\u0275\u0275interpolate1",moduleName:M};static interpolate2={name:"\u0275\u0275interpolate2",moduleName:M};static interpolate3={name:"\u0275\u0275interpolate3",moduleName:M};static interpolate4={name:"\u0275\u0275interpolate4",moduleName:M};static interpolate5={name:"\u0275\u0275interpolate5",moduleName:M};static interpolate6={name:"\u0275\u0275interpolate6",moduleName:M};static interpolate7={name:"\u0275\u0275interpolate7",moduleName:M};static interpolate8={name:"\u0275\u0275interpolate8",moduleName:M};static interpolateV={name:"\u0275\u0275interpolateV",moduleName:M};static nextContext={name:"\u0275\u0275nextContext",moduleName:M};static resetView={name:"\u0275\u0275resetView",moduleName:M};static templateCreate={name:"\u0275\u0275template",moduleName:M};static defer={name:"\u0275\u0275defer",moduleName:M};static deferWhen={name:"\u0275\u0275deferWhen",moduleName:M};static deferOnIdle={name:"\u0275\u0275deferOnIdle",moduleName:M};static deferOnImmediate={name:"\u0275\u0275deferOnImmediate",moduleName:M};static deferOnTimer={name:"\u0275\u0275deferOnTimer",moduleName:M};static deferOnHover={name:"\u0275\u0275deferOnHover",moduleName:M};static deferOnInteraction={name:"\u0275\u0275deferOnInteraction",moduleName:M};static deferOnViewport={name:"\u0275\u0275deferOnViewport",moduleName:M};static deferPrefetchWhen={name:"\u0275\u0275deferPrefetchWhen",moduleName:M};static deferPrefetchOnIdle={name:"\u0275\u0275deferPrefetchOnIdle",moduleName:M};static deferPrefetchOnImmediate={name:"\u0275\u0275deferPrefetchOnImmediate",moduleName:M};static deferPrefetchOnTimer={name:"\u0275\u0275deferPrefetchOnTimer",moduleName:M};static deferPrefetchOnHover={name:"\u0275\u0275deferPrefetchOnHover",moduleName:M};static deferPrefetchOnInteraction={name:"\u0275\u0275deferPrefetchOnInteraction",moduleName:M};static deferPrefetchOnViewport={name:"\u0275\u0275deferPrefetchOnViewport",moduleName:M};static deferHydrateWhen={name:"\u0275\u0275deferHydrateWhen",moduleName:M};static deferHydrateNever={name:"\u0275\u0275deferHydrateNever",moduleName:M};static deferHydrateOnIdle={name:"\u0275\u0275deferHydrateOnIdle",moduleName:M};static deferHydrateOnImmediate={name:"\u0275\u0275deferHydrateOnImmediate",moduleName:M};static deferHydrateOnTimer={name:"\u0275\u0275deferHydrateOnTimer",moduleName:M};static deferHydrateOnHover={name:"\u0275\u0275deferHydrateOnHover",moduleName:M};static deferHydrateOnInteraction={name:"\u0275\u0275deferHydrateOnInteraction",moduleName:M};static deferHydrateOnViewport={name:"\u0275\u0275deferHydrateOnViewport",moduleName:M};static deferEnableTimerScheduling={name:"\u0275\u0275deferEnableTimerScheduling",moduleName:M};static conditionalCreate={name:"\u0275\u0275conditionalCreate",moduleName:M};static conditionalBranchCreate={name:"\u0275\u0275conditionalBranchCreate",moduleName:M};static conditional={name:"\u0275\u0275conditional",moduleName:M};static repeater={name:"\u0275\u0275repeater",moduleName:M};static repeaterCreate={name:"\u0275\u0275repeaterCreate",moduleName:M};static repeaterTrackByIndex={name:"\u0275\u0275repeaterTrackByIndex",moduleName:M};static repeaterTrackByIdentity={name:"\u0275\u0275repeaterTrackByIdentity",moduleName:M};static componentInstance={name:"\u0275\u0275componentInstance",moduleName:M};static text={name:"\u0275\u0275text",moduleName:M};static enableBindings={name:"\u0275\u0275enableBindings",moduleName:M};static disableBindings={name:"\u0275\u0275disableBindings",moduleName:M};static getCurrentView={name:"\u0275\u0275getCurrentView",moduleName:M};static textInterpolate={name:"\u0275\u0275textInterpolate",moduleName:M};static textInterpolate1={name:"\u0275\u0275textInterpolate1",moduleName:M};static textInterpolate2={name:"\u0275\u0275textInterpolate2",moduleName:M};static textInterpolate3={name:"\u0275\u0275textInterpolate3",moduleName:M};static textInterpolate4={name:"\u0275\u0275textInterpolate4",moduleName:M};static textInterpolate5={name:"\u0275\u0275textInterpolate5",moduleName:M};static textInterpolate6={name:"\u0275\u0275textInterpolate6",moduleName:M};static textInterpolate7={name:"\u0275\u0275textInterpolate7",moduleName:M};static textInterpolate8={name:"\u0275\u0275textInterpolate8",moduleName:M};static textInterpolateV={name:"\u0275\u0275textInterpolateV",moduleName:M};static restoreView={name:"\u0275\u0275restoreView",moduleName:M};static pureFunction0={name:"\u0275\u0275pureFunction0",moduleName:M};static pureFunction1={name:"\u0275\u0275pureFunction1",moduleName:M};static pureFunction2={name:"\u0275\u0275pureFunction2",moduleName:M};static pureFunction3={name:"\u0275\u0275pureFunction3",moduleName:M};static pureFunction4={name:"\u0275\u0275pureFunction4",moduleName:M};static pureFunction5={name:"\u0275\u0275pureFunction5",moduleName:M};static pureFunction6={name:"\u0275\u0275pureFunction6",moduleName:M};static pureFunction7={name:"\u0275\u0275pureFunction7",moduleName:M};static pureFunction8={name:"\u0275\u0275pureFunction8",moduleName:M};static pureFunctionV={name:"\u0275\u0275pureFunctionV",moduleName:M};static pipeBind1={name:"\u0275\u0275pipeBind1",moduleName:M};static pipeBind2={name:"\u0275\u0275pipeBind2",moduleName:M};static pipeBind3={name:"\u0275\u0275pipeBind3",moduleName:M};static pipeBind4={name:"\u0275\u0275pipeBind4",moduleName:M};static pipeBindV={name:"\u0275\u0275pipeBindV",moduleName:M};static domProperty={name:"\u0275\u0275domProperty",moduleName:M};static ariaProperty={name:"\u0275\u0275ariaProperty",moduleName:M};static property={name:"\u0275\u0275property",moduleName:M};static animationEnterListener={name:"\u0275\u0275animateEnterListener",moduleName:M};static animationLeaveListener={name:"\u0275\u0275animateLeaveListener",moduleName:M};static animationEnter={name:"\u0275\u0275animateEnter",moduleName:M};static animationLeave={name:"\u0275\u0275animateLeave",moduleName:M};static i18n={name:"\u0275\u0275i18n",moduleName:M};static i18nAttributes={name:"\u0275\u0275i18nAttributes",moduleName:M};static i18nExp={name:"\u0275\u0275i18nExp",moduleName:M};static i18nStart={name:"\u0275\u0275i18nStart",moduleName:M};static i18nEnd={name:"\u0275\u0275i18nEnd",moduleName:M};static i18nApply={name:"\u0275\u0275i18nApply",moduleName:M};static i18nPostprocess={name:"\u0275\u0275i18nPostprocess",moduleName:M};static pipe={name:"\u0275\u0275pipe",moduleName:M};static projection={name:"\u0275\u0275projection",moduleName:M};static projectionDef={name:"\u0275\u0275projectionDef",moduleName:M};static reference={name:"\u0275\u0275reference",moduleName:M};static inject={name:"\u0275\u0275inject",moduleName:M};static injectAttribute={name:"\u0275\u0275injectAttribute",moduleName:M};static directiveInject={name:"\u0275\u0275directiveInject",moduleName:M};static invalidFactory={name:"\u0275\u0275invalidFactory",moduleName:M};static invalidFactoryDep={name:"\u0275\u0275invalidFactoryDep",moduleName:M};static templateRefExtractor={name:"\u0275\u0275templateRefExtractor",moduleName:M};static forwardRef={name:"forwardRef",moduleName:M};static resolveForwardRef={name:"resolveForwardRef",moduleName:M};static replaceMetadata={name:"\u0275\u0275replaceMetadata",moduleName:M};static getReplaceMetadataURL={name:"\u0275\u0275getReplaceMetadataURL",moduleName:M};static \u0275\u0275defineInjectable={name:"\u0275\u0275defineInjectable",moduleName:M};static declareInjectable={name:"\u0275\u0275ngDeclareInjectable",moduleName:M};static InjectableDeclaration={name:"\u0275\u0275InjectableDeclaration",moduleName:M};static resolveWindow={name:"\u0275\u0275resolveWindow",moduleName:M};static resolveDocument={name:"\u0275\u0275resolveDocument",moduleName:M};static resolveBody={name:"\u0275\u0275resolveBody",moduleName:M};static getComponentDepsFactory={name:"\u0275\u0275getComponentDepsFactory",moduleName:M};static defineComponent={name:"\u0275\u0275defineComponent",moduleName:M};static declareComponent={name:"\u0275\u0275ngDeclareComponent",moduleName:M};static setComponentScope={name:"\u0275\u0275setComponentScope",moduleName:M};static ChangeDetectionStrategy={name:"ChangeDetectionStrategy",moduleName:M};static ViewEncapsulation={name:"ViewEncapsulation",moduleName:M};static ComponentDeclaration={name:"\u0275\u0275ComponentDeclaration",moduleName:M};static FactoryDeclaration={name:"\u0275\u0275FactoryDeclaration",moduleName:M};static declareFactory={name:"\u0275\u0275ngDeclareFactory",moduleName:M};static FactoryTarget={name:"\u0275\u0275FactoryTarget",moduleName:M};static defineDirective={name:"\u0275\u0275defineDirective",moduleName:M};static declareDirective={name:"\u0275\u0275ngDeclareDirective",moduleName:M};static DirectiveDeclaration={name:"\u0275\u0275DirectiveDeclaration",moduleName:M};static InjectorDef={name:"\u0275\u0275InjectorDef",moduleName:M};static InjectorDeclaration={name:"\u0275\u0275InjectorDeclaration",moduleName:M};static defineInjector={name:"\u0275\u0275defineInjector",moduleName:M};static declareInjector={name:"\u0275\u0275ngDeclareInjector",moduleName:M};static NgModuleDeclaration={name:"\u0275\u0275NgModuleDeclaration",moduleName:M};static ModuleWithProviders={name:"ModuleWithProviders",moduleName:M};static defineNgModule={name:"\u0275\u0275defineNgModule",moduleName:M};static declareNgModule={name:"\u0275\u0275ngDeclareNgModule",moduleName:M};static setNgModuleScope={name:"\u0275\u0275setNgModuleScope",moduleName:M};static registerNgModuleType={name:"\u0275\u0275registerNgModuleType",moduleName:M};static PipeDeclaration={name:"\u0275\u0275PipeDeclaration",moduleName:M};static definePipe={name:"\u0275\u0275definePipe",moduleName:M};static declarePipe={name:"\u0275\u0275ngDeclarePipe",moduleName:M};static declareClassMetadata={name:"\u0275\u0275ngDeclareClassMetadata",moduleName:M};static declareClassMetadataAsync={name:"\u0275\u0275ngDeclareClassMetadataAsync",moduleName:M};static setClassMetadata={name:"\u0275setClassMetadata",moduleName:M};static setClassMetadataAsync={name:"\u0275setClassMetadataAsync",moduleName:M};static setClassDebugInfo={name:"\u0275setClassDebugInfo",moduleName:M};static queryRefresh={name:"\u0275\u0275queryRefresh",moduleName:M};static viewQuery={name:"\u0275\u0275viewQuery",moduleName:M};static loadQuery={name:"\u0275\u0275loadQuery",moduleName:M};static contentQuery={name:"\u0275\u0275contentQuery",moduleName:M};static viewQuerySignal={name:"\u0275\u0275viewQuerySignal",moduleName:M};static contentQuerySignal={name:"\u0275\u0275contentQuerySignal",moduleName:M};static queryAdvance={name:"\u0275\u0275queryAdvance",moduleName:M};static twoWayProperty={name:"\u0275\u0275twoWayProperty",moduleName:M};static twoWayBindingSet={name:"\u0275\u0275twoWayBindingSet",moduleName:M};static twoWayListener={name:"\u0275\u0275twoWayListener",moduleName:M};static declareLet={name:"\u0275\u0275declareLet",moduleName:M};static storeLet={name:"\u0275\u0275storeLet",moduleName:M};static readContextLet={name:"\u0275\u0275readContextLet",moduleName:M};static attachSourceLocations={name:"\u0275\u0275attachSourceLocations",moduleName:M};static NgOnChangesFeature={name:"\u0275\u0275NgOnChangesFeature",moduleName:M};static InheritDefinitionFeature={name:"\u0275\u0275InheritDefinitionFeature",moduleName:M};static CopyDefinitionFeature={name:"\u0275\u0275CopyDefinitionFeature",moduleName:M};static ProvidersFeature={name:"\u0275\u0275ProvidersFeature",moduleName:M};static HostDirectivesFeature={name:"\u0275\u0275HostDirectivesFeature",moduleName:M};static ExternalStylesFeature={name:"\u0275\u0275ExternalStylesFeature",moduleName:M};static listener={name:"\u0275\u0275listener",moduleName:M};static getInheritedFactory={name:"\u0275\u0275getInheritedFactory",moduleName:M};static sanitizeHtml={name:"\u0275\u0275sanitizeHtml",moduleName:M};static sanitizeStyle={name:"\u0275\u0275sanitizeStyle",moduleName:M};static sanitizeResourceUrl={name:"\u0275\u0275sanitizeResourceUrl",moduleName:M};static sanitizeScript={name:"\u0275\u0275sanitizeScript",moduleName:M};static sanitizeUrl={name:"\u0275\u0275sanitizeUrl",moduleName:M};static sanitizeUrlOrResourceUrl={name:"\u0275\u0275sanitizeUrlOrResourceUrl",moduleName:M};static trustConstantHtml={name:"\u0275\u0275trustConstantHtml",moduleName:M};static trustConstantResourceUrl={name:"\u0275\u0275trustConstantResourceUrl",moduleName:M};static validateIframeAttribute={name:"\u0275\u0275validateIframeAttribute",moduleName:M};static inputDecorator={name:"Input",moduleName:M};static outputDecorator={name:"Output",moduleName:M};static viewChildDecorator={name:"ViewChild",moduleName:M};static viewChildrenDecorator={name:"ViewChildren",moduleName:M};static contentChildDecorator={name:"ContentChild",moduleName:M};static contentChildrenDecorator={name:"ContentChildren",moduleName:M};static InputSignalBrandWriteType={name:"\u0275INPUT_SIGNAL_BRAND_WRITE_TYPE",moduleName:M};static UnwrapDirectiveSignalInputs={name:"\u0275UnwrapDirectiveSignalInputs",moduleName:M};static unwrapWritableSignal={name:"\u0275unwrapWritableSignal",moduleName:M};static assertType={name:"\u0275assertType",moduleName:M}}return n})(),kP=/-+([a-z0-9])/g;function MP(n){return n.replace(kP,(...e)=>e[1].toUpperCase())}function NP(n,e){return b1(n,":",e)}function PP(n,e){return b1(n,".",e)}function b1(n,e,t){let i=n.indexOf(e);return i==-1?t:[n.slice(0,i).trim(),n.slice(i+1).trim()]}function RP(n){let e=[];for(let t=0;t<n.length;t++){let i=n.charCodeAt(t);if(i>=55296&&i<=56319&&n.length>t+1){let r=n.charCodeAt(t+1);r>=56320&&r<=57343&&(t++,i=(i-55296<<10)+r-56320+65536)}i<=127?e.push(i):i<=2047?e.push(i>>6&31|192,i&63|128):i<=65535?e.push(i>>12|224,i>>6&63|128,i&63|128):i<=2097151&&e.push(i>>18&7|240,i>>12&63|128,i>>6&63|128,i&63|128)}return e}function S1(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(S1).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;if(!n.toString)return"object";let t=n.toString();if(t==null)return""+t;let i=t.indexOf(`
`);return i>=0?t.slice(0,i):t}var qy=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},Ru=globalThis,FP=/^([1-9]|1[0-8])\./;function T1(n){return n.startsWith("0.")?!0:!FP.test(n)}var LP=3,OP="# sourceMappingURL=data:application/json;base64,",Gy=class{file;sourcesContent=new Map;lines=[];lastCol0=0;hasMappings=!1;constructor(e=null){this.file=e}addSource(e,t=null){return this.sourcesContent.has(e)||this.sourcesContent.set(e,t),this}addLine(){return this.lines.push([]),this.lastCol0=0,this}addMapping(e,t,i,r){if(!this.currentLine)throw new Error("A line must be added before mappings can be added");if(t!=null&&!this.sourcesContent.has(t))throw new Error(`Unknown source file "${t}"`);if(e==null)throw new Error("The column in the generated code must be provided");if(e<this.lastCol0)throw new Error("Mapping should be added in output order");if(t&&(i==null||r==null))throw new Error("The source location must be provided when a source url is provided");return this.hasMappings=!0,this.lastCol0=e,this.currentLine.push({col0:e,sourceUrl:t,sourceLine0:i,sourceCol0:r}),this}get currentLine(){return this.lines.slice(-1)[0]}toJSON(){if(!this.hasMappings)return null;let e=new Map,t=[],i=[];Array.from(this.sourcesContent.keys()).forEach((c,d)=>{e.set(c,d),t.push(c),i.push(this.sourcesContent.get(c)||null)});let r="",o=0,s=0,a=0,l=0;return this.lines.forEach(c=>{o=0,r+=c.map(d=>{let p=ep(d.col0-o);return o=d.col0,d.sourceUrl!=null&&(p+=ep(e.get(d.sourceUrl)-s),s=e.get(d.sourceUrl),p+=ep(d.sourceLine0-a),a=d.sourceLine0,p+=ep(d.sourceCol0-l),l=d.sourceCol0),p}).join(","),r+=";"}),r=r.slice(0,-1),{file:this.file||"",version:LP,sourceRoot:"",sources:t,sourcesContent:i,mappings:r}}toJsComment(){return this.hasMappings?"//"+OP+VP(JSON.stringify(this,null,0)):""}};function VP(n){let e="",t=RP(n);for(let i=0;i<t.length;){let r=t[i++],o=i<t.length?t[i++]:null,s=i<t.length?t[i++]:null;e+=Au(r>>2),e+=Au((r&3)<<4|(o===null?0:o>>4)),e+=o===null?"=":Au((o&15)<<2|(s===null?0:s>>6)),e+=o===null||s===null?"=":Au(s&63)}return e}function ep(n){n=n<0?(-n<<1)+1:n<<1;let e="";do{let t=n&31;n=n>>5,n>0&&(t=t|32),e+=Au(t)}while(n>0);return e}var BP="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function Au(n){if(n<0||n>=64)throw new Error("Can only encode value in the range [0, 63]");return BP[n]}var UP=/'|\\|\n|\r|\$/g,$P=/^[$A-Z_][0-9A-Z_$]*$/i,Wy="  ",Pp=class{indent;partsLength=0;parts=[];srcSpans=[];constructor(e){this.indent=e}},HP=new Map([[j.And,"&&"],[j.Bigger,">"],[j.BiggerEquals,">="],[j.BitwiseOr,"|"],[j.BitwiseAnd,"&"],[j.Divide,"/"],[j.Assign,"="],[j.Equals,"=="],[j.Identical,"==="],[j.Lower,"<"],[j.LowerEquals,"<="],[j.Minus,"-"],[j.Modulo,"%"],[j.Exponentiation,"**"],[j.Multiply,"*"],[j.NotEquals,"!="],[j.NotIdentical,"!=="],[j.NullishCoalesce,"??"],[j.Or,"||"],[j.Plus,"+"],[j.In,"in"],[j.AdditionAssignment,"+="],[j.SubtractionAssignment,"-="],[j.MultiplicationAssignment,"*="],[j.DivisionAssignment,"/="],[j.RemainderAssignment,"%="],[j.ExponentiationAssignment,"**="],[j.AndAssignment,"&&="],[j.OrAssignment,"||="],[j.NullishCoalesceAssignment,"??="]]),zy=class n{_indent;static createRoot(){return new n(0)}_lines;constructor(e){this._indent=e,this._lines=[new Pp(e)]}get _currentLine(){return this._lines[this._lines.length-1]}println(e,t=""){this.print(e||null,t,!0)}lineIsEmpty(){return this._currentLine.parts.length===0}lineLength(){return this._currentLine.indent*Wy.length+this._currentLine.partsLength}print(e,t,i=!1){t.length>0&&(this._currentLine.parts.push(t),this._currentLine.partsLength+=t.length,this._currentLine.srcSpans.push(e&&e.sourceSpan||null)),i&&this._lines.push(new Pp(this._indent))}removeEmptyLastLine(){this.lineIsEmpty()&&this._lines.pop()}incIndent(){this._indent++,this.lineIsEmpty()&&(this._currentLine.indent=this._indent)}decIndent(){this._indent--,this.lineIsEmpty()&&(this._currentLine.indent=this._indent)}toSource(){return this.sourceLines.map(e=>e.parts.length>0?$b(e.indent)+e.parts.join(""):"").join(`
`)}toSourceMapGenerator(e,t=0){let i=new Gy(e),r=!1,o=()=>{r||(i.addSource(e," ").addMapping(0,e,0,0),r=!0)};for(let s=0;s<t;s++)i.addLine(),o();return this.sourceLines.forEach((s,a)=>{i.addLine();let l=s.srcSpans,c=s.parts,d=s.indent*Wy.length,p=0;for(;p<l.length&&!l[p];)d+=c[p].length,p++;for(p<l.length&&a===0&&d===0?r=!0:o();p<l.length;){let h=l[p],y=h.start.file,E=h.start.line,A=h.start.col;for(i.addSource(y.url,y.content).addMapping(d,y.url,E,A),d+=c[p].length,p++;p<l.length&&(h===l[p]||!l[p]);)d+=c[p].length,p++}}),i}spanOf(e,t){let i=this._lines[e];if(i){let r=t-$b(i.indent).length;for(let o=0;o<i.parts.length;o++){let s=i.parts[o];if(s.length>r)return i.srcSpans[o];r-=s.length}}return null}get sourceLines(){return this._lines.length&&this._lines[this._lines.length-1].parts.length===0?this._lines.slice(0,-1):this._lines}},jy=class{_escapeDollarInStrings;lastIfCondition=null;constructor(e){this._escapeDollarInStrings=e}printLeadingComments(e,t){if(e.leadingComments!==void 0)for(let i of e.leadingComments)i instanceof Ap?t.print(e,`/*${i.toString()}*/`,i.trailingNewline):i.multiline?t.print(e,`/* ${i.text} */`,i.trailingNewline):i.text.split(`
`).forEach(r=>{t.println(e,`// ${r}`)})}visitExpressionStmt(e,t){return this.printLeadingComments(e,t),e.expr.visitExpression(this,t),t.println(e,";"),null}visitReturnStmt(e,t){return this.printLeadingComments(e,t),t.print(e,"return "),e.value.visitExpression(this,t),t.println(e,";"),null}visitIfStmt(e,t){this.printLeadingComments(e,t),t.print(e,"if ("),this.lastIfCondition=e.condition,e.condition.visitExpression(this,t),this.lastIfCondition=null,t.print(e,") {");let i=e.falseCase!=null&&e.falseCase.length>0;return e.trueCase.length<=1&&!i?(t.print(e," "),this.visitAllStatements(e.trueCase,t),t.removeEmptyLastLine(),t.print(e," ")):(t.println(),t.incIndent(),this.visitAllStatements(e.trueCase,t),t.decIndent(),i&&(t.println(e,"} else {"),t.incIndent(),this.visitAllStatements(e.falseCase,t),t.decIndent())),t.println(e,"}"),null}visitInvokeFunctionExpr(e,t){let i=e.fn instanceof ks;return i&&t.print(e.fn,"("),e.fn.visitExpression(this,t),i&&t.print(e.fn,")"),t.print(e,"("),this.visitAllExpressions(e.args,t,","),t.print(e,")"),null}visitTaggedTemplateLiteralExpr(e,t){return e.tag.visitExpression(this,t),e.template.visitExpression(this,t),null}visitTemplateLiteralExpr(e,t){t.print(e,"`");for(let i=0;i<e.elements.length;i++){e.elements[i].visitExpression(this,t);let r=i<e.expressions.length?e.expressions[i]:null;r!==null&&(t.print(r,"${"),r.visitExpression(this,t),t.print(r,"}"))}t.print(e,"`")}visitTemplateLiteralElementExpr(e,t){t.print(e,e.rawText)}visitWrappedNodeExpr(e,t){throw new Error("Abstract emitter cannot visit WrappedNodeExpr.")}visitTypeofExpr(e,t){t.print(e,"typeof "),e.expr.visitExpression(this,t)}visitVoidExpr(e,t){t.print(e,"void "),e.expr.visitExpression(this,t)}visitReadVarExpr(e,t){return t.print(e,e.name),null}visitInstantiateExpr(e,t){return t.print(e,"new "),e.classExpr.visitExpression(this,t),t.print(e,"("),this.visitAllExpressions(e.args,t,","),t.print(e,")"),null}visitLiteralExpr(e,t){let i=e.value;return typeof i=="string"?t.print(e,ys(i,this._escapeDollarInStrings)):t.print(e,`${i}`),null}visitLocalizedString(e,t){let i=e.serializeI18nHead();t.print(e,"$localize `"+i.raw);for(let r=1;r<e.messageParts.length;r++)t.print(e,"${"),e.expressions[r-1].visitExpression(this,t),t.print(e,`}${e.serializeI18nTemplatePart(r).raw}`);return t.print(e,"`"),null}visitConditionalExpr(e,t){return t.print(e,"("),e.condition.visitExpression(this,t),t.print(e,"? "),e.trueCase.visitExpression(this,t),t.print(e,": "),e.falseCase.visitExpression(this,t),t.print(e,")"),null}visitDynamicImportExpr(e,t){t.print(e,`import(${e.url})`)}visitNotExpr(e,t){return t.print(e,"!"),e.condition.visitExpression(this,t),null}visitUnaryOperatorExpr(e,t){let i;switch(e.operator){case Uu.Plus:i="+";break;case Uu.Minus:i="-";break;default:throw new Error(`Unknown operator ${e.operator}`)}let r=e!==this.lastIfCondition;return r&&t.print(e,"("),t.print(e,i),e.expr.visitExpression(this,t),r&&t.print(e,")"),null}visitBinaryOperatorExpr(e,t){let i=HP.get(e.operator);if(!i)throw new Error(`Unknown operator ${e.operator}`);let r=e!==this.lastIfCondition;return r&&t.print(e,"("),e.lhs.visitExpression(this,t),t.print(e,` ${i} `),e.rhs.visitExpression(this,t),r&&t.print(e,")"),null}visitReadPropExpr(e,t){return e.receiver.visitExpression(this,t),t.print(e,"."),t.print(e,e.name),null}visitReadKeyExpr(e,t){return e.receiver.visitExpression(this,t),t.print(e,"["),e.index.visitExpression(this,t),t.print(e,"]"),null}visitLiteralArrayExpr(e,t){return t.print(e,"["),this.visitAllExpressions(e.entries,t,","),t.print(e,"]"),null}visitLiteralMapExpr(e,t){return t.print(e,"{"),this.visitAllObjects(i=>{t.print(e,`${ys(i.key,this._escapeDollarInStrings,i.quoted)}:`),i.value.visitExpression(this,t)},e.entries,t,","),t.print(e,"}"),null}visitCommaExpr(e,t){return t.print(e,"("),this.visitAllExpressions(e.parts,t,","),t.print(e,")"),null}visitParenthesizedExpr(e,t){e.expr.visitExpression(this,t)}visitAllExpressions(e,t,i){this.visitAllObjects(r=>r.visitExpression(this,t),e,t,i)}visitAllObjects(e,t,i,r){let o=!1;for(let s=0;s<t.length;s++)s>0&&(i.lineLength()>80?(i.print(null,r,!0),o||(i.incIndent(),i.incIndent(),o=!0)):i.print(null,r,!1)),e(t[s]);o&&(i.decIndent(),i.decIndent())}visitAllStatements(e,t){e.forEach(i=>i.visitStatement(this,t))}};function ys(n,e,t=!0){if(n==null)return null;let i=n.replace(UP,(...o)=>o[0]=="$"?e?"\\$":"$":o[0]==`
`?"\\n":o[0]=="\r"?"\\r":`\\${o[0]}`);return t||!$P.test(i)?`'${i}'`:i}function $b(n){let e="";for(let t=0;t<n;t++)e+=Wy;return e}function Rh(n,e){if(e===0)return Zt(n);let t=[];for(let i=0;i<e;i++)t.push(Rd);return Zt(n,void 0,t)}function qP(n,e){let t=ys(e,!1,!1);return t!==e?`${n}[${t}]`:`${n}.${e}`}function GP(n){return WP("ngJitMode",n)}function WP(n,e){let t=new As({name:n,moduleName:null}),i=new Le(j.Identical,new rl(t),L("undefined")),r=new Le(j.Or,i,t,void 0,void 0);return new Le(j.And,r,e)}function Nt(n){let e=new Pe(n);return{value:e,type:e}}function vs(n,e){let t=Ge(n.map(i=>i.value));return e?ji([],t):t}function p_(n,e){return{expression:n,forwardRef:e}}function zP({expression:n,forwardRef:e}){switch(e){case 0:case 1:return n;case 2:return jP(n)}}function jP(n){return ce(D.forwardRef).callFn([ji([],n)])}var Rp=(function(n){return n[n.Class=0]="Class",n[n.Function=1]="Function",n})(Rp||{});function hs(n){let e=De("__ngFactoryType__"),t=null,i=qb(n)?e:new Le(j.Or,e,n.type.value),r=null;n.deps!==null?n.deps!=="invalid"&&(r=new Hu(i,Hb(n.deps,n.target))):(t=De(`\u0275${n.name}_BaseFactory`),r=t.callFn([i]));let o=[],s=null;function a(c){let d=De("__ngConditionalFactory__");o.push(new Rt(d.name,sl,Zn));let p=r!==null?d.set(r).toStmt():ce(D.invalidFactory).callFn([]).toStmt();return o.push(Ph(e,[p],[d.set(c).toStmt()])),d}if(qb(n)){let c=Hb(n.delegateDeps,n.target),d=new(n.delegateType===Rp.Class?Hu:Fn)(n.delegate,c);s=a(d)}else XP(n)?s=a(n.expression):s=r;if(s===null)o.push(ce(D.invalidFactory).callFn([]).toStmt());else if(t!==null){let c=ce(D.getInheritedFactory).callFn([n.type.value]),d=new Le(j.Or,t,t.set(c));o.push(new Xt(d.callFn([i])))}else o.push(new Xt(s));let l=Io([new $t(e.name,Rd)],o,Zn,void 0,`${n.name}_Factory`);return t!==null&&(l=ji([],[new Rt(t.name),new Xt(l)]).callFn([],void 0,!0)),{expression:l,statements:[],type:KP(n)}}function KP(n){let e=n.deps!==null&&n.deps!=="invalid"?JP(n.deps):fr;return Zt(ce(D.FactoryDeclaration,[Rh(n.type.type,n.typeArgumentCount),e]))}function Hb(n,e){return n.map((t,i)=>YP(t,e,i))}function YP(n,e,t){if(n.token===null)return ce(D.invalidFactoryDep).callFn([L(t)]);if(n.attributeNameType===null){let i=0|(n.self?2:0)|(n.skipSelf?4:0)|(n.host?1:0)|(n.optional?8:0)|(e===Ur.Pipe?16:0),r=i!==0||n.optional?L(i):null,o=[n.token];r&&o.push(r);let s=ZP(e);return ce(s).callFn(o)}else return ce(D.injectAttribute).callFn([n.token])}function JP(n){let e=!1,t=n.map(i=>{let r=QP(i);return r!==null?(e=!0,r):L(null)});return e?Zt(Ge(t)):fr}function QP(n){let e=[];return n.attributeNameType!==null&&e.push({key:"attribute",value:n.attributeNameType,quoted:!1}),n.optional&&e.push({key:"optional",value:L(!0),quoted:!1}),n.host&&e.push({key:"host",value:L(!0),quoted:!1}),n.self&&e.push({key:"self",value:L(!0),quoted:!1}),n.skipSelf&&e.push({key:"skipSelf",value:L(!0),quoted:!1}),e.length>0?xn(e):null}function qb(n){return n.delegateType!==void 0}function XP(n){return n.expression!==void 0}function ZP(n){switch(n){case Ur.Component:case Ur.Directive:case Ur.Pipe:return D.directiveInject;case Ur.NgModule:case Ur.Injectable:default:return D.inject}}var Ps=class{start;end;constructor(e,t){this.start=e,this.end=t}toAbsolute(e){return new ei(e+this.start,e+this.end)}},at=class{span;sourceSpan;constructor(e,t){this.span=e,this.sourceSpan=t}toString(){return"AST"}},zu=class extends at{nameSpan;constructor(e,t,i){super(e,t),this.nameSpan=i}},kn=class extends at{visit(e,t=null){}},mr=class extends at{visit(e,t=null){return e.visitImplicitReceiver(this,t)}},Rs=class extends mr{visit(e,t=null){return e.visitThisReceiver?.(this,t)}},al=class extends at{expressions;constructor(e,t,i){super(e,t),this.expressions=i}visit(e,t=null){return e.visitChain(this,t)}},Fp=class extends at{condition;trueExp;falseExp;constructor(e,t,i,r,o){super(e,t),this.condition=i,this.trueExp=r,this.falseExp=o}visit(e,t=null){return e.visitConditional(this,t)}},Gr=class extends zu{receiver;name;constructor(e,t,i,r,o){super(e,t,i),this.receiver=r,this.name=o}visit(e,t=null){return e.visitPropertyRead(this,t)}},ju=class extends zu{receiver;name;constructor(e,t,i,r,o){super(e,t,i),this.receiver=r,this.name=o}visit(e,t=null){return e.visitSafePropertyRead(this,t)}},Fs=class extends at{receiver;key;constructor(e,t,i,r){super(e,t),this.receiver=i,this.key=r}visit(e,t=null){return e.visitKeyedRead(this,t)}},Ku=class extends at{receiver;key;constructor(e,t,i,r){super(e,t),this.receiver=i,this.key=r}visit(e,t=null){return e.visitSafeKeyedRead(this,t)}},gp=(function(n){return n[n.ReferencedByName=0]="ReferencedByName",n[n.ReferencedDirectly=1]="ReferencedDirectly",n})(gp||{}),Lp=class extends zu{exp;name;args;type;constructor(e,t,i,r,o,s,a){super(e,t,a),this.exp=i,this.name=r,this.args=o,this.type=s}visit(e,t=null){return e.visitPipe(this,t)}},Yn=class extends at{value;constructor(e,t,i){super(e,t),this.value=i}visit(e,t=null){return e.visitLiteralPrimitive(this,t)}},Op=class extends at{expressions;constructor(e,t,i){super(e,t),this.expressions=i}visit(e,t=null){return e.visitLiteralArray(this,t)}},Vp=class extends at{keys;values;constructor(e,t,i,r){super(e,t),this.keys=i,this.values=r}visit(e,t=null){return e.visitLiteralMap(this,t)}},Ld=class extends at{strings;expressions;constructor(e,t,i,r){super(e,t),this.strings=i,this.expressions=r}visit(e,t=null){return e.visitInterpolation(this,t)}},_n=class extends at{operation;left;right;constructor(e,t,i,r,o){super(e,t),this.operation=i,this.left=r,this.right=o}visit(e,t=null){return e.visitBinary(this,t)}static isAssignmentOperation(e){return e==="="||e==="+="||e==="-="||e==="*="||e==="/="||e==="%="||e==="**="||e==="&&="||e==="||="||e==="??="}},el=class n extends _n{operator;expr;left=null;right=null;operation=null;static createMinus(e,t,i){return new n(e,t,"-",i,"-",new Yn(e,t,0),i)}static createPlus(e,t,i){return new n(e,t,"+",i,"-",i,new Yn(e,t,0))}constructor(e,t,i,r,o,s,a){super(e,t,o,s,a),this.operator=i,this.expr=r}visit(e,t=null){return e.visitUnary!==void 0?e.visitUnary(this,t):e.visitBinary(this,t)}},Yu=class extends at{expression;constructor(e,t,i){super(e,t),this.expression=i}visit(e,t=null){return e.visitPrefixNot(this,t)}},Ju=class extends at{expression;constructor(e,t,i){super(e,t),this.expression=i}visit(e,t=null){return e.visitTypeofExpression(this,t)}},Qu=class extends at{expression;constructor(e,t,i){super(e,t),this.expression=i}visit(e,t=null){return e.visitVoidExpression(this,t)}},Xu=class extends at{expression;constructor(e,t,i){super(e,t),this.expression=i}visit(e,t=null){return e.visitNonNullAssert(this,t)}},ll=class extends at{receiver;args;argumentSpan;constructor(e,t,i,r,o){super(e,t),this.receiver=i,this.args=r,this.argumentSpan=o}visit(e,t=null){return e.visitCall(this,t)}},Bp=class extends at{receiver;args;argumentSpan;constructor(e,t,i,r,o){super(e,t),this.receiver=i,this.args=r,this.argumentSpan=o}visit(e,t=null){return e.visitSafeCall(this,t)}},Zu=class extends at{tag;template;constructor(e,t,i,r){super(e,t),this.tag=i,this.template=r}visit(e,t){return e.visitTaggedTemplateLiteral(this,t)}},ed=class extends at{elements;expressions;constructor(e,t,i,r){super(e,t),this.elements=i,this.expressions=r}visit(e,t){return e.visitTemplateLiteral(this,t)}},Up=class extends at{text;constructor(e,t,i){super(e,t),this.text=i}visit(e,t){return e.visitTemplateLiteralElement(this,t)}},td=class extends at{expression;constructor(e,t,i){super(e,t),this.expression=i}visit(e,t){return e.visitParenthesizedExpression(this,t)}},ei=class{start;end;constructor(e,t){this.start=e,this.end=t}},Jn=class extends at{ast;source;location;errors;constructor(e,t,i,r,o){super(new Ps(0,t===null?0:t.length),new ei(r,t===null?r:r+t.length)),this.ast=e,this.source=t,this.location=i,this.errors=o}visit(e,t=null){return e.visitASTWithSource?e.visitASTWithSource(this,t):this.ast.visit(e,t)}toString(){return`${this.source} in ${this.location}`}},nd=class{sourceSpan;key;value;constructor(e,t,i){this.sourceSpan=e,this.key=t,this.value=i}},Ky=class{sourceSpan;key;value;constructor(e,t,i){this.sourceSpan=e,this.key=t,this.value=i}},id=class{visit(e,t){e.visit(this,t)}visitUnary(e,t){this.visit(e.expr,t)}visitBinary(e,t){this.visit(e.left,t),this.visit(e.right,t)}visitChain(e,t){this.visitAll(e.expressions,t)}visitConditional(e,t){this.visit(e.condition,t),this.visit(e.trueExp,t),this.visit(e.falseExp,t)}visitPipe(e,t){this.visit(e.exp,t),this.visitAll(e.args,t)}visitImplicitReceiver(e,t){}visitThisReceiver(e,t){}visitInterpolation(e,t){this.visitAll(e.expressions,t)}visitKeyedRead(e,t){this.visit(e.receiver,t),this.visit(e.key,t)}visitLiteralArray(e,t){this.visitAll(e.expressions,t)}visitLiteralMap(e,t){this.visitAll(e.values,t)}visitLiteralPrimitive(e,t){}visitPrefixNot(e,t){this.visit(e.expression,t)}visitTypeofExpression(e,t){this.visit(e.expression,t)}visitVoidExpression(e,t){this.visit(e.expression,t)}visitNonNullAssert(e,t){this.visit(e.expression,t)}visitPropertyRead(e,t){this.visit(e.receiver,t)}visitSafePropertyRead(e,t){this.visit(e.receiver,t)}visitSafeKeyedRead(e,t){this.visit(e.receiver,t),this.visit(e.key,t)}visitCall(e,t){this.visit(e.receiver,t),this.visitAll(e.args,t)}visitSafeCall(e,t){this.visit(e.receiver,t),this.visitAll(e.args,t)}visitTemplateLiteral(e,t){for(let i=0;i<e.elements.length;i++){this.visit(e.elements[i],t);let r=i<e.expressions.length?e.expressions[i]:null;r!==null&&this.visit(r,t)}}visitTemplateLiteralElement(e,t){}visitTaggedTemplateLiteral(e,t){this.visit(e.tag,t),this.visit(e.template,t)}visitParenthesizedExpression(e,t){this.visit(e.expression,t)}visitAll(e,t){for(let i of e)this.visit(i,t)}},ja=class{name;expression;type;sourceSpan;keySpan;valueSpan;isLiteral;isLegacyAnimation;isAnimation;constructor(e,t,i,r,o,s){this.name=e,this.expression=t,this.type=i,this.sourceSpan=r,this.keySpan=o,this.valueSpan=s,this.isLiteral=this.type===lr.LITERAL_ATTR,this.isLegacyAnimation=this.type===lr.LEGACY_ANIMATION,this.isAnimation=this.type===lr.ANIMATION}},lr=(function(n){return n[n.DEFAULT=0]="DEFAULT",n[n.LITERAL_ATTR=1]="LITERAL_ATTR",n[n.LEGACY_ANIMATION=2]="LEGACY_ANIMATION",n[n.TWO_WAY=3]="TWO_WAY",n[n.ANIMATION=4]="ANIMATION",n})(lr||{}),Cn=(function(n){return n[n.Regular=0]="Regular",n[n.LegacyAnimation=1]="LegacyAnimation",n[n.TwoWay=2]="TwoWay",n[n.Animation=3]="Animation",n})(Cn||{}),$p=class{name;targetOrPhase;type;handler;sourceSpan;handlerSpan;keySpan;constructor(e,t,i,r,o,s,a){this.name=e,this.targetOrPhase=t,this.type=i,this.handler=r,this.sourceSpan=o,this.handlerSpan=s,this.keySpan=a}},Yy=class{name;value;sourceSpan;keySpan;valueSpan;constructor(e,t,i,r,o){this.name=e,this.value=t,this.sourceSpan=i,this.keySpan=r,this.valueSpan=o}},$e=(function(n){return n[n.Property=0]="Property",n[n.Attribute=1]="Attribute",n[n.Class=2]="Class",n[n.Style=3]="Style",n[n.LegacyAnimation=4]="LegacyAnimation",n[n.TwoWay=5]="TwoWay",n[n.Animation=6]="Animation",n})($e||{}),Hp=class{name;type;securityContext;value;unit;sourceSpan;keySpan;valueSpan;constructor(e,t,i,r,o,s,a,l){this.name=e,this.type=t,this.securityContext=i,this.value=r,this.unit=o,this.sourceSpan=s,this.keySpan=a,this.valueSpan=l}},cr=(function(n){return n[n.RAW_TEXT=0]="RAW_TEXT",n[n.ESCAPABLE_RAW_TEXT=1]="ESCAPABLE_RAW_TEXT",n[n.PARSABLE_DATA=2]="PARSABLE_DATA",n})(cr||{});function Ki(n,e=!0){if(n[0]!=":")return[null,n];let t=n.indexOf(":",1);if(t===-1){if(e)throw new Error(`Unsupported format "${n}" expecting ":namespace:name"`);return[null,n]}return[n.slice(1,t),n.slice(t+1)]}function Gb(n){return Ki(n)[1]==="ng-container"}function Jy(n){return Ki(n)[1]==="ng-content"}function eR(n){return Ki(n)[1]==="ng-template"}function Qy(n){return n===null?null:Ki(n)[0]}function yp(n,e){return n?`:${n}:${e}`:e}var Fh=class{value;sourceSpan;constructor(e,t){this.value=e,this.sourceSpan=t}visit(e){throw new Error("visit() not implemented for Comment")}},_s=class{value;sourceSpan;constructor(e,t){this.value=e,this.sourceSpan=t}visit(e){return e.visitText(this)}},cl=class{value;sourceSpan;i18n;constructor(e,t,i){this.value=e,this.sourceSpan=t,this.i18n=i}visit(e){return e.visitBoundText(this)}},ul=class{name;value;sourceSpan;keySpan;valueSpan;i18n;constructor(e,t,i,r,o,s){this.name=e,this.value=t,this.sourceSpan=i,this.keySpan=r,this.valueSpan=o,this.i18n=s}visit(e){return e.visitTextAttribute(this)}},Xy=class n{name;type;securityContext;value;unit;sourceSpan;keySpan;valueSpan;i18n;constructor(e,t,i,r,o,s,a,l,c){this.name=e,this.type=t,this.securityContext=i,this.value=r,this.unit=o,this.sourceSpan=s,this.keySpan=a,this.valueSpan=l,this.i18n=c}static fromBoundElementProperty(e,t){if(e.keySpan===void 0)throw new Error(`Unexpected state: keySpan must be defined for bound attributes but was not for ${e.name}: ${e.sourceSpan}`);return new n(e.name,e.type,e.securityContext,e.value,e.unit,e.sourceSpan,e.keySpan,e.valueSpan,t)}visit(e){return e.visitBoundAttribute(this)}},Zy=class n{name;type;handler;target;phase;sourceSpan;handlerSpan;keySpan;constructor(e,t,i,r,o,s,a,l){this.name=e,this.type=t,this.handler=i,this.target=r,this.phase=o,this.sourceSpan=s,this.handlerSpan=a,this.keySpan=l}static fromParsedEvent(e){let t=e.type===Cn.Regular?e.targetOrPhase:null,i=e.type===Cn.LegacyAnimation?e.targetOrPhase:null;if(e.keySpan===void 0)throw new Error(`Unexpected state: keySpan must be defined for bound event but was not for ${e.name}: ${e.sourceSpan}`);return new n(e.name,e.type,e.handler,t,i,e.sourceSpan,e.handlerSpan,e.keySpan)}visit(e){return e.visitBoundEvent(this)}},gr=class{name;attributes;inputs;outputs;directives;children;references;isSelfClosing;sourceSpan;startSourceSpan;endSourceSpan;isVoid;i18n;constructor(e,t,i,r,o,s,a,l,c,d,p,h,y){this.name=e,this.attributes=t,this.inputs=i,this.outputs=r,this.directives=o,this.children=s,this.references=a,this.isSelfClosing=l,this.sourceSpan=c,this.startSourceSpan=d,this.endSourceSpan=p,this.isVoid=h,this.i18n=y}visit(e){return e.visitElement(this)}},yr=class{nameSpan;sourceSpan;prefetchSpan;whenOrOnSourceSpan;hydrateSpan;constructor(e,t,i,r,o){this.nameSpan=e,this.sourceSpan=t,this.prefetchSpan=i,this.whenOrOnSourceSpan=r,this.hydrateSpan=o}visit(e){return e.visitDeferredTrigger(this)}},qp=class extends yr{value;constructor(e,t,i,r,o){super(null,t,i,r,o),this.value=e}},ev=class extends yr{},tv=class extends yr{},nv=class extends yr{},Gp=class extends yr{reference;constructor(e,t,i,r,o,s){super(t,i,r,o,s),this.reference=e}},iv=class extends yr{delay;constructor(e,t,i,r,o,s){super(t,i,r,o,s),this.delay=e}},Wp=class extends yr{reference;constructor(e,t,i,r,o,s){super(t,i,r,o,s),this.reference=e}},zp=class extends yr{reference;constructor(e,t,i,r,o,s){super(t,i,r,o,s),this.reference=e}},Ei=class{nameSpan;sourceSpan;startSourceSpan;endSourceSpan;constructor(e,t,i,r){this.nameSpan=e,this.sourceSpan=t,this.startSourceSpan=i,this.endSourceSpan=r}},rd=class extends Ei{children;minimumTime;i18n;constructor(e,t,i,r,o,s,a){super(i,r,o,s),this.children=e,this.minimumTime=t,this.i18n=a}visit(e){return e.visitDeferredBlockPlaceholder(this)}},od=class extends Ei{children;afterTime;minimumTime;i18n;constructor(e,t,i,r,o,s,a,l){super(r,o,s,a),this.children=e,this.afterTime=t,this.minimumTime=i,this.i18n=l}visit(e){return e.visitDeferredBlockLoading(this)}},sd=class extends Ei{children;i18n;constructor(e,t,i,r,o,s){super(t,i,r,o),this.children=e,this.i18n=s}visit(e){return e.visitDeferredBlockError(this)}},Ls=class extends Ei{children;placeholder;loading;error;mainBlockSpan;i18n;triggers;prefetchTriggers;hydrateTriggers;definedTriggers;definedPrefetchTriggers;definedHydrateTriggers;constructor(e,t,i,r,o,s,a,l,c,d,p,h,y){super(l,c,p,h),this.children=e,this.placeholder=o,this.loading=s,this.error=a,this.mainBlockSpan=d,this.i18n=y,this.triggers=t,this.prefetchTriggers=i,this.hydrateTriggers=r,this.definedTriggers=Object.keys(t),this.definedPrefetchTriggers=Object.keys(i),this.definedHydrateTriggers=Object.keys(r)}visit(e){return e.visitDeferredBlock(this)}visitAll(e){this.visitTriggers(this.definedHydrateTriggers,this.hydrateTriggers,e),this.visitTriggers(this.definedTriggers,this.triggers,e),this.visitTriggers(this.definedPrefetchTriggers,this.prefetchTriggers,e),vy(e,this.children);let t=[this.placeholder,this.loading,this.error].filter(i=>i!==null);vy(e,t)}visitTriggers(e,t,i){vy(i,e.map(r=>t[r]))}},jp=class extends Ei{expression;cases;unknownBlocks;constructor(e,t,i,r,o,s,a){super(a,r,o,s),this.expression=e,this.cases=t,this.unknownBlocks=i}visit(e){return e.visitSwitchBlock(this)}},ad=class extends Ei{expression;children;i18n;constructor(e,t,i,r,o,s,a){super(s,i,r,o),this.expression=e,this.children=t,this.i18n=a}visit(e){return e.visitSwitchBlockCase(this)}},dl=class extends Ei{item;expression;trackBy;trackKeywordSpan;contextVariables;children;empty;mainBlockSpan;i18n;constructor(e,t,i,r,o,s,a,l,c,d,p,h,y){super(h,l,d,p),this.item=e,this.expression=t,this.trackBy=i,this.trackKeywordSpan=r,this.contextVariables=o,this.children=s,this.empty=a,this.mainBlockSpan=c,this.i18n=y}visit(e){return e.visitForLoopBlock(this)}},ld=class extends Ei{children;i18n;constructor(e,t,i,r,o,s){super(o,t,i,r),this.children=e,this.i18n=s}visit(e){return e.visitForLoopBlockEmpty(this)}},Kp=class extends Ei{branches;constructor(e,t,i,r,o){super(o,t,i,r),this.branches=e}visit(e){return e.visitIfBlock(this)}},xs=class extends Ei{expression;children;expressionAlias;i18n;constructor(e,t,i,r,o,s,a,l){super(a,r,o,s),this.expression=e,this.children=t,this.expressionAlias=i,this.i18n=l}visit(e){return e.visitIfBlockBranch(this)}},Yp=class{name;sourceSpan;nameSpan;constructor(e,t,i){this.name=e,this.sourceSpan=t,this.nameSpan=i}visit(e){return e.visitUnknownBlock(this)}},h_=class{name;value;sourceSpan;nameSpan;valueSpan;constructor(e,t,i,r,o){this.name=e,this.value=t,this.sourceSpan=i,this.nameSpan=r,this.valueSpan=o}visit(e){return e.visitLetDeclaration(this)}},Fu=class{componentName;tagName;fullName;attributes;inputs;outputs;directives;children;references;isSelfClosing;sourceSpan;startSourceSpan;endSourceSpan;i18n;constructor(e,t,i,r,o,s,a,l,c,d,p,h,y,E){this.componentName=e,this.tagName=t,this.fullName=i,this.attributes=r,this.inputs=o,this.outputs=s,this.directives=a,this.children=l,this.references=c,this.isSelfClosing=d,this.sourceSpan=p,this.startSourceSpan=h,this.endSourceSpan=y,this.i18n=E}visit(e){return e.visitComponent(this)}},I1=class{name;attributes;inputs;outputs;references;sourceSpan;startSourceSpan;endSourceSpan;i18n;constructor(e,t,i,r,o,s,a,l,c){this.name=e,this.attributes=t,this.inputs=i,this.outputs=r,this.references=o,this.sourceSpan=s,this.startSourceSpan=a,this.endSourceSpan=l,this.i18n=c}visit(e){return e.visitDirective(this)}},ni=class{tagName;attributes;inputs;outputs;directives;templateAttrs;children;references;variables;isSelfClosing;sourceSpan;startSourceSpan;endSourceSpan;i18n;constructor(e,t,i,r,o,s,a,l,c,d,p,h,y,E){this.tagName=e,this.attributes=t,this.inputs=i,this.outputs=r,this.directives=o,this.templateAttrs=s,this.children=a,this.references=l,this.variables=c,this.isSelfClosing=d,this.sourceSpan=p,this.startSourceSpan=h,this.endSourceSpan=y,this.i18n=E}visit(e){return e.visitTemplate(this)}},fl=class{selector;attributes;children;isSelfClosing;sourceSpan;startSourceSpan;endSourceSpan;i18n;name="ng-content";constructor(e,t,i,r,o,s,a,l){this.selector=e,this.attributes=t,this.children=i,this.isSelfClosing=r,this.sourceSpan=o,this.startSourceSpan=s,this.endSourceSpan=a,this.i18n=l}visit(e){return e.visitContent(this)}},Do=class{name;value;sourceSpan;keySpan;valueSpan;constructor(e,t,i,r,o){this.name=e,this.value=t,this.sourceSpan=i,this.keySpan=r,this.valueSpan=o}visit(e){return e.visitVariable(this)}},cd=class{name;value;sourceSpan;keySpan;valueSpan;constructor(e,t,i,r,o){this.name=e,this.value=t,this.sourceSpan=i,this.keySpan=r,this.valueSpan=o}visit(e){return e.visitReference(this)}},D1=class{vars;placeholders;sourceSpan;i18n;constructor(e,t,i,r){this.vars=e,this.placeholders=t,this.sourceSpan=i,this.i18n=r}visit(e){return e.visitIcu(this)}},ud=class{tagNames;bindings;listeners;sourceSpan;constructor(e,t,i,r){if(this.tagNames=e,this.bindings=t,this.listeners=i,this.sourceSpan=r,e.length===0)throw new Error("HostElement must have at least one tag name.")}visit(){throw new Error("HostElement cannot be visited")}};function vy(n,e){let t=[];if(n.visit)for(let i of e)n.visit(i);else for(let i of e){let r=i.visit(n);r&&t.push(r)}return t}var En=class{nodes;placeholders;placeholderToMessage;meaning;description;customId;sources;id;legacyIds=[];messageString;constructor(e,t,i,r,o,s){this.nodes=e,this.placeholders=t,this.placeholderToMessage=i,this.meaning=r,this.description=o,this.customId=s,this.id=this.customId,this.messageString=tR(this.nodes),e.length?this.sources=[{filePath:e[0].sourceSpan.start.file.url,startLine:e[0].sourceSpan.start.line+1,startCol:e[0].sourceSpan.start.col+1,endLine:e[e.length-1].sourceSpan.end.line+1,endCol:e[0].sourceSpan.start.col+1}]:this.sources=[]}},xu=class{value;sourceSpan;constructor(e,t){this.value=e,this.sourceSpan=t}visit(e,t){return e.visitText(this,t)}},Wr=class{children;sourceSpan;constructor(e,t){this.children=e,this.sourceSpan=t}visit(e,t){return e.visitContainer(this,t)}},Jp=class{expression;type;cases;sourceSpan;expressionPlaceholder;constructor(e,t,i,r,o){this.expression=e,this.type=t,this.cases=i,this.sourceSpan=r,this.expressionPlaceholder=o}visit(e,t){return e.visitIcu(this,t)}},Ao=class{tag;attrs;startName;closeName;children;isVoid;sourceSpan;startSourceSpan;endSourceSpan;constructor(e,t,i,r,o,s,a,l,c){this.tag=e,this.attrs=t,this.startName=i,this.closeName=r,this.children=o,this.isVoid=s,this.sourceSpan=a,this.startSourceSpan=l,this.endSourceSpan=c}visit(e,t){return e.visitTagPlaceholder(this,t)}},dd=class{value;name;sourceSpan;constructor(e,t,i){this.value=e,this.name=t,this.sourceSpan=i}visit(e,t){return e.visitPlaceholder(this,t)}},pl=class{value;name;sourceSpan;previousMessage;constructor(e,t,i){this.value=e,this.name=t,this.sourceSpan=i}visit(e,t){return e.visitIcuPlaceholder(this,t)}},ko=class{name;parameters;startName;closeName;children;sourceSpan;startSourceSpan;endSourceSpan;constructor(e,t,i,r,o,s,a,l){this.name=e,this.parameters=t,this.startName=i,this.closeName=r,this.children=o,this.sourceSpan=s,this.startSourceSpan=a,this.endSourceSpan=l}visit(e,t){return e.visitBlockPlaceholder(this,t)}};function tR(n){let e=new rv;return n.map(i=>i.visit(e)).join("")}var rv=class{visitText(e){return e.value}visitContainer(e){return e.children.map(t=>t.visit(this)).join("")}visitIcu(e){let t=Object.keys(e.cases).map(i=>`${i} {${e.cases[i].visit(this)}}`);return`{${e.expressionPlaceholder}, ${e.type}, ${t.join(" ")}}`}visitTagPlaceholder(e){let t=e.children.map(i=>i.visit(this)).join("");return`{$${e.startName}}${t}{$${e.closeName}}`}visitPlaceholder(e){return`{$${e.name}}`}visitIcuPlaceholder(e){return`{$${e.name}}`}visitBlockPlaceholder(e){let t=e.children.map(i=>i.visit(this)).join("");return`{$${e.startName}}${t}{$${e.closeName}}`}};var nR=class{visitTag(e){let t=this._serializeAttributes(e.attrs);if(e.children.length==0)return`<${e.name}${t}/>`;let i=e.children.map(r=>r.visit(this));return`<${e.name}${t}>${i.join("")}</${e.name}>`}visitText(e){return e.value}visitDeclaration(e){return`<?xml${this._serializeAttributes(e.attrs)} ?>`}_serializeAttributes(e){let t=Object.keys(e).map(i=>`${i}="${e[i]}"`).join(" ");return t.length>0?" "+t:""}visitDoctype(e){return`<!DOCTYPE ${e.rootTag} [
${e.dtd}
]>`}},ste=new nR;function iR(n){return n.toUpperCase().replace(/[^A-Z0-9_]/g,"_")}var A1="i18n",ov="i18n-",rR="VAR_";function k1(n){return n===A1||n.startsWith(ov)}function oR(n){return n.attrs.some(e=>k1(e.name))}function M1(n){return n.nodes[0]}function m_(n={},e){let t={};return n&&Object.keys(n).length&&Object.keys(n).forEach(i=>t[Od(i,e)]=n[i]),t}function Od(n,e=!0){let t=iR(n);if(!e)return t;let i=t.split("_");if(i.length===1)return n.toLowerCase();let r;/^\d+$/.test(i[i.length-1])&&(r=i.pop());let o=i.shift().toLowerCase();return i.length&&(o+=i.map(s=>s.charAt(0).toUpperCase()+s.slice(1).toLowerCase()).join("")),r?`${o}_${r}`:o}var sR=/[-.]/,g_="_t",fd="ctx",y_="rf";function N1(n,e){let t=null;return()=>(t||(n(new Rt(g_,void 0,Rd)),t=De(e)),t)}function Ka(n){return Array.isArray(n)?Ge(n.map(Ka)):L(n,Zn)}function Wb(n,e){let t=Object.getOwnPropertyNames(n);return t.length===0?null:xn(t.map(i=>{let r=n[i],o,s,a,l;if(typeof r=="string")o=i,a=i,s=r,l=Ka(s);else{a=i,o=r.classPropertyName,s=r.bindingPropertyName;let c=s!==o,d=r.transformFunction!==null,p=Du.None;if(r.isSignal&&(p|=Du.SignalBased),d&&(p|=Du.HasDecoratorInputTransform),e&&(c||d||p!==Du.None)){let h=[L(p),Ka(s)];(c||d)&&(h.push(Ka(o)),d&&h.push(r.transformFunction)),l=Ge(h)}else l=Ka(s)}return{key:a,quoted:sR.test(a),value:l}}))}var Mo=class{values=[];set(e,t){if(t){let i=this.values.find(r=>r.key===e);i?i.value=t:this.values.push({key:e,value:t,quoted:!1})}}toLiteralMap(){return xn(this.values)}};function aR(n){let e=n instanceof gr?n.name:"ng-template",t=lR(n),i=new il,r=Ki(e)[1];return i.setElement(r),Object.getOwnPropertyNames(t).forEach(o=>{let s=Ki(o)[1],a=t[o];i.addAttribute(s,a),o.toLowerCase()==="class"&&a.trim().split(/\s+/).forEach(c=>i.addClassName(c))}),i}function lR(n){let e={};return n instanceof ni&&n.tagName!=="ng-template"?n.templateAttrs.forEach(t=>e[t.name]=""):(n.attributes.forEach(t=>{k1(t.name)||(e[t.name]=t.value)}),n.inputs.forEach(t=>{(t.type===$e.Property||t.type===$e.TwoWay)&&(e[t.name]="")}),n.outputs.forEach(t=>{e[t.name]=""})),e}function zb(n,e){let t=null,i={name:n.name,type:n.type,typeArgumentCount:n.typeArgumentCount,deps:[],target:Ur.Injectable};if(n.useClass!==void 0){let a=n.useClass.expression.isEquivalent(n.type.value),l;n.deps!==void 0&&(l=n.deps),l!==void 0?t=hs(Z(P({},i),{delegate:n.useClass.expression,delegateDeps:l,delegateType:Rp.Class})):a?t=hs(i):t={statements:[],expression:jb(n.type.value,n.useClass.expression,e)}}else n.useFactory!==void 0?n.deps!==void 0?t=hs(Z(P({},i),{delegate:n.useFactory,delegateDeps:n.deps||[],delegateType:Rp.Function})):t={statements:[],expression:ji([],n.useFactory.callFn([]))}:n.useValue!==void 0?t=hs(Z(P({},i),{expression:n.useValue.expression})):n.useExisting!==void 0?t=hs(Z(P({},i),{expression:ce(D.inject).callFn([n.useExisting.expression])})):t={statements:[],expression:jb(n.type.value,n.type.value,e)};let r=n.type.value,o=new Mo;return o.set("token",r),o.set("factory",t.expression),n.providedIn.expression.value!==null&&o.set("providedIn",zP(n.providedIn)),{expression:ce(D.\u0275\u0275defineInjectable).callFn([o.toLiteralMap()],void 0,!0),type:cR(n),statements:t.statements}}function cR(n){return new _i(ce(D.InjectableDeclaration,[Rh(n.type.type,n.typeArgumentCount)]))}function jb(n,e,t){if(n.node===e.node)return e.prop("\u0275fac");if(!t)return Kb(e);let i=ce(D.resolveForwardRef).callFn([e]);return Kb(i)}function Kb(n){let e=new $t("__ngFactoryType__",Rd);return ji([e],n.prop("\u0275fac").callFn([De(e.name)]))}var uR=[/@/,/^\s*$/,/[<>]/,/^[{}]$/,/&(#|[a-z])/i,/^\/\//];function dR(n,e){if(e!=null&&!(Array.isArray(e)&&e.length==2))throw new Error(`Expected '${n}' to be an array, [start, end].`);if(e!=null){let t=e[0],i=e[1];uR.forEach(r=>{if(r.test(t)||r.test(i))throw new Error(`['${t}', '${i}'] contains unusable interpolation symbol.`)})}}var Qp=class n{start;end;static fromArray(e){return e?(dR("interpolation",e),new n(e[0],e[1])):ur}constructor(e,t){this.start=e,this.end=t}},ur=new Qp("{{","}}"),fR=new Set(["switch"]),Jt=0,pR=8,v_=9,bs=10,P1=11,R1=12,__=13,F1=32,sv=33,pd=34,L1=35,Lh=36,hR=37,Xp=38,hd=39,vi=40,cn=41,Yb=42,O1=43,ti=44,Zp=45,ku=46,Hi=47,$r=58,Qn=59,tl=60,ln=61,fi=62,Jb=63,w_=48,mR=55,V1=57,Ro=65,gR=69,yR=70,vR=88,xl=90,To=91,nl=92,ws=93,_R=94,Fo=95,Os=97,wR=98,CR=101,C_=102,B1=110,U1=114,$1=116,H1=117,q1=118,G1=120,Vd=122,Gi=123,Qb=124,wn=125,W1=160,Ba=64,av=96;function md(n){return n>=v_&&n<=F1||n==W1}function qi(n){return w_<=n&&n<=V1}function hl(n){return n>=Os&&n<=Vd||n>=Ro&&n<=xl}function ER(n){return n>=Os&&n<=C_||n>=Ro&&n<=yR||qi(n)}function eh(n){return n===bs||n===__}function Xb(n){return w_<=n&&n<=mR}function Lu(n){return n===hd||n===pd||n===av}var gd=class n{file;offset;line;col;constructor(e,t,i,r){this.file=e,this.offset=t,this.line=i,this.col=r}toString(){return this.offset!=null?`${this.file.url}@${this.line}:${this.col}`:this.file.url}moveBy(e){let t=this.file.content,i=t.length,r=this.offset,o=this.line,s=this.col;for(;r>0&&e<0;)if(r--,e++,t.charCodeAt(r)==bs){o--;let l=t.substring(0,r-1).lastIndexOf(String.fromCharCode(bs));s=l>0?r-l:r}else s--;for(;r<i&&e>0;){let a=t.charCodeAt(r);r++,e--,a==bs?(o++,s=0):s++}return new n(this.file,r,o,s)}getContext(e,t){let i=this.file.content,r=this.offset;if(r!=null){r>i.length-1&&(r=i.length-1);let o=r,s=0,a=0;for(;s<e&&r>0&&(r--,s++,!(i[r]==`
`&&++a==t)););for(s=0,a=0;s<e&&o<i.length-1&&(o++,s++,!(i[o]==`
`&&++a==t)););return{before:i.substring(r,this.offset),after:i.substring(this.offset,o+1)}}return null}},th=class{content;url;constructor(e,t){this.content=e,this.url=t}},ve=class{start;end;fullStart;details;constructor(e,t,i=e,r=null){this.start=e,this.end=t,this.fullStart=i,this.details=r}toString(){return this.start.file.content.substring(this.start.offset,this.end.offset)}},xo=(function(n){return n[n.WARNING=0]="WARNING",n[n.ERROR=1]="ERROR",n})(xo||{}),he=class extends Error{span;msg;level;relatedError;constructor(e,t,i=xo.ERROR,r){super(t),this.span=e,this.msg=t,this.level=i,this.relatedError=r,Object.setPrototypeOf(this,new.target.prototype)}contextualMessage(){let e=this.span.start.getContext(100,3);return e?`${this.msg} ("${e.before}[${xo[this.level]} ->]${e.after}")`:this.msg}toString(){let e=this.span.details?`, ${this.span.details}`:"";return`${this.contextualMessage()}: ${this.span.start}${e}`}};function xR(n,e,t){let i=`in ${n} ${e} in ${t}`,r=new th("",i);return new ve(new gd(r,-1,-1,-1),new gd(r,-1,-1,-1))}var bR=0;function SR(n){if(!n||!n.reference)return null;let e=n.reference;if(e.__anonymousType)return e.__anonymousType;if(e.__forward_ref__)return"__forward_ref__";let t=S1(e);return t.indexOf("(")>=0?(t=`anonymous_${bR++}`,e.__anonymousType=t):t=ms(t),t}function ms(n){return n.replace(/\W/g,"_")}var Zb='(this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e})',lv=class extends jy{constructor(){super(!1)}visitWrappedNodeExpr(e,t){throw new Error("Cannot emit a WrappedNodeExpr in Javascript.")}visitDeclareVarStmt(e,t){return t.print(e,`var ${e.name}`),e.value&&(t.print(e," = "),e.value.visitExpression(this,t)),t.println(e,";"),null}visitTaggedTemplateLiteralExpr(e,t){let i=e.template.elements;return e.tag.visitExpression(this,t),t.print(e,`(${Zb}(`),t.print(e,`[${i.map(r=>ys(r.text,!1)).join(", ")}], `),t.print(e,`[${i.map(r=>ys(r.rawText,!1)).join(", ")}])`),e.template.expressions.forEach(r=>{t.print(e,", "),r.visitExpression(this,t)}),t.print(e,")"),null}visitTemplateLiteralExpr(e,t){t.print(e,"`");for(let i=0;i<e.elements.length;i++){e.elements[i].visitExpression(this,t);let r=i<e.expressions.length?e.expressions[i]:null;r!==null&&(t.print(r,"${"),r.visitExpression(this,t),t.print(r,"}"))}t.print(e,"`")}visitTemplateLiteralElementExpr(e,t){return t.print(e,e.rawText),null}visitFunctionExpr(e,t){return t.print(e,`function${e.name?" "+e.name:""}(`),this._visitParams(e.params,t),t.println(e,") {"),t.incIndent(),this.visitAllStatements(e.statements,t),t.decIndent(),t.print(e,"}"),null}visitArrowFunctionExpr(e,t){if(t.print(e,"("),this._visitParams(e.params,t),t.print(e,") =>"),Array.isArray(e.body))t.println(e,"{"),t.incIndent(),this.visitAllStatements(e.body,t),t.decIndent(),t.print(e,"}");else{let i=e.body instanceof hr;i&&t.print(e,"("),e.body.visitExpression(this,t),i&&t.print(e,")")}return null}visitDeclareFunctionStmt(e,t){return t.print(e,`function ${e.name}(`),this._visitParams(e.params,t),t.println(e,") {"),t.incIndent(),this.visitAllStatements(e.statements,t),t.decIndent(),t.println(e,"}"),null}visitLocalizedString(e,t){t.print(e,`$localize(${Zb}(`);let i=[e.serializeI18nHead()];for(let r=1;r<e.messageParts.length;r++)i.push(e.serializeI18nTemplatePart(r));return t.print(e,`[${i.map(r=>ys(r.cooked,!1)).join(", ")}], `),t.print(e,`[${i.map(r=>ys(r.raw,!1)).join(", ")}])`),e.expressions.forEach(r=>{t.print(e,", "),r.visitExpression(this,t)}),t.print(e,")"),null}_visitParams(e,t){this.visitAllObjects(i=>t.print(null,i.name),e,t,",")}},tp;function TR(){if(tp===void 0){let n=Ru.trustedTypes;if(tp=null,n)try{tp=n.createPolicy("angular#unsafe-jit",{createScript:e=>e})}catch{}}return tp}function IR(n){return TR()?.createScript(n)||n}function eS(...n){if(!Ru.trustedTypes)return new Function(...n);let e=n.slice(0,-1).join(","),t=n[n.length-1],i=`(function anonymous(${e}
) { ${t}
})`,r=Ru.eval(IR(i));return r.bind===void 0?new Function(...n):(r.toString=()=>i,r.bind(Ru))}var cv=class{evaluateStatements(e,t,i,r){let o=new uv(i),s=zy.createRoot();return t.length>0&&!DR(t[0])&&(t=[L("use strict").toStmt(),...t]),o.visitAllStatements(t,s),o.createReturnStmt(s),this.evaluateCode(e,s,o.getArgs(),r)}evaluateCode(e,t,i,r){let o=`"use strict";${t.toSource()}
//# sourceURL=${e}`,s=[],a=[];for(let c in i)a.push(i[c]),s.push(c);if(r){let c=eS(...s.concat("return null;")).toString(),d=c.slice(0,c.indexOf("return null;")).split(`
`).length-1;o+=`
${t.toSourceMapGenerator(e,d).toJsComment()}`}let l=eS(...s.concat(o));return this.executeFunction(l,a)}executeFunction(e,t){return e(...t)}},uv=class extends lv{refResolver;_evalArgNames=[];_evalArgValues=[];_evalExportedVars=[];constructor(e){super(),this.refResolver=e}createReturnStmt(e){new Xt(new hr(this._evalExportedVars.map(i=>new ol(i,De(i),!1)))).visitStatement(this,e)}getArgs(){let e={};for(let t=0;t<this._evalArgNames.length;t++)e[this._evalArgNames[t]]=this._evalArgValues[t];return e}visitExternalExpr(e,t){return this._emitReferenceToExternal(e,this.refResolver.resolveExternalReference(e.value),t),null}visitWrappedNodeExpr(e,t){return this._emitReferenceToExternal(e,e.node,t),null}visitDeclareVarStmt(e,t){return e.hasModifier(Qt.Exported)&&this._evalExportedVars.push(e.name),super.visitDeclareVarStmt(e,t)}visitDeclareFunctionStmt(e,t){return e.hasModifier(Qt.Exported)&&this._evalExportedVars.push(e.name),super.visitDeclareFunctionStmt(e,t)}_emitReferenceToExternal(e,t,i){let r=this._evalArgValues.indexOf(t);if(r===-1){r=this._evalArgValues.length,this._evalArgValues.push(t);let o=SR({reference:t})||"val";this._evalArgNames.push(`jit_${o}_${r}`)}i.print(e,this._evalArgNames[r])}};function DR(n){return n.isEquivalent(L("use strict").toStmt())}function tS(n){let e=new Mo;n.providers!==null&&e.set("providers",n.providers),n.imports.length>0&&e.set("imports",Ge(n.imports));let t=ce(D.defineInjector).callFn([e.toLiteralMap()],void 0,!0),i=AR(n);return{expression:t,type:i,statements:[]}}function AR(n){return new _i(ce(D.InjectorDeclaration,[new _i(n.type.type)]))}var dv=class{context;constructor(e){this.context=e}resolveExternalReference(e){if(e.moduleName!=="@angular/core")throw new Error(`Cannot resolve external reference to ${e.moduleName}, only references to @angular/core are supported.`);if(!this.context.hasOwnProperty(e.name))throw new Error(`No value provided for @angular/core symbol '${e.name}'.`);return this.context[e.name]}},nh=(function(n){return n[n.Inline=0]="Inline",n[n.SideEffect=1]="SideEffect",n[n.Omit=2]="Omit",n})(nh||{}),bo=(function(n){return n[n.Global=0]="Global",n[n.Local=1]="Local",n})(bo||{});function kR(n){let e=[],t=new Mo;if(t.set("type",n.type.value),n.kind===bo.Global&&n.bootstrap.length>0&&t.set("bootstrap",vs(n.bootstrap,n.containsForwardDecls)),n.selectorScopeMode===nh.Inline)n.declarations.length>0&&t.set("declarations",vs(n.declarations,n.containsForwardDecls)),n.imports.length>0&&t.set("imports",vs(n.imports,n.containsForwardDecls)),n.exports.length>0&&t.set("exports",vs(n.exports,n.containsForwardDecls));else if(n.selectorScopeMode===nh.SideEffect){let o=PR(n);o!==null&&e.push(o)}n.schemas!==null&&n.schemas.length>0&&t.set("schemas",Ge(n.schemas.map(o=>o.value))),n.id!==null&&(t.set("id",n.id),e.push(ce(D.registerNgModuleType).callFn([n.type.value,n.id]).toStmt()));let i=ce(D.defineNgModule).callFn([t.toLiteralMap()],void 0,!0),r=NR(n);return{expression:i,type:r,statements:e}}function MR(n){let e=new Mo;return e.set("type",new Pe(n.type)),n.bootstrap!==void 0&&e.set("bootstrap",new Pe(n.bootstrap)),n.declarations!==void 0&&e.set("declarations",new Pe(n.declarations)),n.imports!==void 0&&e.set("imports",new Pe(n.imports)),n.exports!==void 0&&e.set("exports",new Pe(n.exports)),n.schemas!==void 0&&e.set("schemas",new Pe(n.schemas)),n.id!==void 0&&e.set("id",new Pe(n.id)),ce(D.defineNgModule).callFn([e.toLiteralMap()])}function NR(n){if(n.kind===bo.Local)return new _i(n.type.value);let{type:e,declarations:t,exports:i,imports:r,includeImportTypes:o,publicDeclarationTypes:s}=n;return new _i(ce(D.NgModuleDeclaration,[new _i(e.type),s===null?_y(t):RR(s),o?_y(r):fr,_y(i)]))}function PR(n){let e=new Mo;if(n.kind===bo.Global?n.declarations.length>0&&e.set("declarations",vs(n.declarations,n.containsForwardDecls)):n.declarationsExpression&&e.set("declarations",n.declarationsExpression),n.kind===bo.Global?n.imports.length>0&&e.set("imports",vs(n.imports,n.containsForwardDecls)):n.importsExpression&&e.set("imports",n.importsExpression),n.kind===bo.Global?n.exports.length>0&&e.set("exports",vs(n.exports,n.containsForwardDecls)):n.exportsExpression&&e.set("exports",n.exportsExpression),n.kind===bo.Local&&n.bootstrapExpression&&e.set("bootstrap",n.bootstrapExpression),Object.keys(e.values).length===0)return null;let t=new Fn(ce(D.setNgModuleScope),[n.type.value,e.toLiteralMap()]),i=GP(t),r=new So([],[i.toStmt()]);return new Fn(r,[]).toStmt()}function _y(n){let e=n.map(t=>Fd(t.type));return n.length>0?Zt(Ge(e)):fr}function RR(n){let e=n.map(t=>Fd(t));return n.length>0?Zt(Ge(e)):fr}function nS(n){let e=[];e.push({key:"name",value:L(n.pipeName??n.name),quoted:!1}),e.push({key:"type",value:n.type.value,quoted:!1}),e.push({key:"pure",value:L(n.pure),quoted:!1}),n.isStandalone===!1&&e.push({key:"standalone",value:L(!1),quoted:!1});let t=ce(D.definePipe).callFn([xn(e)],void 0,!0),i=FR(n);return{expression:t,type:i,statements:[]}}function FR(n){return new _i(ce(D.PipeDeclaration,[Rh(n.type.type,n.typeArgumentCount),new _i(new en(n.pipeName)),new _i(new en(n.isStandalone))]))}var ml=(function(n){return n[n.Directive=0]="Directive",n[n.Pipe=1]="Pipe",n[n.NgModule=2]="NgModule",n})(ml||{}),LR=new Set(["inherit","initial","revert","unset","alternate","alternate-reverse","normal","reverse","backwards","both","forwards","none","paused","running","ease","ease-in","ease-in-out","ease-out","linear","step-start","step-end","end","jump-both","jump-end","jump-none","jump-start","start"]),OR=["@media","@supports","@document","@layer","@container","@scope","@starting-style"],fv=class{shimCssText(e,t,i=""){let r=[];e=e.replace(ZR,a=>{if(a.match(eF))r.push(a);else{let l=a.match(XR);r.push((l?.join("")??"")+`
`)}return x_}),e=this._insertDirectives(e);let o=this._scopeCssText(e,t,i),s=0;return o.replace(tF,()=>r[s++])}_insertDirectives(e){return e=this._insertPolyfillDirectivesInCssText(e),this._insertPolyfillRulesInCssText(e)}_scopeKeyframesRelatedCss(e,t){let i=new Set,r=np(e,o=>this._scopeLocalKeyframeDeclarations(o,t,i));return np(r,o=>this._scopeAnimationRule(o,t,i))}_scopeLocalKeyframeDeclarations(e,t,i){return Z(P({},e),{selector:e.selector.replace(/(^@(?:-webkit-)?keyframes(?:\s+))(['"]?)(.+)\2(\s*)$/,(r,o,s,a,l)=>(i.add(oS(a,s)),`${o}${s}${t}_${a}${s}${l}`))})}_scopeAnimationKeyframe(e,t,i){return e.replace(/^(\s*)(['"]?)(.+?)\2(\s*)$/,(r,o,s,a,l)=>(a=`${i.has(oS(a,s))?t+"_":""}${a}`,`${o}${s}${a}${s}${l}`))}_animationDeclarationKeyframesRe=/(^|\s+|,)(?:(?:(['"])((?:\\\\|\\\2|(?!\2).)+)\2)|(-?[A-Za-z][\w\-]*))(?=[,\s]|$)/g;_scopeAnimationRule(e,t,i){let r=e.content.replace(/((?:^|\s+|;)(?:-webkit-)?animation\s*:\s*),*([^;]+)/g,(o,s,a)=>s+a.replace(this._animationDeclarationKeyframesRe,(l,c,d="",p,h)=>p?`${c}${this._scopeAnimationKeyframe(`${d}${p}${d}`,t,i)}`:LR.has(h)?l:`${c}${this._scopeAnimationKeyframe(h,t,i)}`));return r=r.replace(/((?:^|\s+|;)(?:-webkit-)?animation-name(?:\s*):(?:\s*))([^;]+)/g,(o,s,a)=>`${s}${a.split(",").map(l=>this._scopeAnimationKeyframe(l,t,i)).join(",")}`),Z(P({},e),{content:r})}_insertPolyfillDirectivesInCssText(e){return e.replace(BR,function(...t){return t[2]+"{"})}_insertPolyfillRulesInCssText(e){return e.replace(UR,(...t)=>{let i=t[0].replace(t[1],"").replace(t[2],"");return t[4]+i})}_scopeCssText(e,t,i){let r=this._extractUnscopedRulesFromCssText(e);return e=this._insertPolyfillHostInCssText(e),e=this._convertColonHost(e),e=this._convertColonHostContext(e),e=this._convertShadowDOMSelectors(e),t&&(e=this._scopeKeyframesRelatedCss(e,t),e=this._scopeSelectors(e,t,i)),e=e+`
`+r,e.trim()}_extractUnscopedRulesFromCssText(e){let t="",i;for(iS.lastIndex=0;(i=iS.exec(e))!==null;){let r=i[0].replace(i[2],"").replace(i[1],i[4]);t+=r+`

`}return t}_convertColonHost(e){return e.replace(GR,(t,i,r)=>{if(i){let o=[];for(let s of this._splitOnTopLevelCommas(i)){let a=s.trim();if(!a)break;let l=wo+a.replace(ih,"")+r;o.push(l)}return o.join(",")}else return wo+r})}*_splitOnTopLevelCommas(e){let t=e.length,i=0,r=0;for(let o=0;o<t;o++){let s=e.charCodeAt(o);if(s===vi)i++;else if(s===cn){if(i--,i<0){yield e.slice(r,o);return}}else s===ti&&i===0&&(yield e.slice(r,o),r=o+1)}yield e.slice(r)}_convertColonHostContext(e){let t=[];for(let i of this._splitOnTopLevelCommas(e))t.push(this._convertColonHostContextInSelectorPart(i));return t.join(",")}_convertColonHostContextInSelectorPart(e){return e.replace(zR,(t,i)=>{let r=[[]],o=t.indexOf(Wa);for(;o!==-1;){let s=t.substring(o+Wa.length);if(!s||s[0]!=="("){t=s,o=t.indexOf(Wa);continue}let a=[],l=0;for(let d of this._splitOnTopLevelCommas(s.substring(1))){l=l+d.length+1;let p=d.trim();p&&a.push(p)}let c=r.length;fF(r,a.length);for(let d=0;d<a.length;d++)for(let p=0;p<c;p++)r[p+d*c].push(a[d]);t=s.substring(l+1),o=t.indexOf(Wa)}return r.map(s=>dF(s,t,i)).join(", ")})}_convertShadowDOMSelectors(e){return KR.reduce((t,i)=>t.replace(i," "),e)}_scopeSelectors(e,t,i){return np(e,r=>{let o=r.selector,s=r.content;return r.selector[0]!=="@"?o=this._scopeSelector({selector:o,scopeSelector:t,hostSelector:i,isParentSelector:!0}):OR.some(a=>r.selector.startsWith(a))?s=this._scopeSelectors(r.content,t,i):(r.selector.startsWith("@font-face")||r.selector.startsWith("@page"))&&(s=this._stripScopingSelectors(r.content)),new yd(o,s)})}_stripScopingSelectors(e){return np(e,t=>{let i=t.selector.replace(rS," ").replace(wy," ");return new yd(i,t.content)})}_safeSelector;_shouldScopeIndicator;_scopeSelector({selector:e,scopeSelector:t,hostSelector:i,isParentSelector:r=!1}){let o=/ ?,(?!(?:[^)(]*(?:\([^)(]*(?:\([^)(]*(?:\([^)(]*\)[^)(]*)*\)[^)(]*)*\)[^)(]*)*\))) ?/;return e.split(o).map(s=>s.split(rS)).map(s=>{let[a,...l]=s;return[(d=>this._selectorNeedsScoping(d,t)?this._applySelectorScope({selector:d,scopeSelector:t,hostSelector:i,isParentSelector:r}):d)(a),...l].join(" ")}).join(", ")}_selectorNeedsScoping(e,t){return!this._makeScopeMatcher(t).test(e)}_makeScopeMatcher(e){let t=/\[/g,i=/\]/g;return e=e.replace(t,"\\[").replace(i,"\\]"),new RegExp("^("+e+")"+YR,"m")}_applySimpleSelectorScope(e,t,i){if(Ya.lastIndex=0,Ya.test(e)){let r=`[${i}]`,o=e;for(;o.match(wy);)o=o.replace(wy,(s,a)=>a.replace(/([^:\)]*)(:*)(.*)/,(l,c,d,p)=>c+r+d+p));return o.replace(Ya,r)}return t+" "+e}_applySelectorScope({selector:e,scopeSelector:t,hostSelector:i,isParentSelector:r}){let o=/\[is=([^\]]*)\]/g;t=t.replace(o,(A,...R)=>R[0]);let s=`[${t}]`,a=A=>{let R=A.trim();if(!R)return A;if(A.includes(wo)){if(R=this._applySimpleSelectorScope(A,t,i),!A.match(jR)){let[k,H,K,z]=R.match(/([^:]*)(:*)([\s\S]*)/);R=H+s+K+z}}else{let k=A.replace(Ya,"");if(k.length>0){let H=k.match(/([^:]*)(:*)([\s\S]*)/);H&&(R=H[1]+s+H[2]+H[3])}}return R},l=A=>{let R="",k=[],H;for(;(H=bu.exec(A))!==null;){let K=1,z=bu.lastIndex;for(;z<A.length;){let oe=A[z];if(z++,oe==="("){K++;continue}if(oe===")"){if(K--,K===0)break;continue}}k.push(`${H[0]}${A.slice(bu.lastIndex,z)}`),bu.lastIndex=z}return k.join("")===A?R=k.map(K=>{let[z]=K.match(bu)??[],oe=K.slice(z?.length,-1);oe.includes(wo)&&(this._shouldScopeIndicator=!0);let pe=this._scopeSelector({selector:oe,scopeSelector:t,hostSelector:i});return`${z}${pe})`}).join(""):(this._shouldScopeIndicator=this._shouldScopeIndicator||A.includes(wo),R=this._shouldScopeIndicator?a(A):A),R};r&&(this._safeSelector=new pv(e),e=this._safeSelector.content());let c="",d=0,p,h=/( |>|\+|~(?!=))(?!([^)(]*(?:\([^)(]*(?:\([^)(]*(?:\([^)(]*\)[^)(]*)*\)[^)(]*)*\)[^)(]*)*\)))\s*/g,y=e.includes(wo);for((r||this._shouldScopeIndicator)&&(this._shouldScopeIndicator=!y);(p=h.exec(e))!==null;){let A=p[1],R=e.slice(d,p.index);if(R.match(/__esc-ph-(\d+)__/)&&e[p.index+1]?.match(/[a-fA-F\d]/))continue;let k=l(R);c+=`${k} ${A} `,d=h.lastIndex}let E=e.substring(d);return c+=l(E),this._safeSelector.restore(c)}_insertPolyfillHostInCssText(e){return e.replace(QR,Wa).replace(JR,ih)}},pv=class{placeholders=[];index=0;_content;constructor(e){e=this._escapeRegexMatches(e,/(\[[^\]]*\])/g),e=e.replace(/(\\.)/g,(t,i)=>{let r=`__esc-ph-${this.index}__`;return this.placeholders.push(i),this.index++,r}),this._content=e.replace(qR,(t,i,r)=>{let o=`__ph-${this.index}__`;return this.placeholders.push(`(${r})`),this.index++,i+o})}restore(e){return e.replace(/__(?:ph|esc-ph)-(\d+)__/g,(t,i)=>this.placeholders[+i])}content(){return this._content}_escapeRegexMatches(e,t){return e.replace(t,(i,r)=>{let o=`__ph-${this.index}__`;return this.placeholders.push(r),this.index++,o})}},VR="(:(where|is)\\()?",bu=/:(where|is)\(/gi,BR=/polyfill-next-selector[^}]*content:[\s]*?(['"])(.*?)\1[;\s]*}([^{]*?){/gim,UR=/(polyfill-rule)[^}]*(content:[\s]*(['"])(.*?)\3)[;\s]*[^}]*}/gim,iS=/(polyfill-unscoped-rule)[^}]*(content:[\s]*(['"])(.*?)\3)[;\s]*[^}]*}/gim,ih="-shadowcsshost",Wa="-shadowcsscontext",hv="[^)(]*",$R=String.raw`(?:\(${hv}\)|${hv})+?`,HR=String.raw`(?:\(${$R}\)|${hv})+?`,E_=String.raw`(?:\((${HR})\))`,qR=new RegExp(String.raw`(:nth-[-\w]+)`+E_,"g"),GR=new RegExp(ih+E_+"?([^,{]*)","gim"),WR=Wa+E_+"?([^{]*)",zR=new RegExp(`${VR}(${WR})`,"gim"),wo=ih+"-no-combinator",jR=new RegExp(`${wo}(?![^(]*\\))`,"g"),wy=/-shadowcsshost-no-combinator([^\s,]*)/,KR=[/::shadow/g,/::content/g,/\/shadow-deep\//g,/\/shadow\//g],rS=/(?:>>>)|(?:\/deep\/)|(?:::ng-deep)/g,YR="([>\\s~+[.,{:][\\s\\S]*)?$",Ya=/-shadowcsshost/gim,JR=/:host/gim,QR=/:host-context/gim,XR=/\r?\n/g,ZR=/\/\*[\s\S]*?\*\//g,eF=/\/\*\s*#\s*source(Mapping)?URL=/g,x_="%COMMENT%",tF=new RegExp(x_,"g"),Cy="%BLOCK%",nF=new RegExp(`(\\s*(?:${x_}\\s*)*)([^;\\{\\}]+?)(\\s*)((?:{%BLOCK%}?\\s*;?)|(?:\\s*;))`,"g"),iF=new Map([["{","}"]]),z1="%COMMA_IN_PLACEHOLDER%",j1="%SEMI_IN_PLACEHOLDER%",K1="%COLON_IN_PLACEHOLDER%",rF=new RegExp(z1,"g"),oF=new RegExp(j1,"g"),sF=new RegExp(K1,"g"),yd=class{selector;content;constructor(e,t){this.selector=e,this.content=t}};function np(n,e){let t=cF(n),i=aF(t,iF,Cy),r=0,o=i.escapedString.replace(nF,(...s)=>{let a=s[2],l="",c=s[4],d="";c&&c.startsWith("{"+Cy)&&(l=i.blocks[r++],c=c.substring(Cy.length+1),d="{");let p=e(new yd(a,l));return`${s[1]}${p.selector}${s[3]}${d}${p.content}${c}`});return uF(o)}var mv=class{escapedString;blocks;constructor(e,t){this.escapedString=e,this.blocks=t}};function aF(n,e,t){let i=[],r=[],o=0,s=0,a=-1,l,c;for(let d=0;d<n.length;d++){let p=n[d];p==="\\"?d++:p===c?(o--,o===0&&(r.push(n.substring(a,d)),i.push(t),s=d,a=-1,l=c=void 0)):p===l?o++:o===0&&e.has(p)&&(l=p,c=e.get(p),o=1,a=d+1,i.push(n.substring(s,a)))}return a!==-1?(r.push(n.substring(a)),i.push(t)):i.push(n.substring(s)),new mv(i.join(""),r)}var lF={";":j1,",":z1,":":K1};function cF(n){let e=n,t=null;for(let i=0;i<e.length;i++){let r=e[i];if(r==="\\")i++;else if(t!==null)if(r===t)t=null;else{let o=lF[r];o&&(e=`${e.substr(0,i)}${o}${e.substr(i+1)}`,i+=o.length-1)}else(r==="'"||r==='"')&&(t=r)}return e}function uF(n){let e=n.replace(rF,",");return e=e.replace(oF,";"),e=e.replace(sF,":"),e}function oS(n,e){return e?n.replace(/((?:^|[^\\])(?:\\\\)*)\\(?=['"])/g,"$1"):n}function dF(n,e,t=""){let i=wo;Ya.lastIndex=0;let r=Ya.test(e);if(n.length===0)return i+e;let o=[n.pop()||""];for(;n.length>0;){let s=o.length,a=n.pop();for(let l=0;l<s;l++){let c=o[l];o[s*2+l]=c+" "+a,o[s+l]=a+" "+c,o[l]=a+c}}return o.map(s=>r?`${t}${s}${e}`:`${t}${s}${i}${e}, ${t}${s} ${i}${e}`).join(",")}function fF(n,e){let t=n.length;for(let i=1;i<e;i++)for(let r=0;r<t;r++)n[r+i*t]=n[r].slice(0)}var _=(function(n){return n[n.ListEnd=0]="ListEnd",n[n.Statement=1]="Statement",n[n.Variable=2]="Variable",n[n.ElementStart=3]="ElementStart",n[n.Element=4]="Element",n[n.Template=5]="Template",n[n.ElementEnd=6]="ElementEnd",n[n.ContainerStart=7]="ContainerStart",n[n.Container=8]="Container",n[n.ContainerEnd=9]="ContainerEnd",n[n.DisableBindings=10]="DisableBindings",n[n.ConditionalCreate=11]="ConditionalCreate",n[n.ConditionalBranchCreate=12]="ConditionalBranchCreate",n[n.Conditional=13]="Conditional",n[n.EnableBindings=14]="EnableBindings",n[n.Text=15]="Text",n[n.Listener=16]="Listener",n[n.InterpolateText=17]="InterpolateText",n[n.Binding=18]="Binding",n[n.Property=19]="Property",n[n.StyleProp=20]="StyleProp",n[n.ClassProp=21]="ClassProp",n[n.StyleMap=22]="StyleMap",n[n.ClassMap=23]="ClassMap",n[n.Advance=24]="Advance",n[n.Pipe=25]="Pipe",n[n.Attribute=26]="Attribute",n[n.ExtractedAttribute=27]="ExtractedAttribute",n[n.Defer=28]="Defer",n[n.DeferOn=29]="DeferOn",n[n.DeferWhen=30]="DeferWhen",n[n.I18nMessage=31]="I18nMessage",n[n.DomProperty=32]="DomProperty",n[n.Namespace=33]="Namespace",n[n.ProjectionDef=34]="ProjectionDef",n[n.Projection=35]="Projection",n[n.RepeaterCreate=36]="RepeaterCreate",n[n.Repeater=37]="Repeater",n[n.TwoWayProperty=38]="TwoWayProperty",n[n.TwoWayListener=39]="TwoWayListener",n[n.DeclareLet=40]="DeclareLet",n[n.StoreLet=41]="StoreLet",n[n.I18nStart=42]="I18nStart",n[n.I18n=43]="I18n",n[n.I18nEnd=44]="I18nEnd",n[n.I18nExpression=45]="I18nExpression",n[n.I18nApply=46]="I18nApply",n[n.IcuStart=47]="IcuStart",n[n.IcuEnd=48]="IcuEnd",n[n.IcuPlaceholder=49]="IcuPlaceholder",n[n.I18nContext=50]="I18nContext",n[n.I18nAttributes=51]="I18nAttributes",n[n.SourceLocation=52]="SourceLocation",n[n.Animation=53]="Animation",n[n.AnimationString=54]="AnimationString",n[n.AnimationBinding=55]="AnimationBinding",n[n.AnimationListener=56]="AnimationListener",n})(_||{}),ue=(function(n){return n[n.LexicalRead=0]="LexicalRead",n[n.Context=1]="Context",n[n.TrackContext=2]="TrackContext",n[n.ReadVariable=3]="ReadVariable",n[n.NextContext=4]="NextContext",n[n.Reference=5]="Reference",n[n.StoreLet=6]="StoreLet",n[n.ContextLetReference=7]="ContextLetReference",n[n.GetCurrentView=8]="GetCurrentView",n[n.RestoreView=9]="RestoreView",n[n.ResetView=10]="ResetView",n[n.PureFunctionExpr=11]="PureFunctionExpr",n[n.PureFunctionParameterExpr=12]="PureFunctionParameterExpr",n[n.PipeBinding=13]="PipeBinding",n[n.PipeBindingVariadic=14]="PipeBindingVariadic",n[n.SafePropertyRead=15]="SafePropertyRead",n[n.SafeKeyedRead=16]="SafeKeyedRead",n[n.SafeInvokeFunction=17]="SafeInvokeFunction",n[n.SafeTernaryExpr=18]="SafeTernaryExpr",n[n.EmptyExpr=19]="EmptyExpr",n[n.AssignTemporaryExpr=20]="AssignTemporaryExpr",n[n.ReadTemporaryExpr=21]="ReadTemporaryExpr",n[n.SlotLiteralExpr=22]="SlotLiteralExpr",n[n.ConditionalCase=23]="ConditionalCase",n[n.ConstCollected=24]="ConstCollected",n[n.TwoWayBindingSet=25]="TwoWayBindingSet",n})(ue||{}),mi=(function(n){return n[n.None=0]="None",n[n.AlwaysInline=1]="AlwaysInline",n})(mi||{}),Ut=(function(n){return n[n.Context=0]="Context",n[n.Identifier=1]="Identifier",n[n.SavedView=2]="SavedView",n[n.Alias=3]="Alias",n})(Ut||{}),oi=(function(n){return n[n.Normal=0]="Normal",n[n.TemplateDefinitionBuilder=1]="TemplateDefinitionBuilder",n})(oi||{}),se=(function(n){return n[n.Attribute=0]="Attribute",n[n.ClassName=1]="ClassName",n[n.StyleProperty=2]="StyleProperty",n[n.Property=3]="Property",n[n.Template=4]="Template",n[n.I18n=5]="I18n",n[n.LegacyAnimation=6]="LegacyAnimation",n[n.TwoWayProperty=7]="TwoWayProperty",n[n.Animation=8]="Animation",n})(se||{}),vd=(function(n){return n[n.Creation=0]="Creation",n[n.Postproccessing=1]="Postproccessing",n})(vd||{}),bl=(function(n){return n[n.I18nText=0]="I18nText",n[n.I18nAttribute=1]="I18nAttribute",n})(bl||{}),Xe=(function(n){return n[n.None=0]="None",n[n.ElementTag=1]="ElementTag",n[n.TemplateTag=2]="TemplateTag",n[n.OpenTag=4]="OpenTag",n[n.CloseTag=8]="CloseTag",n[n.ExpressionIndex=16]="ExpressionIndex",n})(Xe||{}),un=(function(n){return n[n.HTML=0]="HTML",n[n.SVG=1]="SVG",n[n.Math=2]="Math",n})(un||{}),Ke=(function(n){return n[n.Idle=0]="Idle",n[n.Immediate=1]="Immediate",n[n.Timer=2]="Timer",n[n.Hover=3]="Hover",n[n.Interaction=4]="Interaction",n[n.Viewport=5]="Viewport",n[n.Never=6]="Never",n})(Ke||{}),Cs=(function(n){return n[n.RootI18n=0]="RootI18n",n[n.Icu=1]="Icu",n[n.Attr=2]="Attr",n})(Cs||{}),Rn=(function(n){return n[n.NgTemplate=0]="NgTemplate",n[n.Structural=1]="Structural",n[n.Block=2]="Block",n})(Rn||{}),Y1=Symbol("ConsumesSlot"),b_=Symbol("DependsOnSlotContext"),Sl=Symbol("ConsumesVars"),Oh=Symbol("UsesVarOffset"),bi={[Y1]:!0,numSlotsUsed:1},si={[b_]:!0},Ln={[Sl]:!0};function Tl(n){return n[Y1]===!0}function _d(n){return n[b_]===!0}function Ey(n){return n[Sl]===!0}function sS(n){return n[Oh]===!0}function xi(n){return P({kind:_.Statement,statement:n},_e)}function Eo(n,e,t,i){return P({kind:_.Variable,xref:n,variable:e,initializer:t,flags:i},_e)}var _e={debugListId:null,prev:null,next:null};function pF(n,e,t){return P(P(P({kind:_.InterpolateText,target:n,interpolation:e,sourceSpan:t},si),Ln),_e)}var ft=class{strings;expressions;i18nPlaceholders;constructor(e,t,i){if(this.strings=e,this.expressions=t,this.i18nPlaceholders=i,i.length!==0&&i.length!==t.length)throw new Error(`Expected ${t.length} placeholders to match interpolation expression count, but got ${i.length}`)}};function Vs(n,e,t,i,r,o,s,a,l,c,d){return P({kind:_.Binding,bindingKind:e,target:n,name:t,expression:i,unit:r,securityContext:o,isTextAttribute:s,isStructuralTemplateAttribute:a,templateKind:l,i18nContext:null,i18nMessage:c,sourceSpan:d},_e)}function hF(n,e,t,i,r,o,s,a,l,c){return P(P(P({kind:_.Property,target:n,name:e,expression:t,bindingKind:i,securityContext:r,sanitizer:null,isStructuralTemplateAttribute:o,templateKind:s,i18nContext:a,i18nMessage:l,sourceSpan:c},si),Ln),_e)}function mF(n,e,t,i,r,o,s,a,l){return P(P(P({kind:_.TwoWayProperty,target:n,name:e,expression:t,securityContext:i,sanitizer:null,isStructuralTemplateAttribute:r,templateKind:o,i18nContext:s,i18nMessage:a,sourceSpan:l},si),Ln),_e)}function gF(n,e,t,i,r){return P(P(P({kind:_.StyleProp,target:n,name:e,expression:t,unit:i,sourceSpan:r},si),Ln),_e)}function yF(n,e,t,i){return P(P(P({kind:_.ClassProp,target:n,name:e,expression:t,sourceSpan:i},si),Ln),_e)}function vF(n,e,t){return P(P(P({kind:_.StyleMap,target:n,expression:e,sourceSpan:t},si),Ln),_e)}function _F(n,e,t){return P(P(P({kind:_.ClassMap,target:n,expression:e,sourceSpan:t},si),Ln),_e)}function aS(n,e,t,i,r,o,s,a,l,c){return P(P(P({kind:_.Attribute,target:n,namespace:e,name:t,expression:i,securityContext:r,sanitizer:null,isTextAttribute:o,isStructuralTemplateAttribute:s,templateKind:a,i18nContext:null,i18nMessage:l,sourceSpan:c},si),Ln),_e)}function wF(n,e){return P({kind:_.Advance,delta:n,sourceSpan:e},_e)}function J1(n,e,t,i){return P(P(P({kind:_.Conditional,target:n,test:e,conditions:t,processed:null,sourceSpan:i,contextValue:null},_e),si),Ln)}function CF(n,e,t,i){return P(P({kind:_.Repeater,target:n,targetSlot:e,collection:t,sourceSpan:i},_e),si)}function lS(n,e,t,i,r,o,s){return P({kind:_.AnimationBinding,name:n,target:e,animationKind:t,expression:i,i18nMessage:null,securityContext:r,sanitizer:null,sourceSpan:o,animationBindingKind:s},_e)}function EF(n,e,t,i){return P(P(P({kind:_.DeferWhen,target:n,expr:e,modifier:t,sourceSpan:i},_e),si),Ln)}function Q1(n,e,t,i,r,o,s,a,l,c,d){return P(P(P({kind:_.I18nExpression,context:n,target:e,i18nOwner:t,handle:i,expression:r,icuPlaceholder:o,i18nPlaceholder:s,resolutionTime:a,usage:l,name:c,sourceSpan:d},_e),Ln),si)}function xF(n,e,t){return P({kind:_.I18nApply,owner:n,handle:e,sourceSpan:t},_e)}function bF(n,e,t,i){return P(P(P({kind:_.StoreLet,target:n,declaredName:e,value:t,sourceSpan:i},si),Ln),_e)}function vr(n){return n instanceof Ye}var Ye=class extends je{constructor(e=null){super(null,e)}},Yt=class n extends Ye{name;kind=ue.LexicalRead;constructor(e){super(),this.name=e}visitExpression(e,t){}isEquivalent(e){return this.name===e.name}isConstant(){return!1}transformInternalExpressions(){}clone(){return new n(this.name)}},rh=class n extends Ye{target;targetSlot;offset;kind=ue.Reference;constructor(e,t,i){super(),this.target=e,this.targetSlot=t,this.offset=i}visitExpression(){}isEquivalent(e){return e instanceof n&&e.target===this.target}isConstant(){return!1}transformInternalExpressions(){}clone(){return new n(this.target,this.targetSlot,this.offset)}},wd=class n extends Ye{target;value;sourceSpan;kind=ue.StoreLet;[Sl]=!0;[b_]=!0;constructor(e,t,i){super(),this.target=e,this.value=t,this.sourceSpan=i}visitExpression(){}isEquivalent(e){return e instanceof n&&e.target===this.target&&e.value.isEquivalent(this.value)}isConstant(){return!1}transformInternalExpressions(e,t){this.value=ie(this.value,e,t)}clone(){return new n(this.target,this.value,this.sourceSpan)}},Cd=class n extends Ye{target;targetSlot;kind=ue.ContextLetReference;constructor(e,t){super(),this.target=e,this.targetSlot=t}visitExpression(){}isEquivalent(e){return e instanceof n&&e.target===this.target}isConstant(){return!1}transformInternalExpressions(){}clone(){return new n(this.target,this.targetSlot)}},No=class n extends Ye{view;kind=ue.Context;constructor(e){super(),this.view=e}visitExpression(){}isEquivalent(e){return e instanceof n&&e.view===this.view}isConstant(){return!1}transformInternalExpressions(){}clone(){return new n(this.view)}},gv=class n extends Ye{view;kind=ue.TrackContext;constructor(e){super(),this.view=e}visitExpression(){}isEquivalent(e){return e instanceof n&&e.view===this.view}isConstant(){return!1}transformInternalExpressions(){}clone(){return new n(this.view)}},oh=class n extends Ye{kind=ue.NextContext;steps=1;constructor(){super()}visitExpression(){}isEquivalent(e){return e instanceof n&&e.steps===this.steps}isConstant(){return!1}transformInternalExpressions(){}clone(){let e=new n;return e.steps=this.steps,e}},yv=class n extends Ye{kind=ue.GetCurrentView;constructor(){super()}visitExpression(){}isEquivalent(e){return e instanceof n}isConstant(){return!1}transformInternalExpressions(){}clone(){return new n}},sh=class n extends Ye{view;kind=ue.RestoreView;constructor(e){super(),this.view=e}visitExpression(e,t){typeof this.view!="number"&&this.view.visitExpression(e,t)}isEquivalent(e){return!(e instanceof n)||typeof e.view!=typeof this.view?!1:typeof this.view=="number"?this.view===e.view:this.view.isEquivalent(e.view)}isConstant(){return!1}transformInternalExpressions(e,t){typeof this.view!="number"&&(this.view=ie(this.view,e,t))}clone(){return new n(this.view instanceof je?this.view.clone():this.view)}},vv=class n extends Ye{expr;kind=ue.ResetView;constructor(e){super(),this.expr=e}visitExpression(e,t){this.expr.visitExpression(e,t)}isEquivalent(e){return e instanceof n&&this.expr.isEquivalent(e.expr)}isConstant(){return!1}transformInternalExpressions(e,t){this.expr=ie(this.expr,e,t)}clone(){return new n(this.expr.clone())}},ah=class n extends Ye{target;value;kind=ue.TwoWayBindingSet;constructor(e,t){super(),this.target=e,this.value=t}visitExpression(e,t){this.target.visitExpression(e,t),this.value.visitExpression(e,t)}isEquivalent(e){return this.target.isEquivalent(e.target)&&this.value.isEquivalent(e.value)}isConstant(){return!1}transformInternalExpressions(e,t){this.target=ie(this.target,e,t),this.value=ie(this.value,e,t)}clone(){return new n(this.target,this.value)}},zr=class n extends Ye{xref;kind=ue.ReadVariable;name=null;constructor(e){super(),this.xref=e}visitExpression(){}isEquivalent(e){return e instanceof n&&e.xref===this.xref}isConstant(){return!1}transformInternalExpressions(){}clone(){let e=new n(this.xref);return e.name=this.name,e}},Bs=class n extends Ye{kind=ue.PureFunctionExpr;[Sl]=!0;[Oh]=!0;varOffset=null;body;args;fn=null;constructor(e,t){super(),this.body=e,this.args=t}visitExpression(e,t){this.body?.visitExpression(e,t);for(let i of this.args)i.visitExpression(e,t)}isEquivalent(e){return!(e instanceof n)||e.args.length!==this.args.length?!1:e.body!==null&&this.body!==null&&e.body.isEquivalent(this.body)&&e.args.every((t,i)=>t.isEquivalent(this.args[i]))}isConstant(){return!1}transformInternalExpressions(e,t){this.body!==null?this.body=ie(this.body,e,t|qe.InChildOperation):this.fn!==null&&(this.fn=ie(this.fn,e,t));for(let i=0;i<this.args.length;i++)this.args[i]=ie(this.args[i],e,t)}clone(){let e=new n(this.body?.clone()??null,this.args.map(t=>t.clone()));return e.fn=this.fn?.clone()??null,e.varOffset=this.varOffset,e}},gl=class n extends Ye{index;kind=ue.PureFunctionParameterExpr;constructor(e){super(),this.index=e}visitExpression(){}isEquivalent(e){return e instanceof n&&e.index===this.index}isConstant(){return!0}transformInternalExpressions(){}clone(){return new n(this.index)}},Us=class n extends Ye{target;targetSlot;name;args;kind=ue.PipeBinding;[Sl]=!0;[Oh]=!0;varOffset=null;constructor(e,t,i,r){super(),this.target=e,this.targetSlot=t,this.name=i,this.args=r}visitExpression(e,t){for(let i of this.args)i.visitExpression(e,t)}isEquivalent(){return!1}isConstant(){return!1}transformInternalExpressions(e,t){for(let i=0;i<this.args.length;i++)this.args[i]=ie(this.args[i],e,t)}clone(){let e=new n(this.target,this.targetSlot,this.name,this.args.map(t=>t.clone()));return e.varOffset=this.varOffset,e}},Ed=class n extends Ye{target;targetSlot;name;args;numArgs;kind=ue.PipeBindingVariadic;[Sl]=!0;[Oh]=!0;varOffset=null;constructor(e,t,i,r,o){super(),this.target=e,this.targetSlot=t,this.name=i,this.args=r,this.numArgs=o}visitExpression(e,t){this.args.visitExpression(e,t)}isEquivalent(){return!1}isConstant(){return!1}transformInternalExpressions(e,t){this.args=ie(this.args,e,t)}clone(){let e=new n(this.target,this.targetSlot,this.name,this.args.clone(),this.numArgs);return e.varOffset=this.varOffset,e}},yl=class n extends Ye{receiver;name;kind=ue.SafePropertyRead;constructor(e,t){super(),this.receiver=e,this.name=t}get index(){return this.name}visitExpression(e,t){this.receiver.visitExpression(e,t)}isEquivalent(){return!1}isConstant(){return!1}transformInternalExpressions(e,t){this.receiver=ie(this.receiver,e,t)}clone(){return new n(this.receiver.clone(),this.name)}},vl=class n extends Ye{receiver;index;kind=ue.SafeKeyedRead;constructor(e,t,i){super(i),this.receiver=e,this.index=t}visitExpression(e,t){this.receiver.visitExpression(e,t),this.index.visitExpression(e,t)}isEquivalent(){return!1}isConstant(){return!1}transformInternalExpressions(e,t){this.receiver=ie(this.receiver,e,t),this.index=ie(this.index,e,t)}clone(){return new n(this.receiver.clone(),this.index.clone(),this.sourceSpan)}},$s=class n extends Ye{receiver;args;kind=ue.SafeInvokeFunction;constructor(e,t){super(),this.receiver=e,this.args=t}visitExpression(e,t){this.receiver.visitExpression(e,t);for(let i of this.args)i.visitExpression(e,t)}isEquivalent(){return!1}isConstant(){return!1}transformInternalExpressions(e,t){this.receiver=ie(this.receiver,e,t);for(let i=0;i<this.args.length;i++)this.args[i]=ie(this.args[i],e,t)}clone(){return new n(this.receiver.clone(),this.args.map(e=>e.clone()))}},_l=class n extends Ye{guard;expr;kind=ue.SafeTernaryExpr;constructor(e,t){super(),this.guard=e,this.expr=t}visitExpression(e,t){this.guard.visitExpression(e,t),this.expr.visitExpression(e,t)}isEquivalent(){return!1}isConstant(){return!1}transformInternalExpressions(e,t){this.guard=ie(this.guard,e,t),this.expr=ie(this.expr,e,t)}clone(){return new n(this.guard.clone(),this.expr.clone())}},xd=class n extends Ye{kind=ue.EmptyExpr;visitExpression(e,t){}isEquivalent(e){return e instanceof n}isConstant(){return!0}clone(){return new n}transformInternalExpressions(){}},_r=class n extends Ye{expr;xref;kind=ue.AssignTemporaryExpr;name=null;constructor(e,t){super(),this.expr=e,this.xref=t}visitExpression(e,t){this.expr.visitExpression(e,t)}isEquivalent(){return!1}isConstant(){return!1}transformInternalExpressions(e,t){this.expr=ie(this.expr,e,t)}clone(){let e=new n(this.expr.clone(),this.xref);return e.name=this.name,e}},Po=class n extends Ye{xref;kind=ue.ReadTemporaryExpr;name=null;constructor(e){super(),this.xref=e}visitExpression(e,t){}isEquivalent(){return this.xref===this.xref}isConstant(){return!1}transformInternalExpressions(e,t){}clone(){let e=new n(this.xref);return e.name=this.name,e}},lh=class n extends Ye{slot;kind=ue.SlotLiteralExpr;constructor(e){super(),this.slot=e}visitExpression(e,t){}isEquivalent(e){return e instanceof n&&e.slot===this.slot}isConstant(){return!0}clone(){return new n(this.slot)}transformInternalExpressions(){}},ch=class n extends Ye{expr;target;targetSlot;alias;kind=ue.ConditionalCase;constructor(e,t,i,r=null){super(),this.expr=e,this.target=t,this.targetSlot=i,this.alias=r}visitExpression(e,t){this.expr!==null&&this.expr.visitExpression(e,t)}isEquivalent(e){return e instanceof n&&e.expr===this.expr}isConstant(){return!0}clone(){return new n(this.expr,this.target,this.targetSlot)}transformInternalExpressions(e,t){this.expr!==null&&(this.expr=ie(this.expr,e,t))}},bd=class n extends Ye{expr;kind=ue.ConstCollected;constructor(e){super(),this.expr=e}transformInternalExpressions(e,t){this.expr=e(this.expr,t)}visitExpression(e,t){this.expr.visitExpression(e,t)}isEquivalent(e){return e instanceof n?this.expr.isEquivalent(e.expr):!1}isConstant(){return this.expr.isConstant()}clone(){return new n(this.expr)}};function Ht(n,e){Tt(n,(t,i)=>(e(t,i),t),qe.None)}var qe=(function(n){return n[n.None=0]="None",n[n.InChildOperation=1]="InChildOperation",n})(qe||{});function xy(n,e,t){for(let i=0;i<n.expressions.length;i++)n.expressions[i]=ie(n.expressions[i],e,t)}function Tt(n,e,t){switch(n.kind){case _.StyleProp:case _.StyleMap:case _.ClassProp:case _.ClassMap:case _.AnimationString:case _.AnimationBinding:case _.Binding:n.expression instanceof ft?xy(n.expression,e,t):n.expression=ie(n.expression,e,t);break;case _.Property:case _.DomProperty:case _.Attribute:n.expression instanceof ft?xy(n.expression,e,t):n.expression=ie(n.expression,e,t),n.sanitizer=n.sanitizer&&ie(n.sanitizer,e,t);break;case _.TwoWayProperty:n.expression=ie(n.expression,e,t),n.sanitizer=n.sanitizer&&ie(n.sanitizer,e,t);break;case _.I18nExpression:n.expression=ie(n.expression,e,t);break;case _.InterpolateText:xy(n.interpolation,e,t);break;case _.Statement:uh(n.statement,e,t);break;case _.Variable:n.initializer=ie(n.initializer,e,t);break;case _.Conditional:for(let i of n.conditions)i.expr!==null&&(i.expr=ie(i.expr,e,t));n.processed!==null&&(n.processed=ie(n.processed,e,t)),n.contextValue!==null&&(n.contextValue=ie(n.contextValue,e,t));break;case _.Animation:case _.AnimationListener:case _.Listener:case _.TwoWayListener:for(let i of n.handlerOps)Tt(i,e,t|qe.InChildOperation);break;case _.ExtractedAttribute:n.expression=n.expression&&ie(n.expression,e,t),n.trustedValueFn=n.trustedValueFn&&ie(n.trustedValueFn,e,t);break;case _.RepeaterCreate:if(n.trackByOps===null)n.track=ie(n.track,e,t);else for(let i of n.trackByOps)Tt(i,e,t|qe.InChildOperation);n.trackByFn!==null&&(n.trackByFn=ie(n.trackByFn,e,t));break;case _.Repeater:n.collection=ie(n.collection,e,t);break;case _.Defer:n.loadingConfig!==null&&(n.loadingConfig=ie(n.loadingConfig,e,t)),n.placeholderConfig!==null&&(n.placeholderConfig=ie(n.placeholderConfig,e,t)),n.resolverFn!==null&&(n.resolverFn=ie(n.resolverFn,e,t));break;case _.I18nMessage:for(let[i,r]of n.params)n.params.set(i,ie(r,e,t));for(let[i,r]of n.postprocessingParams)n.postprocessingParams.set(i,ie(r,e,t));break;case _.DeferWhen:n.expr=ie(n.expr,e,t);break;case _.StoreLet:n.value=ie(n.value,e,t);break;case _.Advance:case _.Container:case _.ContainerEnd:case _.ContainerStart:case _.DeferOn:case _.DisableBindings:case _.Element:case _.ElementEnd:case _.ElementStart:case _.EnableBindings:case _.I18n:case _.I18nApply:case _.I18nContext:case _.I18nEnd:case _.I18nStart:case _.IcuEnd:case _.IcuStart:case _.Namespace:case _.Pipe:case _.Projection:case _.ProjectionDef:case _.Template:case _.Text:case _.I18nAttributes:case _.IcuPlaceholder:case _.DeclareLet:case _.SourceLocation:case _.ConditionalCreate:case _.ConditionalBranchCreate:break;default:throw new Error(`AssertionError: transformExpressionsInOp doesn't handle ${_[n.kind]}`)}}function ie(n,e,t){if(n instanceof Ye)n.transformInternalExpressions(e,t);else if(n instanceof Le)n.lhs=ie(n.lhs,e,t),n.rhs=ie(n.rhs,e,t);else if(n instanceof Ms)n.expr=ie(n.expr,e,t);else if(n instanceof ri)n.receiver=ie(n.receiver,e,t);else if(n instanceof jr)n.receiver=ie(n.receiver,e,t),n.index=ie(n.index,e,t);else if(n instanceof Fn){n.fn=ie(n.fn,e,t);for(let i=0;i<n.args.length;i++)n.args[i]=ie(n.args[i],e,t)}else if(n instanceof zi)for(let i=0;i<n.entries.length;i++)n.entries[i]=ie(n.entries[i],e,t);else if(n instanceof hr)for(let i=0;i<n.entries.length;i++)n.entries[i].value=ie(n.entries[i].value,e,t);else if(n instanceof pr)n.condition=ie(n.condition,e,t),n.trueCase=ie(n.trueCase,e,t),n.falseCase!==null&&(n.falseCase=ie(n.falseCase,e,t));else if(n instanceof rl)n.expr=ie(n.expr,e,t);else if(n instanceof Tp)n.expr=ie(n.expr,e,t);else if(n instanceof Dp)for(let i=0;i<n.expressions.length;i++)n.expressions[i]=ie(n.expressions[i],e,t);else if(n instanceof Gu)n.condition=ie(n.condition,e,t);else if(n instanceof $u)n.tag=ie(n.tag,e,t),n.template.expressions=n.template.expressions.map(i=>ie(i,e,t));else if(n instanceof ks)if(Array.isArray(n.body))for(let i=0;i<n.body.length;i++)uh(n.body[i],e,t);else n.body=ie(n.body,e,t);else if(!(n instanceof Pe)){if(n instanceof qu)for(let i=0;i<n.expressions.length;i++)n.expressions[i]=ie(n.expressions[i],e,t);else if(n instanceof Wi)n.expr=ie(n.expr,e,t);else if(!(n instanceof wi||n instanceof As||n instanceof en))throw new Error(`Unhandled expression kind: ${n.constructor.name}`)}return e(n,t)}function uh(n,e,t){if(n instanceof Ci)n.expr=ie(n.expr,e,t);else if(n instanceof Xt)n.value=ie(n.value,e,t);else if(n instanceof Rt)n.value!==void 0&&(n.value=ie(n.value,e,t));else if(n instanceof kp){n.condition=ie(n.condition,e,t);for(let i of n.trueCase)uh(i,e,t);for(let i of n.falseCase)uh(i,e,t)}else throw new Error(`Unhandled statement kind: ${n.constructor.name}`)}function X1(n){return n instanceof en&&typeof n.value=="string"}var q=(()=>{class n{static nextListId=0;debugListId=n.nextListId++;head={kind:_.ListEnd,next:null,prev:null,debugListId:this.debugListId};tail={kind:_.ListEnd,next:null,prev:null,debugListId:this.debugListId};constructor(){this.head.next=this.tail,this.tail.prev=this.head}push(t){if(Array.isArray(t)){for(let r of t)this.push(r);return}n.assertIsNotEnd(t),n.assertIsUnowned(t),t.debugListId=this.debugListId;let i=this.tail.prev;t.prev=i,i.next=t,t.next=this.tail,this.tail.prev=t}prepend(t){if(t.length===0)return;for(let o of t)n.assertIsNotEnd(o),n.assertIsUnowned(o),o.debugListId=this.debugListId;let i=this.head.next,r=this.head;for(let o of t)r.next=o,o.prev=r,r=o;r.next=i,i.prev=r}*[Symbol.iterator](){let t=this.head.next;for(;t!==this.tail;){n.assertIsOwned(t,this.debugListId);let i=t.next;yield t,t=i}}*reversed(){let t=this.tail.prev;for(;t!==this.head;){n.assertIsOwned(t,this.debugListId);let i=t.prev;yield t,t=i}}static replace(t,i){n.assertIsNotEnd(t),n.assertIsNotEnd(i),n.assertIsOwned(t),n.assertIsUnowned(i),i.debugListId=t.debugListId,t.prev!==null&&(t.prev.next=i,i.prev=t.prev),t.next!==null&&(t.next.prev=i,i.next=t.next),t.debugListId=null,t.prev=null,t.next=null}static replaceWithMany(t,i){if(i.length===0){n.remove(t);return}n.assertIsNotEnd(t),n.assertIsOwned(t);let r=t.debugListId;t.debugListId=null;for(let d of i)n.assertIsNotEnd(d),n.assertIsUnowned(d);let{prev:o,next:s}=t;t.prev=null,t.next=null;let a=o;for(let d of i)n.assertIsUnowned(d),d.debugListId=r,a.next=d,d.prev=a,d.next=null,a=d;let l=i[0],c=a;o!==null&&(o.next=l,l.prev=o),s!==null&&(s.prev=c,c.next=s)}static remove(t){n.assertIsNotEnd(t),n.assertIsOwned(t),t.prev.next=t.next,t.next.prev=t.prev,t.debugListId=null,t.prev=null,t.next=null}static insertBefore(t,i){if(Array.isArray(t)){for(let r of t)n.insertBefore(r,i);return}if(n.assertIsOwned(i),i.prev===null)throw new Error("AssertionError: illegal operation on list start");n.assertIsNotEnd(t),n.assertIsUnowned(t),t.debugListId=i.debugListId,t.prev=null,i.prev.next=t,t.prev=i.prev,t.next=i,i.prev=t}static insertAfter(t,i){if(n.assertIsOwned(i),i.next===null)throw new Error("AssertionError: illegal operation on list end");n.assertIsNotEnd(t),n.assertIsUnowned(t),t.debugListId=i.debugListId,i.next.prev=t,t.next=i.next,t.prev=i,i.next=t}static assertIsUnowned(t){if(t.debugListId!==null)throw new Error(`AssertionError: illegal operation on owned node: ${_[t.kind]}`)}static assertIsOwned(t,i){if(t.debugListId===null)throw new Error(`AssertionError: illegal operation on unowned node: ${_[t.kind]}`);if(i!==void 0&&t.debugListId!==i)throw new Error(`AssertionError: node belongs to the wrong list (expected ${i}, actual ${t.debugListId})`)}static assertIsNotEnd(t){if(t.kind===_.ListEnd)throw new Error("AssertionError: illegal operation on list head or tail")}}return n})(),tn=class{slot=null},SF=new Set([_.Element,_.ElementStart,_.Container,_.ContainerStart,_.Template,_.RepeaterCreate,_.ConditionalCreate,_.ConditionalBranchCreate]);function Kr(n){return SF.has(n.kind)}function TF(n,e,t,i,r,o){return P(P({kind:_.ElementStart,xref:e,tag:n,handle:new tn,attributes:null,localRefs:[],nonBindable:!1,namespace:t,i18nPlaceholder:i,startSourceSpan:r,wholeSourceSpan:o},bi),_e)}function Z1(n,e,t,i,r,o,s,a){return P(P({kind:_.Template,xref:n,templateKind:e,attributes:null,tag:t,handle:new tn,functionNameSuffix:i,decls:null,vars:null,localRefs:[],nonBindable:!1,namespace:r,i18nPlaceholder:o,startSourceSpan:s,wholeSourceSpan:a},bi),_e)}function eT(n,e,t,i,r,o,s,a){return P(P({kind:_.ConditionalCreate,xref:n,templateKind:e,attributes:null,tag:t,handle:new tn,functionNameSuffix:i,decls:null,vars:null,localRefs:[],nonBindable:!1,namespace:r,i18nPlaceholder:o,startSourceSpan:s,wholeSourceSpan:a},bi),_e)}function tT(n,e,t,i,r,o,s,a){return P(P({kind:_.ConditionalBranchCreate,xref:n,templateKind:e,attributes:null,tag:t,handle:new tn,functionNameSuffix:i,decls:null,vars:null,localRefs:[],nonBindable:!1,namespace:r,i18nPlaceholder:o,startSourceSpan:s,wholeSourceSpan:a},bi),_e)}function IF(n,e,t,i,r,o,s,a,l,c){return Z(P(P(P({kind:_.RepeaterCreate,attributes:null,xref:n,handle:new tn,emptyView:e,track:i,trackByFn:null,trackByOps:null,tag:t,emptyTag:o,emptyAttributes:null,functionNameSuffix:"For",namespace:un.HTML,nonBindable:!1,localRefs:[],decls:null,vars:null,varNames:r,usesComponentInstance:!1,i18nPlaceholder:s,emptyI18nPlaceholder:a,startSourceSpan:l,wholeSourceSpan:c},bi),_e),Ln),{numSlotsUsed:e===null?2:3})}function DF(n,e){return P({kind:_.ElementEnd,xref:n,sourceSpan:e},_e)}function AF(n){return P({kind:_.DisableBindings,xref:n},_e)}function kF(n){return P({kind:_.EnableBindings,xref:n},_e)}function nT(n,e,t,i){return P(P({kind:_.Text,xref:n,handle:new tn,initialValue:e,icuPlaceholder:t,sourceSpan:i},bi),_e)}function MF(n,e,t,i,r,o){return P({kind:_.AnimationString,name:n,target:e,animationKind:t,expression:i,i18nMessage:null,securityContext:r,sanitizer:null,sourceSpan:o},_e)}function NF(n,e,t,i,r,o){let s=new q;return s.push(i),P({kind:_.Animation,name:n,target:e,animationKind:t,handlerOps:s,handlerFnName:null,i18nMessage:null,securityContext:r,sanitizer:null,sourceSpan:o},_e)}function S_(n,e,t,i,r,o,s,a,l){let c=new q;return c.push(r),P({kind:_.Listener,target:n,targetSlot:e,tag:i,hostListener:a,name:t,handlerOps:c,handlerFnName:null,consumesDollarEvent:!1,isLegacyAnimationListener:o!==null,legacyAnimationPhase:o,eventTarget:s,sourceSpan:l},_e)}function iT(n,e,t,i,r,o,s,a,l){let c=new q;return c.push(r),P({kind:_.AnimationListener,target:n,targetSlot:e,tag:i,hostListener:a,name:t,animationKind:o,handlerOps:c,handlerFnName:null,consumesDollarEvent:!1,eventTarget:s,sourceSpan:l},_e)}function rT(n,e,t,i,r,o){let s=new q;return s.push(r),P({kind:_.TwoWayListener,target:n,targetSlot:e,tag:i,name:t,handlerOps:s,handlerFnName:null,sourceSpan:o},_e)}function oT(n,e,t){return P(P({kind:_.Pipe,xref:n,handle:e,name:t},_e),bi)}function PF(n){return P({kind:_.Namespace,active:n},_e)}function RF(n){return P({kind:_.ProjectionDef,def:n},_e)}function FF(n,e,t,i,r){return Z(P(P({kind:_.Projection,xref:n,handle:new tn,selector:e,i18nPlaceholder:t,fallbackView:i,projectionSlotIndex:0,attributes:null,localRefs:[],sourceSpan:r},_e),bi),{numSlotsUsed:i===null?1:2})}function gi(n,e,t,i,r,o,s,a){return P({kind:_.ExtractedAttribute,target:n,bindingKind:e,namespace:t,name:i,expression:r,i18nContext:o,i18nMessage:s,securityContext:a,trustedValueFn:null},_e)}function LF(n,e,t,i,r,o){return Z(P(P({kind:_.Defer,xref:n,handle:new tn,mainView:e,mainSlot:t,loadingView:null,loadingSlot:null,loadingConfig:null,loadingMinimumTime:null,loadingAfterTime:null,placeholderView:null,placeholderSlot:null,placeholderConfig:null,placeholderMinimumTime:null,errorView:null,errorSlot:null,ownResolverFn:i,resolverFn:r,flags:null,sourceSpan:o},_e),bi),{numSlotsUsed:2})}function _o(n,e,t,i){return P({kind:_.DeferOn,defer:n,trigger:e,modifier:t,sourceSpan:i},_e)}function OF(n,e,t){return P(P({kind:_.DeclareLet,xref:n,declaredName:e,sourceSpan:t,handle:new tn},bi),_e)}function VF(n,e,t,i,r,o,s,a){return P({kind:_.I18nMessage,xref:n,i18nContext:e,i18nBlock:t,message:i,messagePlaceholder:r,params:o,postprocessingParams:s,needsPostprocessing:a,subMessages:[]},_e)}function Vh(n,e,t,i){return P(P({kind:_.I18nStart,xref:n,handle:new tn,root:t??n,message:e,messageIndex:null,subTemplateIndex:null,context:null,sourceSpan:i},_e),bi)}function Bh(n,e){return P({kind:_.I18nEnd,xref:n,sourceSpan:e},_e)}function BF(n,e,t,i){return P({kind:_.IcuStart,xref:n,message:e,messagePlaceholder:t,context:null,sourceSpan:i},_e)}function UF(n){return P({kind:_.IcuEnd,xref:n},_e)}function $F(n,e,t){return P({kind:_.IcuPlaceholder,xref:n,name:e,strings:t,expressionPlaceholders:[]},_e)}function by(n,e,t,i,r){if(t===null&&n!==Cs.Attr)throw new Error("AssertionError: i18nBlock must be provided for non-attribute contexts.");return P({kind:_.I18nContext,contextKind:n,xref:e,i18nBlock:t,message:i,sourceSpan:r,params:new Map,postprocessingParams:new Map},_e)}function sT(n,e,t){return P(P({kind:_.I18nAttributes,xref:n,handle:e,target:t,i18nAttributesConfig:null},_e),bi)}function HF(n,e){return P({kind:_.SourceLocation,templatePath:n,locations:e},_e)}function qF(n,e,t,i,r,o){return P(P({kind:_.DomProperty,name:n,expression:e,bindingKind:t,i18nContext:i,securityContext:r,sanitizer:null,sourceSpan:o},Ln),_e)}var aT="CTX_REF_MARKER",ne=(function(n){return n[n.Tmpl=0]="Tmpl",n[n.Host=1]="Host",n[n.Both=2]="Both",n})(ne||{}),Mn=(function(n){return n[n.Full=0]="Full",n[n.DomOnly=1]="DomOnly",n})(Mn||{}),dh=class{componentName;pool;compatibility;mode;constructor(e,t,i,r){this.componentName=e,this.pool=t,this.compatibility=i,this.mode=r}kind=ne.Both;allocateXrefId(){return this.nextXrefId++}nextXrefId=0},Sd=class extends dh{relativeContextFilePath;i18nUseExternalIds;deferMeta;allDeferrableDepsFn;relativeTemplatePath;enableDebugLocations;constructor(e,t,i,r,o,s,a,l,c,d){super(e,t,i,r),this.relativeContextFilePath=o,this.i18nUseExternalIds=s,this.deferMeta=a,this.allDeferrableDepsFn=l,this.relativeTemplatePath=c,this.enableDebugLocations=d,this.root=new yi(this,this.allocateXrefId(),null),this.views.set(this.root.xref,this.root)}kind=ne.Tmpl;fnSuffix="Template";root;views=new Map;contentSelectors=null;allocateView(e){let t=new yi(this,this.allocateXrefId(),e);return this.views.set(t.xref,t),t}get units(){return this.views.values()}addConst(e,t){for(let r=0;r<this.consts.length;r++)if(this.consts[r].isEquivalent(e))return r;let i=this.consts.length;return this.consts.push(e),t&&this.constsInitializers.push(...t),i}consts=[];constsInitializers=[]},fh=class{xref;constructor(e){this.xref=e}create=new q;update=new q;fnName=null;vars=null;*ops(){for(let e of this.create)if(yield e,e.kind===_.Listener||e.kind===_.Animation||e.kind===_.AnimationListener||e.kind===_.TwoWayListener)for(let t of e.handlerOps)yield t;else if(e.kind===_.RepeaterCreate&&e.trackByOps!==null)for(let t of e.trackByOps)yield t;for(let e of this.update)yield e}},yi=class extends fh{job;parent;constructor(e,t,i){super(t),this.job=e,this.parent=i}contextVariables=new Map;aliases=new Set;decls=null},ph=class extends dh{constructor(e,t,i,r){super(e,t,i,r),this.root=new _v(this)}kind=ne.Host;fnSuffix="HostBindings";root;get units(){return[this.root]}},_v=class extends fh{job;constructor(e){super(0),this.job=e}attributes=null};function GF(n){for(let e of n.units)for(let t of e.ops())Tt(t,WF,qe.None)}function WF(n){if(n instanceof Fn&&n.fn instanceof Yt&&n.fn.name==="$any"){if(n.args.length!==1)throw new Error("The $any builtin function expects exactly one argument.");return n.args[0]}return n}function zF(n){let e=new Map;for(let t of n.units)for(let i of t.create)i.kind===_.I18nContext&&e.set(i.xref,i);for(let t of n.units)for(let i of t.update)i.kind===_.I18nExpression&&jF(e,i)&&q.insertAfter(xF(i.i18nOwner,i.handle,null),i)}function jF(n,e){if(e.next?.kind!==_.I18nExpression)return!0;let t=n.get(e.context),i=n.get(e.next.context);if(t===void 0)throw new Error("AssertionError: expected an I18nContextOp to exist for the I18nExpressionOp's context");if(i===void 0)throw new Error("AssertionError: expected an I18nContextOp to exist for the next I18nExpressionOp's context");return t.i18nBlock!==null?t.i18nBlock!==i.i18nBlock:e.i18nOwner!==e.next.i18nOwner}function KF(n){for(let e of n.units){let t=e.update.head,i=[],r=null;for(let o of e.create){if(o.kind===_.I18nStart)r={blockXref:o.xref,lastSlotConsumer:o.xref};else if(o.kind===_.I18nEnd){for(let s of i)s.target=r.lastSlotConsumer,q.insertBefore(s,t);i.length=0,r=null}if(Tl(o))for(r!==null&&(r.lastSlotConsumer=o.xref);t.next!==null;){if(r!==null&&t.kind===_.I18nExpression&&t.usage===bl.I18nText&&t.i18nOwner===r.blockXref){let a=t;t=t.next,q.remove(a),i.push(a);continue}let s=!1;if(_d(t)&&t.target!==o.xref?s=!0:(t.kind===_.Statement||t.kind===_.Variable)&&Ht(t,a=>{!s&&_d(a)&&a.target!==o.xref&&(s=!0)}),s)break;t=t.next}}}}function YF(n){if(!(!n.enableDebugLocations||n.relativeTemplatePath===null))for(let e of n.units){let t=[];for(let i of e.create)if(i.kind===_.ElementStart||i.kind===_.Element){let r=i.startSourceSpan.start;t.push({targetSlot:i.handle,offset:r.offset,line:r.line,column:r.col})}t.length>0&&e.create.push(HF(n.relativeTemplatePath,t))}}function T_(n){let e=new Map;for(let t of n.create)Tl(t)&&(e.set(t.xref,t),t.kind===_.RepeaterCreate&&t.emptyView!==null&&e.set(t.emptyView,t));return e}function JF(n){for(let e of n.units){let t=T_(e);for(let i of e.ops())switch(i.kind){case _.Attribute:QF(e,i,t);break;case _.Property:if(i.bindingKind!==se.LegacyAnimation&&i.bindingKind!==se.Animation){let r;i.i18nMessage!==null&&i.templateKind===null?r=se.I18n:i.isStructuralTemplateAttribute?r=se.Template:r=se.Property,q.insertBefore(gi(i.target,r,null,i.name,null,null,null,i.securityContext),za(t,i.target))}break;case _.TwoWayProperty:q.insertBefore(gi(i.target,se.TwoWayProperty,null,i.name,null,null,null,i.securityContext),za(t,i.target));break;case _.StyleProp:case _.ClassProp:e.job.compatibility===oi.TemplateDefinitionBuilder&&i.expression instanceof xd&&q.insertBefore(gi(i.target,se.Property,null,i.name,null,null,null,tt.STYLE),za(t,i.target));break;case _.Listener:if(!i.isLegacyAnimationListener){let r=gi(i.target,se.Property,null,i.name,null,null,null,tt.NONE);if(n.kind===ne.Host){if(n.compatibility)break;e.create.push(r)}else q.insertBefore(r,za(t,i.target))}break;case _.TwoWayListener:if(n.kind!==ne.Host){let r=gi(i.target,se.Property,null,i.name,null,null,null,tt.NONE);q.insertBefore(r,za(t,i.target))}break}}}function za(n,e){let t=n.get(e);if(t===void 0)throw new Error("All attributes should have an element-like target.");return t}function QF(n,e,t){if(e.expression instanceof ft)return;let i=e.isTextAttribute||e.expression.isConstant();if(n.job.compatibility===oi.TemplateDefinitionBuilder&&(i&&=e.isTextAttribute),i){let r=gi(e.target,e.isStructuralTemplateAttribute?se.Template:se.Attribute,e.namespace,e.name,e.expression,e.i18nContext,e.i18nMessage,e.securityContext);if(n.job.kind===ne.Host)n.create.push(r);else{let o=za(t,e.target);q.insertBefore(r,o)}q.remove(e)}}var cS="aria-";function lT(n){return n.startsWith(cS)&&n.length>cS.length}function XF(n,e){let t=n.get(e);if(t===void 0)throw new Error("All attributes should have an element-like target.");return t}function ZF(n){let e=new Map;for(let t of n.units)for(let i of t.create)Kr(i)&&e.set(i.xref,i);for(let t of n.units)for(let i of t.ops())if(i.kind===_.Binding)switch(i.bindingKind){case se.Attribute:if(i.name==="ngNonBindable"){q.remove(i);let r=XF(e,i.target);r.nonBindable=!0}else if(i.name.startsWith("animate."))q.replace(i,lS(i.name,i.target,i.name==="animate.enter"?"enter":"leave",i.expression,i.securityContext,i.sourceSpan,0));else{let[r,o]=Ki(i.name);q.replace(i,aS(i.target,r,o,i.expression,i.securityContext,i.isTextAttribute,i.isStructuralTemplateAttribute,i.templateKind,i.i18nMessage,i.sourceSpan))}break;case se.Animation:q.replace(i,lS(i.name,i.target,i.name==="animate.enter"?"enter":"leave",i.expression,i.securityContext,i.sourceSpan,1));break;case se.Property:case se.LegacyAnimation:n.mode===Mn.DomOnly&&lT(i.name)?q.replace(i,aS(i.target,null,i.name,i.expression,i.securityContext,!1,i.isStructuralTemplateAttribute,i.templateKind,i.i18nMessage,i.sourceSpan)):n.kind===ne.Host?q.replace(i,qF(i.name,i.expression,i.bindingKind,i.i18nContext,i.securityContext,i.sourceSpan)):q.replace(i,hF(i.target,i.name,i.expression,i.bindingKind,i.securityContext,i.isStructuralTemplateAttribute,i.templateKind,i.i18nContext,i.i18nMessage,i.sourceSpan));break;case se.TwoWayProperty:if(!(i.expression instanceof je))throw new Error(`Expected value of two-way property binding "${i.name}" to be an expression`);q.replace(i,mF(i.target,i.name,i.expression,i.securityContext,i.isStructuralTemplateAttribute,i.templateKind,i.i18nContext,i.i18nMessage,i.sourceSpan));break;case se.I18n:case se.ClassName:case se.StyleProperty:throw new Error(`Unhandled binding of kind ${se[i.bindingKind]}`)}}var uS=new Map([[D.ariaProperty,D.ariaProperty],[D.attribute,D.attribute],[D.classProp,D.classProp],[D.element,D.element],[D.elementContainer,D.elementContainer],[D.elementContainerEnd,D.elementContainerEnd],[D.elementContainerStart,D.elementContainerStart],[D.elementEnd,D.elementEnd],[D.elementStart,D.elementStart],[D.domProperty,D.domProperty],[D.i18nExp,D.i18nExp],[D.listener,D.listener],[D.listener,D.listener],[D.property,D.property],[D.styleProp,D.styleProp],[D.syntheticHostListener,D.syntheticHostListener],[D.syntheticHostProperty,D.syntheticHostProperty],[D.templateCreate,D.templateCreate],[D.twoWayProperty,D.twoWayProperty],[D.twoWayListener,D.twoWayListener],[D.declareLet,D.declareLet],[D.conditionalCreate,D.conditionalBranchCreate],[D.conditionalBranchCreate,D.conditionalBranchCreate],[D.domElement,D.domElement],[D.domElementStart,D.domElementStart],[D.domElementEnd,D.domElementEnd],[D.domElementContainer,D.domElementContainer],[D.domElementContainerStart,D.domElementContainerStart],[D.domElementContainerEnd,D.domElementContainerEnd],[D.domListener,D.domListener],[D.domTemplate,D.domTemplate],[D.animationEnter,D.animationEnter],[D.animationLeave,D.animationLeave],[D.animationEnterListener,D.animationEnterListener],[D.animationLeaveListener,D.animationLeaveListener]]),eL=256;function tL(n){for(let e of n.units)dS(e.create),dS(e.update)}function dS(n){let e=null;for(let t of n){if(t.kind!==_.Statement||!(t.statement instanceof Ci)){e=null;continue}if(!(t.statement.expr instanceof Fn)||!(t.statement.expr.fn instanceof As)){e=null;continue}let i=t.statement.expr.fn.value;if(!uS.has(i)){e=null;continue}if(e!==null&&uS.get(e.instruction)===i&&e.length<eL){let r=e.expression.callFn(t.statement.expr.args,t.statement.expr.sourceSpan,t.statement.expr.pure);e.expression=r,e.op.statement=r.toStmt(),e.length++,q.remove(t)}else e={op:t,instruction:i,expression:t.statement.expr,length:1}}}function nL(n){for(let e of n.units)for(let t of e.update)(t.kind===_.Attribute||t.kind===_.StyleProp||t.kind==_.StyleMap||t.kind===_.ClassMap)&&t.expression instanceof ft&&t.expression.strings.length===2&&t.expression.strings.every(r=>r==="")&&(t.expression=t.expression.expressions[0])}function iL(n){for(let e of n.units)for(let t of e.ops()){if(t.kind!==_.Conditional)continue;let i,r=t.conditions.findIndex(a=>a.expr===null);if(r>=0){let a=t.conditions.splice(r,1)[0].targetSlot;i=new lh(a)}else i=L(-1);let o=t.test==null?null:new _r(t.test,n.allocateXrefId()),s=null;for(let a=t.conditions.length-1;a>=0;a--){let l=t.conditions[a];if(l.expr!==null){if(o!==null){let c=a===0?o:new Po(o.xref);l.expr=new Le(j.Identical,c,l.expr)}else l.alias!==null&&(s??=n.allocateXrefId(),l.expr=new _r(l.expr,s),t.contextValue=new Po(s));i=new pr(l.expr,new lh(l.targetSlot),i)}}t.processed=i,t.conditions=[]}}var rL=new Map([["&&",j.And],[">",j.Bigger],[">=",j.BiggerEquals],["|",j.BitwiseOr],["&",j.BitwiseAnd],["/",j.Divide],["=",j.Assign],["==",j.Equals],["===",j.Identical],["<",j.Lower],["<=",j.LowerEquals],["-",j.Minus],["%",j.Modulo],["**",j.Exponentiation],["*",j.Multiply],["!=",j.NotEquals],["!==",j.NotIdentical],["??",j.NullishCoalesce],["||",j.Or],["+",j.Plus],["in",j.In],["+=",j.AdditionAssignment],["-=",j.SubtractionAssignment],["*=",j.MultiplicationAssignment],["/=",j.DivisionAssignment],["%=",j.RemainderAssignment],["**=",j.ExponentiationAssignment],["&&=",j.AndAssignment],["||=",j.OrAssignment],["??=",j.NullishCoalesceAssignment]]);function cT(n){let e=new Map([["svg",un.SVG],["math",un.Math]]);return n===null?un.HTML:e.get(n)??un.HTML}function oL(n){let e=new Map([["svg",un.SVG],["math",un.Math]]);for(let[t,i]of e.entries())if(i===n)return t;return null}function sL(n,e){return e===un.HTML?n:`:${oL(e)}:${n}`}function wl(n){return Array.isArray(n)?Ge(n.map(wl)):L(n)}function aL(n){let e=new Map;for(let t of n.units)for(let i of t.create)if(i.kind===_.ExtractedAttribute){let r=e.get(i.target)||new wv(n.compatibility);e.set(i.target,r),r.add(i.bindingKind,i.name,i.expression,i.namespace,i.trustedValueFn),q.remove(i)}if(n instanceof Sd)for(let t of n.units)for(let i of t.create)if(i.kind==_.Projection){let r=e.get(i.xref);if(r!==void 0){let o=Cv(r);o.entries.length>0&&(i.attributes=o)}}else Kr(i)&&(i.attributes=fS(n,e,i.xref),i.kind===_.RepeaterCreate&&i.emptyView!==null&&(i.emptyAttributes=fS(n,e,i.emptyView)));else if(n instanceof ph)for(let[t,i]of e.entries()){if(t!==n.root.xref)throw new Error("An attribute would be const collected into the host binding's template function, but is not associated with the root xref.");let r=Cv(i);r.entries.length>0&&(n.root.attributes=r)}}function fS(n,e,t){let i=e.get(t);if(i!==void 0){let r=Cv(i);if(r.entries.length>0)return n.addConst(r)}return null}var Ua=Object.freeze([]),wv=class{compatibility;known=new Map;byKind=new Map;propertyBindings=null;projectAs=null;get attributes(){return this.byKind.get(se.Attribute)??Ua}get classes(){return this.byKind.get(se.ClassName)??Ua}get styles(){return this.byKind.get(se.StyleProperty)??Ua}get bindings(){return this.propertyBindings??Ua}get template(){return this.byKind.get(se.Template)??Ua}get i18n(){return this.byKind.get(se.I18n)??Ua}constructor(e){this.compatibility=e}isKnown(e,t){let i=this.known.get(e)??new Set;return this.known.set(e,i),i.has(t)?!0:(i.add(t),!1)}add(e,t,i,r,o){if(!(this.compatibility===oi.TemplateDefinitionBuilder&&(e===se.Attribute||e===se.ClassName||e===se.StyleProperty))&&this.isKnown(e,t))return;if(t==="ngProjectAs"){if(i===null||!(i instanceof en)||i.value==null||typeof i.value?.toString()!="string")throw Error("ngProjectAs must have a string literal value");this.projectAs=i.value.toString()}let a=this.arrayFor(e);if(a.push(...lL(r,t)),e===se.Attribute||e===se.StyleProperty){if(i===null)throw Error("Attribute, i18n attribute, & style element attributes must have a value");if(o!==null){if(!X1(i))throw Error("AssertionError: extracted attribute value should be string literal");a.push(xP(o,new qu([new Ip(i.value)],[]),void 0,i.sourceSpan))}else a.push(i)}}arrayFor(e){return e===se.Property||e===se.TwoWayProperty?(this.propertyBindings??=[],this.propertyBindings):(this.byKind.has(e)||this.byKind.set(e,[]),this.byKind.get(e))}};function lL(n,e){let t=L(e);return n?[L(0),L(n),t]:[t]}function Cv({attributes:n,bindings:e,classes:t,i18n:i,projectAs:r,styles:o,template:s}){let a=[...n];if(r!==null){let l=c_(r)[0];a.push(L(5),wl(l))}return t.length>0&&a.push(L(1),...t),o.length>0&&a.push(L(2),...o),e.length>0&&a.push(L(3),...e),s.length>0&&a.push(L(4),...s),i.length>0&&a.push(L(6),...i),Ge(a)}function cL(n,e){let t=n.get(e);if(t===void 0)throw new Error("All attributes should have an element-like target.");return t}function uL(n){let e=new Map;for(let t of n.units)for(let i of t.create)Kr(i)&&e.set(i.xref,i);for(let t of n.units)for(let i of t.ops())if(i.kind===_.AnimationBinding){let r=dL(i);n.kind===ne.Host?t.create.push(r):q.insertAfter(r,cL(e,i.target)),q.remove(i)}}function dL(n){if(n.animationBindingKind===0)return MF(n.name,n.target,n.name==="animate.enter"?"enter":"leave",n.expression,n.securityContext,n.sourceSpan);{let e=n.expression;return NF(n.name,n.target,n.name==="animate.enter"?"enter":"leave",[xi(new Xt(e,e.sourceSpan))],n.securityContext,n.sourceSpan)}}function fL(n){let e=new Map;for(let t of n.units){for(let i of t.create)i.kind===_.I18nAttributes&&e.set(i.target,i);for(let i of t.update)switch(i.kind){case _.Property:case _.Attribute:if(i.i18nContext===null||!(i.expression instanceof ft))continue;let r=e.get(i.target);if(r===void 0)throw new Error("AssertionError: An i18n attribute binding instruction requires the owning element to have an I18nAttributes create instruction");if(r.target!==i.target)throw new Error("AssertionError: Expected i18nAttributes target element to match binding target element");let o=[];for(let s=0;s<i.expression.expressions.length;s++){let a=i.expression.expressions[s];if(i.expression.i18nPlaceholders.length!==i.expression.expressions.length)throw new Error(`AssertionError: An i18n attribute binding instruction requires the same number of expressions and placeholders, but found ${i.expression.i18nPlaceholders.length} placeholders and ${i.expression.expressions.length} expressions`);o.push(Q1(i.i18nContext,r.target,r.xref,r.handle,a,null,i.expression.i18nPlaceholders[s],vd.Creation,bl.I18nAttribute,i.name,i.sourceSpan))}q.replaceWithMany(i,o);break}}}function pL(n){let e=new Map;for(let r of n.units)for(let o of r.ops())switch(o.kind){case _.Binding:case _.Property:case _.Attribute:case _.ExtractedAttribute:if(o.i18nMessage===null)continue;if(!e.has(o.i18nMessage)){let s=by(Cs.Attr,n.allocateXrefId(),null,o.i18nMessage,null);r.create.push(s),e.set(o.i18nMessage,s.xref)}o.i18nContext=e.get(o.i18nMessage);break}let t=new Map;for(let r of n.units)for(let o of r.create)switch(o.kind){case _.I18nStart:if(o.xref===o.root){let s=by(Cs.RootI18n,n.allocateXrefId(),o.xref,o.message,null);r.create.push(s),o.context=s.xref,t.set(o.xref,s)}break}for(let r of n.units)for(let o of r.create)if(o.kind===_.I18nStart&&o.xref!==o.root){let s=t.get(o.root);if(s===void 0)throw Error("AssertionError: Root i18n block i18n context should have been created.");o.context=s.xref,t.set(o.xref,s)}let i=null;for(let r of n.units)for(let o of r.create)switch(o.kind){case _.I18nStart:i=o;break;case _.I18nEnd:i=null;break;case _.IcuStart:if(i===null)throw Error("AssertionError: Unexpected ICU outside of an i18n block.");if(o.message.id!==i.message.id){let s=by(Cs.Icu,n.allocateXrefId(),i.root,o.message,null);r.create.push(s),o.context=s.xref}else o.context=i.context,t.get(i.xref).contextKind=Cs.Icu;break}}function hL(n){let e=new Map;for(let t of n.units)for(let i of t.update.reversed())if(i.kind===_.Binding&&i.isTextAttribute){let r=e.get(i.target)||new Set;r.has(i.name)&&n.compatibility===oi.TemplateDefinitionBuilder&&(i.name==="style"||i.name==="class")&&q.remove(i),r.add(i.name),e.set(i.target,r)}}function mL(n){for(let e of n.units)for(let t of e.create)t.kind===_.Defer&&(t.placeholderMinimumTime!==null&&(t.placeholderConfig=new bd(wl([t.placeholderMinimumTime]))),(t.loadingMinimumTime!==null||t.loadingAfterTime!==null)&&(t.loadingConfig=new bd(wl([t.loadingMinimumTime,t.loadingAfterTime]))))}function gL(n){let e=new Map;function t(r){if(e.has(r.xref))return e.get(r.xref);let o=new yL;for(let s of r.create)if(!(!Kr(s)||s.localRefs===null)){if(!Array.isArray(s.localRefs))throw new Error("LocalRefs were already processed, but were needed to resolve defer targets.");for(let a of s.localRefs)a.target===""&&o.targets.set(a.name,{xref:s.xref,slot:s.handle})}return e.set(r.xref,o),o}function i(r,o,s){switch(o.trigger.kind){case Ke.Idle:case Ke.Never:case Ke.Immediate:case Ke.Timer:return;case Ke.Hover:case Ke.Interaction:case Ke.Viewport:if(o.trigger.targetName===null){if(s===null)throw new Error("defer on trigger with no target name must have a placeholder block");let c=n.views.get(s);if(c==null)throw new Error("AssertionError: could not find placeholder view for defer on trigger");for(let d of c.create)if(Tl(d)&&(Kr(d)||d.kind===_.Projection)){o.trigger.targetXref=d.xref,o.trigger.targetView=s,o.trigger.targetSlotViewSteps=-1,o.trigger.targetSlot=d.handle;return}return}let a=s!==null?n.views.get(s):r,l=s!==null?-1:0;for(;a!==null;){let c=t(a);if(c.targets.has(o.trigger.targetName)){let{xref:d,slot:p}=c.targets.get(o.trigger.targetName);o.trigger.targetXref=d,o.trigger.targetView=a.xref,o.trigger.targetSlotViewSteps=l,o.trigger.targetSlot=p;return}a=a.parent!==null?n.views.get(a.parent):null,l++}break;default:throw new Error(`Trigger kind ${o.trigger.kind} not handled`)}}for(let r of n.units){let o=new Map;for(let s of r.create)switch(s.kind){case _.Defer:o.set(s.xref,s);break;case _.DeferOn:let a=o.get(s.defer);i(r,s,s.modifier==="hydrate"?a.mainView:a.placeholderView);break}}}var yL=class{targets=new Map},vL=new Map([[_.ElementEnd,[_.ElementStart,_.Element]],[_.ContainerEnd,[_.ContainerStart,_.Container]],[_.I18nEnd,[_.I18nStart,_.I18n]]]),_L=new Set([_.Pipe]);function wL(n){for(let e of n.units)for(let t of e.create){let i=vL.get(t.kind);if(i===void 0)continue;let[r,o]=i,s=t.prev;for(;s!==null&&_L.has(s.kind);)s=s.prev;s!==null&&s.kind===r&&(s.kind=o,q.remove(t))}}function CL(n){for(let e of n.units)for(let t of e.ops())Tt(t,i=>IL(i,{job:n}),qe.None),Tt(t,DL,qe.None)}function Kn(n){return n instanceof Ms?Kn(n.expr):n instanceof Le?Kn(n.lhs)||Kn(n.rhs):n instanceof pr?n.falseCase&&Kn(n.falseCase)?!0:Kn(n.condition)||Kn(n.trueCase):n instanceof Gu?Kn(n.condition):n instanceof _r?Kn(n.expr):n instanceof ri?Kn(n.receiver):n instanceof jr?Kn(n.receiver)||Kn(n.index):n instanceof Wi?Kn(n.expr):n instanceof Fn||n instanceof zi||n instanceof hr||n instanceof $s||n instanceof Us}function EL(n){let e=new Set;return ie(n,t=>(t instanceof _r&&e.add(t.xref),t),qe.None),e}function xL(n,e,t){return ie(n,i=>{if(i instanceof _r&&e.has(i.xref)){let r=new Po(i.xref);return t.job.compatibility===oi.TemplateDefinitionBuilder?new _r(r,r.xref):r}return i},qe.None),n}function $a(n,e,t){let i;if(Kn(n)){let r=t.job.allocateXrefId();i=[new _r(n,r),new Po(r)]}else i=[n,n.clone()],xL(i[1],EL(i[0]),t);return new _l(i[0],e(i[1]))}function bL(n){return n instanceof yl||n instanceof vl||n instanceof $s}function SL(n){return n instanceof ri||n instanceof jr||n instanceof Fn}function uT(n){return bL(n)||SL(n)}function TL(n){if(uT(n)&&n.receiver instanceof _l){let e=n.receiver;for(;e.expr instanceof _l;)e=e.expr;return e}return null}function IL(n,e){if(!uT(n))return n;let t=TL(n);if(t){if(n instanceof Fn)return t.expr=t.expr.callFn(n.args),n.receiver;if(n instanceof ri)return t.expr=t.expr.prop(n.name),n.receiver;if(n instanceof jr)return t.expr=t.expr.key(n.index),n.receiver;if(n instanceof $s)return t.expr=$a(t.expr,i=>i.callFn(n.args),e),n.receiver;if(n instanceof yl)return t.expr=$a(t.expr,i=>i.prop(n.name),e),n.receiver;if(n instanceof vl)return t.expr=$a(t.expr,i=>i.key(n.index),e),n.receiver}else{if(n instanceof $s)return $a(n.receiver,i=>i.callFn(n.args),e);if(n instanceof yl)return $a(n.receiver,i=>i.prop(n.name),e);if(n instanceof vl)return $a(n.receiver,i=>i.key(n.index),e)}return n}function DL(n){return n instanceof _l?new Wi(new pr(new Le(j.Equals,n.guard,sl),sl,n.expr)):n}var pS="\uFFFD",AL="#",kL="*",ML="/",NL=":",PL="[",RL="]",FL="|";function LL(n){let e=new Map,t=new Map,i=new Map;for(let o of n.units)for(let s of o.create)switch(s.kind){case _.I18nContext:let a=OL(n,s);o.create.push(a),e.set(s.xref,a),i.set(s.xref,s);break;case _.I18nStart:t.set(s.xref,s);break}let r=null;for(let o of n.units)for(let s of o.create)switch(s.kind){case _.IcuStart:r=s,q.remove(s);let a=i.get(s.context);if(a.contextKind!==Cs.Icu)continue;let l=t.get(a.i18nBlock);if(l.context===a.xref)continue;let c=t.get(l.root),d=e.get(c.context);if(d===void 0)throw Error("AssertionError: ICU sub-message should belong to a root message.");let p=e.get(a.xref);p.messagePlaceholder=s.messagePlaceholder,d.subMessages.push(p.xref);break;case _.IcuEnd:r=null,q.remove(s);break;case _.IcuPlaceholder:if(r===null||r.context==null)throw Error("AssertionError: Unexpected ICU placeholder outside of i18n context");e.get(r.context).postprocessingParams.set(s.name,L(VL(s))),q.remove(s);break}}function OL(n,e,t){let i=hS(e.params),r=hS(e.postprocessingParams),o=[...e.params.values()].some(s=>s.length>1);return VF(n.allocateXrefId(),e.xref,e.i18nBlock,e.message,null,i,r,o)}function VL(n){if(n.strings.length!==n.expressionPlaceholders.length+1)throw Error(`AssertionError: Invalid ICU placeholder with ${n.strings.length} strings and ${n.expressionPlaceholders.length} expressions`);let e=n.expressionPlaceholders.map(Ja);return n.strings.flatMap((t,i)=>[t,e[i]||""]).join("")}function hS(n){let e=new Map;for(let[t,i]of n){let r=BL(i);r!==null&&e.set(t,L(r))}return e}function BL(n){if(n.length===0)return null;let e=n.map(t=>Ja(t));return e.length===1?e[0]:`${PL}${e.join(FL)}${RL}`}function Ja(n){if(n.flags&Xe.ElementTag&&n.flags&Xe.TemplateTag){if(typeof n.value!="object")throw Error("AssertionError: Expected i18n param value to have an element and template slot");let r=Ja(Z(P({},n),{value:n.value.element,flags:n.flags&~Xe.TemplateTag})),o=Ja(Z(P({},n),{value:n.value.template,flags:n.flags&~Xe.ElementTag}));return n.flags&Xe.OpenTag&&n.flags&Xe.CloseTag?`${o}${r}${o}`:n.flags&Xe.CloseTag?`${r}${o}`:`${o}${r}`}if(n.flags&Xe.OpenTag&&n.flags&Xe.CloseTag)return`${Ja(Z(P({},n),{flags:n.flags&~Xe.CloseTag}))}${Ja(Z(P({},n),{flags:n.flags&~Xe.OpenTag}))}`;if(n.flags===Xe.None)return`${n.value}`;let e="",t="";n.flags&Xe.ElementTag?e=AL:n.flags&Xe.TemplateTag&&(e=kL),e!==""&&(t=n.flags&Xe.CloseTag?ML:"");let i=n.subTemplateIndex===null?"":`${NL}${n.subTemplateIndex}`;return`${pS}${t}${e}${n.value}${i}${pS}`}function UL(n){for(let e of n.units){let t=new Map;for(let r of e.create){if(Tl(r)){if(r.handle.slot===null)throw new Error("AssertionError: expected slots to have been allocated before generating advance() calls")}else continue;t.set(r.xref,r.handle.slot)}let i=0;for(let r of e.update){let o=null;if(_d(r)?o=r:Ht(r,a=>{o===null&&_d(a)&&(o=a)}),o===null)continue;if(!t.has(o.target))throw new Error(`AssertionError: reference to unknown slot for target ${o.target}`);let s=t.get(o.target);if(i!==s){let a=s-i;if(a<0)throw new Error("AssertionError: slot counter should never need to move backwards");q.insertBefore(wF(a,o.sourceSpan),r),i=s}}}}function $L(n){for(let e of n.units)for(let t of e.update){if(t.kind!==_.StoreLet)continue;let i={kind:Ut.Identifier,name:null,identifier:t.declaredName,local:!0};q.replace(t,Eo(n.allocateXrefId(),i,new wd(t.target,t.value,t.sourceSpan),mi.None))}}function HL(n){let e=n.compatibility===oi.TemplateDefinitionBuilder,t=[],i=0;for(let r of n.units)for(let o of r.create)o.kind===_.Projection&&(t.push(o.selector),o.projectionSlotIndex=i++);if(t.length>0){let r=null;if(t.length>1||t[0]!=="*"){let o=t.map(s=>s==="*"?s:c_(s));r=n.pool.getConstLiteral(wl(o),e)}n.contentSelectors=n.pool.getConstLiteral(wl(t),e),n.root.create.prepend([RF(r)])}}function qL(n){Mu(n.root,null)}function Mu(n,e){let t=GL(n,e);for(let i of n.create)switch(i.kind){case _.ConditionalCreate:case _.ConditionalBranchCreate:case _.Template:Mu(n.job.views.get(i.xref),t);break;case _.Projection:i.fallbackView!==null&&Mu(n.job.views.get(i.fallbackView),t);break;case _.RepeaterCreate:Mu(n.job.views.get(i.xref),t),i.emptyView&&Mu(n.job.views.get(i.emptyView),t),i.trackByOps!==null&&i.trackByOps.prepend(vp(n,t,!1));break;case _.Animation:case _.AnimationListener:case _.Listener:case _.TwoWayListener:i.handlerOps.prepend(vp(n,t,!0));break}n.update.prepend(vp(n,t,!1))}function GL(n,e){let t={view:n.xref,viewContextVariable:{kind:Ut.Context,name:null,view:n.xref},contextVariables:new Map,aliases:n.aliases,references:[],letDeclarations:[],parent:e};for(let i of n.contextVariables.keys())t.contextVariables.set(i,{kind:Ut.Identifier,name:null,identifier:i,local:!1});for(let i of n.create)switch(i.kind){case _.ElementStart:case _.ConditionalCreate:case _.ConditionalBranchCreate:case _.Template:if(!Array.isArray(i.localRefs))throw new Error("AssertionError: expected localRefs to be an array");for(let r=0;r<i.localRefs.length;r++)t.references.push({name:i.localRefs[r].name,targetId:i.xref,targetSlot:i.handle,offset:r,variable:{kind:Ut.Identifier,name:null,identifier:i.localRefs[r].name,local:!1}});break;case _.DeclareLet:t.letDeclarations.push({targetId:i.xref,targetSlot:i.handle,variable:{kind:Ut.Identifier,name:null,identifier:i.declaredName,local:!1}});break}return t}function vp(n,e,t){let i=[];e.view!==n.xref&&i.push(Eo(n.job.allocateXrefId(),e.viewContextVariable,new oh,mi.None));let r=n.job.views.get(e.view);for(let[o,s]of r.contextVariables){let a=new No(e.view),l=s===aT?a:new ri(a,s);i.push(Eo(n.job.allocateXrefId(),e.contextVariables.get(o),l,mi.None))}for(let o of r.aliases)i.push(Eo(n.job.allocateXrefId(),o,o.expression.clone(),mi.AlwaysInline));for(let o of e.references)i.push(Eo(n.job.allocateXrefId(),o.variable,new rh(o.targetId,o.targetSlot,o.offset),mi.None));if(e.view!==n.xref||t)for(let o of e.letDeclarations)i.push(Eo(n.job.allocateXrefId(),o.variable,new Cd(o.targetId,o.targetSlot),mi.None));return e.parent!==null&&i.push(...vp(n,e.parent,!1)),i}function WL(n){for(let e of n.units)for(let t of e.ops())Tt(t,i=>i instanceof bd?L(n.addConst(i.expr)):i,qe.None)}var mS="style.",gS="class.",zL="style!",yS="class!",vS="!important";function jL(n){for(let e of n.root.update)if(e.kind===_.Binding&&e.bindingKind===se.Property)if(e.name.endsWith(vS)&&(e.name=e.name.substring(0,e.name.length-vS.length)),e.name.startsWith(mS)){e.bindingKind=se.StyleProperty,e.name=e.name.substring(mS.length),KL(e.name)||(e.name=YL(e.name));let{property:t,suffix:i}=Sy(e.name);e.name=t,e.unit=i}else e.name.startsWith(zL)?(e.bindingKind=se.StyleProperty,e.name="style"):e.name.startsWith(gS)?(e.bindingKind=se.ClassName,e.name=Sy(e.name.substring(gS.length)).property):e.name.startsWith(yS)&&(e.bindingKind=se.ClassName,e.name=Sy(e.name.substring(yS.length)).property)}function KL(n){return n.startsWith("--")}function YL(n){return n.replace(/[a-z][A-Z]/g,e=>e.charAt(0)+"-"+e.charAt(1)).toLowerCase()}function Sy(n){let e=n.indexOf("!important");e!==-1&&(n=e>0?n.substring(0,e):"");let t=null,i=n,r=n.lastIndexOf(".");return r>0&&(t=n.slice(r+1),i=n.substring(0,r)),{property:i,suffix:t}}function Ev(n,e=!1){return xn(Object.keys(n).map(t=>({key:t,quoted:e,value:n[t]})))}var xv=class{visitText(e){return e.value}visitContainer(e){return e.children.map(t=>t.visit(this)).join("")}visitIcu(e){let t=Object.keys(e.cases).map(r=>`${r} {${e.cases[r].visit(this)}}`);return`{${e.expressionPlaceholder}, ${e.type}, ${t.join(" ")}}`}visitTagPlaceholder(e){return e.isVoid?this.formatPh(e.startName):`${this.formatPh(e.startName)}${e.children.map(t=>t.visit(this)).join("")}${this.formatPh(e.closeName)}`}visitPlaceholder(e){return this.formatPh(e.name)}visitBlockPlaceholder(e){return`${this.formatPh(e.startName)}${e.children.map(t=>t.visit(this)).join("")}${this.formatPh(e.closeName)}`}visitIcuPlaceholder(e,t){return this.formatPh(e.name)}formatPh(e){return`{${Od(e,!1)}}`}},JL=new xv;function dT(n){return n.visit(JL)}var Yr=class{sourceSpan;i18n;constructor(e,t){this.sourceSpan=e,this.i18n=t}},Hs=class extends Yr{value;tokens;constructor(e,t,i,r){super(t,r),this.value=e,this.tokens=i}visit(e,t){return e.visitText(this,t)}},Ss=class extends Yr{switchValue;type;cases;switchValueSourceSpan;constructor(e,t,i,r,o,s){super(r,s),this.switchValue=e,this.type=t,this.cases=i,this.switchValueSourceSpan=o}visit(e,t){return e.visitExpansion(this,t)}},hh=class{value;expression;sourceSpan;valueSourceSpan;expSourceSpan;constructor(e,t,i,r,o){this.value=e,this.expression=t,this.sourceSpan=i,this.valueSourceSpan=r,this.expSourceSpan=o}visit(e,t){return e.visitExpansionCase(this,t)}},bv=class extends Yr{name;value;keySpan;valueSpan;valueTokens;constructor(e,t,i,r,o,s,a){super(i,a),this.name=e,this.value=t,this.keySpan=r,this.valueSpan=o,this.valueTokens=s}visit(e,t){return e.visitAttribute(this,t)}},pi=class extends Yr{name;attrs;directives;children;isSelfClosing;startSourceSpan;endSourceSpan;isVoid;constructor(e,t,i,r,o,s,a,l=null,c,d){super(s,d),this.name=e,this.attrs=t,this.directives=i,this.children=r,this.isSelfClosing=o,this.startSourceSpan=a,this.endSourceSpan=l,this.isVoid=c}visit(e,t){return e.visitElement(this,t)}},Td=class{value;sourceSpan;constructor(e,t){this.value=e,this.sourceSpan=t}visit(e,t){return e.visitComment(this,t)}},hi=class extends Yr{name;parameters;children;nameSpan;startSourceSpan;endSourceSpan;constructor(e,t,i,r,o,s,a=null,l){super(r,l),this.name=e,this.parameters=t,this.children=i,this.nameSpan=o,this.startSourceSpan=s,this.endSourceSpan=a}visit(e,t){return e.visitBlock(this,t)}},Nn=class extends Yr{componentName;tagName;fullName;attrs;directives;children;isSelfClosing;startSourceSpan;endSourceSpan;constructor(e,t,i,r,o,s,a,l,c,d=null,p){super(l,p),this.componentName=e,this.tagName=t,this.fullName=i,this.attrs=r,this.directives=o,this.children=s,this.isSelfClosing=a,this.startSourceSpan=c,this.endSourceSpan=d}visit(e,t){return e.visitComponent(this,t)}},Sv=class{name;attrs;sourceSpan;startSourceSpan;endSourceSpan;constructor(e,t,i,r,o=null){this.name=e,this.attrs=t,this.sourceSpan=i,this.startSourceSpan=r,this.endSourceSpan=o}visit(e,t){return e.visitDirective(this,t)}},mh=class{expression;sourceSpan;constructor(e,t){this.expression=e,this.sourceSpan=t}visit(e,t){return e.visitBlockParameter(this,t)}},gh=class{name;value;sourceSpan;nameSpan;valueSpan;constructor(e,t,i,r,o){this.name=e,this.value=t,this.sourceSpan=i,this.nameSpan=r,this.valueSpan=o}visit(e,t){return e.visitLetDeclaration(this,t)}};function it(n,e,t=null){let i=[],r=n.visit?o=>n.visit(o,t)||o.visit(n,t):o=>o.visit(n,t);return e.forEach(o=>{let s=r(o);s&&i.push(s)}),i}var Id={AElig:"\xC6",AMP:"&",amp:"&",Aacute:"\xC1",Abreve:"\u0102",Acirc:"\xC2",Acy:"\u0410",Afr:"\u{1D504}",Agrave:"\xC0",Alpha:"\u0391",Amacr:"\u0100",And:"\u2A53",Aogon:"\u0104",Aopf:"\u{1D538}",ApplyFunction:"\u2061",af:"\u2061",Aring:"\xC5",angst:"\xC5",Ascr:"\u{1D49C}",Assign:"\u2254",colone:"\u2254",coloneq:"\u2254",Atilde:"\xC3",Auml:"\xC4",Backslash:"\u2216",setminus:"\u2216",setmn:"\u2216",smallsetminus:"\u2216",ssetmn:"\u2216",Barv:"\u2AE7",Barwed:"\u2306",doublebarwedge:"\u2306",Bcy:"\u0411",Because:"\u2235",becaus:"\u2235",because:"\u2235",Bernoullis:"\u212C",Bscr:"\u212C",bernou:"\u212C",Beta:"\u0392",Bfr:"\u{1D505}",Bopf:"\u{1D539}",Breve:"\u02D8",breve:"\u02D8",Bumpeq:"\u224E",HumpDownHump:"\u224E",bump:"\u224E",CHcy:"\u0427",COPY:"\xA9",copy:"\xA9",Cacute:"\u0106",Cap:"\u22D2",CapitalDifferentialD:"\u2145",DD:"\u2145",Cayleys:"\u212D",Cfr:"\u212D",Ccaron:"\u010C",Ccedil:"\xC7",Ccirc:"\u0108",Cconint:"\u2230",Cdot:"\u010A",Cedilla:"\xB8",cedil:"\xB8",CenterDot:"\xB7",centerdot:"\xB7",middot:"\xB7",Chi:"\u03A7",CircleDot:"\u2299",odot:"\u2299",CircleMinus:"\u2296",ominus:"\u2296",CirclePlus:"\u2295",oplus:"\u2295",CircleTimes:"\u2297",otimes:"\u2297",ClockwiseContourIntegral:"\u2232",cwconint:"\u2232",CloseCurlyDoubleQuote:"\u201D",rdquo:"\u201D",rdquor:"\u201D",CloseCurlyQuote:"\u2019",rsquo:"\u2019",rsquor:"\u2019",Colon:"\u2237",Proportion:"\u2237",Colone:"\u2A74",Congruent:"\u2261",equiv:"\u2261",Conint:"\u222F",DoubleContourIntegral:"\u222F",ContourIntegral:"\u222E",conint:"\u222E",oint:"\u222E",Copf:"\u2102",complexes:"\u2102",Coproduct:"\u2210",coprod:"\u2210",CounterClockwiseContourIntegral:"\u2233",awconint:"\u2233",Cross:"\u2A2F",Cscr:"\u{1D49E}",Cup:"\u22D3",CupCap:"\u224D",asympeq:"\u224D",DDotrahd:"\u2911",DJcy:"\u0402",DScy:"\u0405",DZcy:"\u040F",Dagger:"\u2021",ddagger:"\u2021",Darr:"\u21A1",Dashv:"\u2AE4",DoubleLeftTee:"\u2AE4",Dcaron:"\u010E",Dcy:"\u0414",Del:"\u2207",nabla:"\u2207",Delta:"\u0394",Dfr:"\u{1D507}",DiacriticalAcute:"\xB4",acute:"\xB4",DiacriticalDot:"\u02D9",dot:"\u02D9",DiacriticalDoubleAcute:"\u02DD",dblac:"\u02DD",DiacriticalGrave:"`",grave:"`",DiacriticalTilde:"\u02DC",tilde:"\u02DC",Diamond:"\u22C4",diam:"\u22C4",diamond:"\u22C4",DifferentialD:"\u2146",dd:"\u2146",Dopf:"\u{1D53B}",Dot:"\xA8",DoubleDot:"\xA8",die:"\xA8",uml:"\xA8",DotDot:"\u20DC",DotEqual:"\u2250",doteq:"\u2250",esdot:"\u2250",DoubleDownArrow:"\u21D3",Downarrow:"\u21D3",dArr:"\u21D3",DoubleLeftArrow:"\u21D0",Leftarrow:"\u21D0",lArr:"\u21D0",DoubleLeftRightArrow:"\u21D4",Leftrightarrow:"\u21D4",hArr:"\u21D4",iff:"\u21D4",DoubleLongLeftArrow:"\u27F8",Longleftarrow:"\u27F8",xlArr:"\u27F8",DoubleLongLeftRightArrow:"\u27FA",Longleftrightarrow:"\u27FA",xhArr:"\u27FA",DoubleLongRightArrow:"\u27F9",Longrightarrow:"\u27F9",xrArr:"\u27F9",DoubleRightArrow:"\u21D2",Implies:"\u21D2",Rightarrow:"\u21D2",rArr:"\u21D2",DoubleRightTee:"\u22A8",vDash:"\u22A8",DoubleUpArrow:"\u21D1",Uparrow:"\u21D1",uArr:"\u21D1",DoubleUpDownArrow:"\u21D5",Updownarrow:"\u21D5",vArr:"\u21D5",DoubleVerticalBar:"\u2225",par:"\u2225",parallel:"\u2225",shortparallel:"\u2225",spar:"\u2225",DownArrow:"\u2193",ShortDownArrow:"\u2193",darr:"\u2193",downarrow:"\u2193",DownArrowBar:"\u2913",DownArrowUpArrow:"\u21F5",duarr:"\u21F5",DownBreve:"\u0311",DownLeftRightVector:"\u2950",DownLeftTeeVector:"\u295E",DownLeftVector:"\u21BD",leftharpoondown:"\u21BD",lhard:"\u21BD",DownLeftVectorBar:"\u2956",DownRightTeeVector:"\u295F",DownRightVector:"\u21C1",rhard:"\u21C1",rightharpoondown:"\u21C1",DownRightVectorBar:"\u2957",DownTee:"\u22A4",top:"\u22A4",DownTeeArrow:"\u21A7",mapstodown:"\u21A7",Dscr:"\u{1D49F}",Dstrok:"\u0110",ENG:"\u014A",ETH:"\xD0",Eacute:"\xC9",Ecaron:"\u011A",Ecirc:"\xCA",Ecy:"\u042D",Edot:"\u0116",Efr:"\u{1D508}",Egrave:"\xC8",Element:"\u2208",in:"\u2208",isin:"\u2208",isinv:"\u2208",Emacr:"\u0112",EmptySmallSquare:"\u25FB",EmptyVerySmallSquare:"\u25AB",Eogon:"\u0118",Eopf:"\u{1D53C}",Epsilon:"\u0395",Equal:"\u2A75",EqualTilde:"\u2242",eqsim:"\u2242",esim:"\u2242",Equilibrium:"\u21CC",rightleftharpoons:"\u21CC",rlhar:"\u21CC",Escr:"\u2130",expectation:"\u2130",Esim:"\u2A73",Eta:"\u0397",Euml:"\xCB",Exists:"\u2203",exist:"\u2203",ExponentialE:"\u2147",ee:"\u2147",exponentiale:"\u2147",Fcy:"\u0424",Ffr:"\u{1D509}",FilledSmallSquare:"\u25FC",FilledVerySmallSquare:"\u25AA",blacksquare:"\u25AA",squarf:"\u25AA",squf:"\u25AA",Fopf:"\u{1D53D}",ForAll:"\u2200",forall:"\u2200",Fouriertrf:"\u2131",Fscr:"\u2131",GJcy:"\u0403",GT:">",gt:">",Gamma:"\u0393",Gammad:"\u03DC",Gbreve:"\u011E",Gcedil:"\u0122",Gcirc:"\u011C",Gcy:"\u0413",Gdot:"\u0120",Gfr:"\u{1D50A}",Gg:"\u22D9",ggg:"\u22D9",Gopf:"\u{1D53E}",GreaterEqual:"\u2265",ge:"\u2265",geq:"\u2265",GreaterEqualLess:"\u22DB",gel:"\u22DB",gtreqless:"\u22DB",GreaterFullEqual:"\u2267",gE:"\u2267",geqq:"\u2267",GreaterGreater:"\u2AA2",GreaterLess:"\u2277",gl:"\u2277",gtrless:"\u2277",GreaterSlantEqual:"\u2A7E",geqslant:"\u2A7E",ges:"\u2A7E",GreaterTilde:"\u2273",gsim:"\u2273",gtrsim:"\u2273",Gscr:"\u{1D4A2}",Gt:"\u226B",NestedGreaterGreater:"\u226B",gg:"\u226B",HARDcy:"\u042A",Hacek:"\u02C7",caron:"\u02C7",Hat:"^",Hcirc:"\u0124",Hfr:"\u210C",Poincareplane:"\u210C",HilbertSpace:"\u210B",Hscr:"\u210B",hamilt:"\u210B",Hopf:"\u210D",quaternions:"\u210D",HorizontalLine:"\u2500",boxh:"\u2500",Hstrok:"\u0126",HumpEqual:"\u224F",bumpe:"\u224F",bumpeq:"\u224F",IEcy:"\u0415",IJlig:"\u0132",IOcy:"\u0401",Iacute:"\xCD",Icirc:"\xCE",Icy:"\u0418",Idot:"\u0130",Ifr:"\u2111",Im:"\u2111",image:"\u2111",imagpart:"\u2111",Igrave:"\xCC",Imacr:"\u012A",ImaginaryI:"\u2148",ii:"\u2148",Int:"\u222C",Integral:"\u222B",int:"\u222B",Intersection:"\u22C2",bigcap:"\u22C2",xcap:"\u22C2",InvisibleComma:"\u2063",ic:"\u2063",InvisibleTimes:"\u2062",it:"\u2062",Iogon:"\u012E",Iopf:"\u{1D540}",Iota:"\u0399",Iscr:"\u2110",imagline:"\u2110",Itilde:"\u0128",Iukcy:"\u0406",Iuml:"\xCF",Jcirc:"\u0134",Jcy:"\u0419",Jfr:"\u{1D50D}",Jopf:"\u{1D541}",Jscr:"\u{1D4A5}",Jsercy:"\u0408",Jukcy:"\u0404",KHcy:"\u0425",KJcy:"\u040C",Kappa:"\u039A",Kcedil:"\u0136",Kcy:"\u041A",Kfr:"\u{1D50E}",Kopf:"\u{1D542}",Kscr:"\u{1D4A6}",LJcy:"\u0409",LT:"<",lt:"<",Lacute:"\u0139",Lambda:"\u039B",Lang:"\u27EA",Laplacetrf:"\u2112",Lscr:"\u2112",lagran:"\u2112",Larr:"\u219E",twoheadleftarrow:"\u219E",Lcaron:"\u013D",Lcedil:"\u013B",Lcy:"\u041B",LeftAngleBracket:"\u27E8",lang:"\u27E8",langle:"\u27E8",LeftArrow:"\u2190",ShortLeftArrow:"\u2190",larr:"\u2190",leftarrow:"\u2190",slarr:"\u2190",LeftArrowBar:"\u21E4",larrb:"\u21E4",LeftArrowRightArrow:"\u21C6",leftrightarrows:"\u21C6",lrarr:"\u21C6",LeftCeiling:"\u2308",lceil:"\u2308",LeftDoubleBracket:"\u27E6",lobrk:"\u27E6",LeftDownTeeVector:"\u2961",LeftDownVector:"\u21C3",dharl:"\u21C3",downharpoonleft:"\u21C3",LeftDownVectorBar:"\u2959",LeftFloor:"\u230A",lfloor:"\u230A",LeftRightArrow:"\u2194",harr:"\u2194",leftrightarrow:"\u2194",LeftRightVector:"\u294E",LeftTee:"\u22A3",dashv:"\u22A3",LeftTeeArrow:"\u21A4",mapstoleft:"\u21A4",LeftTeeVector:"\u295A",LeftTriangle:"\u22B2",vartriangleleft:"\u22B2",vltri:"\u22B2",LeftTriangleBar:"\u29CF",LeftTriangleEqual:"\u22B4",ltrie:"\u22B4",trianglelefteq:"\u22B4",LeftUpDownVector:"\u2951",LeftUpTeeVector:"\u2960",LeftUpVector:"\u21BF",uharl:"\u21BF",upharpoonleft:"\u21BF",LeftUpVectorBar:"\u2958",LeftVector:"\u21BC",leftharpoonup:"\u21BC",lharu:"\u21BC",LeftVectorBar:"\u2952",LessEqualGreater:"\u22DA",leg:"\u22DA",lesseqgtr:"\u22DA",LessFullEqual:"\u2266",lE:"\u2266",leqq:"\u2266",LessGreater:"\u2276",lessgtr:"\u2276",lg:"\u2276",LessLess:"\u2AA1",LessSlantEqual:"\u2A7D",leqslant:"\u2A7D",les:"\u2A7D",LessTilde:"\u2272",lesssim:"\u2272",lsim:"\u2272",Lfr:"\u{1D50F}",Ll:"\u22D8",Lleftarrow:"\u21DA",lAarr:"\u21DA",Lmidot:"\u013F",LongLeftArrow:"\u27F5",longleftarrow:"\u27F5",xlarr:"\u27F5",LongLeftRightArrow:"\u27F7",longleftrightarrow:"\u27F7",xharr:"\u27F7",LongRightArrow:"\u27F6",longrightarrow:"\u27F6",xrarr:"\u27F6",Lopf:"\u{1D543}",LowerLeftArrow:"\u2199",swarr:"\u2199",swarrow:"\u2199",LowerRightArrow:"\u2198",searr:"\u2198",searrow:"\u2198",Lsh:"\u21B0",lsh:"\u21B0",Lstrok:"\u0141",Lt:"\u226A",NestedLessLess:"\u226A",ll:"\u226A",Map:"\u2905",Mcy:"\u041C",MediumSpace:"\u205F",Mellintrf:"\u2133",Mscr:"\u2133",phmmat:"\u2133",Mfr:"\u{1D510}",MinusPlus:"\u2213",mnplus:"\u2213",mp:"\u2213",Mopf:"\u{1D544}",Mu:"\u039C",NJcy:"\u040A",Nacute:"\u0143",Ncaron:"\u0147",Ncedil:"\u0145",Ncy:"\u041D",NegativeMediumSpace:"\u200B",NegativeThickSpace:"\u200B",NegativeThinSpace:"\u200B",NegativeVeryThinSpace:"\u200B",ZeroWidthSpace:"\u200B",NewLine:`
`,Nfr:"\u{1D511}",NoBreak:"\u2060",NonBreakingSpace:"\xA0",nbsp:"\xA0",Nopf:"\u2115",naturals:"\u2115",Not:"\u2AEC",NotCongruent:"\u2262",nequiv:"\u2262",NotCupCap:"\u226D",NotDoubleVerticalBar:"\u2226",npar:"\u2226",nparallel:"\u2226",nshortparallel:"\u2226",nspar:"\u2226",NotElement:"\u2209",notin:"\u2209",notinva:"\u2209",NotEqual:"\u2260",ne:"\u2260",NotEqualTilde:"\u2242\u0338",nesim:"\u2242\u0338",NotExists:"\u2204",nexist:"\u2204",nexists:"\u2204",NotGreater:"\u226F",ngt:"\u226F",ngtr:"\u226F",NotGreaterEqual:"\u2271",nge:"\u2271",ngeq:"\u2271",NotGreaterFullEqual:"\u2267\u0338",ngE:"\u2267\u0338",ngeqq:"\u2267\u0338",NotGreaterGreater:"\u226B\u0338",nGtv:"\u226B\u0338",NotGreaterLess:"\u2279",ntgl:"\u2279",NotGreaterSlantEqual:"\u2A7E\u0338",ngeqslant:"\u2A7E\u0338",nges:"\u2A7E\u0338",NotGreaterTilde:"\u2275",ngsim:"\u2275",NotHumpDownHump:"\u224E\u0338",nbump:"\u224E\u0338",NotHumpEqual:"\u224F\u0338",nbumpe:"\u224F\u0338",NotLeftTriangle:"\u22EA",nltri:"\u22EA",ntriangleleft:"\u22EA",NotLeftTriangleBar:"\u29CF\u0338",NotLeftTriangleEqual:"\u22EC",nltrie:"\u22EC",ntrianglelefteq:"\u22EC",NotLess:"\u226E",nless:"\u226E",nlt:"\u226E",NotLessEqual:"\u2270",nle:"\u2270",nleq:"\u2270",NotLessGreater:"\u2278",ntlg:"\u2278",NotLessLess:"\u226A\u0338",nLtv:"\u226A\u0338",NotLessSlantEqual:"\u2A7D\u0338",nleqslant:"\u2A7D\u0338",nles:"\u2A7D\u0338",NotLessTilde:"\u2274",nlsim:"\u2274",NotNestedGreaterGreater:"\u2AA2\u0338",NotNestedLessLess:"\u2AA1\u0338",NotPrecedes:"\u2280",npr:"\u2280",nprec:"\u2280",NotPrecedesEqual:"\u2AAF\u0338",npre:"\u2AAF\u0338",npreceq:"\u2AAF\u0338",NotPrecedesSlantEqual:"\u22E0",nprcue:"\u22E0",NotReverseElement:"\u220C",notni:"\u220C",notniva:"\u220C",NotRightTriangle:"\u22EB",nrtri:"\u22EB",ntriangleright:"\u22EB",NotRightTriangleBar:"\u29D0\u0338",NotRightTriangleEqual:"\u22ED",nrtrie:"\u22ED",ntrianglerighteq:"\u22ED",NotSquareSubset:"\u228F\u0338",NotSquareSubsetEqual:"\u22E2",nsqsube:"\u22E2",NotSquareSuperset:"\u2290\u0338",NotSquareSupersetEqual:"\u22E3",nsqsupe:"\u22E3",NotSubset:"\u2282\u20D2",nsubset:"\u2282\u20D2",vnsub:"\u2282\u20D2",NotSubsetEqual:"\u2288",nsube:"\u2288",nsubseteq:"\u2288",NotSucceeds:"\u2281",nsc:"\u2281",nsucc:"\u2281",NotSucceedsEqual:"\u2AB0\u0338",nsce:"\u2AB0\u0338",nsucceq:"\u2AB0\u0338",NotSucceedsSlantEqual:"\u22E1",nsccue:"\u22E1",NotSucceedsTilde:"\u227F\u0338",NotSuperset:"\u2283\u20D2",nsupset:"\u2283\u20D2",vnsup:"\u2283\u20D2",NotSupersetEqual:"\u2289",nsupe:"\u2289",nsupseteq:"\u2289",NotTilde:"\u2241",nsim:"\u2241",NotTildeEqual:"\u2244",nsime:"\u2244",nsimeq:"\u2244",NotTildeFullEqual:"\u2247",ncong:"\u2247",NotTildeTilde:"\u2249",nap:"\u2249",napprox:"\u2249",NotVerticalBar:"\u2224",nmid:"\u2224",nshortmid:"\u2224",nsmid:"\u2224",Nscr:"\u{1D4A9}",Ntilde:"\xD1",Nu:"\u039D",OElig:"\u0152",Oacute:"\xD3",Ocirc:"\xD4",Ocy:"\u041E",Odblac:"\u0150",Ofr:"\u{1D512}",Ograve:"\xD2",Omacr:"\u014C",Omega:"\u03A9",ohm:"\u03A9",Omicron:"\u039F",Oopf:"\u{1D546}",OpenCurlyDoubleQuote:"\u201C",ldquo:"\u201C",OpenCurlyQuote:"\u2018",lsquo:"\u2018",Or:"\u2A54",Oscr:"\u{1D4AA}",Oslash:"\xD8",Otilde:"\xD5",Otimes:"\u2A37",Ouml:"\xD6",OverBar:"\u203E",oline:"\u203E",OverBrace:"\u23DE",OverBracket:"\u23B4",tbrk:"\u23B4",OverParenthesis:"\u23DC",PartialD:"\u2202",part:"\u2202",Pcy:"\u041F",Pfr:"\u{1D513}",Phi:"\u03A6",Pi:"\u03A0",PlusMinus:"\xB1",plusmn:"\xB1",pm:"\xB1",Popf:"\u2119",primes:"\u2119",Pr:"\u2ABB",Precedes:"\u227A",pr:"\u227A",prec:"\u227A",PrecedesEqual:"\u2AAF",pre:"\u2AAF",preceq:"\u2AAF",PrecedesSlantEqual:"\u227C",prcue:"\u227C",preccurlyeq:"\u227C",PrecedesTilde:"\u227E",precsim:"\u227E",prsim:"\u227E",Prime:"\u2033",Product:"\u220F",prod:"\u220F",Proportional:"\u221D",prop:"\u221D",propto:"\u221D",varpropto:"\u221D",vprop:"\u221D",Pscr:"\u{1D4AB}",Psi:"\u03A8",QUOT:'"',quot:'"',Qfr:"\u{1D514}",Qopf:"\u211A",rationals:"\u211A",Qscr:"\u{1D4AC}",RBarr:"\u2910",drbkarow:"\u2910",REG:"\xAE",circledR:"\xAE",reg:"\xAE",Racute:"\u0154",Rang:"\u27EB",Rarr:"\u21A0",twoheadrightarrow:"\u21A0",Rarrtl:"\u2916",Rcaron:"\u0158",Rcedil:"\u0156",Rcy:"\u0420",Re:"\u211C",Rfr:"\u211C",real:"\u211C",realpart:"\u211C",ReverseElement:"\u220B",SuchThat:"\u220B",ni:"\u220B",niv:"\u220B",ReverseEquilibrium:"\u21CB",leftrightharpoons:"\u21CB",lrhar:"\u21CB",ReverseUpEquilibrium:"\u296F",duhar:"\u296F",Rho:"\u03A1",RightAngleBracket:"\u27E9",rang:"\u27E9",rangle:"\u27E9",RightArrow:"\u2192",ShortRightArrow:"\u2192",rarr:"\u2192",rightarrow:"\u2192",srarr:"\u2192",RightArrowBar:"\u21E5",rarrb:"\u21E5",RightArrowLeftArrow:"\u21C4",rightleftarrows:"\u21C4",rlarr:"\u21C4",RightCeiling:"\u2309",rceil:"\u2309",RightDoubleBracket:"\u27E7",robrk:"\u27E7",RightDownTeeVector:"\u295D",RightDownVector:"\u21C2",dharr:"\u21C2",downharpoonright:"\u21C2",RightDownVectorBar:"\u2955",RightFloor:"\u230B",rfloor:"\u230B",RightTee:"\u22A2",vdash:"\u22A2",RightTeeArrow:"\u21A6",map:"\u21A6",mapsto:"\u21A6",RightTeeVector:"\u295B",RightTriangle:"\u22B3",vartriangleright:"\u22B3",vrtri:"\u22B3",RightTriangleBar:"\u29D0",RightTriangleEqual:"\u22B5",rtrie:"\u22B5",trianglerighteq:"\u22B5",RightUpDownVector:"\u294F",RightUpTeeVector:"\u295C",RightUpVector:"\u21BE",uharr:"\u21BE",upharpoonright:"\u21BE",RightUpVectorBar:"\u2954",RightVector:"\u21C0",rharu:"\u21C0",rightharpoonup:"\u21C0",RightVectorBar:"\u2953",Ropf:"\u211D",reals:"\u211D",RoundImplies:"\u2970",Rrightarrow:"\u21DB",rAarr:"\u21DB",Rscr:"\u211B",realine:"\u211B",Rsh:"\u21B1",rsh:"\u21B1",RuleDelayed:"\u29F4",SHCHcy:"\u0429",SHcy:"\u0428",SOFTcy:"\u042C",Sacute:"\u015A",Sc:"\u2ABC",Scaron:"\u0160",Scedil:"\u015E",Scirc:"\u015C",Scy:"\u0421",Sfr:"\u{1D516}",ShortUpArrow:"\u2191",UpArrow:"\u2191",uarr:"\u2191",uparrow:"\u2191",Sigma:"\u03A3",SmallCircle:"\u2218",compfn:"\u2218",Sopf:"\u{1D54A}",Sqrt:"\u221A",radic:"\u221A",Square:"\u25A1",squ:"\u25A1",square:"\u25A1",SquareIntersection:"\u2293",sqcap:"\u2293",SquareSubset:"\u228F",sqsub:"\u228F",sqsubset:"\u228F",SquareSubsetEqual:"\u2291",sqsube:"\u2291",sqsubseteq:"\u2291",SquareSuperset:"\u2290",sqsup:"\u2290",sqsupset:"\u2290",SquareSupersetEqual:"\u2292",sqsupe:"\u2292",sqsupseteq:"\u2292",SquareUnion:"\u2294",sqcup:"\u2294",Sscr:"\u{1D4AE}",Star:"\u22C6",sstarf:"\u22C6",Sub:"\u22D0",Subset:"\u22D0",SubsetEqual:"\u2286",sube:"\u2286",subseteq:"\u2286",Succeeds:"\u227B",sc:"\u227B",succ:"\u227B",SucceedsEqual:"\u2AB0",sce:"\u2AB0",succeq:"\u2AB0",SucceedsSlantEqual:"\u227D",sccue:"\u227D",succcurlyeq:"\u227D",SucceedsTilde:"\u227F",scsim:"\u227F",succsim:"\u227F",Sum:"\u2211",sum:"\u2211",Sup:"\u22D1",Supset:"\u22D1",Superset:"\u2283",sup:"\u2283",supset:"\u2283",SupersetEqual:"\u2287",supe:"\u2287",supseteq:"\u2287",THORN:"\xDE",TRADE:"\u2122",trade:"\u2122",TSHcy:"\u040B",TScy:"\u0426",Tab:"	",Tau:"\u03A4",Tcaron:"\u0164",Tcedil:"\u0162",Tcy:"\u0422",Tfr:"\u{1D517}",Therefore:"\u2234",there4:"\u2234",therefore:"\u2234",Theta:"\u0398",ThickSpace:"\u205F\u200A",ThinSpace:"\u2009",thinsp:"\u2009",Tilde:"\u223C",sim:"\u223C",thicksim:"\u223C",thksim:"\u223C",TildeEqual:"\u2243",sime:"\u2243",simeq:"\u2243",TildeFullEqual:"\u2245",cong:"\u2245",TildeTilde:"\u2248",ap:"\u2248",approx:"\u2248",asymp:"\u2248",thickapprox:"\u2248",thkap:"\u2248",Topf:"\u{1D54B}",TripleDot:"\u20DB",tdot:"\u20DB",Tscr:"\u{1D4AF}",Tstrok:"\u0166",Uacute:"\xDA",Uarr:"\u219F",Uarrocir:"\u2949",Ubrcy:"\u040E",Ubreve:"\u016C",Ucirc:"\xDB",Ucy:"\u0423",Udblac:"\u0170",Ufr:"\u{1D518}",Ugrave:"\xD9",Umacr:"\u016A",UnderBar:"_",lowbar:"_",UnderBrace:"\u23DF",UnderBracket:"\u23B5",bbrk:"\u23B5",UnderParenthesis:"\u23DD",Union:"\u22C3",bigcup:"\u22C3",xcup:"\u22C3",UnionPlus:"\u228E",uplus:"\u228E",Uogon:"\u0172",Uopf:"\u{1D54C}",UpArrowBar:"\u2912",UpArrowDownArrow:"\u21C5",udarr:"\u21C5",UpDownArrow:"\u2195",updownarrow:"\u2195",varr:"\u2195",UpEquilibrium:"\u296E",udhar:"\u296E",UpTee:"\u22A5",bot:"\u22A5",bottom:"\u22A5",perp:"\u22A5",UpTeeArrow:"\u21A5",mapstoup:"\u21A5",UpperLeftArrow:"\u2196",nwarr:"\u2196",nwarrow:"\u2196",UpperRightArrow:"\u2197",nearr:"\u2197",nearrow:"\u2197",Upsi:"\u03D2",upsih:"\u03D2",Upsilon:"\u03A5",Uring:"\u016E",Uscr:"\u{1D4B0}",Utilde:"\u0168",Uuml:"\xDC",VDash:"\u22AB",Vbar:"\u2AEB",Vcy:"\u0412",Vdash:"\u22A9",Vdashl:"\u2AE6",Vee:"\u22C1",bigvee:"\u22C1",xvee:"\u22C1",Verbar:"\u2016",Vert:"\u2016",VerticalBar:"\u2223",mid:"\u2223",shortmid:"\u2223",smid:"\u2223",VerticalLine:"|",verbar:"|",vert:"|",VerticalSeparator:"\u2758",VerticalTilde:"\u2240",wr:"\u2240",wreath:"\u2240",VeryThinSpace:"\u200A",hairsp:"\u200A",Vfr:"\u{1D519}",Vopf:"\u{1D54D}",Vscr:"\u{1D4B1}",Vvdash:"\u22AA",Wcirc:"\u0174",Wedge:"\u22C0",bigwedge:"\u22C0",xwedge:"\u22C0",Wfr:"\u{1D51A}",Wopf:"\u{1D54E}",Wscr:"\u{1D4B2}",Xfr:"\u{1D51B}",Xi:"\u039E",Xopf:"\u{1D54F}",Xscr:"\u{1D4B3}",YAcy:"\u042F",YIcy:"\u0407",YUcy:"\u042E",Yacute:"\xDD",Ycirc:"\u0176",Ycy:"\u042B",Yfr:"\u{1D51C}",Yopf:"\u{1D550}",Yscr:"\u{1D4B4}",Yuml:"\u0178",ZHcy:"\u0416",Zacute:"\u0179",Zcaron:"\u017D",Zcy:"\u0417",Zdot:"\u017B",Zeta:"\u0396",Zfr:"\u2128",zeetrf:"\u2128",Zopf:"\u2124",integers:"\u2124",Zscr:"\u{1D4B5}",aacute:"\xE1",abreve:"\u0103",ac:"\u223E",mstpos:"\u223E",acE:"\u223E\u0333",acd:"\u223F",acirc:"\xE2",acy:"\u0430",aelig:"\xE6",afr:"\u{1D51E}",agrave:"\xE0",alefsym:"\u2135",aleph:"\u2135",alpha:"\u03B1",amacr:"\u0101",amalg:"\u2A3F",and:"\u2227",wedge:"\u2227",andand:"\u2A55",andd:"\u2A5C",andslope:"\u2A58",andv:"\u2A5A",ang:"\u2220",angle:"\u2220",ange:"\u29A4",angmsd:"\u2221",measuredangle:"\u2221",angmsdaa:"\u29A8",angmsdab:"\u29A9",angmsdac:"\u29AA",angmsdad:"\u29AB",angmsdae:"\u29AC",angmsdaf:"\u29AD",angmsdag:"\u29AE",angmsdah:"\u29AF",angrt:"\u221F",angrtvb:"\u22BE",angrtvbd:"\u299D",angsph:"\u2222",angzarr:"\u237C",aogon:"\u0105",aopf:"\u{1D552}",apE:"\u2A70",apacir:"\u2A6F",ape:"\u224A",approxeq:"\u224A",apid:"\u224B",apos:"'",aring:"\xE5",ascr:"\u{1D4B6}",ast:"*",midast:"*",atilde:"\xE3",auml:"\xE4",awint:"\u2A11",bNot:"\u2AED",backcong:"\u224C",bcong:"\u224C",backepsilon:"\u03F6",bepsi:"\u03F6",backprime:"\u2035",bprime:"\u2035",backsim:"\u223D",bsim:"\u223D",backsimeq:"\u22CD",bsime:"\u22CD",barvee:"\u22BD",barwed:"\u2305",barwedge:"\u2305",bbrktbrk:"\u23B6",bcy:"\u0431",bdquo:"\u201E",ldquor:"\u201E",bemptyv:"\u29B0",beta:"\u03B2",beth:"\u2136",between:"\u226C",twixt:"\u226C",bfr:"\u{1D51F}",bigcirc:"\u25EF",xcirc:"\u25EF",bigodot:"\u2A00",xodot:"\u2A00",bigoplus:"\u2A01",xoplus:"\u2A01",bigotimes:"\u2A02",xotime:"\u2A02",bigsqcup:"\u2A06",xsqcup:"\u2A06",bigstar:"\u2605",starf:"\u2605",bigtriangledown:"\u25BD",xdtri:"\u25BD",bigtriangleup:"\u25B3",xutri:"\u25B3",biguplus:"\u2A04",xuplus:"\u2A04",bkarow:"\u290D",rbarr:"\u290D",blacklozenge:"\u29EB",lozf:"\u29EB",blacktriangle:"\u25B4",utrif:"\u25B4",blacktriangledown:"\u25BE",dtrif:"\u25BE",blacktriangleleft:"\u25C2",ltrif:"\u25C2",blacktriangleright:"\u25B8",rtrif:"\u25B8",blank:"\u2423",blk12:"\u2592",blk14:"\u2591",blk34:"\u2593",block:"\u2588",bne:"=\u20E5",bnequiv:"\u2261\u20E5",bnot:"\u2310",bopf:"\u{1D553}",bowtie:"\u22C8",boxDL:"\u2557",boxDR:"\u2554",boxDl:"\u2556",boxDr:"\u2553",boxH:"\u2550",boxHD:"\u2566",boxHU:"\u2569",boxHd:"\u2564",boxHu:"\u2567",boxUL:"\u255D",boxUR:"\u255A",boxUl:"\u255C",boxUr:"\u2559",boxV:"\u2551",boxVH:"\u256C",boxVL:"\u2563",boxVR:"\u2560",boxVh:"\u256B",boxVl:"\u2562",boxVr:"\u255F",boxbox:"\u29C9",boxdL:"\u2555",boxdR:"\u2552",boxdl:"\u2510",boxdr:"\u250C",boxhD:"\u2565",boxhU:"\u2568",boxhd:"\u252C",boxhu:"\u2534",boxminus:"\u229F",minusb:"\u229F",boxplus:"\u229E",plusb:"\u229E",boxtimes:"\u22A0",timesb:"\u22A0",boxuL:"\u255B",boxuR:"\u2558",boxul:"\u2518",boxur:"\u2514",boxv:"\u2502",boxvH:"\u256A",boxvL:"\u2561",boxvR:"\u255E",boxvh:"\u253C",boxvl:"\u2524",boxvr:"\u251C",brvbar:"\xA6",bscr:"\u{1D4B7}",bsemi:"\u204F",bsol:"\\",bsolb:"\u29C5",bsolhsub:"\u27C8",bull:"\u2022",bullet:"\u2022",bumpE:"\u2AAE",cacute:"\u0107",cap:"\u2229",capand:"\u2A44",capbrcup:"\u2A49",capcap:"\u2A4B",capcup:"\u2A47",capdot:"\u2A40",caps:"\u2229\uFE00",caret:"\u2041",ccaps:"\u2A4D",ccaron:"\u010D",ccedil:"\xE7",ccirc:"\u0109",ccups:"\u2A4C",ccupssm:"\u2A50",cdot:"\u010B",cemptyv:"\u29B2",cent:"\xA2",cfr:"\u{1D520}",chcy:"\u0447",check:"\u2713",checkmark:"\u2713",chi:"\u03C7",cir:"\u25CB",cirE:"\u29C3",circ:"\u02C6",circeq:"\u2257",cire:"\u2257",circlearrowleft:"\u21BA",olarr:"\u21BA",circlearrowright:"\u21BB",orarr:"\u21BB",circledS:"\u24C8",oS:"\u24C8",circledast:"\u229B",oast:"\u229B",circledcirc:"\u229A",ocir:"\u229A",circleddash:"\u229D",odash:"\u229D",cirfnint:"\u2A10",cirmid:"\u2AEF",cirscir:"\u29C2",clubs:"\u2663",clubsuit:"\u2663",colon:":",comma:",",commat:"@",comp:"\u2201",complement:"\u2201",congdot:"\u2A6D",copf:"\u{1D554}",copysr:"\u2117",crarr:"\u21B5",cross:"\u2717",cscr:"\u{1D4B8}",csub:"\u2ACF",csube:"\u2AD1",csup:"\u2AD0",csupe:"\u2AD2",ctdot:"\u22EF",cudarrl:"\u2938",cudarrr:"\u2935",cuepr:"\u22DE",curlyeqprec:"\u22DE",cuesc:"\u22DF",curlyeqsucc:"\u22DF",cularr:"\u21B6",curvearrowleft:"\u21B6",cularrp:"\u293D",cup:"\u222A",cupbrcap:"\u2A48",cupcap:"\u2A46",cupcup:"\u2A4A",cupdot:"\u228D",cupor:"\u2A45",cups:"\u222A\uFE00",curarr:"\u21B7",curvearrowright:"\u21B7",curarrm:"\u293C",curlyvee:"\u22CE",cuvee:"\u22CE",curlywedge:"\u22CF",cuwed:"\u22CF",curren:"\xA4",cwint:"\u2231",cylcty:"\u232D",dHar:"\u2965",dagger:"\u2020",daleth:"\u2138",dash:"\u2010",hyphen:"\u2010",dbkarow:"\u290F",rBarr:"\u290F",dcaron:"\u010F",dcy:"\u0434",ddarr:"\u21CA",downdownarrows:"\u21CA",ddotseq:"\u2A77",eDDot:"\u2A77",deg:"\xB0",delta:"\u03B4",demptyv:"\u29B1",dfisht:"\u297F",dfr:"\u{1D521}",diamondsuit:"\u2666",diams:"\u2666",digamma:"\u03DD",gammad:"\u03DD",disin:"\u22F2",div:"\xF7",divide:"\xF7",divideontimes:"\u22C7",divonx:"\u22C7",djcy:"\u0452",dlcorn:"\u231E",llcorner:"\u231E",dlcrop:"\u230D",dollar:"$",dopf:"\u{1D555}",doteqdot:"\u2251",eDot:"\u2251",dotminus:"\u2238",minusd:"\u2238",dotplus:"\u2214",plusdo:"\u2214",dotsquare:"\u22A1",sdotb:"\u22A1",drcorn:"\u231F",lrcorner:"\u231F",drcrop:"\u230C",dscr:"\u{1D4B9}",dscy:"\u0455",dsol:"\u29F6",dstrok:"\u0111",dtdot:"\u22F1",dtri:"\u25BF",triangledown:"\u25BF",dwangle:"\u29A6",dzcy:"\u045F",dzigrarr:"\u27FF",eacute:"\xE9",easter:"\u2A6E",ecaron:"\u011B",ecir:"\u2256",eqcirc:"\u2256",ecirc:"\xEA",ecolon:"\u2255",eqcolon:"\u2255",ecy:"\u044D",edot:"\u0117",efDot:"\u2252",fallingdotseq:"\u2252",efr:"\u{1D522}",eg:"\u2A9A",egrave:"\xE8",egs:"\u2A96",eqslantgtr:"\u2A96",egsdot:"\u2A98",el:"\u2A99",elinters:"\u23E7",ell:"\u2113",els:"\u2A95",eqslantless:"\u2A95",elsdot:"\u2A97",emacr:"\u0113",empty:"\u2205",emptyset:"\u2205",emptyv:"\u2205",varnothing:"\u2205",emsp13:"\u2004",emsp14:"\u2005",emsp:"\u2003",eng:"\u014B",ensp:"\u2002",eogon:"\u0119",eopf:"\u{1D556}",epar:"\u22D5",eparsl:"\u29E3",eplus:"\u2A71",epsi:"\u03B5",epsilon:"\u03B5",epsiv:"\u03F5",straightepsilon:"\u03F5",varepsilon:"\u03F5",equals:"=",equest:"\u225F",questeq:"\u225F",equivDD:"\u2A78",eqvparsl:"\u29E5",erDot:"\u2253",risingdotseq:"\u2253",erarr:"\u2971",escr:"\u212F",eta:"\u03B7",eth:"\xF0",euml:"\xEB",euro:"\u20AC",excl:"!",fcy:"\u0444",female:"\u2640",ffilig:"\uFB03",fflig:"\uFB00",ffllig:"\uFB04",ffr:"\u{1D523}",filig:"\uFB01",fjlig:"fj",flat:"\u266D",fllig:"\uFB02",fltns:"\u25B1",fnof:"\u0192",fopf:"\u{1D557}",fork:"\u22D4",pitchfork:"\u22D4",forkv:"\u2AD9",fpartint:"\u2A0D",frac12:"\xBD",half:"\xBD",frac13:"\u2153",frac14:"\xBC",frac15:"\u2155",frac16:"\u2159",frac18:"\u215B",frac23:"\u2154",frac25:"\u2156",frac34:"\xBE",frac35:"\u2157",frac38:"\u215C",frac45:"\u2158",frac56:"\u215A",frac58:"\u215D",frac78:"\u215E",frasl:"\u2044",frown:"\u2322",sfrown:"\u2322",fscr:"\u{1D4BB}",gEl:"\u2A8C",gtreqqless:"\u2A8C",gacute:"\u01F5",gamma:"\u03B3",gap:"\u2A86",gtrapprox:"\u2A86",gbreve:"\u011F",gcirc:"\u011D",gcy:"\u0433",gdot:"\u0121",gescc:"\u2AA9",gesdot:"\u2A80",gesdoto:"\u2A82",gesdotol:"\u2A84",gesl:"\u22DB\uFE00",gesles:"\u2A94",gfr:"\u{1D524}",gimel:"\u2137",gjcy:"\u0453",glE:"\u2A92",gla:"\u2AA5",glj:"\u2AA4",gnE:"\u2269",gneqq:"\u2269",gnap:"\u2A8A",gnapprox:"\u2A8A",gne:"\u2A88",gneq:"\u2A88",gnsim:"\u22E7",gopf:"\u{1D558}",gscr:"\u210A",gsime:"\u2A8E",gsiml:"\u2A90",gtcc:"\u2AA7",gtcir:"\u2A7A",gtdot:"\u22D7",gtrdot:"\u22D7",gtlPar:"\u2995",gtquest:"\u2A7C",gtrarr:"\u2978",gvertneqq:"\u2269\uFE00",gvnE:"\u2269\uFE00",hardcy:"\u044A",harrcir:"\u2948",harrw:"\u21AD",leftrightsquigarrow:"\u21AD",hbar:"\u210F",hslash:"\u210F",planck:"\u210F",plankv:"\u210F",hcirc:"\u0125",hearts:"\u2665",heartsuit:"\u2665",hellip:"\u2026",mldr:"\u2026",hercon:"\u22B9",hfr:"\u{1D525}",hksearow:"\u2925",searhk:"\u2925",hkswarow:"\u2926",swarhk:"\u2926",hoarr:"\u21FF",homtht:"\u223B",hookleftarrow:"\u21A9",larrhk:"\u21A9",hookrightarrow:"\u21AA",rarrhk:"\u21AA",hopf:"\u{1D559}",horbar:"\u2015",hscr:"\u{1D4BD}",hstrok:"\u0127",hybull:"\u2043",iacute:"\xED",icirc:"\xEE",icy:"\u0438",iecy:"\u0435",iexcl:"\xA1",ifr:"\u{1D526}",igrave:"\xEC",iiiint:"\u2A0C",qint:"\u2A0C",iiint:"\u222D",tint:"\u222D",iinfin:"\u29DC",iiota:"\u2129",ijlig:"\u0133",imacr:"\u012B",imath:"\u0131",inodot:"\u0131",imof:"\u22B7",imped:"\u01B5",incare:"\u2105",infin:"\u221E",infintie:"\u29DD",intcal:"\u22BA",intercal:"\u22BA",intlarhk:"\u2A17",intprod:"\u2A3C",iprod:"\u2A3C",iocy:"\u0451",iogon:"\u012F",iopf:"\u{1D55A}",iota:"\u03B9",iquest:"\xBF",iscr:"\u{1D4BE}",isinE:"\u22F9",isindot:"\u22F5",isins:"\u22F4",isinsv:"\u22F3",itilde:"\u0129",iukcy:"\u0456",iuml:"\xEF",jcirc:"\u0135",jcy:"\u0439",jfr:"\u{1D527}",jmath:"\u0237",jopf:"\u{1D55B}",jscr:"\u{1D4BF}",jsercy:"\u0458",jukcy:"\u0454",kappa:"\u03BA",kappav:"\u03F0",varkappa:"\u03F0",kcedil:"\u0137",kcy:"\u043A",kfr:"\u{1D528}",kgreen:"\u0138",khcy:"\u0445",kjcy:"\u045C",kopf:"\u{1D55C}",kscr:"\u{1D4C0}",lAtail:"\u291B",lBarr:"\u290E",lEg:"\u2A8B",lesseqqgtr:"\u2A8B",lHar:"\u2962",lacute:"\u013A",laemptyv:"\u29B4",lambda:"\u03BB",langd:"\u2991",lap:"\u2A85",lessapprox:"\u2A85",laquo:"\xAB",larrbfs:"\u291F",larrfs:"\u291D",larrlp:"\u21AB",looparrowleft:"\u21AB",larrpl:"\u2939",larrsim:"\u2973",larrtl:"\u21A2",leftarrowtail:"\u21A2",lat:"\u2AAB",latail:"\u2919",late:"\u2AAD",lates:"\u2AAD\uFE00",lbarr:"\u290C",lbbrk:"\u2772",lbrace:"{",lcub:"{",lbrack:"[",lsqb:"[",lbrke:"\u298B",lbrksld:"\u298F",lbrkslu:"\u298D",lcaron:"\u013E",lcedil:"\u013C",lcy:"\u043B",ldca:"\u2936",ldrdhar:"\u2967",ldrushar:"\u294B",ldsh:"\u21B2",le:"\u2264",leq:"\u2264",leftleftarrows:"\u21C7",llarr:"\u21C7",leftthreetimes:"\u22CB",lthree:"\u22CB",lescc:"\u2AA8",lesdot:"\u2A7F",lesdoto:"\u2A81",lesdotor:"\u2A83",lesg:"\u22DA\uFE00",lesges:"\u2A93",lessdot:"\u22D6",ltdot:"\u22D6",lfisht:"\u297C",lfr:"\u{1D529}",lgE:"\u2A91",lharul:"\u296A",lhblk:"\u2584",ljcy:"\u0459",llhard:"\u296B",lltri:"\u25FA",lmidot:"\u0140",lmoust:"\u23B0",lmoustache:"\u23B0",lnE:"\u2268",lneqq:"\u2268",lnap:"\u2A89",lnapprox:"\u2A89",lne:"\u2A87",lneq:"\u2A87",lnsim:"\u22E6",loang:"\u27EC",loarr:"\u21FD",longmapsto:"\u27FC",xmap:"\u27FC",looparrowright:"\u21AC",rarrlp:"\u21AC",lopar:"\u2985",lopf:"\u{1D55D}",loplus:"\u2A2D",lotimes:"\u2A34",lowast:"\u2217",loz:"\u25CA",lozenge:"\u25CA",lpar:"(",lparlt:"\u2993",lrhard:"\u296D",lrm:"\u200E",lrtri:"\u22BF",lsaquo:"\u2039",lscr:"\u{1D4C1}",lsime:"\u2A8D",lsimg:"\u2A8F",lsquor:"\u201A",sbquo:"\u201A",lstrok:"\u0142",ltcc:"\u2AA6",ltcir:"\u2A79",ltimes:"\u22C9",ltlarr:"\u2976",ltquest:"\u2A7B",ltrPar:"\u2996",ltri:"\u25C3",triangleleft:"\u25C3",lurdshar:"\u294A",luruhar:"\u2966",lvertneqq:"\u2268\uFE00",lvnE:"\u2268\uFE00",mDDot:"\u223A",macr:"\xAF",strns:"\xAF",male:"\u2642",malt:"\u2720",maltese:"\u2720",marker:"\u25AE",mcomma:"\u2A29",mcy:"\u043C",mdash:"\u2014",mfr:"\u{1D52A}",mho:"\u2127",micro:"\xB5",midcir:"\u2AF0",minus:"\u2212",minusdu:"\u2A2A",mlcp:"\u2ADB",models:"\u22A7",mopf:"\u{1D55E}",mscr:"\u{1D4C2}",mu:"\u03BC",multimap:"\u22B8",mumap:"\u22B8",nGg:"\u22D9\u0338",nGt:"\u226B\u20D2",nLeftarrow:"\u21CD",nlArr:"\u21CD",nLeftrightarrow:"\u21CE",nhArr:"\u21CE",nLl:"\u22D8\u0338",nLt:"\u226A\u20D2",nRightarrow:"\u21CF",nrArr:"\u21CF",nVDash:"\u22AF",nVdash:"\u22AE",nacute:"\u0144",nang:"\u2220\u20D2",napE:"\u2A70\u0338",napid:"\u224B\u0338",napos:"\u0149",natur:"\u266E",natural:"\u266E",ncap:"\u2A43",ncaron:"\u0148",ncedil:"\u0146",ncongdot:"\u2A6D\u0338",ncup:"\u2A42",ncy:"\u043D",ndash:"\u2013",neArr:"\u21D7",nearhk:"\u2924",nedot:"\u2250\u0338",nesear:"\u2928",toea:"\u2928",nfr:"\u{1D52B}",nharr:"\u21AE",nleftrightarrow:"\u21AE",nhpar:"\u2AF2",nis:"\u22FC",nisd:"\u22FA",njcy:"\u045A",nlE:"\u2266\u0338",nleqq:"\u2266\u0338",nlarr:"\u219A",nleftarrow:"\u219A",nldr:"\u2025",nopf:"\u{1D55F}",not:"\xAC",notinE:"\u22F9\u0338",notindot:"\u22F5\u0338",notinvb:"\u22F7",notinvc:"\u22F6",notnivb:"\u22FE",notnivc:"\u22FD",nparsl:"\u2AFD\u20E5",npart:"\u2202\u0338",npolint:"\u2A14",nrarr:"\u219B",nrightarrow:"\u219B",nrarrc:"\u2933\u0338",nrarrw:"\u219D\u0338",nscr:"\u{1D4C3}",nsub:"\u2284",nsubE:"\u2AC5\u0338",nsubseteqq:"\u2AC5\u0338",nsup:"\u2285",nsupE:"\u2AC6\u0338",nsupseteqq:"\u2AC6\u0338",ntilde:"\xF1",nu:"\u03BD",num:"#",numero:"\u2116",numsp:"\u2007",nvDash:"\u22AD",nvHarr:"\u2904",nvap:"\u224D\u20D2",nvdash:"\u22AC",nvge:"\u2265\u20D2",nvgt:">\u20D2",nvinfin:"\u29DE",nvlArr:"\u2902",nvle:"\u2264\u20D2",nvlt:"<\u20D2",nvltrie:"\u22B4\u20D2",nvrArr:"\u2903",nvrtrie:"\u22B5\u20D2",nvsim:"\u223C\u20D2",nwArr:"\u21D6",nwarhk:"\u2923",nwnear:"\u2927",oacute:"\xF3",ocirc:"\xF4",ocy:"\u043E",odblac:"\u0151",odiv:"\u2A38",odsold:"\u29BC",oelig:"\u0153",ofcir:"\u29BF",ofr:"\u{1D52C}",ogon:"\u02DB",ograve:"\xF2",ogt:"\u29C1",ohbar:"\u29B5",olcir:"\u29BE",olcross:"\u29BB",olt:"\u29C0",omacr:"\u014D",omega:"\u03C9",omicron:"\u03BF",omid:"\u29B6",oopf:"\u{1D560}",opar:"\u29B7",operp:"\u29B9",or:"\u2228",vee:"\u2228",ord:"\u2A5D",order:"\u2134",orderof:"\u2134",oscr:"\u2134",ordf:"\xAA",ordm:"\xBA",origof:"\u22B6",oror:"\u2A56",orslope:"\u2A57",orv:"\u2A5B",oslash:"\xF8",osol:"\u2298",otilde:"\xF5",otimesas:"\u2A36",ouml:"\xF6",ovbar:"\u233D",para:"\xB6",parsim:"\u2AF3",parsl:"\u2AFD",pcy:"\u043F",percnt:"%",period:".",permil:"\u2030",pertenk:"\u2031",pfr:"\u{1D52D}",phi:"\u03C6",phiv:"\u03D5",straightphi:"\u03D5",varphi:"\u03D5",phone:"\u260E",pi:"\u03C0",piv:"\u03D6",varpi:"\u03D6",planckh:"\u210E",plus:"+",plusacir:"\u2A23",pluscir:"\u2A22",plusdu:"\u2A25",pluse:"\u2A72",plussim:"\u2A26",plustwo:"\u2A27",pointint:"\u2A15",popf:"\u{1D561}",pound:"\xA3",prE:"\u2AB3",prap:"\u2AB7",precapprox:"\u2AB7",precnapprox:"\u2AB9",prnap:"\u2AB9",precneqq:"\u2AB5",prnE:"\u2AB5",precnsim:"\u22E8",prnsim:"\u22E8",prime:"\u2032",profalar:"\u232E",profline:"\u2312",profsurf:"\u2313",prurel:"\u22B0",pscr:"\u{1D4C5}",psi:"\u03C8",puncsp:"\u2008",qfr:"\u{1D52E}",qopf:"\u{1D562}",qprime:"\u2057",qscr:"\u{1D4C6}",quatint:"\u2A16",quest:"?",rAtail:"\u291C",rHar:"\u2964",race:"\u223D\u0331",racute:"\u0155",raemptyv:"\u29B3",rangd:"\u2992",range:"\u29A5",raquo:"\xBB",rarrap:"\u2975",rarrbfs:"\u2920",rarrc:"\u2933",rarrfs:"\u291E",rarrpl:"\u2945",rarrsim:"\u2974",rarrtl:"\u21A3",rightarrowtail:"\u21A3",rarrw:"\u219D",rightsquigarrow:"\u219D",ratail:"\u291A",ratio:"\u2236",rbbrk:"\u2773",rbrace:"}",rcub:"}",rbrack:"]",rsqb:"]",rbrke:"\u298C",rbrksld:"\u298E",rbrkslu:"\u2990",rcaron:"\u0159",rcedil:"\u0157",rcy:"\u0440",rdca:"\u2937",rdldhar:"\u2969",rdsh:"\u21B3",rect:"\u25AD",rfisht:"\u297D",rfr:"\u{1D52F}",rharul:"\u296C",rho:"\u03C1",rhov:"\u03F1",varrho:"\u03F1",rightrightarrows:"\u21C9",rrarr:"\u21C9",rightthreetimes:"\u22CC",rthree:"\u22CC",ring:"\u02DA",rlm:"\u200F",rmoust:"\u23B1",rmoustache:"\u23B1",rnmid:"\u2AEE",roang:"\u27ED",roarr:"\u21FE",ropar:"\u2986",ropf:"\u{1D563}",roplus:"\u2A2E",rotimes:"\u2A35",rpar:")",rpargt:"\u2994",rppolint:"\u2A12",rsaquo:"\u203A",rscr:"\u{1D4C7}",rtimes:"\u22CA",rtri:"\u25B9",triangleright:"\u25B9",rtriltri:"\u29CE",ruluhar:"\u2968",rx:"\u211E",sacute:"\u015B",scE:"\u2AB4",scap:"\u2AB8",succapprox:"\u2AB8",scaron:"\u0161",scedil:"\u015F",scirc:"\u015D",scnE:"\u2AB6",succneqq:"\u2AB6",scnap:"\u2ABA",succnapprox:"\u2ABA",scnsim:"\u22E9",succnsim:"\u22E9",scpolint:"\u2A13",scy:"\u0441",sdot:"\u22C5",sdote:"\u2A66",seArr:"\u21D8",sect:"\xA7",semi:";",seswar:"\u2929",tosa:"\u2929",sext:"\u2736",sfr:"\u{1D530}",sharp:"\u266F",shchcy:"\u0449",shcy:"\u0448",shy:"\xAD",sigma:"\u03C3",sigmaf:"\u03C2",sigmav:"\u03C2",varsigma:"\u03C2",simdot:"\u2A6A",simg:"\u2A9E",simgE:"\u2AA0",siml:"\u2A9D",simlE:"\u2A9F",simne:"\u2246",simplus:"\u2A24",simrarr:"\u2972",smashp:"\u2A33",smeparsl:"\u29E4",smile:"\u2323",ssmile:"\u2323",smt:"\u2AAA",smte:"\u2AAC",smtes:"\u2AAC\uFE00",softcy:"\u044C",sol:"/",solb:"\u29C4",solbar:"\u233F",sopf:"\u{1D564}",spades:"\u2660",spadesuit:"\u2660",sqcaps:"\u2293\uFE00",sqcups:"\u2294\uFE00",sscr:"\u{1D4C8}",star:"\u2606",sub:"\u2282",subset:"\u2282",subE:"\u2AC5",subseteqq:"\u2AC5",subdot:"\u2ABD",subedot:"\u2AC3",submult:"\u2AC1",subnE:"\u2ACB",subsetneqq:"\u2ACB",subne:"\u228A",subsetneq:"\u228A",subplus:"\u2ABF",subrarr:"\u2979",subsim:"\u2AC7",subsub:"\u2AD5",subsup:"\u2AD3",sung:"\u266A",sup1:"\xB9",sup2:"\xB2",sup3:"\xB3",supE:"\u2AC6",supseteqq:"\u2AC6",supdot:"\u2ABE",supdsub:"\u2AD8",supedot:"\u2AC4",suphsol:"\u27C9",suphsub:"\u2AD7",suplarr:"\u297B",supmult:"\u2AC2",supnE:"\u2ACC",supsetneqq:"\u2ACC",supne:"\u228B",supsetneq:"\u228B",supplus:"\u2AC0",supsim:"\u2AC8",supsub:"\u2AD4",supsup:"\u2AD6",swArr:"\u21D9",swnwar:"\u292A",szlig:"\xDF",target:"\u2316",tau:"\u03C4",tcaron:"\u0165",tcedil:"\u0163",tcy:"\u0442",telrec:"\u2315",tfr:"\u{1D531}",theta:"\u03B8",thetasym:"\u03D1",thetav:"\u03D1",vartheta:"\u03D1",thorn:"\xFE",times:"\xD7",timesbar:"\u2A31",timesd:"\u2A30",topbot:"\u2336",topcir:"\u2AF1",topf:"\u{1D565}",topfork:"\u2ADA",tprime:"\u2034",triangle:"\u25B5",utri:"\u25B5",triangleq:"\u225C",trie:"\u225C",tridot:"\u25EC",triminus:"\u2A3A",triplus:"\u2A39",trisb:"\u29CD",tritime:"\u2A3B",trpezium:"\u23E2",tscr:"\u{1D4C9}",tscy:"\u0446",tshcy:"\u045B",tstrok:"\u0167",uHar:"\u2963",uacute:"\xFA",ubrcy:"\u045E",ubreve:"\u016D",ucirc:"\xFB",ucy:"\u0443",udblac:"\u0171",ufisht:"\u297E",ufr:"\u{1D532}",ugrave:"\xF9",uhblk:"\u2580",ulcorn:"\u231C",ulcorner:"\u231C",ulcrop:"\u230F",ultri:"\u25F8",umacr:"\u016B",uogon:"\u0173",uopf:"\u{1D566}",upsi:"\u03C5",upsilon:"\u03C5",upuparrows:"\u21C8",uuarr:"\u21C8",urcorn:"\u231D",urcorner:"\u231D",urcrop:"\u230E",uring:"\u016F",urtri:"\u25F9",uscr:"\u{1D4CA}",utdot:"\u22F0",utilde:"\u0169",uuml:"\xFC",uwangle:"\u29A7",vBar:"\u2AE8",vBarv:"\u2AE9",vangrt:"\u299C",varsubsetneq:"\u228A\uFE00",vsubne:"\u228A\uFE00",varsubsetneqq:"\u2ACB\uFE00",vsubnE:"\u2ACB\uFE00",varsupsetneq:"\u228B\uFE00",vsupne:"\u228B\uFE00",varsupsetneqq:"\u2ACC\uFE00",vsupnE:"\u2ACC\uFE00",vcy:"\u0432",veebar:"\u22BB",veeeq:"\u225A",vellip:"\u22EE",vfr:"\u{1D533}",vopf:"\u{1D567}",vscr:"\u{1D4CB}",vzigzag:"\u299A",wcirc:"\u0175",wedbar:"\u2A5F",wedgeq:"\u2259",weierp:"\u2118",wp:"\u2118",wfr:"\u{1D534}",wopf:"\u{1D568}",wscr:"\u{1D4CC}",xfr:"\u{1D535}",xi:"\u03BE",xnis:"\u22FB",xopf:"\u{1D569}",xscr:"\u{1D4CD}",yacute:"\xFD",yacy:"\u044F",ycirc:"\u0177",ycy:"\u044B",yen:"\xA5",yfr:"\u{1D536}",yicy:"\u0457",yopf:"\u{1D56A}",yscr:"\u{1D4CE}",yucy:"\u044E",yuml:"\xFF",zacute:"\u017A",zcaron:"\u017E",zcy:"\u0437",zdot:"\u017C",zeta:"\u03B6",zfr:"\u{1D537}",zhcy:"\u0436",zigrarr:"\u21DD",zopf:"\u{1D56B}",zscr:"\u{1D4CF}",zwj:"\u200D",zwnj:"\u200C"},fT="\uE500";Id.ngsp=fT;var Tv=class{tokens;errors;nonNormalizedIcuExpressions;constructor(e,t,i){this.tokens=e,this.errors=t,this.nonNormalizedIcuExpressions=i}};function QL(n,e,t,i={}){let r=new Dv(new th(n,e),t,i);return r.tokenize(),new Tv(aO(r.tokens),r.errors,r.nonNormalizedIcuExpressions)}var XL=/\r\n?/g;function Ha(n){return`Unexpected character "${n===Jt?"EOF":String.fromCharCode(n)}"`}function _S(n){return`Unknown entity "${n}" - use the "&#<decimal>;" or  "&#x<hex>;" syntax`}function ZL(n,e){return`Unable to parse entity "${e}" - ${n} character reference entities must end with ";"`}var Iv=(function(n){return n.HEX="hexadecimal",n.DEC="decimal",n})(Iv||{}),eO=["@if","@else","@for","@switch","@case","@default","@empty","@defer","@placeholder","@loading","@error"],Dv=class{_getTagDefinition;_cursor;_tokenizeIcu;_interpolationConfig;_leadingTriviaCodePoints;_currentTokenStart=null;_currentTokenType=null;_expansionCaseStack=[];_openDirectiveCount=0;_inInterpolation=!1;_preserveLineEndings;_i18nNormalizeLineEndingsInICUs;_tokenizeBlocks;_tokenizeLet;_selectorlessEnabled;tokens=[];errors=[];nonNormalizedIcuExpressions=[];constructor(e,t,i){this._getTagDefinition=t,this._tokenizeIcu=i.tokenizeExpansionForms||!1,this._interpolationConfig=i.interpolationConfig||ur,this._leadingTriviaCodePoints=i.leadingTriviaChars&&i.leadingTriviaChars.map(o=>o.codePointAt(0)||0);let r=i.range||{endPos:e.content.length,startPos:0,startLine:0,startCol:0};this._cursor=i.escapedString?new Av(e,r):new yh(e,r),this._preserveLineEndings=i.preserveLineEndings||!1,this._i18nNormalizeLineEndingsInICUs=i.i18nNormalizeLineEndingsInICUs||!1,this._tokenizeBlocks=i.tokenizeBlocks??!0,this._tokenizeLet=i.tokenizeLet??!0,this._selectorlessEnabled=i.selectorlessEnabled??!1;try{this._cursor.init()}catch(o){this.handleError(o)}}_processCarriageReturns(e){return this._preserveLineEndings?e:e.replace(XL,`
`)}tokenize(){for(;this._cursor.peek()!==Jt;){let e=this._cursor.clone();try{this._attemptCharCode(tl)?this._attemptCharCode(sv)?this._attemptCharCode(To)?this._consumeCdata(e):this._attemptCharCode(Zp)?this._consumeComment(e):this._consumeDocType(e):this._attemptCharCode(Hi)?this._consumeTagClose(e):this._consumeTagOpen(e):this._tokenizeLet&&this._cursor.peek()===Ba&&!this._inInterpolation&&this._isLetStart()?this._consumeLetDeclaration(e):this._tokenizeBlocks&&this._isBlockStart()?this._consumeBlockStart(e):this._tokenizeBlocks&&!this._inInterpolation&&!this._isInExpansionCase()&&!this._isInExpansionForm()&&this._attemptCharCode(wn)?this._consumeBlockEnd(e):this._tokenizeIcu&&this._tokenizeExpansionForm()||this._consumeWithInterpolation(5,8,()=>this._isTextEnd(),()=>this._isTagStart())}catch(t){this.handleError(t)}}this._beginToken(41),this._endToken([])}_getBlockName(){let e=!1,t=this._cursor.clone();return this._attemptCharCodeUntilFn(i=>md(i)?!e:sO(i)?(e=!0,!1):!0),this._cursor.getChars(t).trim()}_consumeBlockStart(e){this._requireCharCode(Ba),this._beginToken(24,e);let t=this._endToken([this._getBlockName()]);if(this._cursor.peek()===vi)if(this._cursor.advance(),this._consumeBlockParameters(),this._attemptCharCodeUntilFn(ct),this._attemptCharCode(cn))this._attemptCharCodeUntilFn(ct);else{t.type=28;return}this._attemptCharCode(Gi)?(this._beginToken(25),this._endToken([])):t.type=28}_consumeBlockEnd(e){this._beginToken(26,e),this._endToken([])}_consumeBlockParameters(){for(this._attemptCharCodeUntilFn(CS);this._cursor.peek()!==cn&&this._cursor.peek()!==Jt;){this._beginToken(27);let e=this._cursor.clone(),t=null,i=0;for(;this._cursor.peek()!==Qn&&this._cursor.peek()!==Jt||t!==null;){let r=this._cursor.peek();if(r===nl)this._cursor.advance();else if(r===t)t=null;else if(t===null&&Lu(r))t=r;else if(r===vi&&t===null)i++;else if(r===cn&&t===null){if(i===0)break;i>0&&i--}this._cursor.advance()}this._endToken([this._cursor.getChars(e)]),this._attemptCharCodeUntilFn(CS)}}_consumeLetDeclaration(e){if(this._requireStr("@let"),this._beginToken(29,e),md(this._cursor.peek()))this._attemptCharCodeUntilFn(ct);else{let r=this._endToken([this._cursor.getChars(e)]);r.type=32;return}let t=this._endToken([this._getLetDeclarationName()]);if(this._attemptCharCodeUntilFn(ct),!this._attemptCharCode(ln)){t.type=32;return}this._attemptCharCodeUntilFn(r=>ct(r)&&!eh(r)),this._consumeLetDeclarationValue(),this._cursor.peek()===Qn?(this._beginToken(31),this._endToken([]),this._cursor.advance()):(t.type=32,t.sourceSpan=this._cursor.getSpan(e))}_getLetDeclarationName(){let e=this._cursor.clone(),t=!1;return this._attemptCharCodeUntilFn(i=>hl(i)||i===Lh||i===Fo||t&&qi(i)?(t=!0,!1):!0),this._cursor.getChars(e).trim()}_consumeLetDeclarationValue(){let e=this._cursor.clone();for(this._beginToken(30,e);this._cursor.peek()!==Jt;){let t=this._cursor.peek();if(t===Qn)break;Lu(t)&&(this._cursor.advance(),this._attemptCharCodeUntilFn(i=>i===nl?(this._cursor.advance(),!1):i===t)),this._cursor.advance()}this._endToken([this._cursor.getChars(e)])}_tokenizeExpansionForm(){if(this.isExpansionFormStart())return this._consumeExpansionFormStart(),!0;if(rO(this._cursor.peek())&&this._isInExpansionForm())return this._consumeExpansionCaseStart(),!0;if(this._cursor.peek()===wn){if(this._isInExpansionCase())return this._consumeExpansionCaseEnd(),!0;if(this._isInExpansionForm())return this._consumeExpansionFormEnd(),!0}return!1}_beginToken(e,t=this._cursor.clone()){this._currentTokenStart=t,this._currentTokenType=e}_endToken(e,t){if(this._currentTokenStart===null)throw new he(this._cursor.getSpan(t),"Programming error - attempted to end a token when there was no start to the token");if(this._currentTokenType===null)throw new he(this._cursor.getSpan(this._currentTokenStart),"Programming error - attempted to end a token which has no token type");let i={type:this._currentTokenType,parts:e,sourceSpan:(t??this._cursor).getSpan(this._currentTokenStart,this._leadingTriviaCodePoints)};return this.tokens.push(i),this._currentTokenStart=null,this._currentTokenType=null,i}_createError(e,t){this._isInExpansionForm()&&(e+=` (Do you have an unescaped "{" in your template? Use "{{ '{' }}") to escape it.)`);let i=new he(t,e);return this._currentTokenStart=null,this._currentTokenType=null,i}handleError(e){if(e instanceof Dd&&(e=this._createError(e.msg,this._cursor.getSpan(e.cursor))),e instanceof he)this.errors.push(e);else throw e}_attemptCharCode(e){return this._cursor.peek()===e?(this._cursor.advance(),!0):!1}_attemptCharCodeCaseInsensitive(e){return oO(this._cursor.peek(),e)?(this._cursor.advance(),!0):!1}_requireCharCode(e){let t=this._cursor.clone();if(!this._attemptCharCode(e))throw this._createError(Ha(this._cursor.peek()),this._cursor.getSpan(t))}_attemptStr(e){let t=e.length;if(this._cursor.charsLeft()<t)return!1;let i=this._cursor.clone();for(let r=0;r<t;r++)if(!this._attemptCharCode(e.charCodeAt(r)))return this._cursor=i,!1;return!0}_attemptStrCaseInsensitive(e){for(let t=0;t<e.length;t++)if(!this._attemptCharCodeCaseInsensitive(e.charCodeAt(t)))return!1;return!0}_requireStr(e){let t=this._cursor.clone();if(!this._attemptStr(e))throw this._createError(Ha(this._cursor.peek()),this._cursor.getSpan(t))}_attemptCharCodeUntilFn(e){for(;!e(this._cursor.peek());)this._cursor.advance()}_requireCharCodeUntilFn(e,t){let i=this._cursor.clone();if(this._attemptCharCodeUntilFn(e),this._cursor.diff(i)<t)throw this._createError(Ha(this._cursor.peek()),this._cursor.getSpan(i))}_attemptUntilChar(e){for(;this._cursor.peek()!==e;)this._cursor.advance()}_readChar(){let e=String.fromCodePoint(this._cursor.peek());return this._cursor.advance(),e}_peekStr(e){let t=e.length;if(this._cursor.charsLeft()<t)return!1;let i=this._cursor.clone();for(let r=0;r<t;r++){if(i.peek()!==e.charCodeAt(r))return!1;i.advance()}return!0}_isBlockStart(){return this._cursor.peek()===Ba&&eO.some(e=>this._peekStr(e))}_isLetStart(){return this._cursor.peek()===Ba&&this._peekStr("@let")}_consumeEntity(e){this._beginToken(9);let t=this._cursor.clone();if(this._cursor.advance(),this._attemptCharCode(L1)){let i=this._attemptCharCode(G1)||this._attemptCharCode(vR),r=this._cursor.clone();if(this._attemptCharCodeUntilFn(nO),this._cursor.peek()!=Qn){this._cursor.advance();let s=i?Iv.HEX:Iv.DEC;throw this._createError(ZL(s,this._cursor.getChars(t)),this._cursor.getSpan())}let o=this._cursor.getChars(r);this._cursor.advance();try{let s=parseInt(o,i?16:10);this._endToken([String.fromCodePoint(s),this._cursor.getChars(t)])}catch{throw this._createError(_S(this._cursor.getChars(t)),this._cursor.getSpan())}}else{let i=this._cursor.clone();if(this._attemptCharCodeUntilFn(iO),this._cursor.peek()!=Qn)this._beginToken(e,t),this._cursor=i,this._endToken(["&"]);else{let r=this._cursor.getChars(i);this._cursor.advance();let o=Id.hasOwnProperty(r)&&Id[r];if(!o)throw this._createError(_S(r),this._cursor.getSpan(t));this._endToken([o,`&${r};`])}}}_consumeRawText(e,t){this._beginToken(e?6:7);let i=[];for(;;){let r=this._cursor.clone(),o=t();if(this._cursor=r,o)break;e&&this._cursor.peek()===Xp?(this._endToken([this._processCarriageReturns(i.join(""))]),i.length=0,this._consumeEntity(6),this._beginToken(6)):i.push(this._readChar())}this._endToken([this._processCarriageReturns(i.join(""))])}_consumeComment(e){this._beginToken(10,e),this._requireCharCode(Zp),this._endToken([]),this._consumeRawText(!1,()=>this._attemptStr("-->")),this._beginToken(11),this._requireStr("-->"),this._endToken([])}_consumeCdata(e){this._beginToken(12,e),this._requireStr("CDATA["),this._endToken([]),this._consumeRawText(!1,()=>this._attemptStr("]]>")),this._beginToken(13),this._requireStr("]]>"),this._endToken([])}_consumeDocType(e){this._beginToken(18,e);let t=this._cursor.clone();this._attemptUntilChar(fi);let i=this._cursor.getChars(t);this._cursor.advance(),this._endToken([i])}_consumePrefixAndName(e){let t=this._cursor.clone(),i="";for(;this._cursor.peek()!==$r&&!tO(this._cursor.peek());)this._cursor.advance();let r;this._cursor.peek()===$r?(i=this._cursor.getChars(t),this._cursor.advance(),r=this._cursor.clone()):r=t,this._requireCharCodeUntilFn(e,i===""?0:1);let o=this._cursor.getChars(r);return[i,o]}_consumeTagOpen(e){let t,i,r,o;try{if(this._selectorlessEnabled&&ip(this._cursor.peek()))o=this._consumeComponentOpenStart(e),[r,i,t]=o.parts,i&&(r+=`:${i}`),t&&(r+=`:${t}`),this._attemptCharCodeUntilFn(ct);else{if(!hl(this._cursor.peek()))throw this._createError(Ha(this._cursor.peek()),this._cursor.getSpan(e));o=this._consumeTagOpenStart(e),i=o.parts[0],t=r=o.parts[1],this._attemptCharCodeUntilFn(ct)}for(;!xS(this._cursor.peek());)if(this._selectorlessEnabled&&this._cursor.peek()===Ba){let a=this._cursor.clone(),l=a.clone();l.advance(),ip(l.peek())&&this._consumeDirective(a,l)}else this._consumeAttribute();o.type===33?this._consumeComponentOpenEnd():this._consumeTagOpenEnd()}catch(a){if(a instanceof he){o?o.type=o.type===33?37:4:(this._beginToken(5,e),this._endToken(["<"]));return}throw a}let s=this._getTagDefinition(t).getContentType(i);s===cr.RAW_TEXT?this._consumeRawTextWithTagClose(o,r,!1):s===cr.ESCAPABLE_RAW_TEXT&&this._consumeRawTextWithTagClose(o,r,!0)}_consumeRawTextWithTagClose(e,t,i){this._consumeRawText(i,()=>!this._attemptCharCode(tl)||!this._attemptCharCode(Hi)||(this._attemptCharCodeUntilFn(ct),!this._attemptStrCaseInsensitive(t))?!1:(this._attemptCharCodeUntilFn(ct),this._attemptCharCode(fi))),this._beginToken(e.type===33?36:3),this._requireCharCodeUntilFn(r=>r===fi,3),this._cursor.advance(),this._endToken(e.parts)}_consumeTagOpenStart(e){this._beginToken(0,e);let t=this._consumePrefixAndName(fs);return this._endToken(t)}_consumeComponentOpenStart(e){this._beginToken(33,e);let t=this._consumeComponentName();return this._endToken(t)}_consumeComponentName(){let e=this._cursor.clone();for(;ES(this._cursor.peek());)this._cursor.advance();let t=this._cursor.getChars(e),i="",r="";return this._cursor.peek()===$r&&(this._cursor.advance(),[i,r]=this._consumePrefixAndName(fs)),[t,i,r]}_consumeAttribute(){this._consumeAttributeName(),this._attemptCharCodeUntilFn(ct),this._attemptCharCode(ln)&&(this._attemptCharCodeUntilFn(ct),this._consumeAttributeValue()),this._attemptCharCodeUntilFn(ct)}_consumeAttributeName(){let e=this._cursor.peek();if(e===hd||e===pd)throw this._createError(Ha(e),this._cursor.getSpan());this._beginToken(14);let t;if(this._openDirectiveCount>0){let r=0;t=o=>{if(this._openDirectiveCount>0){if(o===vi)r++;else if(o===cn){if(r===0)return!0;r--}}return fs(o)}}else if(e===To){let r=0;t=o=>(o===To?r++:o===ws&&r--,r<=0?fs(o):eh(o))}else t=fs;let i=this._consumePrefixAndName(t);this._endToken(i)}_consumeAttributeValue(){if(this._cursor.peek()===hd||this._cursor.peek()===pd){let e=this._cursor.peek();this._consumeQuote(e);let t=()=>this._cursor.peek()===e;this._consumeWithInterpolation(16,17,t,t),this._consumeQuote(e)}else{let e=()=>fs(this._cursor.peek());this._consumeWithInterpolation(16,17,e,e)}}_consumeQuote(e){this._beginToken(15),this._requireCharCode(e),this._endToken([String.fromCodePoint(e)])}_consumeTagOpenEnd(){let e=this._attemptCharCode(Hi)?2:1;this._beginToken(e),this._requireCharCode(fi),this._endToken([])}_consumeComponentOpenEnd(){let e=this._attemptCharCode(Hi)?35:34;this._beginToken(e),this._requireCharCode(fi),this._endToken([])}_consumeTagClose(e){if(this._selectorlessEnabled){let i=e.clone();for(;i.peek()!==fi&&!ip(i.peek());)i.advance();if(ip(i.peek())){this._beginToken(36,e);let r=this._consumeComponentName();this._attemptCharCodeUntilFn(ct),this._requireCharCode(fi),this._endToken(r);return}}this._beginToken(3,e),this._attemptCharCodeUntilFn(ct);let t=this._consumePrefixAndName(fs);this._attemptCharCodeUntilFn(ct),this._requireCharCode(fi),this._endToken(t)}_consumeExpansionFormStart(){this._beginToken(19),this._requireCharCode(Gi),this._endToken([]),this._expansionCaseStack.push(19),this._beginToken(7);let e=this._readUntil(ti),t=this._processCarriageReturns(e);if(this._i18nNormalizeLineEndingsInICUs)this._endToken([t]);else{let r=this._endToken([e]);t!==e&&this.nonNormalizedIcuExpressions.push(r)}this._requireCharCode(ti),this._attemptCharCodeUntilFn(ct),this._beginToken(7);let i=this._readUntil(ti);this._endToken([i]),this._requireCharCode(ti),this._attemptCharCodeUntilFn(ct)}_consumeExpansionCaseStart(){this._beginToken(20);let e=this._readUntil(Gi).trim();this._endToken([e]),this._attemptCharCodeUntilFn(ct),this._beginToken(21),this._requireCharCode(Gi),this._endToken([]),this._attemptCharCodeUntilFn(ct),this._expansionCaseStack.push(21)}_consumeExpansionCaseEnd(){this._beginToken(22),this._requireCharCode(wn),this._endToken([]),this._attemptCharCodeUntilFn(ct),this._expansionCaseStack.pop()}_consumeExpansionFormEnd(){this._beginToken(23),this._requireCharCode(wn),this._endToken([]),this._expansionCaseStack.pop()}_consumeWithInterpolation(e,t,i,r){this._beginToken(e);let o=[];for(;!i();){let s=this._cursor.clone();this._interpolationConfig&&this._attemptStr(this._interpolationConfig.start)?(this._endToken([this._processCarriageReturns(o.join(""))],s),o.length=0,this._consumeInterpolation(t,s,r),this._beginToken(e)):this._cursor.peek()===Xp?(this._endToken([this._processCarriageReturns(o.join(""))]),o.length=0,this._consumeEntity(e),this._beginToken(e)):o.push(this._readChar())}this._inInterpolation=!1,this._endToken([this._processCarriageReturns(o.join(""))])}_consumeInterpolation(e,t,i){let r=[];this._beginToken(e,t),r.push(this._interpolationConfig.start);let o=this._cursor.clone(),s=null,a=!1;for(;this._cursor.peek()!==Jt&&(i===null||!i());){let l=this._cursor.clone();if(this._isTagStart()){this._cursor=l,r.push(this._getProcessedChars(o,l)),this._endToken(r);return}if(s===null)if(this._attemptStr(this._interpolationConfig.end)){r.push(this._getProcessedChars(o,l)),r.push(this._interpolationConfig.end),this._endToken(r);return}else this._attemptStr("//")&&(a=!0);let c=this._cursor.peek();this._cursor.advance(),c===nl?this._cursor.advance():c===s?s=null:!a&&s===null&&Lu(c)&&(s=c)}r.push(this._getProcessedChars(o,this._cursor)),this._endToken(r)}_consumeDirective(e,t){for(this._requireCharCode(Ba),this._cursor.advance();ES(this._cursor.peek());)this._cursor.advance();this._beginToken(38,e);let i=this._cursor.getChars(t);if(this._endToken([i]),this._attemptCharCodeUntilFn(ct),this._cursor.peek()===vi){for(this._openDirectiveCount++,this._beginToken(39),this._cursor.advance(),this._endToken([]),this._attemptCharCodeUntilFn(ct);!xS(this._cursor.peek())&&this._cursor.peek()!==cn;)this._consumeAttribute();if(this._attemptCharCodeUntilFn(ct),this._openDirectiveCount--,this._cursor.peek()!==cn){if(this._cursor.peek()===fi||this._cursor.peek()===Hi)return;throw this._createError(Ha(this._cursor.peek()),this._cursor.getSpan(e))}this._beginToken(40),this._cursor.advance(),this._endToken([]),this._attemptCharCodeUntilFn(ct)}}_getProcessedChars(e,t){return this._processCarriageReturns(t.getChars(e))}_isTextEnd(){return!!(this._isTagStart()||this._cursor.peek()===Jt||this._tokenizeIcu&&!this._inInterpolation&&(this.isExpansionFormStart()||this._cursor.peek()===wn&&this._isInExpansionCase())||this._tokenizeBlocks&&!this._inInterpolation&&!this._isInExpansion()&&(this._isBlockStart()||this._isLetStart()||this._cursor.peek()===wn))}_isTagStart(){if(this._cursor.peek()===tl){let e=this._cursor.clone();e.advance();let t=e.peek();if(Os<=t&&t<=Vd||Ro<=t&&t<=xl||t===Hi||t===sv)return!0}return!1}_readUntil(e){let t=this._cursor.clone();return this._attemptUntilChar(e),this._cursor.getChars(t)}_isInExpansion(){return this._isInExpansionCase()||this._isInExpansionForm()}_isInExpansionCase(){return this._expansionCaseStack.length>0&&this._expansionCaseStack[this._expansionCaseStack.length-1]===21}_isInExpansionForm(){return this._expansionCaseStack.length>0&&this._expansionCaseStack[this._expansionCaseStack.length-1]===19}isExpansionFormStart(){if(this._cursor.peek()!==Gi)return!1;if(this._interpolationConfig){let e=this._cursor.clone(),t=this._attemptStr(this._interpolationConfig.start);return this._cursor=e,!t}return!0}};function ct(n){return!md(n)||n===Jt}function fs(n){return md(n)||n===fi||n===tl||n===Hi||n===hd||n===pd||n===ln||n===Jt}function tO(n){return(n<Os||Vd<n)&&(n<Ro||xl<n)&&(n<w_||n>V1)}function nO(n){return n===Qn||n===Jt||!ER(n)}function iO(n){return n===Qn||n===Jt||!hl(n)}function rO(n){return n!==wn}function oO(n,e){return wS(n)===wS(e)}function wS(n){return n>=Os&&n<=Vd?n-Os+Ro:n}function sO(n){return hl(n)||qi(n)||n===Fo}function CS(n){return n!==Qn&&ct(n)}function ip(n){return n===Fo||n>=Ro&&n<=xl}function ES(n){return hl(n)||qi(n)||n===Fo}function xS(n){return n===Hi||n===fi||n===tl||n===Jt}function aO(n){let e=[],t;for(let i=0;i<n.length;i++){let r=n[i];t&&t.type===5&&r.type===5||t&&t.type===16&&r.type===16?(t.parts[0]+=r.parts[0],t.sourceSpan.end=r.sourceSpan.end):(t=r,e.push(t))}return e}var yh=class n{state;file;input;end;constructor(e,t){if(e instanceof n){this.file=e.file,this.input=e.input,this.end=e.end;let i=e.state;this.state={peek:i.peek,offset:i.offset,line:i.line,column:i.column}}else{if(!t)throw new Error("Programming error: the range argument must be provided with a file argument.");this.file=e,this.input=e.content,this.end=t.endPos,this.state={peek:-1,offset:t.startPos,line:t.startLine,column:t.startCol}}}clone(){return new n(this)}peek(){return this.state.peek}charsLeft(){return this.end-this.state.offset}diff(e){return this.state.offset-e.state.offset}advance(){this.advanceState(this.state)}init(){this.updatePeek(this.state)}getSpan(e,t){e=e||this;let i=e;if(t)for(;this.diff(e)>0&&t.indexOf(e.peek())!==-1;)i===e&&(e=e.clone()),e.advance();let r=this.locationFromCursor(e),o=this.locationFromCursor(this),s=i!==e?this.locationFromCursor(i):r;return new ve(r,o,s)}getChars(e){return this.input.substring(e.state.offset,this.state.offset)}charAt(e){return this.input.charCodeAt(e)}advanceState(e){if(e.offset>=this.end)throw this.state=e,new Dd('Unexpected character "EOF"',this);let t=this.charAt(e.offset);t===bs?(e.line++,e.column=0):eh(t)||e.column++,e.offset++,this.updatePeek(e)}updatePeek(e){e.peek=e.offset>=this.end?Jt:this.charAt(e.offset)}locationFromCursor(e){return new gd(e.file,e.state.offset,e.state.line,e.state.column)}},Av=class n extends yh{internalState;constructor(e,t){e instanceof n?(super(e),this.internalState=P({},e.internalState)):(super(e,t),this.internalState=this.state)}advance(){this.state=this.internalState,super.advance(),this.processEscapeSequence()}init(){super.init(),this.processEscapeSequence()}clone(){return new n(this)}getChars(e){let t=e.clone(),i="";for(;t.internalState.offset<this.internalState.offset;)i+=String.fromCodePoint(t.peek()),t.advance();return i}processEscapeSequence(){let e=()=>this.internalState.peek;if(e()===nl)if(this.internalState=P({},this.state),this.advanceState(this.internalState),e()===B1)this.state.peek=bs;else if(e()===U1)this.state.peek=__;else if(e()===q1)this.state.peek=P1;else if(e()===$1)this.state.peek=v_;else if(e()===wR)this.state.peek=pR;else if(e()===C_)this.state.peek=R1;else if(e()===H1)if(this.advanceState(this.internalState),e()===Gi){this.advanceState(this.internalState);let t=this.clone(),i=0;for(;e()!==wn;)this.advanceState(this.internalState),i++;this.state.peek=this.decodeHexDigits(t,i)}else{let t=this.clone();this.advanceState(this.internalState),this.advanceState(this.internalState),this.advanceState(this.internalState),this.state.peek=this.decodeHexDigits(t,4)}else if(e()===G1){this.advanceState(this.internalState);let t=this.clone();this.advanceState(this.internalState),this.state.peek=this.decodeHexDigits(t,2)}else if(Xb(e())){let t="",i=0,r=this.clone();for(;Xb(e())&&i<3;)r=this.clone(),t+=String.fromCodePoint(e()),this.advanceState(this.internalState),i++;this.state.peek=parseInt(t,8),this.internalState=r.internalState}else eh(this.internalState.peek)?(this.advanceState(this.internalState),this.state=this.internalState):this.state.peek=this.internalState.peek}decodeHexDigits(e,t){let i=this.input.slice(e.internalState.offset,e.internalState.offset+t),r=parseInt(i,16);if(isNaN(r))throw e.state=e.internalState,new Dd("Invalid hexadecimal escape sequence",e);return r}},Dd=class extends Error{msg;cursor;constructor(e,t){super(e),this.msg=e,this.cursor=t,Object.setPrototypeOf(this,new.target.prototype)}},St=class n extends he{elementName;static create(e,t,i){return new n(e,t,i)}constructor(e,t,i){super(t,i),this.elementName=e}},vh=class{rootNodes;errors;constructor(e,t){this.rootNodes=e,this.errors=t}},lO=class{getTagDefinition;constructor(e){this.getTagDefinition=e}parse(e,t,i){let r=QL(e,t,this.getTagDefinition,i),o=new kv(r.tokens,this.getTagDefinition);return o.build(),new vh(o.rootNodes,[...r.errors,...o.errors])}},kv=class n{tokens;tagDefinitionResolver;_index=-1;_peek;_containerStack=[];rootNodes=[];errors=[];constructor(e,t){this.tokens=e,this.tagDefinitionResolver=t,this._advance()}build(){for(;this._peek.type!==41;)this._peek.type===0||this._peek.type===4?this._consumeElementStartTag(this._advance()):this._peek.type===3?this._consumeElementEndTag(this._advance()):this._peek.type===12?(this._closeVoidElement(),this._consumeCdata(this._advance())):this._peek.type===10?(this._closeVoidElement(),this._consumeComment(this._advance())):this._peek.type===5||this._peek.type===7||this._peek.type===6?(this._closeVoidElement(),this._consumeText(this._advance())):this._peek.type===19?this._consumeExpansion(this._advance()):this._peek.type===24?(this._closeVoidElement(),this._consumeBlockOpen(this._advance())):this._peek.type===26?(this._closeVoidElement(),this._consumeBlockClose(this._advance())):this._peek.type===28?(this._closeVoidElement(),this._consumeIncompleteBlock(this._advance())):this._peek.type===29?(this._closeVoidElement(),this._consumeLet(this._advance())):this._peek.type===32?(this._closeVoidElement(),this._consumeIncompleteLet(this._advance())):this._peek.type===33||this._peek.type===37?this._consumeComponentStartTag(this._advance()):this._peek.type===36?this._consumeComponentEndTag(this._advance()):this._advance();for(let e of this._containerStack)e instanceof hi&&this.errors.push(St.create(e.name,e.sourceSpan,`Unclosed block "${e.name}"`))}_advance(){let e=this._peek;return this._index<this.tokens.length-1&&this._index++,this._peek=this.tokens[this._index],e}_advanceIf(e){return this._peek.type===e?this._advance():null}_consumeCdata(e){this._consumeText(this._advance()),this._advanceIf(13)}_consumeComment(e){let t=this._advanceIf(7),i=this._advanceIf(11),r=t!=null?t.parts[0].trim():null,o=i==null?e.sourceSpan:new ve(e.sourceSpan.start,i.sourceSpan.end,e.sourceSpan.fullStart);this._addToParent(new Td(r,o))}_consumeExpansion(e){let t=this._advance(),i=this._advance(),r=[];for(;this._peek.type===20;){let s=this._parseExpansionCase();if(!s)return;r.push(s)}if(this._peek.type!==23){this.errors.push(St.create(null,this._peek.sourceSpan,"Invalid ICU message. Missing '}'."));return}let o=new ve(e.sourceSpan.start,this._peek.sourceSpan.end,e.sourceSpan.fullStart);this._addToParent(new Ss(t.parts[0],i.parts[0],r,o,t.sourceSpan)),this._advance()}_parseExpansionCase(){let e=this._advance();if(this._peek.type!==21)return this.errors.push(St.create(null,this._peek.sourceSpan,"Invalid ICU message. Missing '{'.")),null;let t=this._advance(),i=this._collectExpansionExpTokens(t);if(!i)return null;let r=this._advance();i.push({type:41,parts:[],sourceSpan:r.sourceSpan});let o=new n(i,this.tagDefinitionResolver);if(o.build(),o.errors.length>0)return this.errors=this.errors.concat(o.errors),null;let s=new ve(e.sourceSpan.start,r.sourceSpan.end,e.sourceSpan.fullStart),a=new ve(t.sourceSpan.start,r.sourceSpan.end,t.sourceSpan.fullStart);return new hh(e.parts[0],o.rootNodes,s,e.sourceSpan,a)}_collectExpansionExpTokens(e){let t=[],i=[21];for(;;){if((this._peek.type===19||this._peek.type===21)&&i.push(this._peek.type),this._peek.type===22)if(bS(i,21)){if(i.pop(),i.length===0)return t}else return this.errors.push(St.create(null,e.sourceSpan,"Invalid ICU message. Missing '}'.")),null;if(this._peek.type===23)if(bS(i,19))i.pop();else return this.errors.push(St.create(null,e.sourceSpan,"Invalid ICU message. Missing '}'.")),null;if(this._peek.type===41)return this.errors.push(St.create(null,e.sourceSpan,"Invalid ICU message. Missing '}'.")),null;t.push(this._advance())}}_consumeText(e){let t=[e],i=e.sourceSpan,r=e.parts[0];if(r.length>0&&r[0]===`
`){let o=this._getContainer();o!=null&&o.children.length===0&&this._getTagDefinition(o)?.ignoreFirstLf&&(r=r.substring(1),t[0]={type:e.type,sourceSpan:e.sourceSpan,parts:[r]})}for(;this._peek.type===8||this._peek.type===5||this._peek.type===9;)e=this._advance(),t.push(e),e.type===8?r+=e.parts.join("").replace(/&([^;]+);/g,SS):e.type===9?r+=e.parts[0]:r+=e.parts.join("");if(r.length>0){let o=e.sourceSpan;this._addToParent(new Hs(r,new ve(i.start,o.end,i.fullStart,i.details),t))}}_closeVoidElement(){let e=this._getContainer();e!==null&&this._getTagDefinition(e)?.isVoid&&this._containerStack.pop()}_consumeElementStartTag(e){let t=[],i=[];this._consumeAttributesAndDirectives(t,i);let r=this._getElementFullName(e,this._getClosestElementLikeParent()),o=this._getTagDefinition(r),s=!1;this._peek.type===2?(this._advance(),s=!0,o?.canSelfClose||Qy(r)!==null||o?.isVoid||this.errors.push(St.create(r,e.sourceSpan,`Only void, custom and foreign elements can be self closed "${e.parts[1]}"`))):this._peek.type===1&&(this._advance(),s=!1);let a=this._peek.sourceSpan.fullStart,l=new ve(e.sourceSpan.start,a,e.sourceSpan.fullStart),c=new ve(e.sourceSpan.start,a,e.sourceSpan.fullStart),d=new pi(r,t,i,[],s,l,c,void 0,o?.isVoid??!1),p=this._getContainer(),h=p!==null&&!!this._getTagDefinition(p)?.isClosedByChild(d.name);this._pushContainer(d,h),s?this._popContainer(r,pi,l):e.type===4&&(this._popContainer(r,pi,null),this.errors.push(St.create(r,l,`Opening tag "${r}" not terminated.`)))}_consumeComponentStartTag(e){let t=e.parts[0],i=[],r=[];this._consumeAttributesAndDirectives(i,r);let o=this._getClosestElementLikeParent(),s=this._getComponentTagName(e,o),a=this._getComponentFullName(e,o),l=this._peek.type===35;this._advance();let c=this._peek.sourceSpan.fullStart,d=new ve(e.sourceSpan.start,c,e.sourceSpan.fullStart),p=new ve(e.sourceSpan.start,c,e.sourceSpan.fullStart),h=new Nn(t,s,a,i,r,[],l,d,p,void 0),y=this._getContainer(),E=y!==null&&h.tagName!==null&&!!this._getTagDefinition(y)?.isClosedByChild(h.tagName);this._pushContainer(h,E),l?this._popContainer(a,Nn,d):e.type===37&&(this._popContainer(a,Nn,null),this.errors.push(St.create(a,d,`Opening tag "${a}" not terminated.`)))}_consumeAttributesAndDirectives(e,t){for(;this._peek.type===14||this._peek.type===38;)this._peek.type===38?t.push(this._consumeDirective(this._peek)):e.push(this._consumeAttr(this._advance()))}_consumeComponentEndTag(e){let t=this._getComponentFullName(e,this._getClosestElementLikeParent());if(!this._popContainer(t,Nn,e.sourceSpan)){let i=this._containerStack[this._containerStack.length-1],r;i instanceof Nn&&i.componentName===e.parts[0]?r=`, did you mean "${i.fullName}"?`:r=". It may happen when the tag has already been closed by another tag.";let o=`Unexpected closing tag "${t}"${r}`;this.errors.push(St.create(t,e.sourceSpan,o))}}_getTagDefinition(e){return typeof e=="string"?this.tagDefinitionResolver(e):e instanceof pi?this.tagDefinitionResolver(e.name):e instanceof Nn&&e.tagName!==null?this.tagDefinitionResolver(e.tagName):null}_pushContainer(e,t){t&&this._containerStack.pop(),this._addToParent(e),this._containerStack.push(e)}_consumeElementEndTag(e){let t=this._getElementFullName(e,this._getClosestElementLikeParent());if(this._getTagDefinition(t)?.isVoid)this.errors.push(St.create(t,e.sourceSpan,`Void elements do not have end tags "${e.parts[1]}"`));else if(!this._popContainer(t,pi,e.sourceSpan)){let i=`Unexpected closing tag "${t}". It may happen when the tag has already been closed by another tag. For more info see https://www.w3.org/TR/html5/syntax.html#closing-elements-that-have-implied-end-tags`;this.errors.push(St.create(t,e.sourceSpan,i))}}_popContainer(e,t,i){let r=!1;for(let o=this._containerStack.length-1;o>=0;o--){let s=this._containerStack[o];if(((s instanceof Nn?s.fullName:s.name)===e||e===null)&&s instanceof t)return s.endSourceSpan=i,s.sourceSpan.end=i!==null?i.end:s.sourceSpan.end,this._containerStack.splice(o,this._containerStack.length-o),!r;(s instanceof hi||!this._getTagDefinition(s)?.closedByParent)&&(r=!0)}return!1}_consumeAttr(e){let t=yp(e.parts[0],e.parts[1]),i=e.sourceSpan.end;this._peek.type===15&&this._advance();let r="",o=[],s,a;if(this._peek.type===16)for(s=this._peek.sourceSpan,a=this._peek.sourceSpan.end;this._peek.type===16||this._peek.type===17||this._peek.type===9;){let d=this._advance();o.push(d),d.type===17?r+=d.parts.join("").replace(/&([^;]+);/g,SS):d.type===9?r+=d.parts[0]:r+=d.parts.join(""),a=i=d.sourceSpan.end}this._peek.type===15&&(i=this._advance().sourceSpan.end);let c=s&&a&&new ve(s.start,a,s.fullStart);return new bv(t,r,new ve(e.sourceSpan.start,i,e.sourceSpan.fullStart),e.sourceSpan,c,o.length>0?o:void 0,void 0)}_consumeDirective(e){let t=[],i=e.sourceSpan.end,r=null;if(this._advance(),this._peek.type===39){for(i=this._peek.sourceSpan.end,this._advance();this._peek.type===14;)t.push(this._consumeAttr(this._advance()));this._peek.type===40?(r=this._peek.sourceSpan,this._advance()):this.errors.push(St.create(null,e.sourceSpan,"Unterminated directive definition"))}let o=new ve(e.sourceSpan.start,i,e.sourceSpan.fullStart),s=new ve(o.start,r===null?e.sourceSpan.end:r.end,o.fullStart);return new Sv(e.parts[0],t,s,o,r)}_consumeBlockOpen(e){let t=[];for(;this._peek.type===27;){let a=this._advance();t.push(new mh(a.parts[0],a.sourceSpan))}this._peek.type===25&&this._advance();let i=this._peek.sourceSpan.fullStart,r=new ve(e.sourceSpan.start,i,e.sourceSpan.fullStart),o=new ve(e.sourceSpan.start,i,e.sourceSpan.fullStart),s=new hi(e.parts[0],t,[],r,e.sourceSpan,o);this._pushContainer(s,!1)}_consumeBlockClose(e){this._popContainer(null,hi,e.sourceSpan)||this.errors.push(St.create(null,e.sourceSpan,'Unexpected closing block. The block may have been closed earlier. If you meant to write the } character, you should use the "&#125;" HTML entity instead.'))}_consumeIncompleteBlock(e){let t=[];for(;this._peek.type===27;){let a=this._advance();t.push(new mh(a.parts[0],a.sourceSpan))}let i=this._peek.sourceSpan.fullStart,r=new ve(e.sourceSpan.start,i,e.sourceSpan.fullStart),o=new ve(e.sourceSpan.start,i,e.sourceSpan.fullStart),s=new hi(e.parts[0],t,[],r,e.sourceSpan,o);this._pushContainer(s,!1),this._popContainer(null,hi,null),this.errors.push(St.create(e.parts[0],r,`Incomplete block "${e.parts[0]}". If you meant to write the @ character, you should use the "&#64;" HTML entity instead.`))}_consumeLet(e){let t=e.parts[0],i,r;if(this._peek.type!==30){this.errors.push(St.create(e.parts[0],e.sourceSpan,`Invalid @let declaration "${t}". Declaration must have a value.`));return}else i=this._advance();if(this._peek.type!==31){this.errors.push(St.create(e.parts[0],e.sourceSpan,`Unterminated @let declaration "${t}". Declaration must be terminated with a semicolon.`));return}else r=this._advance();let o=r.sourceSpan.fullStart,s=new ve(e.sourceSpan.start,o,e.sourceSpan.fullStart),a=e.sourceSpan.toString().lastIndexOf(t),l=e.sourceSpan.start.moveBy(a),c=new ve(l,e.sourceSpan.end),d=new gh(t,i.parts[0],s,c,i.sourceSpan);this._addToParent(d)}_consumeIncompleteLet(e){let t=e.parts[0]??"",i=t?` "${t}"`:"";if(t.length>0){let r=e.sourceSpan.toString().lastIndexOf(t),o=e.sourceSpan.start.moveBy(r),s=new ve(o,e.sourceSpan.end),a=new ve(e.sourceSpan.start,e.sourceSpan.start.moveBy(0)),l=new gh(t,"",e.sourceSpan,s,a);this._addToParent(l)}this.errors.push(St.create(e.parts[0],e.sourceSpan,`Incomplete @let declaration${i}. @let declarations must be written as \`@let <name> = <value>;\``))}_getContainer(){return this._containerStack.length>0?this._containerStack[this._containerStack.length-1]:null}_getClosestElementLikeParent(){for(let e=this._containerStack.length-1;e>-1;e--){let t=this._containerStack[e];if(t instanceof pi||t instanceof Nn)return t}return null}_addToParent(e){let t=this._getContainer();t===null?this.rootNodes.push(e):t.children.push(e)}_getElementFullName(e,t){let i=this._getPrefix(e,t);return yp(i,e.parts[1])}_getComponentFullName(e,t){let i=e.parts[0],r=this._getComponentTagName(e,t);return r===null?i:r.startsWith(":")?i+r:`${i}:${r}`}_getComponentTagName(e,t){let i=this._getPrefix(e,t),r=e.parts[2];return!i&&!r?null:!i&&r?r:yp(i,r||"ng-component")}_getPrefix(e,t){let i,r;if(e.type===33||e.type===37||e.type===36?(i=e.parts[1],r=e.parts[2]):(i=e.parts[0],r=e.parts[1]),i=i||this._getTagDefinition(r)?.implicitNamespacePrefix||"",!i&&t){let o=t instanceof pi?t.name:t.tagName;if(o!==null){let s=Ki(o)[1],a=this._getTagDefinition(s);a!==null&&!a.preventNamespaceInheritance&&(i=Qy(o))}}return i}};function bS(n,e){return n.length>0&&n[n.length-1]===e}function SS(n,e){return Id[e]!==void 0?Id[e]||n:/^#x[a-f0-9]+$/i.test(e)?String.fromCodePoint(parseInt(e.slice(2),16)):/^#\d+$/.test(e)?String.fromCodePoint(parseInt(e.slice(1),10)):n}var pT="ngPreserveWhitespaces",TS=new Set(["pre","template","textarea","script","style"]),hT=` \f
\r	\v\u1680\u180E\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF`,cO=new RegExp(`[^${hT}]`),uO=new RegExp(`[${hT}]{2,}`,"g");function IS(n){return n.some(e=>e.name===pT)}function mT(n){return n.replace(new RegExp(fT,"g")," ")}var _h=class{preserveSignificantWhitespace;originalNodeMap;requireContext;icuExpansionDepth=0;constructor(e,t,i=!0){this.preserveSignificantWhitespace=e,this.originalNodeMap=t,this.requireContext=i}visitElement(e,t){if(TS.has(e.name)||IS(e.attrs)){let r=new pi(e.name,sr(this,e.attrs),sr(this,e.directives),e.children,e.isSelfClosing,e.sourceSpan,e.startSourceSpan,e.endSourceSpan,e.isVoid,e.i18n);return this.originalNodeMap?.set(r,e),r}let i=new pi(e.name,e.attrs,e.directives,sr(this,e.children),e.isSelfClosing,e.sourceSpan,e.startSourceSpan,e.endSourceSpan,e.isVoid,e.i18n);return this.originalNodeMap?.set(i,e),i}visitAttribute(e,t){return e.name!==pT?e:null}visitText(e,t){let i=e.value.match(cO),r=t&&(t.prev instanceof Ss||t.next instanceof Ss);if(this.icuExpansionDepth>0&&this.preserveSignificantWhitespace)return e;if(i||r){let s=e.tokens.map(d=>d.type===5?hO(d):d);if(!this.preserveSignificantWhitespace&&s.length>0){let d=s[0];s.splice(0,1,dO(d,t));let p=s[s.length-1];s.splice(s.length-1,1,fO(p,t))}let a=yT(e.value),l=this.preserveSignificantWhitespace?a:pO(a,t),c=new Hs(l,e.sourceSpan,s,e.i18n);return this.originalNodeMap?.set(c,e),c}return null}visitComment(e,t){return e}visitExpansion(e,t){this.icuExpansionDepth++;let i;try{i=new Ss(e.switchValue,e.type,sr(this,e.cases),e.sourceSpan,e.switchValueSourceSpan,e.i18n)}finally{this.icuExpansionDepth--}return this.originalNodeMap?.set(i,e),i}visitExpansionCase(e,t){let i=new hh(e.value,sr(this,e.expression),e.sourceSpan,e.valueSourceSpan,e.expSourceSpan);return this.originalNodeMap?.set(i,e),i}visitBlock(e,t){let i=new hi(e.name,e.parameters,sr(this,e.children),e.sourceSpan,e.nameSpan,e.startSourceSpan,e.endSourceSpan);return this.originalNodeMap?.set(i,e),i}visitBlockParameter(e,t){return e}visitLetDeclaration(e,t){return e}visitComponent(e,t){if(e.tagName&&TS.has(e.tagName)||IS(e.attrs)){let r=new Nn(e.componentName,e.tagName,e.fullName,sr(this,e.attrs),sr(this,e.directives),e.children,e.isSelfClosing,e.sourceSpan,e.startSourceSpan,e.endSourceSpan,e.i18n);return this.originalNodeMap?.set(r,e),r}let i=new Nn(e.componentName,e.tagName,e.fullName,e.attrs,e.directives,sr(this,e.children),e.isSelfClosing,e.sourceSpan,e.startSourceSpan,e.endSourceSpan,e.i18n);return this.originalNodeMap?.set(i,e),i}visitDirective(e,t){return e}visit(e,t){if(this.requireContext&&!t)throw new Error("WhitespaceVisitor requires context. Visit via `visitAllWithSiblings` to get this context.");return!1}};function dO(n,e){return n.type!==5||!!e?.prev?n:gT(n,i=>i.trimStart())}function fO(n,e){return n.type!==5||!!e?.next?n:gT(n,i=>i.trimEnd())}function pO(n,e){let t=!e?.prev,i=!e?.next,r=t?n.trimStart():n;return i?r.trimEnd():r}function hO({type:n,parts:e,sourceSpan:t}){return{type:n,parts:[yT(e[0])],sourceSpan:t}}function gT({type:n,parts:e,sourceSpan:t},i){return{type:n,parts:[i(e[0])],sourceSpan:t}}function yT(n){return mT(n).replace(uO," ")}function sr(n,e){let t=[];return e.forEach((i,r)=>{let o={prev:e[r-1],next:e[r+1]},s=i.visit(n,o);s&&t.push(s)}),t}var Se=(function(n){return n[n.Character=0]="Character",n[n.Identifier=1]="Identifier",n[n.PrivateIdentifier=2]="PrivateIdentifier",n[n.Keyword=3]="Keyword",n[n.String=4]="String",n[n.Operator=5]="Operator",n[n.Number=6]="Number",n[n.Error=7]="Error",n})(Se||{}),Ts=(function(n){return n[n.Plain=0]="Plain",n[n.TemplateLiteralPart=1]="TemplateLiteralPart",n[n.TemplateLiteralEnd=2]="TemplateLiteralEnd",n})(Ts||{}),mO=["var","let","as","null","undefined","true","false","if","else","this","typeof","void","in"],Ad=class{tokenize(e){return new Mv(e).scan()}},Yi=class{index;end;type;numValue;strValue;constructor(e,t,i,r,o){this.index=e,this.end=t,this.type=i,this.numValue=r,this.strValue=o}isCharacter(e){return this.type===Se.Character&&this.numValue===e}isNumber(){return this.type===Se.Number}isString(){return this.type===Se.String}isOperator(e){return this.type===Se.Operator&&this.strValue===e}isIdentifier(){return this.type===Se.Identifier}isPrivateIdentifier(){return this.type===Se.PrivateIdentifier}isKeyword(){return this.type===Se.Keyword}isKeywordLet(){return this.type===Se.Keyword&&this.strValue==="let"}isKeywordAs(){return this.type===Se.Keyword&&this.strValue==="as"}isKeywordNull(){return this.type===Se.Keyword&&this.strValue==="null"}isKeywordUndefined(){return this.type===Se.Keyword&&this.strValue==="undefined"}isKeywordTrue(){return this.type===Se.Keyword&&this.strValue==="true"}isKeywordFalse(){return this.type===Se.Keyword&&this.strValue==="false"}isKeywordThis(){return this.type===Se.Keyword&&this.strValue==="this"}isKeywordTypeof(){return this.type===Se.Keyword&&this.strValue==="typeof"}isKeywordVoid(){return this.type===Se.Keyword&&this.strValue==="void"}isKeywordIn(){return this.type===Se.Keyword&&this.strValue==="in"}isError(){return this.type===Se.Error}toNumber(){return this.type===Se.Number?this.numValue:-1}isTemplateLiteralPart(){return this.isString()&&this.kind===Ts.TemplateLiteralPart}isTemplateLiteralEnd(){return this.isString()&&this.kind===Ts.TemplateLiteralEnd}isTemplateLiteralInterpolationStart(){return this.isOperator("${")}toString(){switch(this.type){case Se.Character:case Se.Identifier:case Se.Keyword:case Se.Operator:case Se.PrivateIdentifier:case Se.String:case Se.Error:return this.strValue;case Se.Number:return this.numValue.toString();default:return null}}},Ou=class extends Yi{kind;constructor(e,t,i,r){super(e,t,Se.String,0,i),this.kind=r}};function Su(n,e,t){return new Yi(n,e,Se.Character,t,String.fromCharCode(t))}function gO(n,e,t){return new Yi(n,e,Se.Identifier,0,t)}function yO(n,e,t){return new Yi(n,e,Se.PrivateIdentifier,0,t)}function vO(n,e,t){return new Yi(n,e,Se.Keyword,0,t)}function Tu(n,e,t){return new Yi(n,e,Se.Operator,0,t)}function _O(n,e,t){return new Yi(n,e,Se.Number,t,"")}function wO(n,e,t){return new Yi(n,e,Se.Error,0,t)}var rp=new Yi(-1,-1,Se.Character,0,""),Mv=class{input;tokens=[];length;peek=0;index=-1;braceStack=[];constructor(e){this.input=e,this.length=e.length,this.advance()}scan(){let e=this.scanToken();for(;e!==null;)this.tokens.push(e),e=this.scanToken();return this.tokens}advance(){this.peek=++this.index>=this.length?Jt:this.input.charCodeAt(this.index)}scanToken(){let e=this.input,t=this.length,i=this.peek,r=this.index;for(;i<=F1;)if(++r>=t){i=Jt;break}else i=e.charCodeAt(r);if(this.peek=i,this.index=r,r>=t)return null;if(DS(i))return this.scanIdentifier();if(qi(i))return this.scanNumber(r);let o=r;switch(i){case ku:return this.advance(),qi(this.peek)?this.scanNumber(o):Su(o,this.index,ku);case vi:case cn:case To:case ws:case ti:case $r:case Qn:return this.scanCharacter(o,i);case Gi:return this.scanOpenBrace(o,i);case wn:return this.scanCloseBrace(o,i);case hd:case pd:return this.scanString();case av:return this.advance(),this.scanTemplateLiteralPart(o);case L1:return this.scanPrivateIdentifier();case O1:return this.scanComplexOperator(o,"+",ln,"=");case Zp:return this.scanComplexOperator(o,"-",ln,"=");case Hi:return this.scanComplexOperator(o,"/",ln,"=");case hR:return this.scanComplexOperator(o,"%",ln,"=");case _R:return this.scanOperator(o,"^");case Yb:return this.scanStar(o);case Jb:return this.scanQuestion(o);case tl:case fi:return this.scanComplexOperator(o,String.fromCharCode(i),ln,"=");case sv:case ln:return this.scanComplexOperator(o,String.fromCharCode(i),ln,"=",ln,"=");case Xp:return this.scanComplexOperator(o,"&",Xp,"&",ln,"=");case Qb:return this.scanComplexOperator(o,"|",Qb,"|",ln,"=");case W1:for(;md(this.peek);)this.advance();return this.scanToken()}return this.advance(),this.error(`Unexpected character [${String.fromCharCode(i)}]`,0)}scanCharacter(e,t){return this.advance(),Su(e,this.index,t)}scanOperator(e,t){return this.advance(),Tu(e,this.index,t)}scanOpenBrace(e,t){return this.braceStack.push("expression"),this.advance(),Su(e,this.index,t)}scanCloseBrace(e,t){return this.advance(),this.braceStack.pop()==="interpolation"?(this.tokens.push(Su(e,this.index,wn)),this.scanTemplateLiteralPart(this.index)):Su(e,this.index,t)}scanComplexOperator(e,t,i,r,o,s){this.advance();let a=t;return this.peek==i&&(this.advance(),a+=r),o!=null&&this.peek==o&&(this.advance(),a+=s),Tu(e,this.index,a)}scanIdentifier(){let e=this.index;for(this.advance();AS(this.peek);)this.advance();let t=this.input.substring(e,this.index);return mO.indexOf(t)>-1?vO(e,this.index,t):gO(e,this.index,t)}scanPrivateIdentifier(){let e=this.index;if(this.advance(),!DS(this.peek))return this.error("Invalid character [#]",-1);for(;AS(this.peek);)this.advance();let t=this.input.substring(e,this.index);return yO(e,this.index,t)}scanNumber(e){let t=this.index===e,i=!1;for(this.advance();;){if(!qi(this.peek))if(this.peek===Fo){if(!qi(this.input.charCodeAt(this.index-1))||!qi(this.input.charCodeAt(this.index+1)))return this.error("Invalid numeric separator",0);i=!0}else if(this.peek===ku)t=!1;else if(CO(this.peek)){if(this.advance(),EO(this.peek)&&this.advance(),!qi(this.peek))return this.error("Invalid exponent",-1);t=!1}else break;this.advance()}let r=this.input.substring(e,this.index);i&&(r=r.replace(/_/g,""));let o=t?bO(r):parseFloat(r);return _O(e,this.index,o)}scanString(){let e=this.index,t=this.peek;this.advance();let i="",r=this.index,o=this.input;for(;this.peek!=t;)if(this.peek==nl){let a=this.scanStringBackslash(i,r);if(typeof a!="string")return a;i=a,r=this.index}else{if(this.peek==Jt)return this.error("Unterminated quote",0);this.advance()}let s=o.substring(r,this.index);return this.advance(),new Ou(e,this.index,i+s,Ts.Plain)}scanQuestion(e){this.advance();let t="?";return this.peek===Jb?(t+="?",this.advance(),this.peek===ln&&(t+="=",this.advance())):this.peek===ku&&(t+=".",this.advance()),Tu(e,this.index,t)}scanTemplateLiteralPart(e){let t="",i=this.index;for(;this.peek!==av;)if(this.peek===nl){let o=this.scanStringBackslash(t,i);if(typeof o!="string")return o;t=o,i=this.index}else if(this.peek===Lh){let o=this.index;if(this.advance(),this.peek===Gi)return this.braceStack.push("interpolation"),this.tokens.push(new Ou(e,o,t+this.input.substring(i,o),Ts.TemplateLiteralPart)),this.advance(),Tu(o,this.index,this.input.substring(o,this.index))}else{if(this.peek===Jt)return this.error("Unterminated template literal",0);this.advance()}let r=this.input.substring(i,this.index);return this.advance(),new Ou(e,this.index,t+r,Ts.TemplateLiteralEnd)}error(e,t){let i=this.index+t;return wO(i,this.index,`Lexer Error: ${e} at column ${i} in expression [${this.input}]`)}scanStringBackslash(e,t){e+=this.input.substring(t,this.index);let i;if(this.advance(),this.peek===H1){let r=this.input.substring(this.index+1,this.index+5);if(/^[0-9a-f]+$/i.test(r))i=parseInt(r,16);else return this.error(`Invalid unicode escape [\\u${r}]`,0);for(let o=0;o<5;o++)this.advance()}else i=xO(this.peek),this.advance();return e+=String.fromCharCode(i),e}scanStar(e){this.advance();let t="*";return this.peek===Yb?(t+="*",this.advance(),this.peek===ln&&(t+="=",this.advance())):this.peek===ln&&(t+="=",this.advance()),Tu(e,this.index,t)}};function DS(n){return Os<=n&&n<=Vd||Ro<=n&&n<=xl||n==Fo||n==Lh}function AS(n){return hl(n)||qi(n)||n==Fo||n==Lh}function CO(n){return n==CR||n==gR}function EO(n){return n==Zp||n==O1}function xO(n){switch(n){case B1:return bs;case C_:return R1;case U1:return __;case $1:return v_;case q1:return P1;default:return n}}function bO(n){let e=parseInt(n);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+n);return e}var Nv=class{strings;expressions;offsets;constructor(e,t,i){this.strings=e,this.expressions=t,this.offsets=i}},Pv=class{templateBindings;warnings;errors;constructor(e,t,i){this.templateBindings=e,this.warnings=t,this.errors=i}};function Co(n){return n.start.toString()||"(unknown)"}var wh=class{_lexer;_supportsDirectPipeReferences;constructor(e,t=!1){this._lexer=e,this._supportsDirectPipeReferences=t}parseAction(e,t,i,r=ur){let o=[];this._checkNoInterpolation(o,e,t,r);let{stripped:s}=this._stripComments(e),a=this._lexer.tokenize(s),l=new gs(e,t,i,a,1,o,0,this._supportsDirectPipeReferences).parseChain();return new Jn(l,e,Co(t),i,o)}parseBinding(e,t,i,r=ur){let o=[],s=this._parseBindingAst(e,t,i,r,o);return new Jn(s,e,Co(t),i,o)}checkSimpleExpression(e){let t=new Rv;return e.visit(t),t.errors}parseSimpleBinding(e,t,i,r=ur){let o=[],s=this._parseBindingAst(e,t,i,r,o),a=this.checkSimpleExpression(s);return a.length>0&&o.push(Qa(`Host binding expression cannot contain ${a.join(" ")}`,e,"",t)),new Jn(s,e,Co(t),i,o)}_parseBindingAst(e,t,i,r,o){this._checkNoInterpolation(o,e,t,r);let{stripped:s}=this._stripComments(e),a=this._lexer.tokenize(s);return new gs(e,t,i,a,0,o,0,this._supportsDirectPipeReferences).parseChain()}parseTemplateBindings(e,t,i,r,o){let s=this._lexer.tokenize(t),a=[];return new gs(t,i,o,s,0,a,0,this._supportsDirectPipeReferences).parseTemplateBindings({source:e,span:new ei(r,r+e.length)})}parseInterpolation(e,t,i,r,o=ur){let s=[],{strings:a,expressions:l,offsets:c}=this.splitInterpolation(e,t,s,r,o);if(l.length===0)return null;let d=[];for(let p=0;p<l.length;++p){let h=r?.[p*2+1]?.sourceSpan,y=l[p].text,{stripped:E,hasComments:A}=this._stripComments(y),R=this._lexer.tokenize(E);if(A&&E.trim().length===0&&R.length===0){s.push(Qa("Interpolation expression cannot only contain a comment",e,`at column ${l[p].start} in`,t));continue}let k=new gs(h?y:e,h||t,i,R,0,s,c[p],this._supportsDirectPipeReferences).parseChain();d.push(k)}return this.createInterpolationAst(a.map(p=>p.text),d,e,Co(t),i,s)}parseInterpolationExpression(e,t,i){let{stripped:r}=this._stripComments(e),o=this._lexer.tokenize(r),s=[],a=new gs(e,t,i,o,0,s,0,this._supportsDirectPipeReferences).parseChain(),l=["",""];return this.createInterpolationAst(l,[a],e,Co(t),i,s)}createInterpolationAst(e,t,i,r,o,s){let a=new Ps(0,i.length),l=new Ld(a,a.toAbsolute(o),e,t);return new Jn(l,i,r,o,s)}splitInterpolation(e,t,i,r,o=ur){let s=[],a=[],l=[],c=r?SO(r):null,d=0,p=!1,h=!1,{start:y,end:E}=o;for(;d<e.length;)if(p){let A=d,R=A+y.length,k=this._getInterpolationEndIndex(e,E,R);if(k===-1){p=!1,h=!0;break}let H=k+E.length,K=e.substring(R,k);K.trim().length===0&&i.push(Qa("Blank expressions are not allowed in interpolated strings",e,`at column ${d} in`,t)),a.push({text:K,start:A,end:H});let oe=(c?.get(A)??A)+y.length;l.push(oe),d=H,p=!1}else{let A=d;d=e.indexOf(y,d),d===-1&&(d=e.length);let R=e.substring(A,d);s.push({text:R,start:A,end:d}),p=!0}if(!p)if(h){let A=s[s.length-1];A.text+=e.substring(d),A.end=e.length}else s.push({text:e.substring(d),start:d,end:e.length});return new Nv(s,a,l)}wrapLiteralPrimitive(e,t,i){let r=new Ps(0,e==null?0:e.length);return new Jn(new Yn(r,r.toAbsolute(i),e),e,typeof t=="string"?t:Co(t),i,[])}_stripComments(e){let t=this._commentStart(e);return t!=null?{stripped:e.substring(0,t),hasComments:!0}:{stripped:e,hasComments:!1}}_commentStart(e){let t=null;for(let i=0;i<e.length-1;i++){let r=e.charCodeAt(i),o=e.charCodeAt(i+1);if(r===Hi&&o==Hi&&t==null)return i;t===r?t=null:t==null&&Lu(r)&&(t=r)}return null}_checkNoInterpolation(e,t,i,{start:r,end:o}){let s=-1,a=-1;for(let l of this._forEachUnquotedChar(t,0))if(s===-1)t.startsWith(r)&&(s=l);else if(a=this._getInterpolationEndIndex(t,o,l),a>-1)break;s>-1&&a>-1&&e.push(Qa(`Got interpolation (${r}${o}) where expression was expected`,t,`at column ${s} in`,i))}_getInterpolationEndIndex(e,t,i){for(let r of this._forEachUnquotedChar(e,i)){if(e.startsWith(t,r))return r;if(e.startsWith("//",r))return e.indexOf(t,r)}return-1}*_forEachUnquotedChar(e,t){let i=null,r=0;for(let o=t;o<e.length;o++){let s=e[o];Lu(e.charCodeAt(o))&&(i===null||i===s)&&r%2===0?i=i===null?s:null:i===null&&(yield o),r=s==="\\"?r+1:0}}},Nu=(function(n){return n[n.None=0]="None",n[n.Writable=1]="Writable",n})(Nu||{}),gs=class{input;parseSourceSpan;absoluteOffset;tokens;parseFlags;errors;offset;supportsDirectPipeReferences;rparensExpected=0;rbracketsExpected=0;rbracesExpected=0;context=Nu.None;sourceSpanCache=new Map;index=0;constructor(e,t,i,r,o,s,a,l){this.input=e,this.parseSourceSpan=t,this.absoluteOffset=i,this.tokens=r,this.parseFlags=o,this.errors=s,this.offset=a,this.supportsDirectPipeReferences=l}peek(e){let t=this.index+e;return t<this.tokens.length?this.tokens[t]:rp}get next(){return this.peek(0)}get atEOF(){return this.index>=this.tokens.length}get inputIndex(){return this.atEOF?this.currentEndIndex:this.next.index+this.offset}get currentEndIndex(){return this.index>0?this.peek(-1).end+this.offset:this.tokens.length===0?this.input.length+this.offset:this.next.index+this.offset}get currentAbsoluteOffset(){return this.absoluteOffset+this.inputIndex}span(e,t){let i=this.currentEndIndex;if(t!==void 0&&t>this.currentEndIndex&&(i=t),e>i){let r=i;i=e,e=r}return new Ps(e,i)}sourceSpan(e,t){let i=`${e}@${this.inputIndex}:${t}`;return this.sourceSpanCache.has(i)||this.sourceSpanCache.set(i,this.span(e,t).toAbsolute(this.absoluteOffset)),this.sourceSpanCache.get(i)}advance(){this.index++}withContext(e,t){this.context|=e;let i=t();return this.context^=e,i}consumeOptionalCharacter(e){return this.next.isCharacter(e)?(this.advance(),!0):!1}peekKeywordLet(){return this.next.isKeywordLet()}peekKeywordAs(){return this.next.isKeywordAs()}expectCharacter(e){this.consumeOptionalCharacter(e)||this.error(`Missing expected ${String.fromCharCode(e)}`)}consumeOptionalOperator(e){return this.next.isOperator(e)?(this.advance(),!0):!1}isAssignmentOperator(e){return e.type===Se.Operator&&_n.isAssignmentOperation(e.strValue)}expectOperator(e){this.consumeOptionalOperator(e)||this.error(`Missing expected operator ${e}`)}prettyPrintToken(e){return e===rp?"end of input":`token ${e}`}expectIdentifierOrKeyword(){let e=this.next;return!e.isIdentifier()&&!e.isKeyword()?(e.isPrivateIdentifier()?this._reportErrorForPrivateIdentifier(e,"expected identifier or keyword"):this.error(`Unexpected ${this.prettyPrintToken(e)}, expected identifier or keyword`),null):(this.advance(),e.toString())}expectIdentifierOrKeywordOrString(){let e=this.next;return!e.isIdentifier()&&!e.isKeyword()&&!e.isString()?(e.isPrivateIdentifier()?this._reportErrorForPrivateIdentifier(e,"expected identifier, keyword or string"):this.error(`Unexpected ${this.prettyPrintToken(e)}, expected identifier, keyword, or string`),""):(this.advance(),e.toString())}parseChain(){let e=[],t=this.inputIndex;for(;this.index<this.tokens.length;){let i=this.parsePipe();if(e.push(i),this.consumeOptionalCharacter(Qn))for(this.parseFlags&1||this.error("Binding expression cannot contain chained expression");this.consumeOptionalCharacter(Qn););else if(this.index<this.tokens.length){let r=this.index;if(this.error(`Unexpected token '${this.next}'`),this.index===r)break}}if(e.length===0){let i=this.offset,r=this.offset+this.input.length;return new kn(this.span(i,r),this.sourceSpan(i,r))}return e.length==1?e[0]:new al(this.span(t),this.sourceSpan(t),e)}parsePipe(){let e=this.inputIndex,t=this.parseExpression();if(this.consumeOptionalOperator("|")){this.parseFlags&1&&this.error("Cannot have a pipe in an action expression");do{let i=this.inputIndex,r=this.expectIdentifierOrKeyword(),o,s;r!==null?o=this.sourceSpan(i):(r="",s=this.next.index!==-1?this.next.index:this.input.length+this.offset,o=new Ps(s,s).toAbsolute(this.absoluteOffset));let a=[];for(;this.consumeOptionalCharacter($r);)a.push(this.parseExpression());let l;if(this.supportsDirectPipeReferences){let c=r.charCodeAt(0);l=c===Fo||c>=Ro&&c<=xl?gp.ReferencedDirectly:gp.ReferencedByName}else l=gp.ReferencedByName;t=new Lp(this.span(e),this.sourceSpan(e,s),t,r,a,l,o)}while(this.consumeOptionalOperator("|"))}return t}parseExpression(){return this.parseConditional()}parseConditional(){let e=this.inputIndex,t=this.parseLogicalOr();if(this.consumeOptionalOperator("?")){let i=this.parsePipe(),r;if(this.consumeOptionalCharacter($r))r=this.parsePipe();else{let o=this.inputIndex,s=this.input.substring(e,o);this.error(`Conditional expression ${s} requires all 3 expressions`),r=new kn(this.span(e),this.sourceSpan(e))}return new Fp(this.span(e),this.sourceSpan(e),t,i,r)}else return t}parseLogicalOr(){let e=this.inputIndex,t=this.parseLogicalAnd();for(;this.consumeOptionalOperator("||");){let i=this.parseLogicalAnd();t=new _n(this.span(e),this.sourceSpan(e),"||",t,i)}return t}parseLogicalAnd(){let e=this.inputIndex,t=this.parseNullishCoalescing();for(;this.consumeOptionalOperator("&&");){let i=this.parseNullishCoalescing();t=new _n(this.span(e),this.sourceSpan(e),"&&",t,i)}return t}parseNullishCoalescing(){let e=this.inputIndex,t=this.parseEquality();for(;this.consumeOptionalOperator("??");){let i=this.parseEquality();t=new _n(this.span(e),this.sourceSpan(e),"??",t,i)}return t}parseEquality(){let e=this.inputIndex,t=this.parseRelational();for(;this.next.type==Se.Operator;){let i=this.next.strValue;switch(i){case"==":case"===":case"!=":case"!==":this.advance();let r=this.parseRelational();t=new _n(this.span(e),this.sourceSpan(e),i,t,r);continue}break}return t}parseRelational(){let e=this.inputIndex,t=this.parseAdditive();for(;this.next.type==Se.Operator||this.next.isKeywordIn;){let i=this.next.strValue;switch(i){case"<":case">":case"<=":case">=":case"in":this.advance();let r=this.parseAdditive();t=new _n(this.span(e),this.sourceSpan(e),i,t,r);continue}break}return t}parseAdditive(){let e=this.inputIndex,t=this.parseMultiplicative();for(;this.next.type==Se.Operator;){let i=this.next.strValue;switch(i){case"+":case"-":this.advance();let r=this.parseMultiplicative();t=new _n(this.span(e),this.sourceSpan(e),i,t,r);continue}break}return t}parseMultiplicative(){let e=this.inputIndex,t=this.parseExponentiation();for(;this.next.type==Se.Operator;){let i=this.next.strValue;switch(i){case"*":case"%":case"/":this.advance();let r=this.parseExponentiation();t=new _n(this.span(e),this.sourceSpan(e),i,t,r);continue}break}return t}parseExponentiation(){let e=this.inputIndex,t=this.parsePrefix();for(;this.next.type==Se.Operator&&this.next.strValue==="**";){(t instanceof el||t instanceof Yu||t instanceof Ju||t instanceof Qu)&&this.error("Unary operator used immediately before exponentiation expression. Parenthesis must be used to disambiguate operator precedence"),this.advance();let i=this.parseExponentiation();t=new _n(this.span(e),this.sourceSpan(e),"**",t,i)}return t}parsePrefix(){if(this.next.type==Se.Operator){let e=this.inputIndex,t=this.next.strValue,i;switch(t){case"+":return this.advance(),i=this.parsePrefix(),el.createPlus(this.span(e),this.sourceSpan(e),i);case"-":return this.advance(),i=this.parsePrefix(),el.createMinus(this.span(e),this.sourceSpan(e),i);case"!":return this.advance(),i=this.parsePrefix(),new Yu(this.span(e),this.sourceSpan(e),i)}}else if(this.next.isKeywordTypeof()){this.advance();let e=this.inputIndex,t=this.parsePrefix();return new Ju(this.span(e),this.sourceSpan(e),t)}else if(this.next.isKeywordVoid()){this.advance();let e=this.inputIndex,t=this.parsePrefix();return new Qu(this.span(e),this.sourceSpan(e),t)}return this.parseCallChain()}parseCallChain(){let e=this.inputIndex,t=this.parsePrimary();for(;;)if(this.consumeOptionalCharacter(ku))t=this.parseAccessMember(t,e,!1);else if(this.consumeOptionalOperator("?."))this.consumeOptionalCharacter(vi)?t=this.parseCall(t,e,!0):t=this.consumeOptionalCharacter(To)?this.parseKeyedReadOrWrite(t,e,!0):this.parseAccessMember(t,e,!0);else if(this.consumeOptionalCharacter(To))t=this.parseKeyedReadOrWrite(t,e,!1);else if(this.consumeOptionalCharacter(vi))t=this.parseCall(t,e,!1);else if(this.consumeOptionalOperator("!"))t=new Xu(this.span(e),this.sourceSpan(e),t);else if(this.next.isTemplateLiteralEnd())t=this.parseNoInterpolationTaggedTemplateLiteral(t,e);else if(this.next.isTemplateLiteralPart())t=this.parseTaggedTemplateLiteral(t,e);else return t}parsePrimary(){let e=this.inputIndex;if(this.consumeOptionalCharacter(vi)){this.rparensExpected++;let t=this.parsePipe();return this.consumeOptionalCharacter(cn)||(this.error("Missing closing parentheses"),this.consumeOptionalCharacter(cn)),this.rparensExpected--,new td(this.span(e),this.sourceSpan(e),t)}else{if(this.next.isKeywordNull())return this.advance(),new Yn(this.span(e),this.sourceSpan(e),null);if(this.next.isKeywordUndefined())return this.advance(),new Yn(this.span(e),this.sourceSpan(e),void 0);if(this.next.isKeywordTrue())return this.advance(),new Yn(this.span(e),this.sourceSpan(e),!0);if(this.next.isKeywordFalse())return this.advance(),new Yn(this.span(e),this.sourceSpan(e),!1);if(this.next.isKeywordIn())return this.advance(),new Yn(this.span(e),this.sourceSpan(e),"in");if(this.next.isKeywordThis())return this.advance(),new Rs(this.span(e),this.sourceSpan(e));if(this.consumeOptionalCharacter(To)){this.rbracketsExpected++;let t=this.parseExpressionList(ws);return this.rbracketsExpected--,this.expectCharacter(ws),new Op(this.span(e),this.sourceSpan(e),t)}else{if(this.next.isCharacter(Gi))return this.parseLiteralMap();if(this.next.isIdentifier())return this.parseAccessMember(new mr(this.span(e),this.sourceSpan(e)),e,!1);if(this.next.isNumber()){let t=this.next.toNumber();return this.advance(),new Yn(this.span(e),this.sourceSpan(e),t)}else{if(this.next.isTemplateLiteralEnd())return this.parseNoInterpolationTemplateLiteral();if(this.next.isTemplateLiteralPart())return this.parseTemplateLiteral();if(this.next.isString()&&this.next.kind===Ts.Plain){let t=this.next.toString();return this.advance(),new Yn(this.span(e),this.sourceSpan(e),t)}else return this.next.isPrivateIdentifier()?(this._reportErrorForPrivateIdentifier(this.next,null),new kn(this.span(e),this.sourceSpan(e))):this.index>=this.tokens.length?(this.error(`Unexpected end of expression: ${this.input}`),new kn(this.span(e),this.sourceSpan(e))):(this.error(`Unexpected token ${this.next}`),new kn(this.span(e),this.sourceSpan(e)))}}}}parseExpressionList(e){let t=[];do if(!this.next.isCharacter(e))t.push(this.parsePipe());else break;while(this.consumeOptionalCharacter(ti));return t}parseLiteralMap(){let e=[],t=[],i=this.inputIndex;if(this.expectCharacter(Gi),!this.consumeOptionalCharacter(wn)){this.rbracesExpected++;do{let r=this.inputIndex,o=this.next.isString(),s=this.expectIdentifierOrKeywordOrString(),a={key:s,quoted:o};if(e.push(a),o)this.expectCharacter($r),t.push(this.parsePipe());else if(this.consumeOptionalCharacter($r))t.push(this.parsePipe());else{a.isShorthandInitialized=!0;let l=this.span(r),c=this.sourceSpan(r);t.push(new Gr(l,c,c,new mr(l,c),s))}}while(this.consumeOptionalCharacter(ti)&&!this.next.isCharacter(wn));this.rbracesExpected--,this.expectCharacter(wn)}return new Vp(this.span(i),this.sourceSpan(i),e,t)}parseAccessMember(e,t,i){let r=this.inputIndex,o=this.withContext(Nu.Writable,()=>{let a=this.expectIdentifierOrKeyword()??"";return a.length===0&&this.error("Expected identifier for property access",e.span.end),a}),s=this.sourceSpan(r);if(i)return this.isAssignmentOperator(this.next)?(this.advance(),this.error("The '?.' operator cannot be used in the assignment"),new kn(this.span(t),this.sourceSpan(t))):new ju(this.span(t),this.sourceSpan(t),s,e,o);if(this.isAssignmentOperator(this.next)){let a=this.next.strValue;if(!(this.parseFlags&1))return this.advance(),this.error("Bindings cannot contain assignments"),new kn(this.span(t),this.sourceSpan(t));let l=new Gr(this.span(t),this.sourceSpan(t),s,e,o);this.advance();let c=this.parseConditional();return new _n(this.span(t),this.sourceSpan(t),a,l,c)}else return new Gr(this.span(t),this.sourceSpan(t),s,e,o)}parseCall(e,t,i){let r=this.inputIndex;this.rparensExpected++;let o=this.parseCallArguments(),s=this.span(r,this.inputIndex).toAbsolute(this.absoluteOffset);this.expectCharacter(cn),this.rparensExpected--;let a=this.span(t),l=this.sourceSpan(t);return i?new Bp(a,l,e,o,s):new ll(a,l,e,o,s)}parseCallArguments(){if(this.next.isCharacter(cn))return[];let e=[];do e.push(this.parsePipe());while(this.consumeOptionalCharacter(ti));return e}expectTemplateBindingKey(){let e="",t=!1,i=this.currentAbsoluteOffset;do e+=this.expectIdentifierOrKeywordOrString(),t=this.consumeOptionalOperator("-"),t&&(e+="-");while(t);return{source:e,span:new ei(i,i+e.length)}}parseTemplateBindings(e){let t=[];for(t.push(...this.parseDirectiveKeywordBindings(e));this.index<this.tokens.length;){let i=this.parseLetBinding();if(i)t.push(i);else{let r=this.expectTemplateBindingKey(),o=this.parseAsBinding(r);o?t.push(o):(r.source=e.source+r.source.charAt(0).toUpperCase()+r.source.substring(1),t.push(...this.parseDirectiveKeywordBindings(r)))}this.consumeStatementTerminator()}return new Pv(t,[],this.errors)}parseKeyedReadOrWrite(e,t,i){return this.withContext(Nu.Writable,()=>{this.rbracketsExpected++;let r=this.parsePipe();if(r instanceof kn&&this.error("Key access cannot be empty"),this.rbracketsExpected--,this.expectCharacter(ws),this.isAssignmentOperator(this.next)){let o=this.next.strValue;if(i)this.advance(),this.error("The '?.' operator cannot be used in the assignment");else{let s=new Fs(this.span(t),this.sourceSpan(t),e,r);this.advance();let a=this.parseConditional();return new _n(this.span(t),this.sourceSpan(t),o,s,a)}}else return i?new Ku(this.span(t),this.sourceSpan(t),e,r):new Fs(this.span(t),this.sourceSpan(t),e,r);return new kn(this.span(t),this.sourceSpan(t))})}parseDirectiveKeywordBindings(e){let t=[];this.consumeOptionalCharacter($r);let i=this.getDirectiveBoundTarget(),r=this.currentAbsoluteOffset,o=this.parseAsBinding(e);o||(this.consumeStatementTerminator(),r=this.currentAbsoluteOffset);let s=new ei(e.span.start,r);return t.push(new Ky(s,e,i)),o&&t.push(o),t}getDirectiveBoundTarget(){if(this.next===rp||this.peekKeywordAs()||this.peekKeywordLet())return null;let e=this.parsePipe(),{start:t,end:i}=e.span,r=this.input.substring(t,i);return new Jn(e,r,Co(this.parseSourceSpan),this.absoluteOffset+t,this.errors)}parseAsBinding(e){if(!this.peekKeywordAs())return null;this.advance();let t=this.expectTemplateBindingKey();this.consumeStatementTerminator();let i=new ei(e.span.start,this.currentAbsoluteOffset);return new nd(i,t,e)}parseLetBinding(){if(!this.peekKeywordLet())return null;let e=this.currentAbsoluteOffset;this.advance();let t=this.expectTemplateBindingKey(),i=null;this.consumeOptionalOperator("=")&&(i=this.expectTemplateBindingKey()),this.consumeStatementTerminator();let r=new ei(e,this.currentAbsoluteOffset);return new nd(r,t,i)}parseNoInterpolationTaggedTemplateLiteral(e,t){let i=this.parseNoInterpolationTemplateLiteral();return new Zu(this.span(t),this.sourceSpan(t),e,i)}parseNoInterpolationTemplateLiteral(){let e=this.next.strValue,t=this.inputIndex;this.advance();let i=this.span(t),r=this.sourceSpan(t);return new ed(i,r,[new Up(i,r,e)],[])}parseTaggedTemplateLiteral(e,t){let i=this.parseTemplateLiteral();return new Zu(this.span(t),this.sourceSpan(t),e,i)}parseTemplateLiteral(){let e=[],t=[],i=this.inputIndex;for(;this.next!==rp;){let r=this.next;if(r.isTemplateLiteralPart()||r.isTemplateLiteralEnd()){let o=this.inputIndex;if(this.advance(),e.push(new Up(this.span(o),this.sourceSpan(o),r.strValue)),r.isTemplateLiteralEnd())break}else if(r.isTemplateLiteralInterpolationStart()){this.advance(),this.rbracesExpected++;let o=this.parsePipe();o instanceof kn?this.error("Template literal interpolation cannot be empty"):t.push(o),this.rbracesExpected--}else this.advance()}return new ed(this.span(i),this.sourceSpan(i),e,t)}consumeStatementTerminator(){this.consumeOptionalCharacter(Qn)||this.consumeOptionalCharacter(ti)}error(e,t=this.index){this.errors.push(Qa(e,this.input,this.getErrorLocationText(t),this.parseSourceSpan)),this.skip()}getErrorLocationText(e){return e<this.tokens.length?`at column ${this.tokens[e].index+1} in`:"at the end of the expression"}_reportErrorForPrivateIdentifier(e,t){let i=`Private identifiers are not supported. Unexpected private identifier: ${e}`;t!==null&&(i+=`, ${t}`),this.error(i)}skip(){let e=this.next;for(;this.index<this.tokens.length&&!e.isCharacter(Qn)&&!e.isOperator("|")&&(this.rparensExpected<=0||!e.isCharacter(cn))&&(this.rbracesExpected<=0||!e.isCharacter(wn))&&(this.rbracketsExpected<=0||!e.isCharacter(ws))&&(!(this.context&Nu.Writable)||!this.isAssignmentOperator(e));)this.next.isError()&&this.errors.push(Qa(this.next.toString(),this.input,this.getErrorLocationText(this.next.index),this.parseSourceSpan)),this.advance(),e=this.next}};function Qa(n,e,t,i){t.length>0&&(t=` ${t} `);let r=Co(i),o=`Parser Error: ${n}${t}[${e}] in ${r}`;return new he(i,o)}var Rv=class extends id{errors=[];visitPipe(){this.errors.push("pipes")}};function SO(n){let e=new Map,t=0,i=0,r=0;for(;r<n.length;){let o=n[r];if(o.type===9){let[s,a]=o.parts;t+=a.length,i+=s.length}else{let s=o.parts.reduce((a,l)=>a+l.length,0);i+=s,t+=s}e.set(i,t),r++}return e}function TO(n){return n.visit(new Fv)}var Fv=class{visitUnary(e,t){return`${e.operator}${e.expr.visit(this,t)}`}visitBinary(e,t){return`${e.left.visit(this,t)} ${e.operation} ${e.right.visit(this,t)}`}visitChain(e,t){return e.expressions.map(i=>i.visit(this,t)).join("; ")}visitConditional(e,t){return`${e.condition.visit(this,t)} ? ${e.trueExp.visit(this,t)} : ${e.falseExp.visit(this,t)}`}visitThisReceiver(){return"this"}visitImplicitReceiver(){return""}visitInterpolation(e,t){return DO(e.strings,e.expressions.map(i=>i.visit(this,t))).join("")}visitKeyedRead(e,t){return`${e.receiver.visit(this,t)}[${e.key.visit(this,t)}]`}visitLiteralArray(e,t){return`[${e.expressions.map(i=>i.visit(this,t)).join(", ")}]`}visitLiteralMap(e,t){return`{${IO(e.keys.map(i=>i.quoted?`'${i.key}'`:i.key),e.values.map(i=>i.visit(this,t))).map(([i,r])=>`${i}: ${r}`).join(", ")}}`}visitLiteralPrimitive(e){if(e.value===null)return"null";switch(typeof e.value){case"number":case"boolean":return e.value.toString();case"undefined":return"undefined";case"string":return`'${e.value.replace(/'/g,"\\'")}'`;default:throw new Error(`Unsupported primitive type: ${e.value}`)}}visitPipe(e,t){return`${e.exp.visit(this,t)} | ${e.name}`}visitPrefixNot(e,t){return`!${e.expression.visit(this,t)}`}visitNonNullAssert(e,t){return`${e.expression.visit(this,t)}!`}visitPropertyRead(e,t){return e.receiver instanceof mr?e.name:`${e.receiver.visit(this,t)}.${e.name}`}visitSafePropertyRead(e,t){return`${e.receiver.visit(this,t)}?.${e.name}`}visitSafeKeyedRead(e,t){return`${e.receiver.visit(this,t)}?.[${e.key.visit(this,t)}]`}visitCall(e,t){return`${e.receiver.visit(this,t)}(${e.args.map(i=>i.visit(this,t)).join(", ")})`}visitSafeCall(e,t){return`${e.receiver.visit(this,t)}?.(${e.args.map(i=>i.visit(this,t)).join(", ")})`}visitTypeofExpression(e,t){return`typeof ${e.expression.visit(this,t)}`}visitVoidExpression(e,t){return`void ${e.expression.visit(this,t)}`}visitASTWithSource(e,t){return e.ast.visit(this,t)}visitTemplateLiteral(e,t){let i="";for(let r=0;r<e.elements.length;r++){i+=e.elements[r].visit(this,t);let o=r<e.expressions.length?e.expressions[r]:null;o!==null&&(i+="${"+o.visit(this,t)+"}")}return"`"+i+"`"}visitTemplateLiteralElement(e,t){return e.text}visitTaggedTemplateLiteral(e,t){return e.tag.visit(this,t)+e.template.visit(this,t)}visitParenthesizedExpression(e,t){return"("+e.expression.visit(this,t)+")"}};function IO(n,e){if(n.length!==e.length)throw new Error("Array lengths must match");return n.map((t,i)=>[t,e[i]])}function DO(n,e){let t=[];for(let i=0;i<Math.max(n.length,e.length);i++)i<n.length&&t.push(n[i]),i<e.length&&t.push(e[i]);return t}var _p;function kS(){return _p||(_p={},op(tt.HTML,["iframe|srcdoc","*|innerHTML","*|outerHTML"]),op(tt.STYLE,["*|style"]),op(tt.URL,["*|formAction","area|href","area|ping","audio|src","a|href","a|ping","blockquote|cite","body|background","del|cite","form|action","img|src","input|src","ins|cite","q|cite","source|src","track|src","video|poster","video|src"]),op(tt.RESOURCE_URL,["applet|code","applet|codebase","base|href","embed|src","frame|src","head|profile","html|manifest","iframe|src","link|href","media|src","object|codebase","object|data","script|src"])),_p}function op(n,e){for(let t of e)_p[t.toLowerCase()]=n}var AO=new Set(["sandbox","allow","allowfullscreen","referrerpolicy","csp","fetchpriority"]);function kO(n){return AO.has(n.toLowerCase())}var Lv=class{},MO="boolean",NO="number",PO="string",RO="object",FO=["[Element]|textContent,%ariaAtomic,%ariaAutoComplete,%ariaBusy,%ariaChecked,%ariaColCount,%ariaColIndex,%ariaColSpan,%ariaCurrent,%ariaDescription,%ariaDisabled,%ariaExpanded,%ariaHasPopup,%ariaHidden,%ariaInvalid,%ariaKeyShortcuts,%ariaLabel,%ariaLevel,%ariaLive,%ariaModal,%ariaMultiLine,%ariaMultiSelectable,%ariaOrientation,%ariaPlaceholder,%ariaPosInSet,%ariaPressed,%ariaReadOnly,%ariaRelevant,%ariaRequired,%ariaRoleDescription,%ariaRowCount,%ariaRowIndex,%ariaRowSpan,%ariaSelected,%ariaSetSize,%ariaSort,%ariaValueMax,%ariaValueMin,%ariaValueNow,%ariaValueText,%classList,className,elementTiming,id,innerHTML,*beforecopy,*beforecut,*beforepaste,*fullscreenchange,*fullscreenerror,*search,*webkitfullscreenchange,*webkitfullscreenerror,outerHTML,%part,#scrollLeft,#scrollTop,slot,*message,*mozfullscreenchange,*mozfullscreenerror,*mozpointerlockchange,*mozpointerlockerror,*webglcontextcreationerror,*webglcontextlost,*webglcontextrestored","[HTMLElement]^[Element]|accessKey,autocapitalize,!autofocus,contentEditable,dir,!draggable,enterKeyHint,!hidden,!inert,innerText,inputMode,lang,nonce,*abort,*animationend,*animationiteration,*animationstart,*auxclick,*beforexrselect,*blur,*cancel,*canplay,*canplaythrough,*change,*click,*close,*contextmenu,*copy,*cuechange,*cut,*dblclick,*drag,*dragend,*dragenter,*dragleave,*dragover,*dragstart,*drop,*durationchange,*emptied,*ended,*error,*focus,*formdata,*gotpointercapture,*input,*invalid,*keydown,*keypress,*keyup,*load,*loadeddata,*loadedmetadata,*loadstart,*lostpointercapture,*mousedown,*mouseenter,*mouseleave,*mousemove,*mouseout,*mouseover,*mouseup,*mousewheel,*paste,*pause,*play,*playing,*pointercancel,*pointerdown,*pointerenter,*pointerleave,*pointermove,*pointerout,*pointerover,*pointerrawupdate,*pointerup,*progress,*ratechange,*reset,*resize,*scroll,*securitypolicyviolation,*seeked,*seeking,*select,*selectionchange,*selectstart,*slotchange,*stalled,*submit,*suspend,*timeupdate,*toggle,*transitioncancel,*transitionend,*transitionrun,*transitionstart,*volumechange,*waiting,*webkitanimationend,*webkitanimationiteration,*webkitanimationstart,*webkittransitionend,*wheel,outerText,!spellcheck,%style,#tabIndex,title,!translate,virtualKeyboardPolicy","abbr,address,article,aside,b,bdi,bdo,cite,content,code,dd,dfn,dt,em,figcaption,figure,footer,header,hgroup,i,kbd,main,mark,nav,noscript,rb,rp,rt,rtc,ruby,s,samp,search,section,small,strong,sub,sup,u,var,wbr^[HTMLElement]|accessKey,autocapitalize,!autofocus,contentEditable,dir,!draggable,enterKeyHint,!hidden,innerText,inputMode,lang,nonce,*abort,*animationend,*animationiteration,*animationstart,*auxclick,*beforexrselect,*blur,*cancel,*canplay,*canplaythrough,*change,*click,*close,*contextmenu,*copy,*cuechange,*cut,*dblclick,*drag,*dragend,*dragenter,*dragleave,*dragover,*dragstart,*drop,*durationchange,*emptied,*ended,*error,*focus,*formdata,*gotpointercapture,*input,*invalid,*keydown,*keypress,*keyup,*load,*loadeddata,*loadedmetadata,*loadstart,*lostpointercapture,*mousedown,*mouseenter,*mouseleave,*mousemove,*mouseout,*mouseover,*mouseup,*mousewheel,*paste,*pause,*play,*playing,*pointercancel,*pointerdown,*pointerenter,*pointerleave,*pointermove,*pointerout,*pointerover,*pointerrawupdate,*pointerup,*progress,*ratechange,*reset,*resize,*scroll,*securitypolicyviolation,*seeked,*seeking,*select,*selectionchange,*selectstart,*slotchange,*stalled,*submit,*suspend,*timeupdate,*toggle,*transitioncancel,*transitionend,*transitionrun,*transitionstart,*volumechange,*waiting,*webkitanimationend,*webkitanimationiteration,*webkitanimationstart,*webkittransitionend,*wheel,outerText,!spellcheck,%style,#tabIndex,title,!translate,virtualKeyboardPolicy","media^[HTMLElement]|!autoplay,!controls,%controlsList,%crossOrigin,#currentTime,!defaultMuted,#defaultPlaybackRate,!disableRemotePlayback,!loop,!muted,*encrypted,*waitingforkey,#playbackRate,preload,!preservesPitch,src,%srcObject,#volume",":svg:^[HTMLElement]|!autofocus,nonce,*abort,*animationend,*animationiteration,*animationstart,*auxclick,*beforexrselect,*blur,*cancel,*canplay,*canplaythrough,*change,*click,*close,*contextmenu,*copy,*cuechange,*cut,*dblclick,*drag,*dragend,*dragenter,*dragleave,*dragover,*dragstart,*drop,*durationchange,*emptied,*ended,*error,*focus,*formdata,*gotpointercapture,*input,*invalid,*keydown,*keypress,*keyup,*load,*loadeddata,*loadedmetadata,*loadstart,*lostpointercapture,*mousedown,*mouseenter,*mouseleave,*mousemove,*mouseout,*mouseover,*mouseup,*mousewheel,*paste,*pause,*play,*playing,*pointercancel,*pointerdown,*pointerenter,*pointerleave,*pointermove,*pointerout,*pointerover,*pointerrawupdate,*pointerup,*progress,*ratechange,*reset,*resize,*scroll,*securitypolicyviolation,*seeked,*seeking,*select,*selectionchange,*selectstart,*slotchange,*stalled,*submit,*suspend,*timeupdate,*toggle,*transitioncancel,*transitionend,*transitionrun,*transitionstart,*volumechange,*waiting,*webkitanimationend,*webkitanimationiteration,*webkitanimationstart,*webkittransitionend,*wheel,%style,#tabIndex",":svg:graphics^:svg:|",":svg:animation^:svg:|*begin,*end,*repeat",":svg:geometry^:svg:|",":svg:componentTransferFunction^:svg:|",":svg:gradient^:svg:|",":svg:textContent^:svg:graphics|",":svg:textPositioning^:svg:textContent|","a^[HTMLElement]|charset,coords,download,hash,host,hostname,href,hreflang,name,password,pathname,ping,port,protocol,referrerPolicy,rel,%relList,rev,search,shape,target,text,type,username","area^[HTMLElement]|alt,coords,download,hash,host,hostname,href,!noHref,password,pathname,ping,port,protocol,referrerPolicy,rel,%relList,search,shape,target,username","audio^media|","br^[HTMLElement]|clear","base^[HTMLElement]|href,target","body^[HTMLElement]|aLink,background,bgColor,link,*afterprint,*beforeprint,*beforeunload,*blur,*error,*focus,*hashchange,*languagechange,*load,*message,*messageerror,*offline,*online,*pagehide,*pageshow,*popstate,*rejectionhandled,*resize,*scroll,*storage,*unhandledrejection,*unload,text,vLink","button^[HTMLElement]|!disabled,formAction,formEnctype,formMethod,!formNoValidate,formTarget,name,type,value","canvas^[HTMLElement]|#height,#width","content^[HTMLElement]|select","dl^[HTMLElement]|!compact","data^[HTMLElement]|value","datalist^[HTMLElement]|","details^[HTMLElement]|!open","dialog^[HTMLElement]|!open,returnValue","dir^[HTMLElement]|!compact","div^[HTMLElement]|align","embed^[HTMLElement]|align,height,name,src,type,width","fieldset^[HTMLElement]|!disabled,name","font^[HTMLElement]|color,face,size","form^[HTMLElement]|acceptCharset,action,autocomplete,encoding,enctype,method,name,!noValidate,target","frame^[HTMLElement]|frameBorder,longDesc,marginHeight,marginWidth,name,!noResize,scrolling,src","frameset^[HTMLElement]|cols,*afterprint,*beforeprint,*beforeunload,*blur,*error,*focus,*hashchange,*languagechange,*load,*message,*messageerror,*offline,*online,*pagehide,*pageshow,*popstate,*rejectionhandled,*resize,*scroll,*storage,*unhandledrejection,*unload,rows","hr^[HTMLElement]|align,color,!noShade,size,width","head^[HTMLElement]|","h1,h2,h3,h4,h5,h6^[HTMLElement]|align","html^[HTMLElement]|version","iframe^[HTMLElement]|align,allow,!allowFullscreen,!allowPaymentRequest,csp,frameBorder,height,loading,longDesc,marginHeight,marginWidth,name,referrerPolicy,%sandbox,scrolling,src,srcdoc,width","img^[HTMLElement]|align,alt,border,%crossOrigin,decoding,#height,#hspace,!isMap,loading,longDesc,lowsrc,name,referrerPolicy,sizes,src,srcset,useMap,#vspace,#width","input^[HTMLElement]|accept,align,alt,autocomplete,!checked,!defaultChecked,defaultValue,dirName,!disabled,%files,formAction,formEnctype,formMethod,!formNoValidate,formTarget,#height,!incremental,!indeterminate,max,#maxLength,min,#minLength,!multiple,name,pattern,placeholder,!readOnly,!required,selectionDirection,#selectionEnd,#selectionStart,#size,src,step,type,useMap,value,%valueAsDate,#valueAsNumber,#width","li^[HTMLElement]|type,#value","label^[HTMLElement]|htmlFor","legend^[HTMLElement]|align","link^[HTMLElement]|as,charset,%crossOrigin,!disabled,href,hreflang,imageSizes,imageSrcset,integrity,media,referrerPolicy,rel,%relList,rev,%sizes,target,type","map^[HTMLElement]|name","marquee^[HTMLElement]|behavior,bgColor,direction,height,#hspace,#loop,#scrollAmount,#scrollDelay,!trueSpeed,#vspace,width","menu^[HTMLElement]|!compact","meta^[HTMLElement]|content,httpEquiv,media,name,scheme","meter^[HTMLElement]|#high,#low,#max,#min,#optimum,#value","ins,del^[HTMLElement]|cite,dateTime","ol^[HTMLElement]|!compact,!reversed,#start,type","object^[HTMLElement]|align,archive,border,code,codeBase,codeType,data,!declare,height,#hspace,name,standby,type,useMap,#vspace,width","optgroup^[HTMLElement]|!disabled,label","option^[HTMLElement]|!defaultSelected,!disabled,label,!selected,text,value","output^[HTMLElement]|defaultValue,%htmlFor,name,value","p^[HTMLElement]|align","param^[HTMLElement]|name,type,value,valueType","picture^[HTMLElement]|","pre^[HTMLElement]|#width","progress^[HTMLElement]|#max,#value","q,blockquote,cite^[HTMLElement]|","script^[HTMLElement]|!async,charset,%crossOrigin,!defer,event,htmlFor,integrity,!noModule,%referrerPolicy,src,text,type","select^[HTMLElement]|autocomplete,!disabled,#length,!multiple,name,!required,#selectedIndex,#size,value","selectedcontent^[HTMLElement]|","slot^[HTMLElement]|name","source^[HTMLElement]|#height,media,sizes,src,srcset,type,#width","span^[HTMLElement]|","style^[HTMLElement]|!disabled,media,type","search^[HTMLELement]|","caption^[HTMLElement]|align","th,td^[HTMLElement]|abbr,align,axis,bgColor,ch,chOff,#colSpan,headers,height,!noWrap,#rowSpan,scope,vAlign,width","col,colgroup^[HTMLElement]|align,ch,chOff,#span,vAlign,width","table^[HTMLElement]|align,bgColor,border,%caption,cellPadding,cellSpacing,frame,rules,summary,%tFoot,%tHead,width","tr^[HTMLElement]|align,bgColor,ch,chOff,vAlign","tfoot,thead,tbody^[HTMLElement]|align,ch,chOff,vAlign","template^[HTMLElement]|","textarea^[HTMLElement]|autocomplete,#cols,defaultValue,dirName,!disabled,#maxLength,#minLength,name,placeholder,!readOnly,!required,#rows,selectionDirection,#selectionEnd,#selectionStart,value,wrap","time^[HTMLElement]|dateTime","title^[HTMLElement]|text","track^[HTMLElement]|!default,kind,label,src,srclang","ul^[HTMLElement]|!compact,type","unknown^[HTMLElement]|","video^media|!disablePictureInPicture,#height,*enterpictureinpicture,*leavepictureinpicture,!playsInline,poster,#width",":svg:a^:svg:graphics|",":svg:animate^:svg:animation|",":svg:animateMotion^:svg:animation|",":svg:animateTransform^:svg:animation|",":svg:circle^:svg:geometry|",":svg:clipPath^:svg:graphics|",":svg:defs^:svg:graphics|",":svg:desc^:svg:|",":svg:discard^:svg:|",":svg:ellipse^:svg:geometry|",":svg:feBlend^:svg:|",":svg:feColorMatrix^:svg:|",":svg:feComponentTransfer^:svg:|",":svg:feComposite^:svg:|",":svg:feConvolveMatrix^:svg:|",":svg:feDiffuseLighting^:svg:|",":svg:feDisplacementMap^:svg:|",":svg:feDistantLight^:svg:|",":svg:feDropShadow^:svg:|",":svg:feFlood^:svg:|",":svg:feFuncA^:svg:componentTransferFunction|",":svg:feFuncB^:svg:componentTransferFunction|",":svg:feFuncG^:svg:componentTransferFunction|",":svg:feFuncR^:svg:componentTransferFunction|",":svg:feGaussianBlur^:svg:|",":svg:feImage^:svg:|",":svg:feMerge^:svg:|",":svg:feMergeNode^:svg:|",":svg:feMorphology^:svg:|",":svg:feOffset^:svg:|",":svg:fePointLight^:svg:|",":svg:feSpecularLighting^:svg:|",":svg:feSpotLight^:svg:|",":svg:feTile^:svg:|",":svg:feTurbulence^:svg:|",":svg:filter^:svg:|",":svg:foreignObject^:svg:graphics|",":svg:g^:svg:graphics|",":svg:image^:svg:graphics|decoding",":svg:line^:svg:geometry|",":svg:linearGradient^:svg:gradient|",":svg:mpath^:svg:|",":svg:marker^:svg:|",":svg:mask^:svg:|",":svg:metadata^:svg:|",":svg:path^:svg:geometry|",":svg:pattern^:svg:|",":svg:polygon^:svg:geometry|",":svg:polyline^:svg:geometry|",":svg:radialGradient^:svg:gradient|",":svg:rect^:svg:geometry|",":svg:svg^:svg:graphics|#currentScale,#zoomAndPan",":svg:script^:svg:|type",":svg:set^:svg:animation|",":svg:stop^:svg:|",":svg:style^:svg:|!disabled,media,title,type",":svg:switch^:svg:graphics|",":svg:symbol^:svg:|",":svg:tspan^:svg:textPositioning|",":svg:text^:svg:textPositioning|",":svg:textPath^:svg:textContent|",":svg:title^:svg:|",":svg:use^:svg:graphics|",":svg:view^:svg:|#zoomAndPan","data^[HTMLElement]|value","keygen^[HTMLElement]|!autofocus,challenge,!disabled,form,keytype,name","menuitem^[HTMLElement]|type,label,icon,!disabled,!checked,radiogroup,!default","summary^[HTMLElement]|","time^[HTMLElement]|dateTime",":svg:cursor^:svg:|",":math:^[HTMLElement]|!autofocus,nonce,*abort,*animationend,*animationiteration,*animationstart,*auxclick,*beforeinput,*beforematch,*beforetoggle,*beforexrselect,*blur,*cancel,*canplay,*canplaythrough,*change,*click,*close,*contentvisibilityautostatechange,*contextlost,*contextmenu,*contextrestored,*copy,*cuechange,*cut,*dblclick,*drag,*dragend,*dragenter,*dragleave,*dragover,*dragstart,*drop,*durationchange,*emptied,*ended,*error,*focus,*formdata,*gotpointercapture,*input,*invalid,*keydown,*keypress,*keyup,*load,*loadeddata,*loadedmetadata,*loadstart,*lostpointercapture,*mousedown,*mouseenter,*mouseleave,*mousemove,*mouseout,*mouseover,*mouseup,*mousewheel,*paste,*pause,*play,*playing,*pointercancel,*pointerdown,*pointerenter,*pointerleave,*pointermove,*pointerout,*pointerover,*pointerrawupdate,*pointerup,*progress,*ratechange,*reset,*resize,*scroll,*scrollend,*securitypolicyviolation,*seeked,*seeking,*select,*selectionchange,*selectstart,*slotchange,*stalled,*submit,*suspend,*timeupdate,*toggle,*transitioncancel,*transitionend,*transitionrun,*transitionstart,*volumechange,*waiting,*webkitanimationend,*webkitanimationiteration,*webkitanimationstart,*webkittransitionend,*wheel,%style,#tabIndex",":math:math^:math:|",":math:maction^:math:|",":math:menclose^:math:|",":math:merror^:math:|",":math:mfenced^:math:|",":math:mfrac^:math:|",":math:mi^:math:|",":math:mmultiscripts^:math:|",":math:mn^:math:|",":math:mo^:math:|",":math:mover^:math:|",":math:mpadded^:math:|",":math:mphantom^:math:|",":math:mroot^:math:|",":math:mrow^:math:|",":math:ms^:math:|",":math:mspace^:math:|",":math:msqrt^:math:|",":math:mstyle^:math:|",":math:msub^:math:|",":math:msubsup^:math:|",":math:msup^:math:|",":math:mtable^:math:|",":math:mtd^:math:|",":math:mtext^:math:|",":math:mtr^:math:|",":math:munder^:math:|",":math:munderover^:math:|",":math:semantics^:math:|"],vT=new Map(Object.entries({class:"className",for:"htmlFor",formaction:"formAction",innerHtml:"innerHTML",readonly:"readOnly",tabindex:"tabIndex","aria-atomic":"ariaAtomic","aria-autocomplete":"ariaAutoComplete","aria-busy":"ariaBusy","aria-checked":"ariaChecked","aria-colcount":"ariaColCount","aria-colindex":"ariaColIndex","aria-colspan":"ariaColSpan","aria-current":"ariaCurrent","aria-disabled":"ariaDisabled","aria-expanded":"ariaExpanded","aria-haspopup":"ariaHasPopup","aria-hidden":"ariaHidden","aria-invalid":"ariaInvalid","aria-keyshortcuts":"ariaKeyShortcuts","aria-label":"ariaLabel","aria-level":"ariaLevel","aria-live":"ariaLive","aria-modal":"ariaModal","aria-multiline":"ariaMultiLine","aria-multiselectable":"ariaMultiSelectable","aria-orientation":"ariaOrientation","aria-placeholder":"ariaPlaceholder","aria-posinset":"ariaPosInSet","aria-pressed":"ariaPressed","aria-readonly":"ariaReadOnly","aria-required":"ariaRequired","aria-roledescription":"ariaRoleDescription","aria-rowcount":"ariaRowCount","aria-rowindex":"ariaRowIndex","aria-rowspan":"ariaRowSpan","aria-selected":"ariaSelected","aria-setsize":"ariaSetSize","aria-sort":"ariaSort","aria-valuemax":"ariaValueMax","aria-valuemin":"ariaValueMin","aria-valuenow":"ariaValueNow","aria-valuetext":"ariaValueText"})),LO=Array.from(vT).reduce((n,[e,t])=>(n.set(e,t),n),new Map),Cl=class extends Lv{_schema=new Map;_eventSchema=new Map;constructor(){super(),FO.forEach(e=>{let t=new Map,i=new Set,[r,o]=e.split("|"),s=o.split(","),[a,l]=r.split("^");a.split(",").forEach(d=>{this._schema.set(d.toLowerCase(),t),this._eventSchema.set(d.toLowerCase(),i)});let c=l&&this._schema.get(l.toLowerCase());if(c){for(let[d,p]of c)t.set(d,p);for(let d of this._eventSchema.get(l.toLowerCase()))i.add(d)}s.forEach(d=>{if(d.length>0)switch(d[0]){case"*":i.add(d.substring(1));break;case"!":t.set(d.substring(1),MO);break;case"#":t.set(d.substring(1),NO);break;case"%":t.set(d.substring(1),RO);break;default:t.set(d,PO)}})})}hasProperty(e,t,i){if(i.some(o=>o.name===Mb.name))return!0;if(e.indexOf("-")>-1){if(Gb(e)||Jy(e))return!1;if(i.some(o=>o.name===kb.name))return!0}return(this._schema.get(e.toLowerCase())||this._schema.get("unknown")).has(t)}hasElement(e,t){return t.some(i=>i.name===Mb.name)||e.indexOf("-")>-1&&(Gb(e)||Jy(e)||t.some(i=>i.name===kb.name))?!0:this._schema.has(e.toLowerCase())}securityContext(e,t,i){i&&(t=this.getMappedPropName(t)),e=e.toLowerCase(),t=t.toLowerCase();let r=kS()[e+"|"+t];return r||(r=kS()["*|"+t],r||tt.NONE)}getMappedPropName(e){return vT.get(e)??e}getDefaultComponentElementName(){return"ng-component"}validateProperty(e){return e.toLowerCase().startsWith("on")?{error:!0,msg:`Binding to event property '${e}' is disallowed for security reasons, please use (${e.slice(2)})=...
If '${e}' is a directive input, make sure the directive is imported by the current module.`}:{error:!1}}validateAttribute(e){return e.toLowerCase().startsWith("on")?{error:!0,msg:`Binding to event attribute '${e}' is disallowed for security reasons, please use (${e.slice(2)})=...`}:{error:!1}}allKnownElementNames(){return Array.from(this._schema.keys())}allKnownAttributesOfElement(e){let t=this._schema.get(e.toLowerCase())||this._schema.get("unknown");return Array.from(t.keys()).map(i=>LO.get(i)??i)}allKnownEventsOfElement(e){return Array.from(this._eventSchema.get(e.toLowerCase())??[])}normalizeAnimationStyleProperty(e){return MP(e)}normalizeAnimationStyleValue(e,t,i){let r="",o=i.toString().trim(),s=null;if(OO(e)&&i!==0&&i!=="0")if(typeof i=="number")r="px";else{let a=i.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&a[1].length==0&&(s=`Please provide a CSS unit value for ${t}:${i}`)}return{error:s,value:o+r}}};function OO(n){switch(n){case"width":case"height":case"minWidth":case"minHeight":case"maxWidth":case"maxHeight":case"left":case"top":case"bottom":case"right":case"fontSize":case"outlineWidth":case"outlineOffset":case"paddingTop":case"paddingLeft":case"paddingBottom":case"paddingRight":case"marginTop":case"marginLeft":case"marginBottom":case"marginRight":case"borderRadius":case"borderWidth":case"borderTopWidth":case"borderLeftWidth":case"borderRightWidth":case"borderBottomWidth":case"textIndent":return!0;default:return!1}}var Te=class{closedByChildren={};contentType;closedByParent=!1;implicitNamespacePrefix;isVoid;ignoreFirstLf;canSelfClose;preventNamespaceInheritance;constructor({closedByChildren:e,implicitNamespacePrefix:t,contentType:i=cr.PARSABLE_DATA,closedByParent:r=!1,isVoid:o=!1,ignoreFirstLf:s=!1,preventNamespaceInheritance:a=!1,canSelfClose:l=!1}={}){e&&e.length>0&&e.forEach(c=>this.closedByChildren[c]=!0),this.isVoid=o,this.closedByParent=r||o,this.implicitNamespacePrefix=t||null,this.contentType=i,this.ignoreFirstLf=s,this.preventNamespaceInheritance=a,this.canSelfClose=l??o}isClosedByChild(e){return this.isVoid||e.toLowerCase()in this.closedByChildren}getContentType(e){return typeof this.contentType=="object"?(e===void 0?void 0:this.contentType[e])??this.contentType.default:this.contentType}},MS,qa;function Ov(n){return qa||(MS=new Te({canSelfClose:!0}),qa=Object.assign(Object.create(null),{base:new Te({isVoid:!0}),meta:new Te({isVoid:!0}),area:new Te({isVoid:!0}),embed:new Te({isVoid:!0}),link:new Te({isVoid:!0}),img:new Te({isVoid:!0}),input:new Te({isVoid:!0}),param:new Te({isVoid:!0}),hr:new Te({isVoid:!0}),br:new Te({isVoid:!0}),source:new Te({isVoid:!0}),track:new Te({isVoid:!0}),wbr:new Te({isVoid:!0}),p:new Te({closedByChildren:["address","article","aside","blockquote","div","dl","fieldset","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","main","nav","ol","p","pre","section","table","ul"],closedByParent:!0}),thead:new Te({closedByChildren:["tbody","tfoot"]}),tbody:new Te({closedByChildren:["tbody","tfoot"],closedByParent:!0}),tfoot:new Te({closedByChildren:["tbody"],closedByParent:!0}),tr:new Te({closedByChildren:["tr"],closedByParent:!0}),td:new Te({closedByChildren:["td","th"],closedByParent:!0}),th:new Te({closedByChildren:["td","th"],closedByParent:!0}),col:new Te({isVoid:!0}),svg:new Te({implicitNamespacePrefix:"svg"}),foreignObject:new Te({implicitNamespacePrefix:"svg",preventNamespaceInheritance:!0}),math:new Te({implicitNamespacePrefix:"math"}),li:new Te({closedByChildren:["li"],closedByParent:!0}),dt:new Te({closedByChildren:["dt","dd"]}),dd:new Te({closedByChildren:["dt","dd"],closedByParent:!0}),rb:new Te({closedByChildren:["rb","rt","rtc","rp"],closedByParent:!0}),rt:new Te({closedByChildren:["rb","rt","rtc","rp"],closedByParent:!0}),rtc:new Te({closedByChildren:["rb","rtc","rp"],closedByParent:!0}),rp:new Te({closedByChildren:["rb","rt","rtc","rp"],closedByParent:!0}),optgroup:new Te({closedByChildren:["optgroup"],closedByParent:!0}),option:new Te({closedByChildren:["option","optgroup"],closedByParent:!0}),pre:new Te({ignoreFirstLf:!0}),listing:new Te({ignoreFirstLf:!0}),style:new Te({contentType:cr.RAW_TEXT}),script:new Te({contentType:cr.RAW_TEXT}),title:new Te({contentType:{default:cr.ESCAPABLE_RAW_TEXT,svg:cr.PARSABLE_DATA}}),textarea:new Te({contentType:cr.ESCAPABLE_RAW_TEXT,ignoreFirstLf:!0})}),new Cl().allKnownElementNames().forEach(e=>{!qa[e]&&Qy(e)===null&&(qa[e]=new Te({canSelfClose:!1}))})),qa[n]??qa[n.toLowerCase()]??MS}var NS={A:"LINK",B:"BOLD_TEXT",BR:"LINE_BREAK",EM:"EMPHASISED_TEXT",H1:"HEADING_LEVEL1",H2:"HEADING_LEVEL2",H3:"HEADING_LEVEL3",H4:"HEADING_LEVEL4",H5:"HEADING_LEVEL5",H6:"HEADING_LEVEL6",HR:"HORIZONTAL_RULE",I:"ITALIC_TEXT",LI:"LIST_ITEM",LINK:"MEDIA_LINK",OL:"ORDERED_LIST",P:"PARAGRAPH",Q:"QUOTATION",S:"STRIKETHROUGH_TEXT",SMALL:"SMALL_TEXT",SUB:"SUBSTRIPT",SUP:"SUPERSCRIPT",TBODY:"TABLE_BODY",TD:"TABLE_CELL",TFOOT:"TABLE_FOOTER",TH:"TABLE_HEADER_CELL",THEAD:"TABLE_HEADER",TR:"TABLE_ROW",TT:"MONOSPACED_TEXT",U:"UNDERLINED_TEXT",UL:"UNORDERED_LIST"},Vv=class{_placeHolderNameCounts={};_signatureToName={};getStartTagPlaceholderName(e,t,i){let r=this._hashTag(e,t,i);if(this._signatureToName[r])return this._signatureToName[r];let o=e.toUpperCase(),s=NS[o]||`TAG_${o}`,a=this._generateUniqueName(i?s:`START_${s}`);return this._signatureToName[r]=a,a}getCloseTagPlaceholderName(e){let t=this._hashClosingTag(e);if(this._signatureToName[t])return this._signatureToName[t];let i=e.toUpperCase(),r=NS[i]||`TAG_${i}`,o=this._generateUniqueName(`CLOSE_${r}`);return this._signatureToName[t]=o,o}getPlaceholderName(e,t){let i=e.toUpperCase(),r=`PH: ${i}=${t}`;if(this._signatureToName[r])return this._signatureToName[r];let o=this._generateUniqueName(i);return this._signatureToName[r]=o,o}getUniquePlaceholder(e){return this._generateUniqueName(e.toUpperCase())}getStartBlockPlaceholderName(e,t){let i=this._hashBlock(e,t);if(this._signatureToName[i])return this._signatureToName[i];let r=this._generateUniqueName(`START_BLOCK_${this._toSnakeCase(e)}`);return this._signatureToName[i]=r,r}getCloseBlockPlaceholderName(e){let t=this._hashClosingBlock(e);if(this._signatureToName[t])return this._signatureToName[t];let i=this._generateUniqueName(`CLOSE_BLOCK_${this._toSnakeCase(e)}`);return this._signatureToName[t]=i,i}_hashTag(e,t,i){let r=`<${e}`,o=Object.keys(t).sort().map(a=>` ${a}=${t[a]}`).join(""),s=i?"/>":`></${e}>`;return r+o+s}_hashClosingTag(e){return this._hashTag(`/${e}`,{},!1)}_hashBlock(e,t){let i=t.length===0?"":` (${t.sort().join("; ")})`;return`@${e}${i} {}`}_hashClosingBlock(e){return this._hashBlock(`close_${e}`,[])}_toSnakeCase(e){return e.toUpperCase().replace(/[^A-Z0-9]/g,"_")}_generateUniqueName(e){if(!this._placeHolderNameCounts.hasOwnProperty(e))return this._placeHolderNameCounts[e]=1,e;let i=this._placeHolderNameCounts[e];return this._placeHolderNameCounts[e]=i+1,`${e}_${i}`}},VO=new wh(new Ad);function BO(n,e,t,i){let r=new Bv(VO,n,e,t,i);return(o,s,a,l,c)=>r.toI18nMessage(o,s,a,l,c)}function UO(n,e){return e}var Bv=class{_expressionParser;_interpolationConfig;_containerBlocks;_retainEmptyTokens;_preserveExpressionWhitespace;constructor(e,t,i,r,o){this._expressionParser=e,this._interpolationConfig=t,this._containerBlocks=i,this._retainEmptyTokens=r,this._preserveExpressionWhitespace=o}toI18nMessage(e,t="",i="",r="",o){let s={isIcu:e.length==1&&e[0]instanceof Ss,icuDepth:0,placeholderRegistry:new Vv,placeholderToContent:{},placeholderToMessage:{},visitNodeFn:o||UO},a=it(this,e,s);return new En(a,s.placeholderToContent,s.placeholderToMessage,t,i,r)}visitElement(e,t){return this._visitElementLike(e,t)}visitComponent(e,t){return this._visitElementLike(e,t)}visitDirective(e,t){throw new Error("Unreachable code")}visitAttribute(e,t){let i=e.valueTokens===void 0||e.valueTokens.length===1?new xu(e.value,e.valueSpan||e.sourceSpan):this._visitTextWithInterpolation(e.valueTokens,e.valueSpan||e.sourceSpan,t,e.i18n);return t.visitNodeFn(e,i)}visitText(e,t){let i=e.tokens.length===1?new xu(e.value,e.sourceSpan):this._visitTextWithInterpolation(e.tokens,e.sourceSpan,t,e.i18n);return t.visitNodeFn(e,i)}visitComment(e,t){return null}visitExpansion(e,t){t.icuDepth++;let i={},r=new Jp(e.switchValue,e.type,i,e.sourceSpan);if(e.cases.forEach(a=>{i[a.value]=new Wr(a.expression.map(l=>l.visit(this,t)),a.expSourceSpan)}),t.icuDepth--,t.isIcu||t.icuDepth>0){let a=t.placeholderRegistry.getUniquePlaceholder(`VAR_${e.type}`);return r.expressionPlaceholder=a,t.placeholderToContent[a]={text:e.switchValue,sourceSpan:e.switchValueSourceSpan},t.visitNodeFn(e,r)}let o=t.placeholderRegistry.getPlaceholderName("ICU",e.sourceSpan.toString());t.placeholderToMessage[o]=this.toI18nMessage([e],"","","",void 0);let s=new pl(r,o,e.sourceSpan);return t.visitNodeFn(e,s)}visitExpansionCase(e,t){throw new Error("Unreachable code")}visitBlock(e,t){let i=it(this,e.children,t);if(this._containerBlocks.has(e.name))return new Wr(i,e.sourceSpan);let r=e.parameters.map(l=>l.expression),o=t.placeholderRegistry.getStartBlockPlaceholderName(e.name,r),s=t.placeholderRegistry.getCloseBlockPlaceholderName(e.name);t.placeholderToContent[o]={text:e.startSourceSpan.toString(),sourceSpan:e.startSourceSpan},t.placeholderToContent[s]={text:e.endSourceSpan?e.endSourceSpan.toString():"}",sourceSpan:e.endSourceSpan??e.sourceSpan};let a=new ko(e.name,r,o,s,i,e.sourceSpan,e.startSourceSpan,e.endSourceSpan);return t.visitNodeFn(e,a)}visitBlockParameter(e,t){throw new Error("Unreachable code")}visitLetDeclaration(e,t){return null}_visitElementLike(e,t){let i=it(this,e.children,t),r={},o=p=>{r[p.name]=p.value},s,a;e instanceof pi?(s=e.name,a=Ov(e.name).isVoid):(s=e.fullName,a=e.tagName?Ov(e.tagName).isVoid:!1),e.attrs.forEach(o),e.directives.forEach(p=>p.attrs.forEach(o));let l=t.placeholderRegistry.getStartTagPlaceholderName(s,r,a);t.placeholderToContent[l]={text:e.startSourceSpan.toString(),sourceSpan:e.startSourceSpan};let c="";a||(c=t.placeholderRegistry.getCloseTagPlaceholderName(s),t.placeholderToContent[c]={text:`</${s}>`,sourceSpan:e.endSourceSpan??e.sourceSpan});let d=new Ao(s,r,l,c,i,a,e.sourceSpan,e.startSourceSpan,e.endSourceSpan);return t.visitNodeFn(e,d)}_visitTextWithInterpolation(e,t,i,r){let o=[],s=!1;for(let a of e)switch(a.type){case 8:case 17:s=!0;let[l,c,d]=a.parts,p=WO(c)||"INTERPOLATION",h=i.placeholderRegistry.getPlaceholderName(p,c);if(this._preserveExpressionWhitespace)i.placeholderToContent[h]={text:a.parts.join(""),sourceSpan:a.sourceSpan},o.push(new dd(c,h,a.sourceSpan));else{let y=this.normalizeExpression(a);i.placeholderToContent[h]={text:`${l}${y}${d}`,sourceSpan:a.sourceSpan},o.push(new dd(y,h,a.sourceSpan))}break;default:if(a.parts[0].length>0||this._retainEmptyTokens){let y=o[o.length-1];y instanceof xu?(y.value+=a.parts[0],y.sourceSpan=new ve(y.sourceSpan.start,a.sourceSpan.end,y.sourceSpan.fullStart,y.sourceSpan.details)):o.push(new xu(a.parts[0],a.sourceSpan))}else this._retainEmptyTokens&&o.push(new xu(a.parts[0],a.sourceSpan));break}return s?($O(o,r),new Wr(o,t)):o[0]}normalizeExpression(e){let t=e.parts[1],i=this._expressionParser.parseBinding(t,e.sourceSpan,e.sourceSpan.start.offset,this._interpolationConfig);return TO(i)}};function $O(n,e){if(e instanceof En&&(HO(e),e=e.nodes[0]),e instanceof Wr){qO(e.children,n);for(let t=0;t<n.length;t++)n[t].sourceSpan=e.children[t].sourceSpan}}function HO(n){let e=n.nodes;if(e.length!==1||!(e[0]instanceof Wr))throw new Error("Unexpected previous i18n message - expected it to consist of only a single `Container` node.")}function qO(n,e){if(n.length!==e.length)throw new Error(`
The number of i18n message children changed between first and second pass.

First pass (${n.length} tokens):
${n.map(t=>`"${t.sourceSpan.toString()}"`).join(`
`)}

Second pass (${e.length} tokens):
${e.map(t=>`"${t.sourceSpan.toString()}"`).join(`
`)}
    `.trim());if(n.some((t,i)=>e[i].constructor!==t.constructor))throw new Error("The types of the i18n message children changed between first and second pass.")}var GO=/\/\/[\s\S]*i18n[\s\S]*\([\s\S]*ph[\s\S]*=[\s\S]*("|')([\s\S]*?)\1[\s\S]*\)/g;function WO(n){return n.split(GO)[2]}var PS=new Set(["iframe|srcdoc","*|innerhtml","*|outerhtml","embed|src","object|codebase","object|data"]);function RS(n,e){return n=n.toLowerCase(),e=e.toLowerCase(),PS.has(n+"|"+e)||PS.has("*|"+e)}var zO=n=>(e,t)=>{let i=n.get(e)??e;return i instanceof Yr&&(t instanceof pl&&i.i18n instanceof En&&(t.previousMessage=i.i18n),i.i18n=t),t},Ch=class{interpolationConfig;keepI18nAttrs;enableI18nLegacyMessageIdFormat;containerBlocks;preserveSignificantWhitespace;retainEmptyTokens;hasI18nMeta=!1;_errors=[];constructor(e=ur,t=!1,i=!1,r=fR,o=!0,s=!o){this.interpolationConfig=e,this.keepI18nAttrs=t,this.enableI18nLegacyMessageIdFormat=i,this.containerBlocks=r,this.preserveSignificantWhitespace=o,this.retainEmptyTokens=s}_generateI18nMessage(e,t="",i){let{meaning:r,description:o,customId:s}=this._parseMetadata(t),l=BO(this.interpolationConfig,this.containerBlocks,this.retainEmptyTokens,this.preserveSignificantWhitespace)(e,r,o,s,i);return this._setMessageId(l,t),this._setLegacyIds(l,t),l}visitAllWithErrors(e){let t=e.map(i=>i.visit(this,null));return new vh(t,this._errors)}visitElement(e){return this._visitElementLike(e),e}visitComponent(e,t){return this._visitElementLike(e),e}visitExpansion(e,t){let i,r=e.i18n;if(this.hasI18nMeta=!0,r instanceof pl){let o=r.name;i=this._generateI18nMessage([e],r);let s=M1(i);s.name=o,t!==null&&(t.placeholderToMessage[o]=i)}else i=this._generateI18nMessage([e],t||r);return e.i18n=i,e}visitText(e){return e}visitAttribute(e){return e}visitComment(e){return e}visitExpansionCase(e){return e}visitBlock(e,t){return it(this,e.children,t),e}visitBlockParameter(e,t){return e}visitLetDeclaration(e,t){return e}visitDirective(e,t){return e}_visitElementLike(e){let t;if(oR(e)){this.hasI18nMeta=!0;let i=[],r={};for(let o of e.attrs)if(o.name===A1){let s=e.i18n||o.value,a=new Map,l=this.preserveSignificantWhitespace?e.children:sr(new _h(!1,a),e.children);t=this._generateI18nMessage(l,s,zO(a)),t.nodes.length===0&&(t=void 0),e.i18n=t}else if(o.name.startsWith(ov)){let s=o.name.slice(ov.length),a;e instanceof Nn?a=e.tagName===null?!1:RS(e.tagName,s):a=RS(e.name,s),a?this._reportError(o,`Translating attribute '${s}' is disallowed for security reasons.`):r[s]=o.value}else i.push(o);if(Object.keys(r).length)for(let o of i){let s=r[o.name];s!==void 0&&o.value&&(o.i18n=this._generateI18nMessage([o],o.i18n||s))}this.keepI18nAttrs||(e.attrs=i)}it(this,e.children,t)}_parseMetadata(e){return typeof e=="string"?YO(e):e instanceof En?e:{}}_setMessageId(e,t){e.id||(e.id=t instanceof En&&t.id||sP(e))}_setLegacyIds(e,t){if(this.enableI18nLegacyMessageIdFormat)e.legacyIds=[oP(e),w1(e)];else if(typeof t!="string"){let i=t instanceof En?t:t instanceof pl?t.previousMessage:void 0;e.legacyIds=i?i.legacyIds:[]}}_reportError(e,t){this._errors.push(new he(e.sourceSpan,t))}},jO="|",KO="@@";function YO(n=""){let e,t,i;if(n=n.trim(),n){let r=n.indexOf(KO),o=n.indexOf(jO),s;[s,e]=r>-1?[n.slice(0,r),n.slice(r+2)]:[n,""],[t,i]=o>-1?[s.slice(0,o),s.slice(o+1)]:["",s]}return{customId:e,meaning:t,description:i}}function JO(n){let e=[];return n.description?e.push({tagName:"desc",text:n.description}):e.push({tagName:"suppress",text:"{msgDescriptions}"}),n.meaning&&e.push({tagName:"meaning",text:n.meaning}),CP(e)}var QO="goog.getMsg";function XO(n,e,t,i){let r=eV(e),o=[L(r)];Object.keys(i).length&&(o.push(Ev(m_(i,!0),!0)),o.push(Ev({original_code:xn(Object.keys(i).map(l=>({key:Od(l),quoted:!0,value:e.placeholders[l]?L(e.placeholders[l].sourceSpan.toString()):L(e.placeholderToMessage[l].nodes.map(c=>c.sourceSpan.toString()).join(""))})))})));let s=new Rt(t.name,De(QO).callFn(o),Zn,Qt.Final);s.addLeadingComment(JO(e));let a=new Ci(n.set(t));return[s,a]}var Uv=class{formatPh(e){return`{$${Od(e)}}`}visitText(e){return e.value}visitContainer(e){return e.children.map(t=>t.visit(this)).join("")}visitIcu(e){return dT(e)}visitTagPlaceholder(e){return e.isVoid?this.formatPh(e.startName):`${this.formatPh(e.startName)}${e.children.map(t=>t.visit(this)).join("")}${this.formatPh(e.closeName)}`}visitPlaceholder(e){return this.formatPh(e.name)}visitBlockPlaceholder(e){return`${this.formatPh(e.startName)}${e.children.map(t=>t.visit(this)).join("")}${this.formatPh(e.closeName)}`}visitIcuPlaceholder(e,t){return this.formatPh(e.name)}},ZO=new Uv;function eV(n){return n.nodes.map(e=>e.visit(ZO,null)).join("")}function tV(n,e,t){let{messageParts:i,placeHolders:r}=nV(e),o=iV(e),s=r.map(c=>t[c.text]),a=bP(e,i,r,s,o),l=n.set(a);return[new Ci(l)]}var $v=class{placeholderToMessage;pieces;constructor(e,t){this.placeholderToMessage=e,this.pieces=t}visitText(e){if(this.pieces[this.pieces.length-1]instanceof Es)this.pieces[this.pieces.length-1].text+=e.value;else{let t=new ve(e.sourceSpan.fullStart,e.sourceSpan.end,e.sourceSpan.fullStart,e.sourceSpan.details);this.pieces.push(new Es(e.value,t))}}visitContainer(e){e.children.forEach(t=>t.visit(this))}visitIcu(e){this.pieces.push(new Es(dT(e),e.sourceSpan))}visitTagPlaceholder(e){this.pieces.push(this.createPlaceholderPiece(e.startName,e.startSourceSpan??e.sourceSpan)),e.isVoid||(e.children.forEach(t=>t.visit(this)),this.pieces.push(this.createPlaceholderPiece(e.closeName,e.endSourceSpan??e.sourceSpan)))}visitPlaceholder(e){this.pieces.push(this.createPlaceholderPiece(e.name,e.sourceSpan))}visitBlockPlaceholder(e){this.pieces.push(this.createPlaceholderPiece(e.startName,e.startSourceSpan??e.sourceSpan)),e.children.forEach(t=>t.visit(this)),this.pieces.push(this.createPlaceholderPiece(e.closeName,e.endSourceSpan??e.sourceSpan))}visitIcuPlaceholder(e){this.pieces.push(this.createPlaceholderPiece(e.name,e.sourceSpan,this.placeholderToMessage[e.name]))}createPlaceholderPiece(e,t,i){return new Xa(Od(e,!1),t,i)}};function nV(n){let e=[],t=new $v(n.placeholderToMessage,e);return n.nodes.forEach(i=>i.visit(t)),rV(e)}function iV(n){let e=n.nodes[0],t=n.nodes[n.nodes.length-1];return new ve(e.sourceSpan.fullStart,t.sourceSpan.end,e.sourceSpan.fullStart,e.sourceSpan.details)}function rV(n){let e=[],t=[];n[0]instanceof Xa&&e.push(Ty(n[0].sourceSpan.start));for(let i=0;i<n.length;i++){let r=n[i];r instanceof Es?e.push(r):(t.push(r),n[i-1]instanceof Xa&&e.push(Ty(n[i-1].sourceSpan.end)))}return n[n.length-1]instanceof Xa&&e.push(Ty(n[n.length-1].sourceSpan.end)),{messageParts:e,placeHolders:t}}function Ty(n){return new Es("",new ve(n,n))}var FS="ngI18nClosureMode",oV="i18n_",sV="I18N_EXP_",LS="\uFFFD",aV="MSG_";function OS(n){return`${aV}${n}`.toUpperCase()}function lV(n){return new Rt(n.name,void 0,Zn,void 0,n.sourceSpan)}function cV(n){let e=n.relativeContextFilePath.replace(/[^A-Za-z0-9]/g,"_").toUpperCase()+"_",t=new Map,i=new Map,r=new Map,o=new Map;for(let l of n.units)for(let c of l.ops())if(c.kind===_.ExtractedAttribute&&c.i18nContext!==null){let d=t.get(c.i18nContext)??[];d.push(c),t.set(c.i18nContext,d)}else if(c.kind===_.I18nAttributes)i.set(c.target,c);else if(c.kind===_.I18nExpression&&c.usage===bl.I18nAttribute){let d=r.get(c.target)??[];d.push(c),r.set(c.target,d)}else c.kind===_.I18nMessage&&o.set(c.xref,c);let s=new Map,a=new Map;for(let l of n.units)for(let c of l.create)if(c.kind===_.I18nMessage){if(c.messagePlaceholder===null){let{mainVar:d,statements:p}=_T(n,e,o,c);if(c.i18nBlock!==null){let h=n.addConst(d,p);a.set(c.i18nBlock,h)}else{n.constsInitializers.push(...p),s.set(c.i18nContext,d);let h=t.get(c.i18nContext);if(h!==void 0)for(let y of h)y.expression=d.clone()}}q.remove(c)}for(let l of n.units)for(let c of l.create)if(Kr(c)){let d=i.get(c.xref);if(d===void 0)continue;let p=r.get(c.xref);if(p===void 0)throw new Error("AssertionError: Could not find any i18n expressions associated with an I18nAttributes instruction");let h=new Set;p=p.filter(E=>{let A=h.has(E.name);return h.add(E.name),!A});let y=p.flatMap(E=>{let A=s.get(E.context);if(A===void 0)throw new Error("AssertionError: Could not find i18n expression's value");return[L(E.name),A]});d.i18nAttributesConfig=n.addConst(new zi(y))}for(let l of n.units)for(let c of l.create)if(c.kind===_.I18nStart){let d=a.get(c.root);if(d===void 0)throw new Error("AssertionError: Could not find corresponding i18n block index for an i18n message op; was an i18n message incorrectly assumed to correspond to an attribute?");c.messageIndex=d}}function _T(n,e,t,i){let r=[],o=new Map;for(let c of i.subMessages){let d=t.get(c),{mainVar:p,statements:h}=_T(n,e,t,d);r.push(...h);let y=o.get(d.messagePlaceholder)??[];y.push(p),o.set(d.messagePlaceholder,y)}uV(i,o),i.params=new Map([...i.params.entries()].sort());let s=De(n.pool.uniqueName(oV)),a=pV(n.pool,i.message.id,e,n.i18nUseExternalIds),l;if(i.needsPostprocessing||i.postprocessingParams.size>0){let c=Object.fromEntries([...i.postprocessingParams.entries()].sort()),d=m_(c,!1),p=[];i.postprocessingParams.size>0&&p.push(Ev(d,!0)),l=h=>ce(D.i18nPostprocess).callFn([h,...p])}return r.push(...dV(i.message,s,a,i.params,l)),{mainVar:s,statements:r}}function uV(n,e){for(let[t,i]of e)i.length===1?n.params.set(t,i[0]):(n.params.set(t,L(`${LS}${sV}${t}${LS}`)),n.postprocessingParams.set(t,Ge(i)))}function dV(n,e,t,i,r){let o=Object.fromEntries(i),s=[lV(e),Ph(fV(),XO(e,n,t,o),tV(e,n,m_(o,!1)))];return r&&s.push(new Ci(e.set(r(e)))),s}function fV(){return Fd(De(FS)).notIdentical(L("undefined",f_)).and(De(FS))}function pV(n,e,t,i){let r,o=t;if(i){let s=OS("EXTERNAL_"),a=n.uniqueName(o);r=`${s}${ms(e)}$$${a}`}else{let s=OS(o);r=n.uniqueName(s)}return De(r)}function hV(n){for(let e of n.units){let t=null,i=null,r=new Map,o=new Map,s=new Map;for(let a of e.create)switch(a.kind){case _.I18nStart:if(a.context===null)throw Error("I18n op should have its context set.");t=a;break;case _.I18nEnd:t=null;break;case _.IcuStart:if(a.context===null)throw Error("Icu op should have its context set.");i=a;break;case _.IcuEnd:i=null;break;case _.Text:if(t!==null)if(r.set(a.xref,t),o.set(a.xref,i),a.icuPlaceholder!==null){let l=$F(n.allocateXrefId(),a.icuPlaceholder,[a.initialValue]);q.replace(a,l),s.set(a.xref,l)}else q.remove(a);break}for(let a of e.update)switch(a.kind){case _.InterpolateText:if(!r.has(a.target))continue;let l=r.get(a.target),c=o.get(a.target),d=s.get(a.target),p=c?c.context:l.context,h=c?vd.Postproccessing:vd.Creation,y=[];for(let E=0;E<a.interpolation.expressions.length;E++){let A=a.interpolation.expressions[E];y.push(Q1(p,l.xref,l.xref,l.handle,A,d?.xref??null,a.interpolation.i18nPlaceholders[E]??null,h,bl.I18nText,"",A.sourceSpan??a.sourceSpan))}q.replaceWithMany(a,y),d!==void 0&&(d.strings=a.interpolation.strings);break}}}function mV(n){for(let e of n.units)for(let t of e.create)switch(t.kind){case _.ElementStart:case _.ConditionalCreate:case _.ConditionalBranchCreate:case _.Template:if(!Array.isArray(t.localRefs))throw new Error("AssertionError: expected localRefs to be an array still");if(t.numSlotsUsed+=t.localRefs.length,t.localRefs.length>0){let i=gV(t.localRefs);t.localRefs=n.addConst(i)}else t.localRefs=null;break}}function gV(n){let e=[];for(let t of n)e.push(L(t.name),L(t.target));return Ge(e)}function yV(n){for(let e of n.units){let t=un.HTML;for(let i of e.create)i.kind===_.ElementStart&&i.namespace!==t&&(q.insertBefore(PF(i.namespace),i),t=i.namespace)}}function vV(n){let e=[],t=0,i=0,r=0,o=0,s=0,a=null;for(;t<n.length;)switch(n.charCodeAt(t++)){case 40:i++;break;case 41:i--;break;case 39:r===0?r=39:r===39&&n.charCodeAt(t-1)!==92&&(r=0);break;case 34:r===0?r=34:r===34&&n.charCodeAt(t-1)!==92&&(r=0);break;case 58:!a&&i===0&&r===0&&(a=wT(n.substring(s,t-1).trim()),o=t);break;case 59:if(a&&o>0&&i===0&&r===0){let c=n.substring(o,t-1).trim();e.push(a,c),s=t,o=0,a=null}break}if(a&&o){let l=n.slice(o).trim();e.push(a,l)}return e}function wT(n){return n.replace(/[a-z][A-Z]/g,e=>e.charAt(0)+"-"+e.charAt(1)).toLowerCase()}function _V(n){let e=new Map;for(let t of n.units)for(let i of t.create)Kr(i)&&e.set(i.xref,i);for(let t of n.units)for(let i of t.create)if(i.kind===_.ExtractedAttribute&&i.bindingKind===se.Attribute&&X1(i.expression)){let r=e.get(i.target);if(r!==void 0&&(r.kind===_.Template||r.kind===_.ConditionalCreate||r.kind===_.ConditionalBranchCreate)&&r.templateKind===Rn.Structural)continue;if(i.name==="style"){let o=vV(i.expression.value);for(let s=0;s<o.length-1;s+=2)q.insertBefore(gi(i.target,se.StyleProperty,null,o[s],L(o[s+1]),null,null,tt.STYLE),i);q.remove(i)}else if(i.name==="class"){let o=i.expression.value.trim().split(/\s+/g);for(let s of o)q.insertBefore(gi(i.target,se.ClassName,null,s,null,null,null,tt.NONE),i);q.remove(i)}}}function wV(n){Pu(n.root,n.componentName,{index:0},n.compatibility===oi.TemplateDefinitionBuilder)}function Pu(n,e,t,i){n.fnName===null&&(n.fnName=n.job.pool.uniqueName(ms(`${e}_${n.job.fnSuffix}`),!1));let r=new Map;for(let o of n.ops())switch(o.kind){case _.Property:case _.DomProperty:o.bindingKind===se.LegacyAnimation&&(o.name="@"+o.name);break;case _.Animation:if(o.handlerFnName===null){let d=o.name.replace(".","");o.handlerFnName=`${n.fnName}_${d}_cb`,o.handlerFnName=ms(o.handlerFnName)}break;case _.AnimationListener:if(o.handlerFnName!==null)break;if(!o.hostListener&&o.targetSlot.slot===null)throw new Error("Expected a slot to be assigned");let s=o.name.replace(".","");o.hostListener?o.handlerFnName=`${e}_${s}_HostBindingHandler`:o.handlerFnName=`${n.fnName}_${o.tag.replace("-","_")}_${s}_${o.targetSlot.slot}_listener`,o.handlerFnName=ms(o.handlerFnName);break;case _.Listener:if(o.handlerFnName!==null)break;if(!o.hostListener&&o.targetSlot.slot===null)throw new Error("Expected a slot to be assigned");let a="";o.isLegacyAnimationListener&&(o.name=`@${o.name}.${o.legacyAnimationPhase}`,a="animation"),o.hostListener?o.handlerFnName=`${e}_${a}${o.name}_HostBindingHandler`:o.handlerFnName=`${n.fnName}_${o.tag.replace("-","_")}_${a}${o.name}_${o.targetSlot.slot}_listener`,o.handlerFnName=ms(o.handlerFnName);break;case _.TwoWayListener:if(o.handlerFnName!==null)break;if(o.targetSlot.slot===null)throw new Error("Expected a slot to be assigned");o.handlerFnName=ms(`${n.fnName}_${o.tag.replace("-","_")}_${o.name}_${o.targetSlot.slot}_listener`);break;case _.Variable:r.set(o.xref,CV(n,o.variable,t));break;case _.RepeaterCreate:if(!(n instanceof yi))throw new Error("AssertionError: must be compiling a component");if(o.handle.slot===null)throw new Error("Expected slot to be assigned");if(o.emptyView!==null){let d=n.job.views.get(o.emptyView);Pu(d,`${e}_${o.functionNameSuffix}Empty_${o.handle.slot+2}`,t,i)}Pu(n.job.views.get(o.xref),`${e}_${o.functionNameSuffix}_${o.handle.slot+1}`,t,i);break;case _.Projection:if(!(n instanceof yi))throw new Error("AssertionError: must be compiling a component");if(o.handle.slot===null)throw new Error("Expected slot to be assigned");if(o.fallbackView!==null){let d=n.job.views.get(o.fallbackView);Pu(d,`${e}_ProjectionFallback_${o.handle.slot}`,t,i)}break;case _.ConditionalCreate:case _.ConditionalBranchCreate:case _.Template:if(!(n instanceof yi))throw new Error("AssertionError: must be compiling a component");let l=n.job.views.get(o.xref);if(o.handle.slot===null)throw new Error("Expected slot to be assigned");let c=o.functionNameSuffix.length===0?"":`_${o.functionNameSuffix}`;Pu(l,`${e}${c}_${o.handle.slot}`,t,i);break;case _.StyleProp:o.name=EV(o.name),i&&(o.name=VS(o.name));break;case _.ClassProp:i&&(o.name=VS(o.name));break}for(let o of n.ops())Ht(o,s=>{if(!(!(s instanceof zr)||s.name!==null)){if(!r.has(s.xref))throw new Error(`Variable ${s.xref} not yet named`);s.name=r.get(s.xref)}})}function CV(n,e,t){if(e.name===null)switch(e.kind){case Ut.Context:e.name=`ctx_r${t.index++}`;break;case Ut.Identifier:if(n.job.compatibility===oi.TemplateDefinitionBuilder){let i=e.identifier==="ctx"?"i":"";e.name=`${e.identifier}_${i}r${++t.index}`}else e.name=`${e.identifier}_i${t.index++}`;break;default:e.name=`_r${++t.index}`;break}return e.name}function EV(n){return n.startsWith("--")?n:wT(n)}function VS(n){let e=n.indexOf("!important");return e>-1?n.substring(0,e):n}function xV(n){for(let e of n.units){for(let t of e.create)(t.kind===_.Listener||t.kind===_.Animation||t.kind===_.AnimationListener||t.kind===_.TwoWayListener)&&BS(t.handlerOps);BS(e.update)}}function BS(n){for(let e of n){if(e.kind!==_.Statement||!(e.statement instanceof Ci)||!(e.statement.expr instanceof oh))continue;let t=e.statement.expr.steps,i=!0;for(let r=e.next;r.kind!==_.ListEnd&&i;r=r.next)Ht(r,(o,s)=>{if(!vr(o))return o;if(i&&!(s&qe.InChildOperation))switch(o.kind){case ue.NextContext:o.steps+=t,q.remove(e),i=!1;break;case ue.GetCurrentView:case ue.Reference:case ue.ContextLetReference:i=!1;break}})}}var bV="ng-container";function SV(n){for(let e of n.units){let t=new Set;for(let i of e.create)i.kind===_.ElementStart&&i.tag===bV&&(i.kind=_.ContainerStart,t.add(i.xref)),i.kind===_.ElementEnd&&t.has(i.xref)&&(i.kind=_.ContainerEnd)}}function TV(n,e){let t=n.get(e);if(t===void 0)throw new Error("All attributes should have an element-like target.");return t}function IV(n){let e=new Map;for(let t of n.units)for(let i of t.create)Kr(i)&&e.set(i.xref,i);for(let t of n.units)for(let i of t.create)(i.kind===_.ElementStart||i.kind===_.ContainerStart)&&i.nonBindable&&q.insertAfter(AF(i.xref),i),(i.kind===_.ElementEnd||i.kind===_.ContainerEnd)&&TV(e,i.xref).nonBindable&&q.insertBefore(kF(i.xref),i)}function Hr(n){return e=>e.kind===n}function Vu(n,e){return t=>t.kind===n&&e===t.expression instanceof ft}function DV(n){return n.kind===_.Listener&&!(n.hostListener&&n.isLegacyAnimationListener)||n.kind===_.TwoWayListener||n.kind===_.Animation||n.kind===_.AnimationListener}function AV(n){return(n.kind===_.Property||n.kind===_.TwoWayProperty)&&!(n.expression instanceof ft)}var kV=[{test:n=>n.kind===_.Listener&&n.hostListener&&n.isLegacyAnimationListener},{test:DV}],MV=[{test:Hr(_.StyleMap),transform:Eh},{test:Hr(_.ClassMap),transform:Eh},{test:Hr(_.StyleProp)},{test:Hr(_.ClassProp)},{test:Vu(_.Attribute,!0)},{test:Vu(_.Property,!0)},{test:AV},{test:Vu(_.Attribute,!1)}],NV=[{test:Vu(_.DomProperty,!0)},{test:Vu(_.DomProperty,!1)},{test:Hr(_.Attribute)},{test:Hr(_.StyleMap),transform:Eh},{test:Hr(_.ClassMap),transform:Eh},{test:Hr(_.StyleProp)},{test:Hr(_.ClassProp)}],US=new Set([_.Listener,_.TwoWayListener,_.AnimationListener,_.StyleMap,_.ClassMap,_.StyleProp,_.ClassProp,_.Property,_.TwoWayProperty,_.DomProperty,_.Attribute,_.Animation]);function PV(n){for(let e of n.units){$S(e.create,kV);let t=e.job.kind===ne.Host?NV:MV;$S(e.update,t)}}function $S(n,e){let t=[],i=null;for(let r of n){let o=_d(r)?r.target:null;(!US.has(r.kind)||o!==i&&i!==null&&o!==null)&&(q.insertBefore(HS(t,e),r),t=[],i=null),US.has(r.kind)&&(t.push(r),q.remove(r),i=o??i)}n.push(HS(t,e))}function HS(n,e){let t=Array.from(e,()=>new Array);for(let i of n){let r=e.findIndex(o=>o.test(i));t[r].push(i)}return t.flatMap((i,r)=>{let o=e[r].transform;return o?o(i):i})}function Eh(n){return n.slice(n.length-1)}function RV(n){for(let e of n.units){let t=T_(e);for(let i of e.ops())switch(i.kind){case _.Binding:let r=LV(t,i.target);FV(i.name)&&r.kind===_.Projection&&q.remove(i);break}}}function FV(n){return n.toLowerCase()==="select"}function LV(n,e){let t=n.get(e);if(t===void 0)throw new Error("All attributes should have an slottable target.");return t}function OV(n){for(let e of n.units)VV(e)}function VV(n){for(let e of n.update)Ht(e,(t,i)=>{if(vr(t)&&t.kind===ue.PipeBinding){if(i&qe.InChildOperation)throw new Error("AssertionError: pipe bindings should not appear in child expressions");if(n.job.compatibility){if(e.target==null)throw new Error("AssertionError: expected slot handle to be assigned for pipe creation");BV(n,e.target,t)}else n.create.push(oT(t.target,t.targetSlot,t.name))}})}function BV(n,e,t){for(let i=n.create.head.next;i.kind!==_.ListEnd;i=i.next){if(!Tl(i)||i.xref!==e)continue;for(;i.next.kind===_.Pipe;)i=i.next;let r=oT(t.target,t.targetSlot,t.name);q.insertBefore(r,i.next);return}throw new Error(`AssertionError: unable to find insertion point for pipe ${t.name}`)}function UV(n){for(let e of n.units)for(let t of e.update)Tt(t,i=>!(i instanceof Us)||i.args.length<=4?i:new Ed(i.target,i.targetSlot,i.name,Ge(i.args),i.args.length),qe.None)}function $V(n){CT(n.root,0)}function CT(n,e){let t=null;for(let i of n.create)switch(i.kind){case _.I18nStart:i.subTemplateIndex=e===0?null:e,t=i;break;case _.I18nEnd:t.subTemplateIndex===null&&(e=0),t=null;break;case _.ConditionalCreate:case _.ConditionalBranchCreate:case _.Template:e=sp(n.job.views.get(i.xref),t,i.i18nPlaceholder,e);break;case _.RepeaterCreate:let r=n.job.views.get(i.xref);e=sp(r,t,i.i18nPlaceholder,e),i.emptyView!==null&&(e=sp(n.job.views.get(i.emptyView),t,i.emptyI18nPlaceholder,e));break;case _.Projection:i.fallbackView!==null&&(e=sp(n.job.views.get(i.fallbackView),t,i.fallbackViewI18nPlaceholder,e));break}return e}function sp(n,e,t,i){if(t!==void 0){if(e===null)throw Error("Expected template with i18n placeholder to be in an i18n block.");i++,HV(n,e)}return CT(n,i)}function HV(n,e){if(n.create.head.next?.kind!==_.I18nStart){let t=n.job.allocateXrefId();q.insertAfter(Vh(t,e.message,e.root,null),n.create.head),q.insertBefore(Bh(t,null),n.create.tail)}}function qV(n){for(let e of n.units)for(let t of e.ops())Ht(t,i=>{if(!(i instanceof Bs)||i.body===null)return;let r=new Hv(i.args.length);i.fn=n.pool.getSharedConstant(r,i.body),i.body=null})}var Hv=class extends Za{numArgs;constructor(e){super(),this.numArgs=e}keyOf(e){return e instanceof gl?`param(${e.index})`:super.keyOf(e)}toSharedConstantDeclaration(e,t){let i=[];for(let o=0;o<this.numArgs;o++)i.push(new $t("a"+o));let r=ie(t,o=>o instanceof gl?De("a"+o.index):o,qe.None);return new Rt(e,new ks(i,r),void 0,Qt.Final)}};function GV(n){for(let e of n.units)for(let t of e.update)Tt(t,(i,r)=>r&qe.InChildOperation?i:i instanceof zi?WV(i):i instanceof hr?zV(i):i,qe.None)}function WV(n){let e=[],t=[];for(let i of n.entries)if(i.isConstant())e.push(i);else{let r=t.length;t.push(i),e.push(new gl(r))}return new Bs(Ge(e),t)}function zV(n){let e=[],t=[];for(let i of n.entries)if(i.value.isConstant())e.push(i);else{let r=t.length;t.push(i.value),e.push(new ol(i.key,new gl(r),i.quoted))}return new Bs(xn(e),t)}function jV(n,e,t,i,r){return Lo(D.element,n,e,t,i,r)}function KV(n,e,t,i,r){return Lo(D.elementStart,n,e,t,i,r)}function Lo(n,e,t,i,r,o){let s=[L(e)];return t!==null&&s.push(L(t)),r!==null?s.push(L(i),L(r)):i!==null&&s.push(L(i)),Ce(n,s,o)}function ET(n,e,t,i,r,o,s,a,l){let c=[L(e),t,L(i),L(r),L(o),L(s)];for(a!==null&&(c.push(L(a)),c.push(ce(D.templateRefExtractor)));c[c.length-1].isEquivalent(sl);)c.pop();return Ce(n,c,l)}function I_(n,e,t,i,r){let o=[L(e)];return t instanceof ft?o.push(Il(t,r)):o.push(t),i!==null&&o.push(i),Ce(n,o,r)}function YV(n){return Ce(D.elementEnd,[],n)}function JV(n,e,t,i){return Lo(D.elementContainerStart,n,null,e,t,i)}function QV(n,e,t,i){return Lo(D.elementContainer,n,null,e,t,i)}function XV(){return Ce(D.elementContainerEnd,[],null)}function ZV(n,e,t,i,r,o,s,a){return ET(D.templateCreate,n,e,t,i,r,o,s,a)}function e3(){return Ce(D.disableBindings,[],null)}function t3(){return Ce(D.enableBindings,[],null)}function n3(n,e,t,i,r){let o=[L(n),e];return t!==null&&o.push(ce(t)),Ce(i?D.syntheticHostListener:D.listener,o,r)}function qS(n,e){return ce(D.twoWayBindingSet).callFn([n,e])}function i3(n,e,t){return Ce(D.twoWayListener,[L(n),e],t)}function r3(n,e){return Ce(D.pipe,[L(n),L(e)],null)}function o3(){return Ce(D.namespaceHTML,[],null)}function s3(){return Ce(D.namespaceSVG,[],null)}function a3(){return Ce(D.namespaceMathML,[],null)}function l3(n,e){return Ce(D.advance,n>1?[L(n)]:[],e)}function c3(n){return ce(D.reference).callFn([L(n)])}function u3(n){return ce(D.nextContext).callFn(n===1?[]:[L(n)])}function d3(){return ce(D.getCurrentView).callFn([])}function f3(n){return ce(D.restoreView).callFn([n])}function p3(n){return ce(D.resetView).callFn([n])}function h3(n,e,t){let i=[L(n,null)];return e!==""&&i.push(L(e)),Ce(D.text,i,t)}function m3(n,e,t,i,r,o,s,a,l,c,d){let p=[L(n),L(e),t??L(null),L(i),L(r),L(o),s??L(null),a??L(null),l?ce(D.deferEnableTimerScheduling):L(null),L(d)],h;for(;(h=p[p.length-1])!==null&&h instanceof en&&h.value===null;)p.pop();return Ce(D.defer,p,c)}var g3=new Map([[Ke.Idle,{none:D.deferOnIdle,prefetch:D.deferPrefetchOnIdle,hydrate:D.deferHydrateOnIdle}],[Ke.Immediate,{none:D.deferOnImmediate,prefetch:D.deferPrefetchOnImmediate,hydrate:D.deferHydrateOnImmediate}],[Ke.Timer,{none:D.deferOnTimer,prefetch:D.deferPrefetchOnTimer,hydrate:D.deferHydrateOnTimer}],[Ke.Hover,{none:D.deferOnHover,prefetch:D.deferPrefetchOnHover,hydrate:D.deferHydrateOnHover}],[Ke.Interaction,{none:D.deferOnInteraction,prefetch:D.deferPrefetchOnInteraction,hydrate:D.deferHydrateOnInteraction}],[Ke.Viewport,{none:D.deferOnViewport,prefetch:D.deferPrefetchOnViewport,hydrate:D.deferHydrateOnViewport}],[Ke.Never,{none:D.deferHydrateNever,prefetch:D.deferHydrateNever,hydrate:D.deferHydrateNever}]]);function y3(n,e,t,i){let r=g3.get(n)?.[t];if(r===void 0)throw new Error(`Unable to determine instruction for trigger ${n}`);return Ce(r,e.map(o=>L(o)),i)}function v3(n){return Ce(D.projectionDef,n?[n]:[],null)}function _3(n,e,t,i,r,o,s){let a=[L(n)];return(e!==0||t!==null||i!==null)&&(a.push(L(e)),t!==null&&a.push(t),i!==null&&(t===null&&a.push(L(null)),a.push(De(i),L(r),L(o)))),Ce(D.projection,a,s)}function w3(n,e,t,i){let r=[L(n),L(e)];return t!==null&&r.push(L(t)),Ce(D.i18nStart,r,i)}function C3(n,e,t,i,r,o,s,a){let l=[L(n),e,L(t),L(i),L(r),L(o)];for(s!==null&&(l.push(L(s)),l.push(ce(D.templateRefExtractor)));l[l.length-1].isEquivalent(sl);)l.pop();return Ce(D.conditionalCreate,l,a)}function E3(n,e,t,i,r,o,s,a){let l=[L(n),e,L(t),L(i),L(r),L(o)];for(s!==null&&(l.push(L(s)),l.push(ce(D.templateRefExtractor)));l[l.length-1].isEquivalent(sl);)l.pop();return Ce(D.conditionalBranchCreate,l,a)}function x3(n,e,t,i,r,o,s,a,l,c,d,p,h,y){let E=[L(n),De(e),L(t),L(i),L(r),L(o),s];return(a||l!==null)&&(E.push(L(a)),l!==null&&(E.push(De(l),L(c),L(d)),(p!==null||h!==null)&&E.push(L(p)),h!==null&&E.push(L(h)))),Ce(D.repeaterCreate,E,y)}function b3(n,e){return Ce(D.repeater,[n],e)}function S3(n,e,t){return n==="prefetch"?Ce(D.deferPrefetchWhen,[e],t):n==="hydrate"?Ce(D.deferHydrateWhen,[e],t):Ce(D.deferWhen,[e],t)}function T3(n,e){return Ce(D.declareLet,[L(n)],e)}function I3(n,e){return ce(D.storeLet).callFn([n],e)}function D3(n){return ce(D.readContextLet).callFn([L(n)])}function A3(n,e,t,i){let r=[L(n),L(e)];return t&&r.push(L(t)),Ce(D.i18n,r,i)}function k3(n){return Ce(D.i18nEnd,[],n)}function M3(n,e){let t=[L(n),L(e)];return Ce(D.i18nAttributes,t,null)}function N3(n,e,t){return I_(D.ariaProperty,n,e,null,t)}function P3(n,e,t,i){return I_(D.property,n,e,t,i)}function R3(n,e,t,i){let r=[L(n),e];return t!==null&&r.push(t),Ce(D.twoWayProperty,r,i)}function F3(n,e,t,i,r){let o=[L(n)];return e instanceof ft?o.push(Il(e,r)):o.push(e),(t!==null||i!==null)&&o.push(t??L(null)),i!==null&&o.push(L(i)),Ce(D.attribute,o,null)}function L3(n,e,t,i){let r=[L(n)];return e instanceof ft?r.push(Il(e,i)):r.push(e),t!==null&&r.push(L(t)),Ce(D.styleProp,r,i)}function O3(n,e,t){return Ce(D.classProp,[L(n),e],t)}function V3(n,e){let t=n instanceof ft?Il(n,e):n;return Ce(D.styleMap,[t],e)}function B3(n,e){let t=n instanceof ft?Il(n,e):n;return Ce(D.classMap,[t],e)}function U3(n,e,t,i,r){return Lo(D.domElement,n,e,t,i,r)}function $3(n,e,t,i,r){return Lo(D.domElementStart,n,e,t,i,r)}function H3(n){return Ce(D.domElementEnd,[],n)}function q3(n,e,t,i){return Lo(D.domElementContainerStart,n,null,e,t,i)}function G3(n,e,t,i){return Lo(D.domElementContainer,n,null,e,t,i)}function W3(){return Ce(D.domElementContainerEnd,[],null)}function z3(n,e,t,i){let r=[L(n),e];return t!==null&&r.push(ce(t)),Ce(D.domListener,r,i)}function j3(n,e,t,i,r,o,s,a){return ET(D.domTemplate,n,e,t,i,r,o,s,a)}var GS=[D.pipeBind1,D.pipeBind2,D.pipeBind3,D.pipeBind4];function K3(n,e,t){if(t.length<1||t.length>GS.length)throw new Error("pipeBind() argument count out of bounds");let i=GS[t.length-1];return ce(i).callFn([L(n),L(e),...t])}function Y3(n,e,t){return ce(D.pipeBindV).callFn([L(n),L(e),t])}function J3(n,e,t){let i=xT(n,e);return uB(aB,[],i,[],t)}function Q3(n,e){return Ce(D.i18nExp,[n],e)}function X3(n,e){return Ce(D.i18nApply,[L(n)],e)}function Z3(n,e,t,i){return I_(D.domProperty,n,e,t,i)}function eB(n,e,t,i){let r=[e];t!==null&&r.push(t);let o=n==="enter"?D.animationEnter:D.animationLeave;return Ce(o,r,i)}function tB(n,e,t,i){let o=[e instanceof ft?Il(e,i):e];t!==null&&o.push(t);let s=n==="enter"?D.animationEnter:D.animationLeave;return Ce(s,o,i)}function nB(n,e,t,i){let r=[e],o=n==="enter"?D.animationEnterListener:D.animationLeaveListener;return Ce(o,r,i)}function iB(n,e,t){return Ce(D.syntheticHostProperty,[L(n),e],t)}function rB(n,e,t){return D_(cB,[L(n),e],t,[],null)}function oB(n,e){return Ce(D.attachSourceLocations,[L(n),e],null)}function xT(n,e){if(n.length<1||e.length!==n.length-1)throw new Error("AssertionError: expected specific shape of args for strings/expressions in interpolation");let t=[];if(e.length===1&&n[0]===""&&n[1]==="")t.push(e[0]);else{let i;for(i=0;i<e.length;i++)t.push(L(n[i]),e[i]);t.push(L(n[i]))}return t}function Il(n,e){let t=xT(n.strings,n.expressions);return D_(lB,[],t,[],e)}function Ce(n,e,t){let i=ce(n).callFn(e,t);return xi(new Ci(i,t))}function sB(n,e,t){let i=[n];return e!==null&&i.push(e),Ce(D.conditional,i,t)}var aB={constant:[D.textInterpolate,D.textInterpolate1,D.textInterpolate2,D.textInterpolate3,D.textInterpolate4,D.textInterpolate5,D.textInterpolate6,D.textInterpolate7,D.textInterpolate8],variable:D.textInterpolateV,mapping:n=>{if(n%2===0)throw new Error("Expected odd number of arguments");return(n-1)/2}},lB={constant:[D.interpolate,D.interpolate1,D.interpolate2,D.interpolate3,D.interpolate4,D.interpolate5,D.interpolate6,D.interpolate7,D.interpolate8],variable:D.interpolateV,mapping:n=>{if(n%2===0)throw new Error("Expected odd number of arguments");return(n-1)/2}},cB={constant:[D.pureFunction0,D.pureFunction1,D.pureFunction2,D.pureFunction3,D.pureFunction4,D.pureFunction5,D.pureFunction6,D.pureFunction7,D.pureFunction8],variable:D.pureFunctionV,mapping:n=>n};function D_(n,e,t,i,r){let o=n.mapping(t.length),s=t.at(-1);if(i.length===0&&t.length>1&&s instanceof en&&s.value===""&&t.pop(),o<n.constant.length)return ce(n.constant[o]).callFn([...e,...t,...i],r);if(n.variable!==null)return ce(n.variable).callFn([...e,Ge(t),...i],r);throw new Error("AssertionError: unable to call variadic function")}function uB(n,e,t,i,r){return xi(D_(n,e,t,i,r).toStmt())}var dB=new Map([["window",D.resolveWindow],["document",D.resolveDocument],["body",D.resolveBody]]),fB=new Map([["class","className"],["for","htmlFor"],["formaction","formAction"],["innerHtml","innerHTML"],["readonly","readOnly"],["tabindex","tabIndex"]]);function pB(n){for(let e of n.units)hB(e,e.create),A_(e,e.update)}function hB(n,e){for(let t of e)switch(Tt(t,bT,qe.None),t.kind){case _.Text:q.replace(t,h3(t.handle.slot,t.initialValue,t.sourceSpan));break;case _.ElementStart:q.replace(t,n.job.mode===Mn.DomOnly?$3(t.handle.slot,t.tag,t.attributes,t.localRefs,t.startSourceSpan):KV(t.handle.slot,t.tag,t.attributes,t.localRefs,t.startSourceSpan));break;case _.Element:q.replace(t,n.job.mode===Mn.DomOnly?U3(t.handle.slot,t.tag,t.attributes,t.localRefs,t.wholeSourceSpan):jV(t.handle.slot,t.tag,t.attributes,t.localRefs,t.wholeSourceSpan));break;case _.ElementEnd:q.replace(t,n.job.mode===Mn.DomOnly?H3(t.sourceSpan):YV(t.sourceSpan));break;case _.ContainerStart:q.replace(t,n.job.mode===Mn.DomOnly?q3(t.handle.slot,t.attributes,t.localRefs,t.startSourceSpan):JV(t.handle.slot,t.attributes,t.localRefs,t.startSourceSpan));break;case _.Container:q.replace(t,n.job.mode===Mn.DomOnly?G3(t.handle.slot,t.attributes,t.localRefs,t.wholeSourceSpan):QV(t.handle.slot,t.attributes,t.localRefs,t.wholeSourceSpan));break;case _.ContainerEnd:q.replace(t,n.job.mode===Mn.DomOnly?W3():XV());break;case _.I18nStart:q.replace(t,w3(t.handle.slot,t.messageIndex,t.subTemplateIndex,t.sourceSpan));break;case _.I18nEnd:q.replace(t,k3(t.sourceSpan));break;case _.I18n:q.replace(t,A3(t.handle.slot,t.messageIndex,t.subTemplateIndex,t.sourceSpan));break;case _.I18nAttributes:if(t.i18nAttributesConfig===null)throw new Error("AssertionError: i18nAttributesConfig was not set");q.replace(t,M3(t.handle.slot,t.i18nAttributesConfig));break;case _.Template:if(!(n instanceof yi))throw new Error("AssertionError: must be compiling a component");if(Array.isArray(t.localRefs))throw new Error("AssertionError: local refs array should have been extracted into a constant");let i=n.job.views.get(t.xref);q.replace(t,t.templateKind===Rn.Block||n.job.mode===Mn.DomOnly?j3(t.handle.slot,De(i.fnName),i.decls,i.vars,t.tag,t.attributes,t.localRefs,t.startSourceSpan):ZV(t.handle.slot,De(i.fnName),i.decls,i.vars,t.tag,t.attributes,t.localRefs,t.startSourceSpan));break;case _.DisableBindings:q.replace(t,e3());break;case _.EnableBindings:q.replace(t,t3());break;case _.Pipe:q.replace(t,r3(t.handle.slot,t.name));break;case _.DeclareLet:q.replace(t,T3(t.handle.slot,t.sourceSpan));break;case _.AnimationString:q.replace(t,tB(t.animationKind,t.expression,t.sanitizer,t.sourceSpan));break;case _.Animation:let r=ap(n,t.handlerFnName,t.handlerOps,!1);q.replace(t,eB(t.animationKind,r,t.sanitizer,t.sourceSpan));break;case _.AnimationListener:let o=ap(n,t.handlerFnName,t.handlerOps,t.consumesDollarEvent);q.replace(t,nB(t.animationKind,o,null,t.sourceSpan));break;case _.Listener:let s=ap(n,t.handlerFnName,t.handlerOps,t.consumesDollarEvent),a=t.eventTarget?dB.get(t.eventTarget):null;if(a===void 0)throw new Error(`Unexpected global target '${t.eventTarget}' defined for '${t.name}' event. Supported list of global targets: window,document,body.`);q.replace(t,n.job.mode===Mn.DomOnly&&!t.hostListener&&!t.isLegacyAnimationListener?z3(t.name,s,a,t.sourceSpan):n3(t.name,s,a,t.hostListener&&t.isLegacyAnimationListener,t.sourceSpan));break;case _.TwoWayListener:q.replace(t,i3(t.name,ap(n,t.handlerFnName,t.handlerOps,!0),t.sourceSpan));break;case _.Variable:if(t.variable.name===null)throw new Error(`AssertionError: unnamed variable ${t.xref}`);q.replace(t,xi(new Rt(t.variable.name,t.initializer,void 0,Qt.Final)));break;case _.Namespace:switch(t.active){case un.HTML:q.replace(t,o3());break;case un.SVG:q.replace(t,s3());break;case un.Math:q.replace(t,a3());break}break;case _.Defer:let l=!!t.loadingMinimumTime||!!t.loadingAfterTime||!!t.placeholderMinimumTime;q.replace(t,m3(t.handle.slot,t.mainSlot.slot,t.resolverFn,t.loadingSlot?.slot??null,t.placeholderSlot?.slot??null,t.errorSlot?.slot??null,t.loadingConfig,t.placeholderConfig,l,t.sourceSpan,t.flags));break;case _.DeferOn:let c=[];switch(t.trigger.kind){case Ke.Never:case Ke.Idle:case Ke.Immediate:break;case Ke.Timer:c=[t.trigger.delay];break;case Ke.Interaction:case Ke.Hover:case Ke.Viewport:t.modifier==="hydrate"?c=[]:(c=[t.trigger.targetSlot?.slot??null],t.trigger.targetSlotViewSteps!==0&&c.push(t.trigger.targetSlotViewSteps));break;default:throw new Error(`AssertionError: Unsupported reification of defer trigger kind ${t.trigger.kind}`)}q.replace(t,y3(t.trigger.kind,c,t.modifier,t.sourceSpan));break;case _.ProjectionDef:q.replace(t,v3(t.def));break;case _.Projection:if(t.handle.slot===null)throw new Error("No slot was assigned for project instruction");let d=null,p=null,h=null;if(t.fallbackView!==null){if(!(n instanceof yi))throw new Error("AssertionError: must be compiling a component");let z=n.job.views.get(t.fallbackView);if(z===void 0)throw new Error("AssertionError: projection had fallback view xref, but fallback view was not found");if(z.fnName===null||z.decls===null||z.vars===null)throw new Error("AssertionError: expected projection fallback view to have been named and counted");d=z.fnName,p=z.decls,h=z.vars}q.replace(t,_3(t.handle.slot,t.projectionSlotIndex,t.attributes,d,p,h,t.sourceSpan));break;case _.ConditionalCreate:if(!(n instanceof yi))throw new Error("AssertionError: must be compiling a component");if(Array.isArray(t.localRefs))throw new Error("AssertionError: local refs array should have been extracted into a constant");let y=n.job.views.get(t.xref);q.replace(t,C3(t.handle.slot,De(y.fnName),y.decls,y.vars,t.tag,t.attributes,t.localRefs,t.startSourceSpan));break;case _.ConditionalBranchCreate:if(!(n instanceof yi))throw new Error("AssertionError: must be compiling a component");if(Array.isArray(t.localRefs))throw new Error("AssertionError: local refs array should have been extracted into a constant");let E=n.job.views.get(t.xref);q.replace(t,E3(t.handle.slot,De(E.fnName),E.decls,E.vars,t.tag,t.attributes,t.localRefs,t.startSourceSpan));break;case _.RepeaterCreate:if(t.handle.slot===null)throw new Error("No slot was assigned for repeater instruction");if(!(n instanceof yi))throw new Error("AssertionError: must be compiling a component");let A=n.job.views.get(t.xref);if(A.fnName===null)throw new Error("AssertionError: expected repeater primary view to have been named");let R=null,k=null,H=null;if(t.emptyView!==null){let z=n.job.views.get(t.emptyView);if(z===void 0)throw new Error("AssertionError: repeater had empty view xref, but empty view was not found");if(z.fnName===null||z.decls===null||z.vars===null)throw new Error("AssertionError: expected repeater empty view to have been named and counted");R=z.fnName,k=z.decls,H=z.vars}q.replace(t,x3(t.handle.slot,A.fnName,t.decls,t.vars,t.tag,t.attributes,gB(n,t),t.usesComponentInstance,R,k,H,t.emptyTag,t.emptyAttributes,t.wholeSourceSpan));break;case _.SourceLocation:let K=Ge(t.locations.map(({targetSlot:z,offset:oe,line:pe,column:Ne})=>{if(z.slot===null)throw new Error("No slot was assigned for source location");return Ge([L(z.slot),L(oe),L(pe),L(Ne)])}));q.replace(t,oB(t.templatePath,K));break;case _.Statement:break;default:throw new Error(`AssertionError: Unsupported reification of create op ${_[t.kind]}`)}}function A_(n,e){for(let t of e)switch(Tt(t,bT,qe.None),t.kind){case _.Advance:q.replace(t,l3(t.delta,t.sourceSpan));break;case _.Property:q.replace(t,n.job.mode===Mn.DomOnly&&t.bindingKind!==se.LegacyAnimation&&t.bindingKind!==se.Animation?WS(t):mB(t));break;case _.TwoWayProperty:q.replace(t,R3(t.name,t.expression,t.sanitizer,t.sourceSpan));break;case _.StyleProp:q.replace(t,L3(t.name,t.expression,t.unit,t.sourceSpan));break;case _.ClassProp:q.replace(t,O3(t.name,t.expression,t.sourceSpan));break;case _.StyleMap:q.replace(t,V3(t.expression,t.sourceSpan));break;case _.ClassMap:q.replace(t,B3(t.expression,t.sourceSpan));break;case _.I18nExpression:q.replace(t,Q3(t.expression,t.sourceSpan));break;case _.I18nApply:q.replace(t,X3(t.handle.slot,t.sourceSpan));break;case _.InterpolateText:q.replace(t,J3(t.interpolation.strings,t.interpolation.expressions,t.sourceSpan));break;case _.Attribute:q.replace(t,F3(t.name,t.expression,t.sanitizer,t.namespace,t.sourceSpan));break;case _.DomProperty:if(t.expression instanceof ft)throw new Error("not yet handled");t.bindingKind===se.LegacyAnimation||t.bindingKind===se.Animation?q.replace(t,iB(t.name,t.expression,t.sourceSpan)):q.replace(t,WS(t));break;case _.Variable:if(t.variable.name===null)throw new Error(`AssertionError: unnamed variable ${t.xref}`);q.replace(t,xi(new Rt(t.variable.name,t.initializer,void 0,Qt.Final)));break;case _.Conditional:if(t.processed===null)throw new Error("Conditional test was not set.");q.replace(t,sB(t.processed,t.contextValue,t.sourceSpan));break;case _.Repeater:q.replace(t,b3(t.collection,t.sourceSpan));break;case _.DeferWhen:q.replace(t,S3(t.modifier,t.expr,t.sourceSpan));break;case _.StoreLet:throw new Error(`AssertionError: unexpected storeLet ${t.declaredName}`);case _.Statement:break;default:throw new Error(`AssertionError: Unsupported reification of update op ${_[t.kind]}`)}}function WS(n){return Z3(fB.get(n.name)??n.name,n.expression,n.sanitizer,n.sourceSpan)}function mB(n){return lT(n.name)?N3(n.name,n.expression,n.sourceSpan):P3(n.name,n.expression,n.sanitizer,n.sourceSpan)}function bT(n){if(!vr(n))return n;switch(n.kind){case ue.NextContext:return u3(n.steps);case ue.Reference:return c3(n.targetSlot.slot+1+n.offset);case ue.LexicalRead:throw new Error(`AssertionError: unresolved LexicalRead of ${n.name}`);case ue.TwoWayBindingSet:throw new Error("AssertionError: unresolved TwoWayBindingSet");case ue.RestoreView:if(typeof n.view=="number")throw new Error("AssertionError: unresolved RestoreView");return f3(n.view);case ue.ResetView:return p3(n.expr);case ue.GetCurrentView:return d3();case ue.ReadVariable:if(n.name===null)throw new Error(`Read of unnamed variable ${n.xref}`);return De(n.name);case ue.ReadTemporaryExpr:if(n.name===null)throw new Error(`Read of unnamed temporary ${n.xref}`);return De(n.name);case ue.AssignTemporaryExpr:if(n.name===null)throw new Error(`Assign of unnamed temporary ${n.xref}`);return De(n.name).set(n.expr);case ue.PureFunctionExpr:if(n.fn===null)throw new Error("AssertionError: expected PureFunctions to have been extracted");return rB(n.varOffset,n.fn,n.args);case ue.PureFunctionParameterExpr:throw new Error("AssertionError: expected PureFunctionParameterExpr to have been extracted");case ue.PipeBinding:return K3(n.targetSlot.slot,n.varOffset,n.args);case ue.PipeBindingVariadic:return Y3(n.targetSlot.slot,n.varOffset,n.args);case ue.SlotLiteralExpr:return L(n.slot.slot);case ue.ContextLetReference:return D3(n.targetSlot.slot);case ue.StoreLet:return I3(n.value,n.sourceSpan);case ue.TrackContext:return De("this");default:throw new Error(`AssertionError: Unsupported reification of ir.Expression kind: ${ue[n.kind]}`)}}function ap(n,e,t,i){A_(n,t);let r=[];for(let s of t){if(s.kind!==_.Statement)throw new Error(`AssertionError: expected reified statements, but found op ${_[s.kind]}`);r.push(s.statement)}let o=[];return i&&o.push(new $t("$event")),Io(o,r,void 0,void 0,e)}function gB(n,e){if(e.trackByFn!==null)return e.trackByFn;let t=[new $t("$index"),new $t("$item")],i;if(e.trackByOps===null)i=e.usesComponentInstance?Io(t,[new Xt(e.track)]):ji(t,e.track);else{A_(n,e.trackByOps);let r=[];for(let o of e.trackByOps){if(o.kind!==_.Statement)throw new Error(`AssertionError: expected reified statements, but found op ${_[o.kind]}`);r.push(o.statement)}i=e.usesComponentInstance||r.length!==1||!(r[0]instanceof Xt)?Io(t,r):ji(t,r[0].value)}return e.trackByFn=n.job.pool.getSharedFunctionReference(i,"_forTrack"),e.trackByFn}function yB(n){for(let e of n.units)for(let t of e.update)switch(t.kind){case _.Attribute:case _.Binding:case _.ClassProp:case _.ClassMap:case _.Property:case _.StyleProp:case _.StyleMap:t.expression instanceof xd&&q.remove(t);break}}function vB(n){for(let e of n.units)for(let t of e.create)switch(t.kind){case _.I18nContext:q.remove(t);break;case _.I18nStart:t.context=null;break}}function _B(n){for(let e of n.units)for(let t of e.update){if(t.kind!==_.Variable||t.variable.kind!==Ut.Identifier||!(t.initializer instanceof wd))continue;let i=t.variable.identifier,r=t;for(;r&&r.kind!==_.ListEnd;)Tt(r,o=>o instanceof Yt&&o.name===i?L(void 0):o,qe.None),r=r.prev}}function wB(n){for(let e of n.units){let t=new Set;for(let i of e.update)switch(i.kind){case _.I18nExpression:t.add(i.i18nOwner)}for(let i of e.create)switch(i.kind){case _.I18nAttributes:if(t.has(i.xref))continue;q.remove(i)}}}function CB(n){for(let e of n.units)xh(e,e.create),xh(e,e.update)}function xh(n,e){let t=new Map;t.set(n.xref,De("ctx"));for(let i of e)switch(i.kind){case _.Variable:switch(i.variable.kind){case Ut.Context:t.set(i.variable.view,new zr(i.xref));break}break;case _.Animation:case _.AnimationListener:case _.Listener:case _.TwoWayListener:xh(n,i.handlerOps);break;case _.RepeaterCreate:i.trackByOps!==null&&xh(n,i.trackByOps);break}n===n.job.root&&t.set(n.xref,De("ctx"));for(let i of e)Tt(i,r=>{if(r instanceof No){if(!t.has(r.view))throw new Error(`No context found for reference to view ${r.view} from view ${n.xref}`);return t.get(r.view)}else return r},qe.None)}function EB(n){for(let e of n.units)for(let t of e.create)if(t.kind===_.Defer){if(t.resolverFn!==null)continue;if(t.ownResolverFn!==null){if(t.handle.slot===null)throw new Error("AssertionError: slot must be assigned before extracting defer deps functions");let i=e.fnName?.replace("_Template","");t.resolverFn=n.pool.getSharedFunctionReference(t.ownResolverFn,`${i}_Defer_${t.handle.slot}_DepsFn`,!1)}}}function xB(n){for(let e of n.units)zS(e.create),zS(e.update)}function zS(n){for(let e of n)(e.kind===_.Listener||e.kind===_.TwoWayListener||e.kind===_.AnimationListener)&&Tt(e,t=>t instanceof Yt&&t.name==="$event"?((e.kind===_.Listener||e.kind===_.AnimationListener)&&(e.consumesDollarEvent=!0),new wi(t.name)):t,qe.InChildOperation)}function bB(n){let e=new Map,t=new Map;for(let i of n.units)for(let r of i.create)switch(r.kind){case _.I18nContext:e.set(r.xref,r);break;case _.ElementStart:t.set(r.xref,r);break}ar(n,n.root,e,t)}function ar(n,e,t,i,r){let o=null,s=new Map;for(let a of e.create)switch(a.kind){case _.I18nStart:if(!a.context)throw Error("Could not find i18n context for i18n op");o={i18nBlock:a,i18nContext:t.get(a.context)};break;case _.I18nEnd:o=null;break;case _.ElementStart:if(a.i18nPlaceholder!==void 0){if(o===null)throw Error("i18n tag placeholder should only occur inside an i18n block");jS(a,o.i18nContext,o.i18nBlock,r),r&&a.i18nPlaceholder.closeName&&s.set(a.xref,r),r=void 0}break;case _.ElementEnd:let l=i.get(a.xref);if(l&&l.i18nPlaceholder!==void 0){if(o===null)throw Error("AssertionError: i18n tag placeholder should only occur inside an i18n block");KS(l,o.i18nContext,o.i18nBlock,s.get(a.xref)),s.delete(a.xref)}break;case _.Projection:if(a.i18nPlaceholder!==void 0){if(o===null)throw Error("i18n tag placeholder should only occur inside an i18n block");jS(a,o.i18nContext,o.i18nBlock,r),KS(a,o.i18nContext,o.i18nBlock,r),r=void 0}if(a.fallbackView!==null){let h=n.views.get(a.fallbackView);if(a.fallbackViewI18nPlaceholder===void 0)ar(n,h,t,i);else{if(o===null)throw Error("i18n tag placeholder should only occur inside an i18n block");lp(n,h,a.handle.slot,a.fallbackViewI18nPlaceholder,o.i18nContext,o.i18nBlock,r),ar(n,h,t,i),cp(n,h,a.handle.slot,a.fallbackViewI18nPlaceholder,o.i18nContext,o.i18nBlock,r),r=void 0}}break;case _.ConditionalCreate:case _.ConditionalBranchCreate:case _.Template:let c=n.views.get(a.xref);if(a.i18nPlaceholder===void 0)ar(n,c,t,i);else{if(o===null)throw Error("i18n tag placeholder should only occur inside an i18n block");a.templateKind===Rn.Structural?ar(n,c,t,i,a):(lp(n,c,a.handle.slot,a.i18nPlaceholder,o.i18nContext,o.i18nBlock,r),ar(n,c,t,i),cp(n,c,a.handle.slot,a.i18nPlaceholder,o.i18nContext,o.i18nBlock,r),r=void 0)}break;case _.RepeaterCreate:if(r!==void 0)throw Error("AssertionError: Unexpected structural directive associated with @for block");let d=a.handle.slot+1,p=n.views.get(a.xref);if(a.i18nPlaceholder===void 0)ar(n,p,t,i);else{if(o===null)throw Error("i18n tag placeholder should only occur inside an i18n block");lp(n,p,d,a.i18nPlaceholder,o.i18nContext,o.i18nBlock,r),ar(n,p,t,i),cp(n,p,d,a.i18nPlaceholder,o.i18nContext,o.i18nBlock,r),r=void 0}if(a.emptyView!==null){let h=a.handle.slot+2,y=n.views.get(a.emptyView);if(a.emptyI18nPlaceholder===void 0)ar(n,y,t,i);else{if(o===null)throw Error("i18n tag placeholder should only occur inside an i18n block");lp(n,y,h,a.emptyI18nPlaceholder,o.i18nContext,o.i18nBlock,r),ar(n,y,t,i),cp(n,y,h,a.emptyI18nPlaceholder,o.i18nContext,o.i18nBlock,r),r=void 0}}break}}function jS(n,e,t,i){let{startName:r,closeName:o}=n.i18nPlaceholder,s=Xe.ElementTag|Xe.OpenTag,a=n.handle.slot;i!==void 0&&(s|=Xe.TemplateTag,a={element:a,template:i.handle.slot}),o||(s|=Xe.CloseTag),El(e.params,r,a,t.subTemplateIndex,s)}function KS(n,e,t,i){let{closeName:r}=n.i18nPlaceholder;if(r){let o=Xe.ElementTag|Xe.CloseTag,s=n.handle.slot;i!==void 0&&(o|=Xe.TemplateTag,s={element:s,template:i.handle.slot}),El(e.params,r,s,t.subTemplateIndex,o)}}function lp(n,e,t,i,r,o,s){let{startName:a,closeName:l}=i,c=Xe.TemplateTag|Xe.OpenTag;l||(c|=Xe.CloseTag),s!==void 0&&El(r.params,a,s.handle.slot,o.subTemplateIndex,c),El(r.params,a,t,ST(n,o,e),c)}function cp(n,e,t,i,r,o,s){let{closeName:a}=i,l=Xe.TemplateTag|Xe.CloseTag;a&&(El(r.params,a,t,ST(n,o,e),l),s!==void 0&&El(r.params,a,s.handle.slot,o.subTemplateIndex,l))}function ST(n,e,t){for(let i of t.create)if(i.kind===_.I18nStart)return i.subTemplateIndex;return e.subTemplateIndex}function El(n,e,t,i,r){let o=n.get(e)??[];o.push({value:t,subTemplateIndex:i,flags:r}),n.set(e,o)}function SB(n){let e=new Map,t=new Map,i=new Map;for(let s of n.units)for(let a of s.create)switch(a.kind){case _.I18nStart:e.set(a.xref,a.subTemplateIndex);break;case _.I18nContext:t.set(a.xref,a);break;case _.IcuPlaceholder:i.set(a.xref,a);break}let r=new Map,o=s=>s.usage===bl.I18nText?s.i18nOwner:s.context;for(let s of n.units)for(let a of s.update)if(a.kind===_.I18nExpression){let l=r.get(o(a))||0,c=e.get(a.i18nOwner)??null,d={value:l,subTemplateIndex:c,flags:Xe.ExpressionIndex};TB(a,d,t,i),r.set(o(a),l+1)}}function TB(n,e,t,i){if(n.i18nPlaceholder!==null){let r=t.get(n.context),o=n.resolutionTime===vd.Creation?r.params:r.postprocessingParams,s=o.get(n.i18nPlaceholder)||[];s.push(e),o.set(n.i18nPlaceholder,s)}n.icuPlaceholder!==null&&i.get(n.icuPlaceholder)?.expressionPlaceholders.push(e)}function IB(n){for(let e of n.units)bh(e,e.create,null),bh(e,e.update,null)}function bh(n,e,t){let i=new Map,r=new Map;for(let o of e)switch(o.kind){case _.Variable:switch(o.variable.kind){case Ut.Identifier:if(o.variable.local){if(r.has(o.variable.identifier))continue;r.set(o.variable.identifier,o.xref)}else if(i.has(o.variable.identifier))continue;i.set(o.variable.identifier,o.xref);break;case Ut.Alias:if(i.has(o.variable.identifier))continue;i.set(o.variable.identifier,o.xref);break;case Ut.SavedView:t={view:o.variable.view,variable:o.xref};break}break;case _.Animation:case _.AnimationListener:case _.Listener:case _.TwoWayListener:bh(n,o.handlerOps,t);break;case _.RepeaterCreate:o.trackByOps!==null&&bh(n,o.trackByOps,t);break}for(let o of e)o.kind==_.Listener||o.kind===_.TwoWayListener||o.kind===_.Animation||o.kind===_.AnimationListener||Tt(o,s=>{if(s instanceof Yt)return r.has(s.name)?new zr(r.get(s.name)):i.has(s.name)?new zr(i.get(s.name)):new ri(new No(n.job.root.xref),s.name);if(s instanceof sh&&typeof s.view=="number"){if(t===null||t.view!==s.view)throw new Error(`AssertionError: no saved view ${s.view} from view ${n.xref}`);return s.view=new zr(t.variable),s}else return s},qe.None);for(let o of e)Ht(o,s=>{if(s instanceof Yt)throw new Error(`AssertionError: no lexical reads should remain, but found read of ${s.name}`)})}var DB=new Map([[tt.HTML,D.sanitizeHtml],[tt.RESOURCE_URL,D.sanitizeResourceUrl],[tt.SCRIPT,D.sanitizeScript],[tt.STYLE,D.sanitizeStyle],[tt.URL,D.sanitizeUrl]]),AB=new Map([[tt.HTML,D.trustConstantHtml],[tt.RESOURCE_URL,D.trustConstantResourceUrl]]);function kB(n){for(let e of n.units){let t=T_(e);if(n.kind!==ne.Host){for(let i of e.create)if(i.kind===_.ExtractedAttribute){let r=AB.get(YS(i.securityContext))??null;i.trustedValueFn=r!==null?ce(r):null}}for(let i of e.update)switch(i.kind){case _.Property:case _.Attribute:case _.DomProperty:let r=null;if(Array.isArray(i.securityContext)&&i.securityContext.length===2&&i.securityContext.indexOf(tt.URL)>-1&&i.securityContext.indexOf(tt.RESOURCE_URL)>-1?r=D.sanitizeUrlOrResourceUrl:r=DB.get(YS(i.securityContext))??null,i.sanitizer=r!==null?ce(r):null,i.sanitizer===null){let o=!1;if(n.kind===ne.Host||i.kind===_.DomProperty)o=!0;else{let s=t.get(i.target);if(s===void 0||!Kr(s))throw Error("Property should have an element-like owner");o=MB(s)}o&&kO(i.name)&&(i.sanitizer=ce(D.validateIframeAttribute))}break}}}function MB(n){return n.kind===_.ElementStart&&n.tag?.toLowerCase()==="iframe"}function YS(n){if(Array.isArray(n)){if(n.length>1)throw Error("AssertionError: Ambiguous security context");return n[0]||tt.NONE}return n}function NB(n){for(let e of n.units){e.create.prepend([Eo(e.job.allocateXrefId(),{kind:Ut.SavedView,name:null,view:e.xref},new yv,mi.None)]);for(let t of e.create){if(t.kind!==_.Listener&&t.kind!==_.TwoWayListener&&t.kind!==_.Animation&&t.kind!==_.AnimationListener)continue;let i=e!==n.root;if(!i)for(let r of t.handlerOps)Ht(r,o=>{(o instanceof rh||o instanceof Cd)&&(i=!0)});i&&PB(e,t)}}}function PB(n,e){e.handlerOps.prepend([Eo(n.job.allocateXrefId(),{kind:Ut.Context,name:null,view:n.xref},new sh(n.xref),mi.None)]);for(let t of e.handlerOps)t.kind===_.Statement&&t.statement instanceof Xt&&(t.statement.value=new vv(t.statement.value))}function RB(n){let e=new Map;for(let t of n.units){let i=0;for(let r of t.create)Tl(r)&&(r.handle.slot=i,e.set(r.xref,r.handle.slot),i+=r.numSlotsUsed);t.decls=i}for(let t of n.units)for(let i of t.ops())if(i.kind===_.Template||i.kind===_.ConditionalCreate||i.kind===_.ConditionalBranchCreate||i.kind===_.RepeaterCreate){let r=n.views.get(i.xref);i.decls=r.decls}}function FB(n){let e=new Set,t=new Map;for(let i of n.units)for(let r of i.ops())r.kind===_.DeclareLet&&t.set(r.xref,r),Ht(r,o=>{o instanceof Cd&&e.add(o.target)});for(let i of n.units)for(let r of i.update)Tt(r,o=>o instanceof wd&&!e.has(o.target)?(LB(o)||q.remove(t.get(o.target)),o.value):o,qe.None)}function LB(n){let e=!1;return ie(n,t=>((t instanceof Us||t instanceof Ed)&&(e=!0),t),qe.None),e}function OB(n){let e=new Set;for(let t of n.units)for(let i of t.ops())Ht(i,r=>{if(r instanceof Le)switch(r.operator){case j.Exponentiation:VB(r,e);break;case j.NullishCoalesce:BB(r,e);break;case j.And:case j.Or:UB(r,e)}});for(let t of n.units)for(let i of t.ops())Tt(i,r=>r instanceof Wi?e.has(r)?r:r.expr:r,qe.None)}function VB(n,e){n.lhs instanceof Wi&&n.lhs.expr instanceof Ms&&e.add(n.lhs)}function BB(n,e){n.lhs instanceof Wi&&(JS(n.lhs.expr)||n.lhs.expr instanceof pr)&&e.add(n.lhs),n.rhs instanceof Wi&&(JS(n.rhs.expr)||n.rhs.expr instanceof pr)&&e.add(n.rhs)}function UB(n,e){n.lhs instanceof Wi&&n.lhs.expr instanceof Le&&n.lhs.expr.operator===j.NullishCoalesce&&e.add(n.lhs)}function JS(n){return n instanceof Le&&(n.operator===j.And||n.operator===j.Or)}function $B(n){for(let e of n.units)for(let t of e.update)if(t.kind===_.Binding)switch(t.bindingKind){case se.ClassName:if(t.expression instanceof ft)throw new Error("Unexpected interpolation in ClassName binding");q.replace(t,yF(t.target,t.name,t.expression,t.sourceSpan));break;case se.StyleProperty:q.replace(t,gF(t.target,t.name,t.expression,t.unit,t.sourceSpan));break;case se.Property:case se.Template:t.name==="style"?q.replace(t,vF(t.target,t.expression,t.sourceSpan)):t.name==="class"&&q.replace(t,_F(t.target,t.expression,t.sourceSpan));break}}function HB(n){for(let e of n.units)e.create.prepend(Sh(e.create)),e.update.prepend(Sh(e.update))}function Sh(n){let e=0,t=[];for(let i of n){let r=new Map;Ht(i,(c,d)=>{d&qe.InChildOperation||c instanceof Po&&r.set(c.xref,c)});let o=0,s=new Set,a=new Set,l=new Map;Ht(i,(c,d)=>{d&qe.InChildOperation||(c instanceof _r?(s.has(c.xref)||(s.add(c.xref),l.set(c.xref,`tmp_${e}_${o++}`)),QS(l,c)):c instanceof Po&&(r.get(c.xref)===c&&(a.add(c.xref),o--),QS(l,c)))}),t.push(...Array.from(new Set(l.values())).map(c=>xi(new Rt(c)))),e++,i.kind===_.Listener||i.kind===_.Animation||i.kind===_.AnimationListener||i.kind===_.TwoWayListener?i.handlerOps.prepend(Sh(i.handlerOps)):i.kind===_.RepeaterCreate&&i.trackByOps!==null&&i.trackByOps.prepend(Sh(i.trackByOps))}return t}function QS(n,e){let t=n.get(e.xref);if(t===void 0)throw new Error(`Found xref with unassigned name: ${e.xref}`);e.name=t}function qB(n){for(let e of n.units)for(let t of e.create)if(t.kind===_.RepeaterCreate)if(t.track instanceof wi&&t.track.name==="$index")t.trackByFn=ce(D.repeaterTrackByIndex);else if(t.track instanceof wi&&t.track.name==="$item")t.trackByFn=ce(D.repeaterTrackByIdentity);else if(GB(n.root.xref,t.track))t.usesComponentInstance=!0,t.track.receiver.receiver.view===e.xref?t.trackByFn=t.track.receiver:(t.trackByFn=ce(D.componentInstance).callFn([]).prop(t.track.receiver.name),t.track=t.trackByFn);else{t.track=ie(t.track,r=>{if(r instanceof Us||r instanceof Ed)throw new Error("Illegal State: Pipes are not allowed in this context");return r instanceof No?(t.usesComponentInstance=!0,new gv(r.view)):r},qe.None);let i=new q;i.push(xi(new Xt(t.track,t.track.sourceSpan))),t.trackByOps=i}}function GB(n,e){if(!(e instanceof Fn)||e.args.length===0||e.args.length>2||!(e.receiver instanceof ri&&e.receiver.receiver instanceof No)||e.receiver.receiver.view!==n)return!1;let[t,i]=e.args;return!(t instanceof wi)||t.name!=="$index"?!1:e.args.length===1?!0:!(!(i instanceof wi)||i.name!=="$item")}function WB(n){for(let e of n.units)for(let t of e.create)t.kind===_.RepeaterCreate&&(t.track=ie(t.track,i=>{if(i instanceof Yt){if(t.varNames.$index.has(i.name))return De("$index");if(i.name===t.varNames.$implicit)return De("$item")}return i},qe.None))}function zB(n){for(let e of n.units)for(let t of e.create)t.kind===_.TwoWayListener&&Tt(t,i=>{if(!(i instanceof ah))return i;let{target:r,value:o}=i;if(r instanceof ri||r instanceof jr)return qS(r,o).or(r.set(o));if(r instanceof zr)return qS(r,o);throw new Error("Unsupported expression in two-way action binding.")},qe.InChildOperation)}function jB(n){for(let e of n.units){let t=0;for(let i of e.ops())Ey(i)&&(t+=KB(i));for(let i of e.ops())Ht(i,r=>{vr(r)&&(n.compatibility===oi.TemplateDefinitionBuilder&&r instanceof Bs||(sS(r)&&(r.varOffset=t),Ey(r)&&(t+=XS(r))))});if(n.compatibility===oi.TemplateDefinitionBuilder)for(let i of e.ops())Ht(i,r=>{!vr(r)||!(r instanceof Bs)||(sS(r)&&(r.varOffset=t),Ey(r)&&(t+=XS(r)))});e.vars=t}if(n instanceof Sd)for(let e of n.units)for(let t of e.create){if(t.kind!==_.Template&&t.kind!==_.RepeaterCreate&&t.kind!==_.ConditionalCreate&&t.kind!==_.ConditionalBranchCreate)continue;let i=n.views.get(t.xref);t.vars=i.vars}}function KB(n){let e;switch(n.kind){case _.Attribute:return e=1,n.expression instanceof ft&&!YB(n.expression)&&(e+=n.expression.expressions.length),e;case _.Property:case _.DomProperty:return e=1,n.expression instanceof ft&&(e+=n.expression.expressions.length),e;case _.TwoWayProperty:return 1;case _.StyleProp:case _.ClassProp:case _.StyleMap:case _.ClassMap:return e=2,n.expression instanceof ft&&(e+=n.expression.expressions.length),e;case _.InterpolateText:return n.interpolation.expressions.length;case _.I18nExpression:case _.Conditional:case _.DeferWhen:case _.StoreLet:return 1;case _.RepeaterCreate:return n.emptyView?1:0;default:throw new Error(`Unhandled op: ${_[n.kind]}`)}}function XS(n){switch(n.kind){case ue.PureFunctionExpr:return 1+n.args.length;case ue.PipeBinding:return 1+n.args.length;case ue.PipeBindingVariadic:return 1+n.numArgs;case ue.StoreLet:return 1;default:throw new Error(`AssertionError: unhandled ConsumesVarsTrait expression ${n.constructor.name}`)}}function YB(n){return!(n.expressions.length!==1||n.strings.length!==2||n.strings[0]!==""||n.strings[1]!=="")}function JB(n){for(let e of n.units){up(e.create),up(e.update);for(let t of e.create)t.kind===_.Listener||t.kind===_.Animation||t.kind===_.AnimationListener||t.kind===_.TwoWayListener?up(t.handlerOps):t.kind===_.RepeaterCreate&&t.trackByOps!==null&&up(t.trackByOps);dp(e.create,n.compatibility),dp(e.update,n.compatibility);for(let t of e.create)t.kind===_.Listener||t.kind===_.Animation||t.kind===_.AnimationListener||t.kind===_.TwoWayListener?dp(t.handlerOps,n.compatibility):t.kind===_.RepeaterCreate&&t.trackByOps!==null&&dp(t.trackByOps,n.compatibility)}}var Pt=(function(n){return n[n.None=0]="None",n[n.ViewContextRead=1]="ViewContextRead",n[n.ViewContextWrite=2]="ViewContextWrite",n[n.SideEffectful=4]="SideEffectful",n})(Pt||{});function up(n){let e=new Map;for(let t of n)t.kind===_.Variable&&t.flags&mi.AlwaysInline&&(Ht(t,i=>{if(vr(i)&&k_(i)!==Pt.None)throw new Error("AssertionError: A context-sensitive variable was marked AlwaysInline")}),e.set(t.xref,t)),Tt(t,i=>i instanceof zr&&e.has(i.xref)?e.get(i.xref).initializer.clone():i,qe.None);for(let t of e.values())q.remove(t)}function dp(n,e){let t=new Map,i=new Map,r=new Set,o=new Map;for(let c of n){if(c.kind===_.Variable){if(t.has(c.xref)||i.has(c.xref))throw new Error(`Should not see two declarations of the same variable: ${c.xref}`);t.set(c.xref,c),i.set(c.xref,0)}o.set(c,QB(c)),XB(c,i,r)}let s=!1;for(let c of n.reversed()){let d=o.get(c);if(c.kind===_.Variable&&i.get(c.xref)===0){if(s&&d.fences&Pt.ViewContextWrite||d.fences&Pt.SideEffectful){let p=xi(c.initializer.toStmt());o.set(p,d),q.replace(c,p)}else ZB(c,i),q.remove(c);o.delete(c),t.delete(c.xref),i.delete(c.xref);continue}d.fences&Pt.ViewContextRead&&(s=!0)}let a=[];for(let[c,d]of i){let h=!!(t.get(c).flags&mi.AlwaysInline);d!==1||h||r.has(c)||a.push(c)}let l;for(;l=a.pop();){let c=t.get(l),d=o.get(c);if(!!(c.flags&mi.AlwaysInline))throw new Error("AssertionError: Found an 'AlwaysInline' variable after the always inlining pass.");for(let h=c.next;h.kind!==_.ListEnd;h=h.next){let y=o.get(h);if(y.variablesUsed.has(l)){if(e===oi.TemplateDefinitionBuilder&&!t8(c,h))break;if(e8(l,c.initializer,h,d.fences)){y.variablesUsed.delete(l);for(let E of d.variablesUsed)y.variablesUsed.add(E);y.fences|=d.fences,t.delete(l),i.delete(l),o.delete(c),q.remove(c)}break}if(!TT(y.fences,d.fences))break}}}function k_(n){switch(n.kind){case ue.NextContext:return Pt.ViewContextRead|Pt.ViewContextWrite;case ue.RestoreView:return Pt.ViewContextRead|Pt.ViewContextWrite|Pt.SideEffectful;case ue.StoreLet:return Pt.SideEffectful;case ue.Reference:case ue.ContextLetReference:return Pt.ViewContextRead;default:return Pt.None}}function QB(n){let e=Pt.None,t=new Set;return Ht(n,i=>{if(vr(i))switch(i.kind){case ue.ReadVariable:t.add(i.xref);break;default:e|=k_(i)}}),{fences:e,variablesUsed:t}}function XB(n,e,t){Ht(n,(i,r)=>{if(!vr(i)||i.kind!==ue.ReadVariable)return;let o=e.get(i.xref);o!==void 0&&(e.set(i.xref,o+1),r&qe.InChildOperation&&t.add(i.xref))})}function ZB(n,e){Ht(n,t=>{if(!vr(t)||t.kind!==ue.ReadVariable)return;let i=e.get(t.xref);if(i!==void 0){if(i===0)throw new Error(`Inaccurate variable count: ${t.xref} - found another read but count is already 0`);e.set(t.xref,i-1)}})}function TT(n,e){if(n&Pt.ViewContextWrite){if(e&Pt.ViewContextRead)return!1}else if(n&Pt.ViewContextRead&&e&Pt.ViewContextWrite)return!1;return!0}function e8(n,e,t,i){let r=!1,o=!0;return Tt(t,(s,a)=>{if(!vr(s)||r||!o)return s;if(a&qe.InChildOperation&&i&Pt.ViewContextRead)return s;switch(s.kind){case ue.ReadVariable:if(s.xref===n)return r=!0,e;break;default:let l=k_(s);o=o&&TT(l,i);break}return s},qe.None),r}function t8(n,e){switch(n.variable.kind){case Ut.Identifier:return n.initializer instanceof wi&&n.initializer.name==="ctx";case Ut.Context:return e.kind===_.Variable;default:return!0}}function n8(n){for(let e of n.units){let t=null,i=null;for(let r of e.create)switch(r.kind){case _.I18nStart:t=r;break;case _.I18nEnd:t=null;break;case _.IcuStart:t===null&&(i=n.allocateXrefId(),q.insertBefore(Vh(i,r.message,void 0,null),r));break;case _.IcuEnd:i!==null&&(q.insertAfter(Bh(i,null),r),i=null);break}}}var i8=[{kind:ne.Tmpl,fn:RV},{kind:ne.Host,fn:jL},{kind:ne.Tmpl,fn:yV},{kind:ne.Tmpl,fn:$V},{kind:ne.Tmpl,fn:n8},{kind:ne.Both,fn:hL},{kind:ne.Both,fn:$B},{kind:ne.Both,fn:ZF},{kind:ne.Both,fn:uL},{kind:ne.Both,fn:JF},{kind:ne.Tmpl,fn:pL},{kind:ne.Both,fn:_V},{kind:ne.Tmpl,fn:yB},{kind:ne.Both,fn:nL},{kind:ne.Both,fn:PV},{kind:ne.Tmpl,fn:iL},{kind:ne.Tmpl,fn:OV},{kind:ne.Tmpl,fn:mL},{kind:ne.Tmpl,fn:UV},{kind:ne.Both,fn:GV},{kind:ne.Tmpl,fn:HL},{kind:ne.Tmpl,fn:$L},{kind:ne.Tmpl,fn:qL},{kind:ne.Tmpl,fn:NB},{kind:ne.Both,fn:GF},{kind:ne.Both,fn:xB},{kind:ne.Tmpl,fn:WB},{kind:ne.Tmpl,fn:_B},{kind:ne.Both,fn:IB},{kind:ne.Tmpl,fn:gL},{kind:ne.Tmpl,fn:zB},{kind:ne.Tmpl,fn:qB},{kind:ne.Both,fn:CB},{kind:ne.Both,fn:kB},{kind:ne.Tmpl,fn:mV},{kind:ne.Both,fn:CL},{kind:ne.Both,fn:OB},{kind:ne.Both,fn:HB},{kind:ne.Both,fn:JB},{kind:ne.Both,fn:FB},{kind:ne.Tmpl,fn:hV},{kind:ne.Tmpl,fn:fL},{kind:ne.Tmpl,fn:wB},{kind:ne.Tmpl,fn:KF},{kind:ne.Tmpl,fn:zF},{kind:ne.Tmpl,fn:RB},{kind:ne.Tmpl,fn:bB},{kind:ne.Tmpl,fn:SB},{kind:ne.Tmpl,fn:LL},{kind:ne.Tmpl,fn:cV},{kind:ne.Tmpl,fn:WL},{kind:ne.Both,fn:aL},{kind:ne.Tmpl,fn:vB},{kind:ne.Both,fn:jB},{kind:ne.Tmpl,fn:UL},{kind:ne.Both,fn:wV},{kind:ne.Tmpl,fn:EB},{kind:ne.Tmpl,fn:xV},{kind:ne.Tmpl,fn:SV},{kind:ne.Tmpl,fn:wL},{kind:ne.Tmpl,fn:YF},{kind:ne.Tmpl,fn:IV},{kind:ne.Both,fn:qV},{kind:ne.Both,fn:pB},{kind:ne.Both,fn:tL}];function IT(n,e){for(let t of i8)(t.kind===e||t.kind===ne.Both)&&t.fn(n)}function r8(n,e){let t=AT(n.root);return DT(n.root,e),t}function DT(n,e){for(let t of n.job.units){if(t.parent!==n.xref)continue;DT(t,e);let i=AT(t);e.statements.push(i.toDeclStmt(i.name))}}function AT(n){if(n.fnName===null)throw new Error(`AssertionError: view ${n.xref} is unnamed`);let e=[];for(let o of n.create){if(o.kind!==_.Statement)throw new Error(`AssertionError: expected all create ops to have been compiled, but got ${_[o.kind]}`);e.push(o.statement)}let t=[];for(let o of n.update){if(o.kind!==_.Statement)throw new Error(`AssertionError: expected all update ops to have been compiled, but got ${_[o.kind]}`);t.push(o.statement)}let i=Th(1,e),r=Th(2,t);return Io([new $t("rf"),new $t("ctx")],[...i,...r],void 0,void 0,n.fnName)}function Th(n,e){return e.length===0?[]:[Ph(new Le(j.BitwiseAnd,De("rf"),L(n)),e)]}function o8(n){if(n.root.fnName===null)throw new Error("AssertionError: host binding function is unnamed");let e=[];for(let o of n.root.create){if(o.kind!==_.Statement)throw new Error(`AssertionError: expected all create ops to have been compiled, but got ${_[o.kind]}`);e.push(o.statement)}let t=[];for(let o of n.root.update){if(o.kind!==_.Statement)throw new Error(`AssertionError: expected all update ops to have been compiled, but got ${_[o.kind]}`);t.push(o.statement)}if(e.length===0&&t.length===0)return null;let i=Th(1,e),r=Th(2,t);return Io([new $t("rf"),new $t("ctx")],[...i,...r],void 0,void 0,n.root.fnName)}var kT=oi.TemplateDefinitionBuilder,Is=new Cl,Ds="ng-template",s8="animate.";function wp(n){return n instanceof En}function a8(n){return wp(n)&&n.nodes.length===1&&n.nodes[0]instanceof Jp}function l8(n,e,t,i,r,o,s,a,l,c){let d=new Sd(n,t,kT,i,r,o,s,a,l,c);return Jr(d.root,e),d}function c8(n,e,t){let i=new ph(n.componentName,t,kT,Mn.DomOnly);for(let r of n.properties??[]){let o=se.Property;r.name.startsWith("attr.")&&(r.name=r.name.substring(5),o=se.Attribute),r.isLegacyAnimation&&(o=se.LegacyAnimation),r.isAnimation&&(o=se.Animation);let s=e.calcPossibleSecurityContexts(n.componentSelector,r.name,o===se.Attribute).filter(a=>a!==tt.NONE);u8(i,r,o,s)}for(let[r,o]of Object.entries(n.attributes)??[]){let s=e.calcPossibleSecurityContexts(n.componentSelector,r,!0).filter(a=>a!==tt.NONE);d8(i,r,o,s)}for(let r of n.events??[])f8(i,r);return i}function u8(n,e,t,i){let r,o=e.expression.ast;o instanceof Ld?r=new ft(o.strings,o.expressions.map(s=>Ie(s,n,e.sourceSpan)),[]):r=Ie(o,n,e.sourceSpan),n.root.update.push(Vs(n.root.xref,t,e.name,r,null,i,!1,!1,null,null,e.sourceSpan))}function d8(n,e,t,i){let r=Vs(n.root.xref,se.Attribute,e,t,null,i,!0,!1,null,null,t.sourceSpan);n.root.update.push(r)}function f8(n,e){let t;if(e.type===Cn.Animation)t=iT(n.root.xref,new tn,e.name,null,kd(n.root,e.handler,e.handlerSpan),e.name.endsWith("enter")?"enter":"leave",e.targetOrPhase,!0,e.sourceSpan);else{let[i,r]=e.type!==Cn.LegacyAnimation?[null,e.targetOrPhase]:[e.targetOrPhase,null];t=S_(n.root.xref,new tn,e.name,null,kd(n.root,e.handler,e.handlerSpan),i,r,!0,e.sourceSpan)}n.root.create.push(t)}function Jr(n,e){for(let t of e)if(t instanceof gr)p8(n,t);else if(t instanceof ni)h8(n,t);else if(t instanceof fl)m8(n,t);else if(t instanceof _s)MT(n,t,null);else if(t instanceof cl)NT(n,t,null);else if(t instanceof Kp)g8(n,t);else if(t instanceof jp)y8(n,t);else if(t instanceof Ls)v8(n,t);else if(t instanceof D1)w8(n,t);else if(t instanceof dl)C8(n,t);else if(t instanceof h_)x8(n,t);else if(!(t instanceof Fu))throw new Error(`Unsupported template node: ${t.constructor.name}`)}function p8(n,e){if(e.i18n!==void 0&&!(e.i18n instanceof En||e.i18n instanceof Ao))throw Error(`Unhandled i18n metadata type for element: ${e.i18n.constructor.name}`);let t=n.job.allocateXrefId(),[i,r]=Ki(e.name),o=TF(r,t,cT(i),e.i18n instanceof Ao?e.i18n:void 0,e.startSourceSpan,e.sourceSpan);n.create.push(o),S8(n,o,e),FT(o,e);let s=null;e.i18n instanceof En&&(s=n.job.allocateXrefId(),n.create.push(Vh(s,e.i18n,void 0,e.startSourceSpan))),Jr(n,e.children);let a=DF(t,e.endSourceSpan??e.startSourceSpan);n.create.push(a),s!==null&&q.insertBefore(Bh(s,e.endSourceSpan??e.startSourceSpan),a)}function h8(n,e){if(e.i18n!==void 0&&!(e.i18n instanceof En||e.i18n instanceof Ao))throw Error(`Unhandled i18n metadata type for template: ${e.i18n.constructor.name}`);let t=n.job.allocateView(n.xref),i=e.tagName,r="";e.tagName&&([r,i]=Ki(e.tagName));let o=e.i18n instanceof Ao?e.i18n:void 0,s=cT(r),a=i===null?"":sL(i,s),l=b8(e)?Rn.NgTemplate:Rn.Structural,c=Z1(t.xref,l,i,a,s,o,e.startSourceSpan,e.sourceSpan);n.create.push(c),T8(n,c,e,l),FT(c,e),Jr(t,e.children);for(let{name:d,value:p}of e.variables)t.contextVariables.set(d,p!==""?p:"$implicit");if(l===Rn.NgTemplate&&e.i18n instanceof En){let d=n.job.allocateXrefId();q.insertAfter(Vh(d,e.i18n,void 0,e.startSourceSpan),t.create.head),q.insertBefore(Bh(d,e.endSourceSpan??e.startSourceSpan),t.create.tail)}}function m8(n,e){if(e.i18n!==void 0&&!(e.i18n instanceof Ao))throw Error(`Unhandled i18n metadata type for element: ${e.i18n.constructor.name}`);let t=null;e.children.some(o=>!(o instanceof Fh)&&(!(o instanceof _s)||o.value.trim().length>0))&&(t=n.job.allocateView(n.xref),Jr(t,e.children));let i=n.job.allocateXrefId(),r=FF(i,e.selector,e.i18n,t?.xref??null,e.sourceSpan);for(let o of e.attributes){let s=Is.securityContext(e.name,o.name,!0);n.update.push(Vs(r.xref,se.Attribute,o.name,L(o.value),null,s,!0,!1,null,qr(o.i18n),o.sourceSpan))}n.create.push(r)}function MT(n,e,t){n.create.push(nT(n.job.allocateXrefId(),e.value,t,e.sourceSpan))}function NT(n,e,t){let i=e.value;if(i instanceof Jn&&(i=i.ast),!(i instanceof Ld))throw new Error(`AssertionError: expected Interpolation for BoundText node, got ${i.constructor.name}`);if(e.i18n!==void 0&&!(e.i18n instanceof Wr))throw Error(`Unhandled i18n metadata type for text interpolation: ${e.i18n?.constructor.name}`);let r=e.i18n instanceof Wr?e.i18n.children.filter(a=>a instanceof dd).map(a=>a.name):[];if(r.length>0&&r.length!==i.expressions.length)throw Error(`Unexpected number of i18n placeholders (${i.expressions.length}) for BoundText with ${i.expressions.length} expressions`);let o=n.job.allocateXrefId();n.create.push(nT(o,"",t,e.sourceSpan));let s=n.job.compatibility?null:e.sourceSpan;n.update.push(pF(o,new ft(i.strings,i.expressions.map(a=>Ie(a,n.job,s)),r),e.sourceSpan))}function g8(n,e){let t=null,i=[];for(let r=0;r<e.branches.length;r++){let o=e.branches[r],s=n.job.allocateView(n.xref),a=Ih(n,s.xref,o);o.expressionAlias!==null&&s.contextVariables.set(o.expressionAlias.name,aT);let l;if(o.i18n!==void 0){if(!(o.i18n instanceof ko))throw Error(`Unhandled i18n metadata type for if block: ${o.i18n?.constructor.name}`);l=o.i18n}let d=(r===0?eT:tT)(s.xref,Rn.Block,a,"Conditional",un.HTML,l,o.startSourceSpan,o.sourceSpan);n.create.push(d),t===null&&(t=s.xref);let p=o.expression?Ie(o.expression,n.job,null):null,h=new ch(p,d.xref,d.handle,o.expressionAlias);i.push(h),Jr(s,o.children)}n.update.push(J1(t,null,i,e.sourceSpan))}function y8(n,e){if(e.cases.length===0)return;let t=null,i=[];for(let r=0;r<e.cases.length;r++){let o=e.cases[r],s=n.job.allocateView(n.xref),a=Ih(n,s.xref,o),l;if(o.i18n!==void 0){if(!(o.i18n instanceof ko))throw Error(`Unhandled i18n metadata type for switch block: ${o.i18n?.constructor.name}`);l=o.i18n}let d=(r===0?eT:tT)(s.xref,Rn.Block,a,"Case",un.HTML,l,o.startSourceSpan,o.sourceSpan);n.create.push(d),t===null&&(t=s.xref);let p=o.expression?Ie(o.expression,n.job,e.startSourceSpan):null,h=new ch(p,d.xref,d.handle);i.push(h),Jr(s,o.children)}n.update.push(J1(t,Ie(e.expression,n.job,null),i,e.sourceSpan))}function fp(n,e,t,i,r){if(t!==void 0&&!(t instanceof ko))throw Error("Unhandled i18n metadata type for defer block");if(i===void 0)return null;let o=n.job.allocateView(n.xref);Jr(o,i);let s=Z1(o.xref,Rn.Block,null,`Defer${e}`,un.HTML,t,r,r);return n.create.push(s),s}function v8(n,e){let t=null;if(n.job.deferMeta.mode===0){if(!n.job.deferMeta.blocks.has(e))throw new Error("AssertionError: unable to find a dependency function for this deferred block");t=n.job.deferMeta.blocks.get(e)??null}let i=fp(n,"",e.i18n,e.children,e.sourceSpan),r=fp(n,"Loading",e.loading?.i18n,e.loading?.children,e.loading?.sourceSpan),o=fp(n,"Placeholder",e.placeholder?.i18n,e.placeholder?.children,e.placeholder?.sourceSpan),s=fp(n,"Error",e.error?.i18n,e.error?.children,e.error?.sourceSpan),a=n.job.allocateXrefId(),l=LF(a,i.xref,i.handle,t,n.job.allDeferrableDepsFn,e.sourceSpan);l.placeholderView=o?.xref??null,l.placeholderSlot=o?.handle??null,l.loadingSlot=r?.handle??null,l.errorSlot=s?.handle??null,l.placeholderMinimumTime=e.placeholder?.minimumTime??null,l.loadingMinimumTime=e.loading?.minimumTime??null,l.loadingAfterTime=e.loading?.afterTime??null,l.flags=_8(e),n.create.push(l);let c=[],d=[];Iy("hydrate",e.hydrateTriggers,c,d,n,a),Iy("none",e.triggers,c,d,n,a),Iy("prefetch",e.prefetchTriggers,c,d,n,a),c.some(h=>h.modifier==="none")||d.some(h=>h.modifier==="none")||c.push(_o(a,{kind:Ke.Idle},"none",null)),n.create.push(c),n.update.push(d)}function _8(n){return Object.keys(n.hydrateTriggers).length>0?1:null}function Iy(n,e,t,i,r,o){if(e.idle!==void 0){let s=_o(o,{kind:Ke.Idle},n,e.idle.sourceSpan);t.push(s)}if(e.immediate!==void 0){let s=_o(o,{kind:Ke.Immediate},n,e.immediate.sourceSpan);t.push(s)}if(e.timer!==void 0){let s=_o(o,{kind:Ke.Timer,delay:e.timer.delay},n,e.timer.sourceSpan);t.push(s)}if(e.hover!==void 0){let s=_o(o,{kind:Ke.Hover,targetName:e.hover.reference,targetXref:null,targetSlot:null,targetView:null,targetSlotViewSteps:null},n,e.hover.sourceSpan);t.push(s)}if(e.interaction!==void 0){let s=_o(o,{kind:Ke.Interaction,targetName:e.interaction.reference,targetXref:null,targetSlot:null,targetView:null,targetSlotViewSteps:null},n,e.interaction.sourceSpan);t.push(s)}if(e.viewport!==void 0){let s=_o(o,{kind:Ke.Viewport,targetName:e.viewport.reference,targetXref:null,targetSlot:null,targetView:null,targetSlotViewSteps:null},n,e.viewport.sourceSpan);t.push(s)}if(e.never!==void 0){let s=_o(o,{kind:Ke.Never},n,e.never.sourceSpan);t.push(s)}if(e.when!==void 0){if(e.when.value instanceof Ld)throw new Error("Unexpected interpolation in defer block when trigger");let s=EF(o,Ie(e.when.value,r.job,e.when.sourceSpan),n,e.when.sourceSpan);i.push(s)}}function w8(n,e){if(e.i18n instanceof En&&a8(e.i18n)){let t=n.job.allocateXrefId();n.create.push(BF(t,e.i18n,M1(e.i18n).name,null));for(let[i,r]of Object.entries(P(P({},e.vars),e.placeholders)))r instanceof cl?NT(n,r,i):MT(n,r,i);n.create.push(UF(t))}else throw Error(`Unhandled i18n metadata type for ICU: ${e.i18n?.constructor.name}`)}function C8(n,e){let t=n.job.allocateView(n.xref),i=`\u0275$index_${t.xref}`,r=`\u0275$count_${t.xref}`,o=new Set;t.contextVariables.set(e.item.name,e.item.value);for(let k of e.contextVariables)k.value==="$index"&&o.add(k.name),k.name==="$index"?t.contextVariables.set("$index",k.value).set(i,k.value):k.name==="$count"?t.contextVariables.set("$count",k.value).set(r,k.value):t.aliases.add({kind:Ut.Alias,name:null,identifier:k.name,expression:E8(k,i,r)});let s=Mt(e.trackBy.span,e.sourceSpan),a=Ie(e.trackBy,n.job,s);Jr(t,e.children);let l=null,c=null;e.empty!==null&&(l=n.job.allocateView(n.xref),Jr(l,e.empty.children),c=Ih(n,l.xref,e.empty));let d={$index:o,$implicit:e.item.name};if(e.i18n!==void 0&&!(e.i18n instanceof ko))throw Error("AssertionError: Unhandled i18n metadata type or @for");if(e.empty?.i18n!==void 0&&!(e.empty.i18n instanceof ko))throw Error("AssertionError: Unhandled i18n metadata type or @empty");let p=e.i18n,h=e.empty?.i18n,y=Ih(n,t.xref,e),E=IF(t.xref,l?.xref??null,y,a,d,c,p,h,e.startSourceSpan,e.sourceSpan);n.create.push(E);let A=Ie(e.expression,n.job,Mt(e.expression.span,e.sourceSpan)),R=CF(E.xref,E.handle,A,e.sourceSpan);n.update.push(R)}function E8(n,e,t){switch(n.value){case"$index":return new Yt(e);case"$count":return new Yt(t);case"$first":return new Yt(e).identical(L(0));case"$last":return new Yt(e).identical(new Yt(t).minus(L(1)));case"$even":return new Yt(e).modulo(L(2)).identical(L(0));case"$odd":return new Yt(e).modulo(L(2)).notIdentical(L(0));default:throw new Error(`AssertionError: unknown @for loop variable ${n.value}`)}}function x8(n,e){let t=n.job.allocateXrefId();n.create.push(OF(t,e.name,e.sourceSpan)),n.update.push(bF(t,e.name,Ie(e.value,n.job,e.valueSpan),e.sourceSpan))}function Ie(n,e,t){if(n instanceof Jn)return Ie(n.ast,e,t);if(n instanceof Gr)return n.receiver instanceof mr&&!(n.receiver instanceof Rs)?new Yt(n.name):new ri(Ie(n.receiver,e,t),n.name,null,Mt(n.span,t));if(n instanceof ll){if(n.receiver instanceof mr)throw new Error("Unexpected ImplicitReceiver");return new Fn(Ie(n.receiver,e,t),n.args.map(i=>Ie(i,e,t)),void 0,Mt(n.span,t))}else{if(n instanceof Yn)return L(n.value,void 0,Mt(n.span,t));if(n instanceof el)switch(n.operator){case"+":return new Ms(Uu.Plus,Ie(n.expr,e,t),void 0,Mt(n.span,t));case"-":return new Ms(Uu.Minus,Ie(n.expr,e,t),void 0,Mt(n.span,t));default:throw new Error(`AssertionError: unknown unary operator ${n.operator}`)}else if(n instanceof _n){let i=rL.get(n.operation);if(i===void 0)throw new Error(`AssertionError: unknown binary operator ${n.operation}`);return new Le(i,Ie(n.left,e,t),Ie(n.right,e,t),void 0,Mt(n.span,t))}else{if(n instanceof Rs)return new No(e.root.xref);if(n instanceof Fs)return new jr(Ie(n.receiver,e,t),Ie(n.key,e,t),void 0,Mt(n.span,t));if(n instanceof al)throw new Error("AssertionError: Chain in unknown context");if(n instanceof Vp){let i=n.keys.map((r,o)=>{let s=n.values[o];return new ol(r.key,Ie(s,e,t),r.quoted)});return new hr(i,void 0,Mt(n.span,t))}else{if(n instanceof Op)return new zi(n.expressions.map(i=>Ie(i,e,t)));if(n instanceof Fp)return new pr(Ie(n.condition,e,t),Ie(n.trueExp,e,t),Ie(n.falseExp,e,t),void 0,Mt(n.span,t));if(n instanceof Xu)return Ie(n.expression,e,t);if(n instanceof Lp)return new Us(e.allocateXrefId(),new tn,n.name,[Ie(n.exp,e,t),...n.args.map(i=>Ie(i,e,t))]);if(n instanceof Ku)return new vl(Ie(n.receiver,e,t),Ie(n.key,e,t),Mt(n.span,t));if(n instanceof ju)return new yl(Ie(n.receiver,e,t),n.name);if(n instanceof Bp)return new $s(Ie(n.receiver,e,t),n.args.map(i=>Ie(i,e,t)));if(n instanceof kn)return new xd(Mt(n.span,t));if(n instanceof Yu)return EP(Ie(n.expression,e,t),Mt(n.span,t));if(n instanceof Ju)return Fd(Ie(n.expression,e,t));if(n instanceof Qu)return new Tp(Ie(n.expression,e,t),void 0,Mt(n.span,t));if(n instanceof ed)return ZS(n,e,t);if(n instanceof Zu)return new $u(Ie(n.tag,e,t),ZS(n.template,e,t),void 0,Mt(n.span,t));if(n instanceof td)return new Wi(Ie(n.expression,e,t),void 0,Mt(n.span,t));throw new Error(`Unhandled expression type "${n.constructor.name}" in file "${t?.start.file.url}"`)}}}}function ZS(n,e,t){return new qu(n.elements.map(i=>new Ip(i.text,Mt(i.span,t))),n.expressions.map(i=>Ie(i,e,t)),Mt(n.span,t))}function qv(n,e,t,i){let r;return e instanceof Ld?r=new ft(e.strings,e.expressions.map(o=>Ie(o,n,null)),Object.keys(qr(t)?.placeholders??{})):e instanceof at?r=Ie(e,n,null):r=L(e),r}var PT=new Map([[$e.Property,se.Property],[$e.TwoWay,se.TwoWayProperty],[$e.Attribute,se.Attribute],[$e.Class,se.ClassName],[$e.Style,se.StyleProperty],[$e.LegacyAnimation,se.LegacyAnimation],[$e.Animation,se.Animation]]);function b8(n){return Ki(n.tagName??"")[1]===Ds}function qr(n){if(n==null)return null;if(!(n instanceof En))throw Error(`Expected i18n meta to be a Message, but got: ${n.constructor.name}`);return n}function S8(n,e,t){let i=new Array,r=new Set;for(let o of t.attributes){let s=Is.securityContext(t.name,o.name,!0);i.push(Vs(e.xref,se.Attribute,o.name,qv(n.job,o.value,o.i18n),null,s,!0,!1,null,qr(o.i18n),o.sourceSpan)),o.i18n&&r.add(o.name)}for(let o of t.inputs)r.has(o.name)&&console.error(`On component ${n.job.componentName}, the binding ${o.name} is both an i18n attribute and a property. You may want to remove the property binding. This will become a compilation error in future versions of Angular.`),i.push(Vs(e.xref,PT.get(o.type),o.name,qv(n.job,Md(o.value),o.i18n),o.unit,o.securityContext,!1,!1,null,qr(o.i18n)??null,o.sourceSpan));n.create.push(i.filter(o=>o?.kind===_.ExtractedAttribute)),n.update.push(i.filter(o=>o?.kind===_.Binding));for(let o of t.outputs){if(o.type===Cn.LegacyAnimation&&o.phase===null)throw Error("Animation listener should have a phase");o.type===Cn.TwoWay?n.create.push(rT(e.xref,e.handle,o.name,e.tag,RT(n,o.handler,o.handlerSpan),o.sourceSpan)):o.type===Cn.Animation?n.create.push(iT(e.xref,e.handle,o.name,e.tag,kd(n,o.handler,o.handlerSpan),o.name.endsWith("enter")?"enter":"leave",o.target,!1,o.sourceSpan)):n.create.push(S_(e.xref,e.handle,o.name,e.tag,kd(n,o.handler,o.handlerSpan),o.phase,o.target,!1,o.sourceSpan))}i.some(o=>o?.i18nMessage)!==null&&n.create.push(sT(n.job.allocateXrefId(),new tn,e.xref))}function T8(n,e,t,i){let r=new Array;for(let o of t.templateAttrs)if(o instanceof ul){let s=Is.securityContext(Ds,o.name,!0);r.push(pp(n,e.xref,$e.Attribute,o.name,o.value,null,s,!0,i,qr(o.i18n),o.sourceSpan))}else r.push(pp(n,e.xref,o.type,o.name,Md(o.value),o.unit,o.securityContext,!0,i,qr(o.i18n),o.sourceSpan));for(let o of t.attributes){let s=Is.securityContext(Ds,o.name,!0);r.push(pp(n,e.xref,$e.Attribute,o.name,o.value,null,s,!1,i,qr(o.i18n),o.sourceSpan))}for(let o of t.inputs)r.push(pp(n,e.xref,o.type,o.name,Md(o.value),o.unit,o.securityContext,!1,i,qr(o.i18n),o.sourceSpan));n.create.push(r.filter(o=>o?.kind===_.ExtractedAttribute)),n.update.push(r.filter(o=>o?.kind===_.Binding));for(let o of t.outputs){if(o.type===Cn.LegacyAnimation&&o.phase===null)throw Error("Animation listener should have a phase");if(i===Rn.NgTemplate&&(o.type===Cn.TwoWay?n.create.push(rT(e.xref,e.handle,o.name,e.tag,RT(n,o.handler,o.handlerSpan),o.sourceSpan)):n.create.push(S_(e.xref,e.handle,o.name,e.tag,kd(n,o.handler,o.handlerSpan),o.phase,o.target,!1,o.sourceSpan))),i===Rn.Structural&&o.type!==Cn.LegacyAnimation){let s=Is.securityContext(Ds,o.name,!1);n.create.push(gi(e.xref,se.Property,null,o.name,null,null,null,s))}}r.some(o=>o?.i18nMessage)!==null&&n.create.push(sT(n.job.allocateXrefId(),new tn,e.xref))}function pp(n,e,t,i,r,o,s,a,l,c,d){let p=typeof r=="string";if(l===Rn.Structural){if(!a)switch(t){case $e.Property:case $e.Class:case $e.Style:return gi(e,se.Property,null,i,null,null,c,s);case $e.TwoWay:return gi(e,se.TwoWayProperty,null,i,null,null,c,s)}if(!p&&(t===$e.Attribute||t===$e.LegacyAnimation||t===$e.Animation))return null}let h=PT.get(t);return l===Rn.NgTemplate&&(t===$e.Class||t===$e.Style||t===$e.Attribute&&!p)&&(h=se.Property),Vs(e,h,i,qv(n.job,r,c),o,s,p,a,l,c,d)}function kd(n,e,t){e=Md(e);let i=new Array,r=e instanceof al?e.expressions:[e];if(r.length===0)throw new Error("Expected listener to have non-empty expression list.");let o=r.map(a=>Ie(a,n.job,t)),s=o.pop();return i.push(...o.map(a=>xi(new Ci(a,a.sourceSpan)))),i.push(xi(new Xt(s,s.sourceSpan))),i}function RT(n,e,t){e=Md(e);let i=new Array;if(e instanceof al)if(e.expressions.length===1)e=e.expressions[0];else throw new Error("Expected two-way listener to have a single expression.");let r=Ie(e,n.job,t),o=new Yt("$event"),s=new ah(r,o);return i.push(xi(new Ci(s))),i.push(xi(new Xt(o))),i}function Md(n){return n instanceof Jn?n.ast:n}function FT(n,e){I8(n.localRefs);for(let{name:t,value:i}of e.references)n.localRefs.push({name:t,target:i})}function I8(n){if(!Array.isArray(n))throw new Error("AssertionError: expected an array")}function Mt(n,e){if(e===null)return null;let t=e.start.moveBy(n.start),i=e.start.moveBy(n.end),r=e.fullStart.moveBy(n.start);return new ve(t,i,r)}function Ih(n,e,t){let i=null;for(let r of t.children)if(!(r instanceof Fh||r instanceof h_)){if(i!==null)return null;if(r instanceof gr||r instanceof ni&&r.tagName!==null)i=r;else return null}if(i!==null){for(let o of i.attributes)if(!o.name.startsWith(s8)){let s=Is.securityContext(Ds,o.name,!0);n.update.push(Vs(e,se.Attribute,o.name,L(o.value),null,s,!0,!1,null,qr(o.i18n),o.sourceSpan))}for(let o of i.inputs)if(o.type!==$e.LegacyAnimation&&o.type!==$e.Animation&&o.type!==$e.Attribute){let s=Is.securityContext(Ds,o.name,!0);n.create.push(gi(e,se.Property,null,o.name,null,null,null,s))}let r=i instanceof gr?i.name:i.tagName;return r===Ds?null:r}return null}var D8=!1;function A8(){return D8}function Dh(n,e){return Ph(De(y_).bitwiseAnd(L(n),null),e)}function k8(n){return(n.descendants?1:0)|(n.static?2:0)|(n.emitDistinctChangesOnly?4:0)}function M8(n,e){if(Array.isArray(n.predicate)){let t=[];return n.predicate.forEach(i=>{let r=i.split(",").map(o=>L(o.trim()));t.push(...r)}),e.getConstLiteral(Ge(t),!0)}else switch(n.predicate.forwardRef){case 0:case 2:return n.predicate.expression;case 1:return ce(D.resolveForwardRef).callFn([n.predicate.expression])}}function LT(n,e,t,i){let r=[];i!==void 0&&r.push(...i),n.isSignal&&r.push(new ri(De(fd),n.propertyName)),r.push(M8(n,e),L(k8(n))),n.read&&r.push(n.read);let o=n.isSignal?t.signalBased:t.nonSignal;return ce(o).callFn(r)}var M_=Symbol("queryAdvancePlaceholder");function OT(n){let e=[],t=0,i=()=>{t>0&&(e.unshift(ce(D.queryAdvance).callFn(t===1?[]:[L(t)]).toStmt()),t=0)};for(let r=n.length-1;r>=0;r--){let o=n[r];o===M_?t++:(i(),e.unshift(o))}return i(),e}function N8(n,e,t){let i=[],r=[],o=N1(a=>r.push(a),g_);n.forEach(a=>{let l=LT(a,e,{signalBased:D.viewQuerySignal,nonSignal:D.viewQuery});if(i.push(l.toStmt()),a.isSignal){r.push(M_);return}let c=o(),d=ce(D.loadQuery).callFn([]),p=ce(D.queryRefresh).callFn([c.set(d)]),h=De(fd).prop(a.propertyName).set(a.first?c.prop("first"):c);r.push(p.and(h).toStmt())});let s=t?`${t}_Query`:null;return Io([new $t(y_,d_),new $t(fd,null)],[Dh(1,i),Dh(2,OT(r))],Zn,null,s)}function P8(n,e,t){let i=[],r=[],o=N1(a=>r.push(a),g_);for(let a of n){if(i.push(LT(a,e,{nonSignal:D.contentQuery,signalBased:D.contentQuerySignal},[De("dirIndex")]).toStmt()),a.isSignal){r.push(M_);continue}let l=o(),c=ce(D.loadQuery).callFn([]),d=ce(D.queryRefresh).callFn([l.set(c)]),p=De(fd).prop(a.propertyName).set(a.first?l.prop("first"):l);r.push(d.and(p).toStmt())}let s=t?`${t}_ContentQueries`:null;return Io([new $t(y_,d_),new $t(fd,null),new $t("dirIndex",null)],[Dh(1,i),Dh(2,OT(r))],Zn,null,s)}var Gv=class extends lO{constructor(){super(Ov)}parse(e,t,i){return super.parse(e,t,i)}},hp=".",R8="attr",Dy="animate",F8="class",L8="style",O8="*",Ay="animate-",Wv=class{_exprParser;_interpolationConfig;_schemaRegistry;errors;constructor(e,t,i,r){this._exprParser=e,this._interpolationConfig=t,this._schemaRegistry=i,this.errors=r}get interpolationConfig(){return this._interpolationConfig}createBoundHostProperties(e,t){let i=[];for(let r of Object.keys(e)){let o=e[r];typeof o=="string"?this.parsePropertyBinding(r,o,!0,!1,t,t.start.offset,void 0,[],i,t):this._reportError(`Value of the host property binding "${r}" needs to be a string representing an expression but got "${o}" (${typeof o})`,t)}return i}createDirectiveHostEventAsts(e,t){let i=[];for(let r of Object.keys(e)){let o=e[r];typeof o=="string"?this.parseEvent(r,o,!1,t,t,[],i,t):this._reportError(`Value of the host listener "${r}" needs to be a string representing an expression but got "${o}" (${typeof o})`,t)}return i}parseInterpolation(e,t,i){let r=t.fullStart.offset;try{let o=this._exprParser.parseInterpolation(e,t,r,i,this._interpolationConfig);return o&&this.errors.push(...o.errors),o}catch(o){return this._reportError(`${o}`,t),this._exprParser.wrapLiteralPrimitive("ERROR",t,r)}}parseInterpolationExpression(e,t){let i=t.start.offset;try{let r=this._exprParser.parseInterpolationExpression(e,t,i);return r&&this.errors.push(...r.errors),r}catch(r){return this._reportError(`${r}`,t),this._exprParser.wrapLiteralPrimitive("ERROR",t,i)}}parseInlineTemplateBinding(e,t,i,r,o,s,a,l){let c=i.start.offset+O8.length,d=this._parseTemplateBindings(e,t,i,c,r);for(let p of d){let h=yo(i,p.sourceSpan),y=p.key.source,E=yo(i,p.key.span);if(p instanceof nd){let A=p.value?p.value.source:"$implicit",R=p.value?yo(i,p.value.span):void 0;a.push(new Yy(y,A,h,E,R))}else if(p.value){let A=l?h:i,R=yo(i,p.value.ast.sourceSpan);this._parsePropertyAst(y,p.value,!1,A,E,R,o,s)}else o.push([y,""]),this.parseLiteralAttr(y,null,E,r,void 0,o,s,E)}}_parseTemplateBindings(e,t,i,r,o){try{let s=this._exprParser.parseTemplateBindings(e,t,i,r,o);return s.errors.forEach(a=>this.errors.push(a)),s.warnings.forEach(a=>{this._reportError(a,i,xo.WARNING)}),s.templateBindings}catch(s){return this._reportError(`${s}`,i),[]}}parseLiteralAttr(e,t,i,r,o,s,a,l){ky(e)?(e=e.substring(1),l!==void 0&&(l=yo(l,new ei(l.start.offset+1,l.end.offset))),t&&this._reportError('Assigning animation triggers via @prop="exp" attributes with an expression is invalid. Use property bindings (e.g. [@prop]="exp") or use an attribute without a value (e.g. @prop) instead.',i,xo.ERROR),this._parseLegacyAnimation(e,t,i,r,l,o,s,a)):a.push(new ja(e,this._exprParser.wrapLiteralPrimitive(t,"",r),lr.LITERAL_ATTR,i,l,o))}parsePropertyBinding(e,t,i,r,o,s,a,l,c,d){e.length===0&&this._reportError("Property name is missing in binding",o);let p=!1;e.startsWith(Ay)?(p=!0,e=e.substring(Ay.length),d!==void 0&&(d=yo(d,new ei(d.start.offset+Ay.length,d.end.offset)))):ky(e)&&(p=!0,e=e.substring(1),d!==void 0&&(d=yo(d,new ei(d.start.offset+1,d.end.offset)))),p?this._parseLegacyAnimation(e,t,o,s,d,a,l,c):e.startsWith(`${Dy}${hp}`)?this._parseAnimation(e,this.parseBinding(t,i,a||o,s),o,d,a,l,c):this._parsePropertyAst(e,this.parseBinding(t,i,a||o,s),r,o,d,a,l,c)}parsePropertyInterpolation(e,t,i,r,o,s,a,l){let c=this.parseInterpolation(t,r||i,l);return c?(this._parsePropertyAst(e,c,!1,i,a,r,o,s),!0):!1}_parsePropertyAst(e,t,i,r,o,s,a,l){a.push([e,t.source]),l.push(new ja(e,t,i?lr.TWO_WAY:lr.DEFAULT,r,o,s))}_parseAnimation(e,t,i,r,o,s,a){s.push([e,t.source]),a.push(new ja(e,t,lr.ANIMATION,i,r,o))}_parseLegacyAnimation(e,t,i,r,o,s,a,l){e.length===0&&this._reportError("Animation trigger is missing",i);let c=this.parseBinding(t||"undefined",!1,s||i,r);a.push([e,c.source]),l.push(new ja(e,c,lr.LEGACY_ANIMATION,i,o,s))}parseBinding(e,t,i,r){try{let o=t?this._exprParser.parseSimpleBinding(e,i,r,this._interpolationConfig):this._exprParser.parseBinding(e,i,r,this._interpolationConfig);return o&&this.errors.push(...o.errors),o}catch(o){return this._reportError(`${o}`,i),this._exprParser.wrapLiteralPrimitive("ERROR",i,r)}}createBoundElementProperty(e,t,i=!1,r=!0){if(t.isLegacyAnimation)return new Hp(t.name,$e.LegacyAnimation,tt.NONE,t.expression,null,t.sourceSpan,t.keySpan,t.valueSpan);let o=null,s,a=null,l=t.name.split(hp),c;if(l.length>1)if(l[0]==R8){a=l.slice(1).join(hp),i||this._validatePropertyOrAttributeName(a,t.sourceSpan,!0),c=My(this._schemaRegistry,e,a,!0);let d=a.indexOf(":");if(d>-1){let p=a.substring(0,d),h=a.substring(d+1);a=yp(p,h)}s=$e.Attribute}else l[0]==F8?(a=l[1],s=$e.Class,c=[tt.NONE]):l[0]==L8?(o=l.length>2?l[2]:null,a=l[1],s=$e.Style,c=[tt.STYLE]):l[0]==Dy&&(a=t.name,s=$e.Animation,c=[tt.NONE]);if(a===null){let d=this._schemaRegistry.getMappedPropName(t.name);a=r?d:t.name,c=My(this._schemaRegistry,e,d,!1),s=t.type===lr.TWO_WAY?$e.TwoWay:$e.Property,i||this._validatePropertyOrAttributeName(d,t.sourceSpan,!1)}return new Hp(a,s,c[0],t.expression,o,t.sourceSpan,t.keySpan,t.valueSpan)}parseEvent(e,t,i,r,o,s,a,l){e.length===0&&this._reportError("Event name is missing in binding",r),ky(e)?(e=e.slice(1),l!==void 0&&(l=yo(l,new ei(l.start.offset+1,l.end.offset))),this._parseLegacyAnimationEvent(e,t,r,o,a,l)):this._parseRegularEvent(e,t,i,r,o,s,a,l)}calcPossibleSecurityContexts(e,t,i){let r=this._schemaRegistry.getMappedPropName(t);return My(this._schemaRegistry,e,r,i)}parseEventListenerName(e){let[t,i]=NP(e,[null,e]);return{eventName:i,target:t}}parseLegacyAnimationEventName(e){let t=PP(e,[e,null]);return{eventName:t[0],phase:t[1]===null?null:t[1].toLowerCase()}}_parseLegacyAnimationEvent(e,t,i,r,o,s){let{eventName:a,phase:l}=this.parseLegacyAnimationEventName(e),c=this._parseAction(t,r);o.push(new $p(a,l,Cn.LegacyAnimation,c,i,r,s)),a.length===0&&this._reportError("Animation event name is missing in binding",i),l?l!=="start"&&l!=="done"&&this._reportError(`The provided animation output phase value "${l}" for "@${a}" is not supported (use start or done)`,i):this._reportError(`The animation trigger output event (@${a}) is missing its phase value name (start or done are currently supported)`,i)}_parseRegularEvent(e,t,i,r,o,s,a,l){let{eventName:c,target:d}=this.parseEventListenerName(e),p=this.errors.length,h=this._parseAction(t,o),y=this.errors.length===p;s.push([e,h.source]),i&&y&&!this._isAllowedAssignmentEvent(h)&&this._reportError("Unsupported expression in a two-way binding",r);let E=Cn.Regular;i&&(E=Cn.TwoWay),e.startsWith(`${Dy}${hp}`)&&(E=Cn.Animation),a.push(new $p(c,d,E,h,r,o,l))}_parseAction(e,t){let i=t&&t.start?t.start.offset:0;try{let r=this._exprParser.parseAction(e,t,i,this._interpolationConfig);return r&&this.errors.push(...r.errors),!r||r.ast instanceof kn?(this._reportError("Empty expressions are not allowed",t),this._exprParser.wrapLiteralPrimitive("ERROR",t,i)):r}catch(r){return this._reportError(`${r}`,t),this._exprParser.wrapLiteralPrimitive("ERROR",t,i)}}_reportError(e,t,i=xo.ERROR){this.errors.push(new he(t,e,i))}_validatePropertyOrAttributeName(e,t,i){let r=i?this._schemaRegistry.validateAttribute(e):this._schemaRegistry.validateProperty(e);r.error&&this._reportError(r.msg,t,xo.ERROR)}_isAllowedAssignmentEvent(e){return e instanceof Jn?this._isAllowedAssignmentEvent(e.ast):e instanceof Xu?this._isAllowedAssignmentEvent(e.expression):e instanceof ll&&e.args.length===1&&e.receiver instanceof Gr&&e.receiver.name==="$any"&&e.receiver.receiver instanceof mr&&!(e.receiver.receiver instanceof Rs)?this._isAllowedAssignmentEvent(e.args[0]):(e instanceof Gr||e instanceof Fs)&&!zv(e)}};function zv(n){return n instanceof ju||n instanceof Ku?!0:n instanceof td?zv(n.expression):n instanceof Gr||n instanceof Fs||n instanceof ll?zv(n.receiver):!1}function ky(n){return n[0]=="@"}function My(n,e,t,i){let r,o=s=>n.securityContext(s,t,i);return e===null?r=n.allKnownElementNames().map(o):(r=[],il.parse(e).forEach(s=>{let a=s.element?[s.element]:n.allKnownElementNames(),l=new Set(s.notSelectors.filter(d=>d.isElementSelector()).map(d=>d.element)),c=a.filter(d=>!l.has(d));r.push(...c.map(o))})),r.length===0?[tt.NONE]:Array.from(new Set(r)).sort()}function yo(n,e){let t=e.start-n.start.offset,i=e.end-n.end.offset;return new ve(n.start.moveBy(t),n.end.moveBy(i),n.fullStart.moveBy(t),n.details)}function V8(n){if(n==null||n.length===0||n[0]=="/")return!1;let e=n.match(B8);return e===null||e[1]=="package"||e[1]=="asset"}var B8=/^([^:/?#]+):/,U8="select",$8="link",H8="rel",q8="href",G8="stylesheet",W8="style",z8="script",j8="ngNonBindable",K8="ngProjectAs";function VT(n){let e=null,t=null,i=null,r=!1,o="";n.attrs.forEach(l=>{let c=l.name.toLowerCase();c==U8?e=l.value:c==q8?t=l.value:c==H8?i=l.value:l.name==j8?r=!0:l.name==K8&&l.value.length>0&&(o=l.value)}),e=Y8(e);let s=n.name.toLowerCase(),a=Xn.OTHER;return Jy(s)?a=Xn.NG_CONTENT:s==W8?a=Xn.STYLE:s==z8?a=Xn.SCRIPT:s==$8&&i==G8&&(a=Xn.STYLESHEET),new jv(a,e,t,r,o)}var Xn=(function(n){return n[n.NG_CONTENT=0]="NG_CONTENT",n[n.STYLE=1]="STYLE",n[n.STYLESHEET=2]="STYLESHEET",n[n.SCRIPT=3]="SCRIPT",n[n.OTHER=4]="OTHER",n})(Xn||{}),jv=class{type;selectAttr;hrefAttr;nonBindable;projectAs;constructor(e,t,i,r,o){this.type=e,this.selectAttr=t,this.hrefAttr=i,this.nonBindable=r,this.projectAs=o}};function Y8(n){return n===null||n.length===0?"*":n}var J8=/^\s*([0-9A-Za-z_$]*)\s+of\s+([\S\s]*)/,Q8=/^track\s+([\S\s]*)/,X8=/^(as\s+)(.*)/,Uh=/^else[^\S\r\n]+if/,Z8=/^let\s+([\S\s]*)/,e4=/^[$A-Z_][0-9A-Z_$]*$/i,e1=/(\s*)(\S+)(\s*)/,Bu=new Set(["$index","$first","$last","$even","$odd","$count"]);function t1(n){return n==="empty"}function n1(n){return n==="else"||Uh.test(n)}function t4(n,e,t,i){let r=a4(e),o=[],s=i1(n,r,i);s!==null&&o.push(new xs(s.expression,it(t,n.children,n.children),s.expressionAlias,n.sourceSpan,n.startSourceSpan,n.endSourceSpan,n.nameSpan,n.i18n));for(let p of e)if(Uh.test(p.name)){let h=i1(p,r,i);if(h!==null){let y=it(t,p.children,p.children);o.push(new xs(h.expression,y,h.expressionAlias,p.sourceSpan,p.startSourceSpan,p.endSourceSpan,p.nameSpan,p.i18n))}}else if(p.name==="else"){let h=it(t,p.children,p.children);o.push(new xs(null,h,null,p.sourceSpan,p.startSourceSpan,p.endSourceSpan,p.nameSpan,p.i18n))}let a=o.length>0?o[0].startSourceSpan:n.startSourceSpan,l=o.length>0?o[o.length-1].endSourceSpan:n.endSourceSpan,c=n.sourceSpan,d=o[o.length-1];return d!==void 0&&(c=new ve(a.start,d.sourceSpan.end)),{node:new Kp(o,c,n.startSourceSpan,l,n.nameSpan),errors:r}}function n4(n,e,t,i){let r=[],o=r4(n,r,i),s=null,a=null;for(let l of e)l.name==="empty"?a!==null?r.push(new he(l.sourceSpan,"@for loop can only have one @empty block")):l.parameters.length>0?r.push(new he(l.sourceSpan,"@empty block cannot have parameters")):a=new ld(it(t,l.children,l.children),l.sourceSpan,l.startSourceSpan,l.endSourceSpan,l.nameSpan,l.i18n):r.push(new he(l.sourceSpan,`Unrecognized @for loop block "${l.name}"`));if(o!==null)if(o.trackBy===null)r.push(new he(n.startSourceSpan,'@for loop must have a "track" expression'));else{let l=a?.endSourceSpan??n.endSourceSpan,c=new ve(n.sourceSpan.start,l?.end??n.sourceSpan.end);o4(o.trackBy.expression,o.trackBy.keywordSpan,r),s=new dl(o.itemName,o.expression,o.trackBy.expression,o.trackBy.keywordSpan,o.context,it(t,n.children,n.children),a,c,n.sourceSpan,n.startSourceSpan,l,n.nameSpan,n.i18n)}return{node:s,errors:r}}function i4(n,e,t){let i=l4(n),r=n.parameters.length>0?Nd(n.parameters[0],t):t.parseBinding("",!1,n.sourceSpan,0),o=[],s=[],a=null;for(let l of n.children){if(!(l instanceof hi))continue;if((l.name!=="case"||l.parameters.length===0)&&l.name!=="default"){s.push(new Yp(l.name,l.sourceSpan,l.nameSpan));continue}let c=l.name==="case"?Nd(l.parameters[0],t):null,d=new ad(c,it(e,l.children,l.children),l.sourceSpan,l.startSourceSpan,l.endSourceSpan,l.nameSpan,l.i18n);c===null?a=d:o.push(d)}return a!==null&&o.push(a),{node:new jp(r,o,s,n.sourceSpan,n.startSourceSpan,n.endSourceSpan,n.nameSpan),errors:i}}function r4(n,e,t){if(n.parameters.length===0)return e.push(new he(n.startSourceSpan,"@for loop does not have an expression")),null;let[i,...r]=n.parameters,o=c4(i,e)?.match(J8);if(!o||o[2].trim().length===0)return e.push(new he(i.sourceSpan,'Cannot parse expression. @for loop expression must match the pattern "<identifier> of <expression>"')),null;let[,s,a]=o;Bu.has(s)&&e.push(new he(i.sourceSpan,`@for loop item name cannot be one of ${Array.from(Bu).join(", ")}.`));let l=i.expression.split(" ")[0],c=new ve(i.sourceSpan.start,i.sourceSpan.start.moveBy(l.length)),d={itemName:new Do(s,"$implicit",c,c),trackBy:null,expression:Nd(i,t,a),context:Array.from(Bu,p=>{let h=new ve(n.startSourceSpan.end,n.startSourceSpan.end);return new Do(p,p,h,h)})};for(let p of r){let h=p.expression.match(Z8);if(h!==null){let E=new ve(p.sourceSpan.start.moveBy(h[0].length-h[1].length),p.sourceSpan.end);s4(p.sourceSpan,h[1],E,s,d.context,e);continue}let y=p.expression.match(Q8);if(y!==null){if(d.trackBy!==null)e.push(new he(p.sourceSpan,'@for loop can only have one "track" expression'));else{let E=Nd(p,t,y[1]);E.ast instanceof kn&&e.push(new he(n.startSourceSpan,'@for loop must have a "track" expression'));let A=new ve(p.sourceSpan.start,p.sourceSpan.start.moveBy(5));d.trackBy={expression:E,keywordSpan:A}}continue}e.push(new he(p.sourceSpan,`Unrecognized @for loop parameter "${p.expression}"`))}return d}function o4(n,e,t){let i=new Kv;n.ast.visit(i),i.hasPipe&&t.push(new he(e,"Cannot use pipes in track expressions"))}function s4(n,e,t,i,r,o){let s=e.split(","),a=t.start;for(let l of s){let c=l.split("="),d=c.length===2?c[0].trim():"",p=c.length===2?c[1].trim():"";if(d.length===0||p.length===0)o.push(new he(n,'Invalid @for loop "let" parameter. Parameter should match the pattern "<name> = <variable name>"'));else if(!Bu.has(p))o.push(new he(n,`Unknown "let" parameter variable "${p}". The allowed variables are: ${Array.from(Bu).join(", ")}`));else if(d===i)o.push(new he(n,`Invalid @for loop "let" parameter. Variable cannot be called "${i}"`));else if(r.some(h=>h.name===d))o.push(new he(n,`Duplicate "let" parameter variable "${p}"`));else{let[,h,y]=c[0].match(e1)??[],E=h!==void 0&&c.length===2?new ve(a.moveBy(h.length),a.moveBy(h.length+y.length)):t,A;if(c.length===2){let[,k,H]=c[1].match(e1)??[];A=k!==void 0?new ve(a.moveBy(c[0].length+1+k.length),a.moveBy(c[0].length+1+k.length+H.length)):void 0}let R=new ve(E.start,A?.end??E.end);r.push(new Do(d,p,R,E,A))}a=a.moveBy(l.length+1)}}function a4(n){let e=[],t=!1;for(let i=0;i<n.length;i++){let r=n[i];r.name==="else"?(t?e.push(new he(r.startSourceSpan,"Conditional can only have one @else block")):n.length>1&&i<n.length-1?e.push(new he(r.startSourceSpan,"@else block must be last inside the conditional")):r.parameters.length>0&&e.push(new he(r.startSourceSpan,"@else block cannot have parameters")),t=!0):Uh.test(r.name)||e.push(new he(r.startSourceSpan,`Unrecognized conditional block @${r.name}`))}return e}function l4(n){let e=[],t=!1;if(n.parameters.length!==1)return e.push(new he(n.startSourceSpan,"@switch block must have exactly one parameter")),e;for(let i of n.children)if(!(i instanceof Td||i instanceof Hs&&i.value.trim().length===0)){if(!(i instanceof hi)||i.name!=="case"&&i.name!=="default"){e.push(new he(i.sourceSpan,"@switch block can only contain @case and @default blocks"));continue}i.name==="default"?(t?e.push(new he(i.startSourceSpan,"@switch block can only have one @default block")):i.parameters.length>0&&e.push(new he(i.startSourceSpan,"@default block cannot have parameters")),t=!0):i.name==="case"&&i.parameters.length!==1&&e.push(new he(i.startSourceSpan,"@case block must have exactly one parameter"))}return e}function Nd(n,e,t){let i,r;return typeof t=="string"?(i=Math.max(0,n.expression.lastIndexOf(t)),r=i+t.length):(i=0,r=n.expression.length),e.parseBinding(n.expression.slice(i,r),!1,n.sourceSpan,n.sourceSpan.start.offset+i)}function i1(n,e,t){if(n.parameters.length===0)return e.push(new he(n.startSourceSpan,"Conditional block does not have an expression")),null;let i=Nd(n.parameters[0],t),r=null;for(let o=1;o<n.parameters.length;o++){let s=n.parameters[o],a=s.expression.match(X8);if(a===null)e.push(new he(s.sourceSpan,`Unrecognized conditional parameter "${s.expression}"`));else if(n.name!=="if"&&!Uh.test(n.name))e.push(new he(s.sourceSpan,'"as" expression is only allowed on `@if` and `@else if` blocks'));else if(r!==null)e.push(new he(s.sourceSpan,'Conditional can only have one "as" expression'));else{let l=a[2].trim();if(e4.test(l)){let c=s.sourceSpan.start.moveBy(a[1].length),d=new ve(c,c.moveBy(l.length));r=new Do(l,l,d,d)}else e.push(new he(s.sourceSpan,'"as" expression must be a valid JavaScript identifier'))}}return{expression:i,expressionAlias:r}}function c4(n,e){let t=n.expression,i=/^\s$/,r=0,o=0,s=t.length-1;for(let a=0;a<t.length;a++){let l=t[a];if(l==="(")o=a+1,r++;else{if(i.test(l))continue;break}}if(r===0)return t;for(let a=t.length-1;a>-1;a--){let l=t[a];if(l===")"){if(s=a,r--,r===0)break}else{if(i.test(l))continue;break}}return r!==0?(e.push(new he(n.sourceSpan,"Unclosed parentheses in expression")),null):t.slice(o,s)}var Kv=class extends id{hasPipe=!1;visitPipe(){this.hasPipe=!0}},u4=/^\d+\.?\d*(ms|s)?$/,d4=/^\s$/,r1=new Map([[Gi,wn],[To,ws],[vi,cn]]),Pn=(function(n){return n.IDLE="idle",n.TIMER="timer",n.INTERACTION="interaction",n.IMMEDIATE="immediate",n.HOVER="hover",n.VIEWPORT="viewport",n.NEVER="never",n})(Pn||{});function f4({expression:n,sourceSpan:e},t,i){let r=n.indexOf("never"),o=new ve(e.start.moveBy(r),e.start.moveBy(r+5)),s=N_(n,e),a=P_(n,e);r===-1?i.push(new he(e,'Could not find "never" keyword in expression')):R_("never",t,i,new ev(o,e,s,null,a))}function Ny({expression:n,sourceSpan:e},t,i,r){let o=n.indexOf("when"),s=new ve(e.start.moveBy(o),e.start.moveBy(o+4)),a=N_(n,e),l=P_(n,e);if(o===-1)r.push(new he(e,'Could not find "when" keyword in expression'));else{let c=Pd(n,o+1),d=t.parseBinding(n.slice(c),!1,e,e.start.offset+c);R_("when",i,r,new qp(d,e,a,s,l))}}function Py({expression:n,sourceSpan:e},t,i,r){let o=n.indexOf("on"),s=new ve(e.start.moveBy(o),e.start.moveBy(o+2)),a=N_(n,e),l=P_(n,e);if(o===-1)i.push(new he(e,'Could not find "on" keyword in expression'));else{let c=Pd(n,o+1);new Yv(n,c,e,t,i,n.startsWith("hydrate")?w4:_4,r,a,s,l).parse()}}function N_(n,e){return n.startsWith("prefetch")?new ve(e.start,e.start.moveBy(8)):null}function P_(n,e){return n.startsWith("hydrate")?new ve(e.start,e.start.moveBy(7)):null}var Yv=class{expression;start;span;triggers;errors;validator;placeholder;prefetchSpan;onSourceSpan;hydrateSpan;index=0;tokens;constructor(e,t,i,r,o,s,a,l,c,d){this.expression=e,this.start=t,this.span=i,this.triggers=r,this.errors=o,this.validator=s,this.placeholder=a,this.prefetchSpan=l,this.onSourceSpan=c,this.hydrateSpan=d,this.tokens=new Ad().tokenize(e.slice(t))}parse(){for(;this.tokens.length>0&&this.index<this.tokens.length;){let e=this.token();if(!e.isIdentifier()){this.unexpectedToken(e);break}if(this.isFollowedByOrLast(ti))this.consumeTrigger(e,[]),this.advance();else if(this.isFollowedByOrLast(vi)){this.advance();let t=this.errors.length,i=this.consumeParameters();if(this.errors.length!==t)break;this.consumeTrigger(e,i),this.advance()}else this.index<this.tokens.length-1&&this.unexpectedToken(this.tokens[this.index+1]);this.advance()}}advance(){this.index++}isFollowedByOrLast(e){return this.index===this.tokens.length-1?!0:this.tokens[this.index+1].isCharacter(e)}token(){return this.tokens[Math.min(this.index,this.tokens.length-1)]}consumeTrigger(e,t){let i=this.span.start.moveBy(this.start+e.index-this.tokens[0].index),r=new ve(i,i.moveBy(e.strValue.length)),o=i.moveBy(this.token().end-e.index),s=e.index===0,a=s?this.onSourceSpan:null,l=s?this.prefetchSpan:null,c=s?this.hydrateSpan:null,d=new ve(s?this.span.start:i,o);try{switch(e.toString()){case Pn.IDLE:this.trackTrigger("idle",p4(t,r,d,l,a,c));break;case Pn.TIMER:this.trackTrigger("timer",h4(t,r,d,this.prefetchSpan,this.onSourceSpan,this.hydrateSpan));break;case Pn.INTERACTION:this.trackTrigger("interaction",y4(t,r,d,this.prefetchSpan,this.onSourceSpan,this.hydrateSpan,this.validator));break;case Pn.IMMEDIATE:this.trackTrigger("immediate",m4(t,r,d,this.prefetchSpan,this.onSourceSpan,this.hydrateSpan));break;case Pn.HOVER:this.trackTrigger("hover",g4(t,r,d,this.prefetchSpan,this.onSourceSpan,this.hydrateSpan,this.placeholder,this.validator));break;case Pn.VIEWPORT:this.trackTrigger("viewport",v4(t,r,d,this.prefetchSpan,this.onSourceSpan,this.hydrateSpan,this.validator));break;default:throw new Error(`Unrecognized trigger type "${e}"`)}}catch(p){this.error(e,p.message)}}consumeParameters(){let e=[];if(!this.token().isCharacter(vi))return this.unexpectedToken(this.token()),e;this.advance();let t=[],i="";for(;this.index<this.tokens.length;){let r=this.token();if(r.isCharacter(cn)&&t.length===0){i.length&&e.push(i);break}if(r.type===Se.Character&&r1.has(r.numValue)&&t.push(r1.get(r.numValue)),t.length>0&&r.isCharacter(t[t.length-1])&&t.pop(),t.length===0&&r.isCharacter(ti)&&i.length>0){e.push(i),i="",this.advance();continue}i+=this.tokenText(),this.advance()}return(!this.token().isCharacter(cn)||t.length>0)&&this.error(this.token(),"Unexpected end of expression"),this.index<this.tokens.length-1&&!this.tokens[this.index+1].isCharacter(ti)&&this.unexpectedToken(this.tokens[this.index+1]),e}tokenText(){return this.expression.slice(this.start+this.token().index,this.start+this.token().end)}trackTrigger(e,t){R_(e,this.triggers,this.errors,t)}error(e,t){let i=this.span.start.moveBy(this.start+e.index),r=i.moveBy(e.end-e.index);this.errors.push(new he(new ve(i,r),t))}unexpectedToken(e){this.error(e,`Unexpected token "${e}"`)}};function R_(n,e,t,i){e[n]?t.push(new he(i.sourceSpan,`Duplicate "${n}" trigger is not allowed`)):e[n]=i}function p4(n,e,t,i,r,o){if(n.length>0)throw new Error(`"${Pn.IDLE}" trigger cannot have parameters`);return new tv(e,t,i,r,o)}function h4(n,e,t,i,r,o){if(n.length!==1)throw new Error(`"${Pn.TIMER}" trigger must have exactly one parameter`);let s=Ah(n[0]);if(s===null)throw new Error(`Could not parse time value of trigger "${Pn.TIMER}"`);return new iv(s,e,t,i,r,o)}function m4(n,e,t,i,r,o){if(n.length>0)throw new Error(`"${Pn.IMMEDIATE}" trigger cannot have parameters`);return new nv(e,t,i,r,o)}function g4(n,e,t,i,r,o,s,a){return a(Pn.HOVER,n),new Gp(n[0]??null,e,t,i,r,o)}function y4(n,e,t,i,r,o,s){return s(Pn.INTERACTION,n),new Wp(n[0]??null,e,t,i,r,o)}function v4(n,e,t,i,r,o,s){return s(Pn.VIEWPORT,n),new zp(n[0]??null,e,t,i,r,o)}function _4(n,e){if(e.length>1)throw new Error(`"${n}" trigger can only have zero or one parameters`)}function w4(n,e){if(e.length>0)throw new Error(`Hydration trigger "${n}" cannot have parameters`)}function Pd(n,e=0){let t=!1;for(let i=e;i<n.length;i++)if(d4.test(n[i]))t=!0;else if(t)return i;return-1}function Ah(n){let e=n.match(u4);if(!e)return null;let[t,i]=e;return parseFloat(t)*(i==="s"?1e3:1)}var C4=/^prefetch\s+when\s/,E4=/^prefetch\s+on\s/,x4=/^hydrate\s+when\s/,b4=/^hydrate\s+on\s/,S4=/^hydrate\s+never(\s*)$/,BT=/^minimum\s/,T4=/^after\s/,I4=/^when\s/,D4=/^on\s/;function Jv(n){return n==="placeholder"||n==="loading"||n==="error"}function A4(n,e,t,i){let r=[],{placeholder:o,loading:s,error:a}=k4(e,r,t),{triggers:l,prefetchTriggers:c,hydrateTriggers:d}=R4(n,i,r,o),p=n.endSourceSpan,h=n.sourceSpan.end;if(e.length>0){let A=e[e.length-1];p=A.endSourceSpan,h=A.sourceSpan.end}let y=new ve(n.sourceSpan.start,h);return{node:new Ls(it(t,n.children,n.children),l,c,d,o,s,a,n.nameSpan,y,n.sourceSpan,n.startSourceSpan,p,n.i18n),errors:r}}function k4(n,e,t){let i=null,r=null,o=null;for(let s of n)try{if(!Jv(s.name)){e.push(new he(s.startSourceSpan,`Unrecognized block "@${s.name}"`));break}switch(s.name){case"placeholder":i!==null?e.push(new he(s.startSourceSpan,"@defer block can only have one @placeholder block")):i=M4(s,t);break;case"loading":r!==null?e.push(new he(s.startSourceSpan,"@defer block can only have one @loading block")):r=N4(s,t);break;case"error":o!==null?e.push(new he(s.startSourceSpan,"@defer block can only have one @error block")):o=P4(s,t);break}}catch(a){e.push(new he(s.startSourceSpan,a.message))}return{placeholder:i,loading:r,error:o}}function M4(n,e){let t=null;for(let i of n.parameters)if(BT.test(i.expression)){if(t!=null)throw new Error('@placeholder block can only have one "minimum" parameter');let r=Ah(i.expression.slice(Pd(i.expression)));if(r===null)throw new Error('Could not parse time value of parameter "minimum"');t=r}else throw new Error(`Unrecognized parameter in @placeholder block: "${i.expression}"`);return new rd(it(e,n.children,n.children),t,n.nameSpan,n.sourceSpan,n.startSourceSpan,n.endSourceSpan,n.i18n)}function N4(n,e){let t=null,i=null;for(let r of n.parameters)if(T4.test(r.expression)){if(t!=null)throw new Error('@loading block can only have one "after" parameter');let o=Ah(r.expression.slice(Pd(r.expression)));if(o===null)throw new Error('Could not parse time value of parameter "after"');t=o}else if(BT.test(r.expression)){if(i!=null)throw new Error('@loading block can only have one "minimum" parameter');let o=Ah(r.expression.slice(Pd(r.expression)));if(o===null)throw new Error('Could not parse time value of parameter "minimum"');i=o}else throw new Error(`Unrecognized parameter in @loading block: "${r.expression}"`);return new od(it(e,n.children,n.children),t,i,n.nameSpan,n.sourceSpan,n.startSourceSpan,n.endSourceSpan,n.i18n)}function P4(n,e){if(n.parameters.length>0)throw new Error("@error block cannot have parameters");return new sd(it(e,n.children,n.children),n.nameSpan,n.sourceSpan,n.startSourceSpan,n.endSourceSpan,n.i18n)}function R4(n,e,t,i){let r={},o={},s={};for(let a of n.parameters)I4.test(a.expression)?Ny(a,e,r,t):D4.test(a.expression)?Py(a,r,t,i):C4.test(a.expression)?Ny(a,e,o,t):E4.test(a.expression)?Py(a,o,t,i):x4.test(a.expression)?Ny(a,e,s,t):b4.test(a.expression)?Py(a,s,t,i):S4.test(a.expression)?f4(a,s,t):t.push(new he(a.sourceSpan,"Unrecognized trigger"));return s.never&&Object.keys(s).length>1&&t.push(new he(n.startSourceSpan,"Cannot specify additional `hydrate` triggers if `hydrate never` is present")),{triggers:r,prefetchTriggers:o,hydrateTriggers:s}}var F4=/^(?:(bind-)|(let-)|(ref-|#)|(on-)|(bindon-)|(@))(.*)$/,o1=1,s1=2,a1=3,l1=4,c1=5,L4=6,Iu=7,vo={BANANA_BOX:{start:"[(",end:")]"},PROPERTY:{start:"[",end:"]"},EVENT:{start:"(",end:")"}},Ry="*",O4=new Set(["link","style","script","ng-template","ng-container","ng-content"]),V4=new Set(["ngProjectAs","ngNonBindable"]);function B4(n,e,t){let i=new Qv(e,t),r=it(i,n,n),o=e.errors.concat(i.errors),s={nodes:r,errors:o,styleUrls:i.styleUrls,styles:i.styles,ngContentSelectors:i.ngContentSelectors};return t.collectCommentNodes&&(s.commentNodes=i.commentNodes),s}var Qv=class{bindingParser;options;errors=[];styles=[];styleUrls=[];ngContentSelectors=[];commentNodes=[];inI18nBlock=!1;processedNodes=new Set;constructor(e,t){this.bindingParser=e,this.options=t}visitElement(e){let t=wp(e.i18n);t&&(this.inI18nBlock&&this.reportError("Cannot mark an element as translatable inside of a translatable section. Please remove the nested i18n marker.",e.sourceSpan),this.inI18nBlock=!0);let i=VT(e);if(i.type===Xn.SCRIPT)return null;if(i.type===Xn.STYLE){let k=U4(e);return k!==null&&this.styles.push(k),null}else if(i.type===Xn.STYLESHEET&&V8(i.hrefAttr))return this.styleUrls.push(i.hrefAttr),null;let r=eR(e.name),{attributes:o,boundEvents:s,references:a,variables:l,templateVariables:c,elementHasInlineTemplate:d,parsedProperties:p,templateParsedProperties:h,i18nAttrsMeta:y}=this.prepareAttributes(e.attrs,r),E=this.extractDirectives(e),A;i.nonBindable?A=it(u1,e.children).flat(1/0):A=it(this,e.children,e.children);let R;if(i.type===Xn.NG_CONTENT){let k=i.selectAttr,H=e.attrs.map(K=>this.visitAttribute(K));R=new fl(k,H,A,e.isSelfClosing,e.sourceSpan,e.startSourceSpan,e.endSourceSpan,e.i18n),this.ngContentSelectors.push(k)}else if(r){let k=this.categorizePropertyAttributes(e.name,p,y);R=new ni(e.name,o,k.bound,s,E,[],A,a,l,e.isSelfClosing,e.sourceSpan,e.startSourceSpan,e.endSourceSpan,e.i18n)}else{let k=this.categorizePropertyAttributes(e.name,p,y);if(e.name==="ng-container")for(let H of k.bound)H.type===$e.Attribute&&this.reportError("Attribute bindings are not supported on ng-container. Use property bindings instead.",H.sourceSpan);R=new gr(e.name,o,k.bound,s,E,A,a,e.isSelfClosing,e.sourceSpan,e.startSourceSpan,e.endSourceSpan,e.isVoid,e.i18n)}return d&&(R=this.wrapInTemplate(R,h,c,y,r,t)),t&&(this.inI18nBlock=!1),R}visitAttribute(e){return new ul(e.name,e.value,e.sourceSpan,e.keySpan,e.valueSpan,e.i18n)}visitText(e){return this.processedNodes.has(e)?null:this._visitTextWithInterpolation(e.value,e.sourceSpan,e.tokens,e.i18n)}visitExpansion(e){if(!e.i18n)return null;if(!wp(e.i18n))throw new Error(`Invalid type "${e.i18n.constructor}" for "i18n" property of ${e.sourceSpan.toString()}. Expected a "Message"`);let t=e.i18n,i={},r={};return Object.keys(t.placeholders).forEach(o=>{let s=t.placeholders[o];if(o.startsWith(rR)){let a=o.trim(),l=this.bindingParser.parseInterpolationExpression(s.text,s.sourceSpan);i[a]=new cl(l,s.sourceSpan)}else r[o]=this._visitTextWithInterpolation(s.text,s.sourceSpan,null)}),new D1(i,r,e.sourceSpan,t)}visitExpansionCase(e){return null}visitComment(e){return this.options.collectCommentNodes&&this.commentNodes.push(new Fh(e.value||"",e.sourceSpan)),null}visitLetDeclaration(e,t){let i=this.bindingParser.parseBinding(e.value,!1,e.valueSpan,e.valueSpan.start.offset);return i.errors.length===0&&i.ast instanceof kn&&this.reportError("@let declaration value cannot be empty",e.valueSpan),new h_(e.name,i,e.sourceSpan,e.nameSpan,e.valueSpan)}visitComponent(e){let t=wp(e.i18n);if(t&&(this.inI18nBlock&&this.reportError("Cannot mark a component as translatable inside of a translatable section. Please remove the nested i18n marker.",e.sourceSpan),this.inI18nBlock=!0),e.tagName!==null&&O4.has(e.tagName))return this.reportError(`Tag name "${e.tagName}" cannot be used as a component tag`,e.startSourceSpan),null;let{attributes:i,boundEvents:r,references:o,templateVariables:s,elementHasInlineTemplate:a,parsedProperties:l,templateParsedProperties:c,i18nAttrsMeta:d}=this.prepareAttributes(e.attrs,!1);this.validateSelectorlessReferences(o);let p=this.extractDirectives(e),h;e.attrs.find(A=>A.name==="ngNonBindable")?h=it(u1,e.children).flat(1/0):h=it(this,e.children,e.children);let y=this.categorizePropertyAttributes(e.tagName,l,d),E=new Fu(e.componentName,e.tagName,e.fullName,i,y.bound,r,p,h,o,e.isSelfClosing,e.sourceSpan,e.startSourceSpan,e.endSourceSpan,e.i18n);return a&&(E=this.wrapInTemplate(E,c,s,d,!1,t)),t&&(this.inI18nBlock=!1),E}visitDirective(){return null}visitBlockParameter(){return null}visitBlock(e,t){let i=Array.isArray(t)?t.indexOf(e):-1;if(i===-1)throw new Error("Visitor invoked incorrectly. Expecting visitBlock to be invoked siblings array as its context");if(this.processedNodes.has(e))return null;let r=null;switch(e.name){case"defer":r=A4(e,this.findConnectedBlocks(i,t,Jv),this,this.bindingParser);break;case"switch":r=i4(e,this,this.bindingParser);break;case"for":r=n4(e,this.findConnectedBlocks(i,t,t1),this,this.bindingParser);break;case"if":r=t4(e,this.findConnectedBlocks(i,t,n1),this,this.bindingParser);break;default:let o;Jv(e.name)?(o=`@${e.name} block can only be used after an @defer block.`,this.processedNodes.add(e)):t1(e.name)?(o=`@${e.name} block can only be used after an @for block.`,this.processedNodes.add(e)):n1(e.name)?(o=`@${e.name} block can only be used after an @if or @else if block.`,this.processedNodes.add(e)):o=`Unrecognized block @${e.name}.`,r={node:new Yp(e.name,e.sourceSpan,e.nameSpan),errors:[new he(e.sourceSpan,o)]};break}return this.errors.push(...r.errors),r.node}findConnectedBlocks(e,t,i){let r=[];for(let o=e+1;o<t.length;o++){let s=t[o];if(!(s instanceof Td)){if(s instanceof Hs&&s.value.trim().length===0){this.processedNodes.add(s);continue}if(!(s instanceof hi)||!i(s.name))break;r.push(s),this.processedNodes.add(s)}}return r}categorizePropertyAttributes(e,t,i){let r=[],o=[];return t.forEach(s=>{let a=i[s.name];if(s.isLiteral)o.push(new ul(s.name,s.expression.source||"",s.sourceSpan,s.keySpan,s.valueSpan,a));else{let l=this.bindingParser.createBoundElementProperty(e,s,!0,!1);r.push(Xy.fromBoundElementProperty(l,a))}}),{bound:r,literal:o}}prepareAttributes(e,t){let i=[],r=[],o=[],s=[],a=[],l={},c=[],d=[],p=!1;for(let h of e){let y=!1,E=d1(h.name),A=!1;if(h.i18n&&(l[h.name]=h.i18n),E.startsWith(Ry)){p&&this.reportError("Can't have multiple template bindings on one element. Use only one attribute prefixed with *",h.sourceSpan),A=!0,p=!0;let R=h.value,k=E.substring(Ry.length),H=[],K=h.valueSpan?h.valueSpan.fullStart.offset:h.sourceSpan.fullStart.offset+h.name.length;this.bindingParser.parseInlineTemplateBinding(k,R,h.sourceSpan,K,[],c,H,!0),d.push(...H.map(z=>new Do(z.name,z.value,z.sourceSpan,z.keySpan,z.valueSpan)))}else y=this.parseAttribute(t,h,[],i,r,o,s);!y&&!A&&a.push(this.visitAttribute(h))}return{attributes:a,boundEvents:r,references:s,variables:o,templateVariables:d,elementHasInlineTemplate:p,parsedProperties:i,templateParsedProperties:c,i18nAttrsMeta:l}}parseAttribute(e,t,i,r,o,s,a){let l=d1(t.name),c=t.value,d=t.sourceSpan,p=t.valueSpan?t.valueSpan.fullStart.offset:d.fullStart.offset;function h(k,H,K){let z=t.name.length-l.length,oe=k.start.moveBy(H.length+z),pe=oe.moveBy(K.length);return new ve(oe,pe,oe,K)}let y=l.match(F4);if(y){if(y[o1]!=null){let k=y[Iu],H=h(d,y[o1],k);this.bindingParser.parsePropertyBinding(k,c,!1,!1,d,p,t.valueSpan,i,r,H)}else if(y[s1])if(e){let k=y[Iu],H=h(d,y[s1],k);this.parseVariable(k,c,d,H,t.valueSpan,s)}else this.reportError('"let-" is only supported on ng-template elements.',d);else if(y[a1]){let k=y[Iu],H=h(d,y[a1],k);this.parseReference(k,c,d,H,t.valueSpan,a)}else if(y[l1]){let k=[],H=y[Iu],K=h(d,y[l1],H);this.bindingParser.parseEvent(H,c,!1,d,t.valueSpan||d,i,k,K),Fy(k,o)}else if(y[c1]){let k=y[Iu],H=h(d,y[c1],k);this.bindingParser.parsePropertyBinding(k,c,!1,!0,d,p,t.valueSpan,i,r,H),this.parseAssignmentEvent(k,c,d,t.valueSpan,i,o,H,p)}else if(y[L4]){let k=h(d,"",l);this.bindingParser.parseLiteralAttr(l,c,d,p,t.valueSpan,i,r,k)}return!0}let E=null;if(l.startsWith(vo.BANANA_BOX.start)?E=vo.BANANA_BOX:l.startsWith(vo.PROPERTY.start)?E=vo.PROPERTY:l.startsWith(vo.EVENT.start)&&(E=vo.EVENT),E!==null&&l.endsWith(E.end)&&l.length>E.start.length+E.end.length){let k=l.substring(E.start.length,l.length-E.end.length),H=h(d,E.start,k);if(E.start===vo.BANANA_BOX.start)this.bindingParser.parsePropertyBinding(k,c,!1,!0,d,p,t.valueSpan,i,r,H),this.parseAssignmentEvent(k,c,d,t.valueSpan,i,o,H,p);else if(E.start===vo.PROPERTY.start)this.bindingParser.parsePropertyBinding(k,c,!1,!1,d,p,t.valueSpan,i,r,H);else{let K=[];this.bindingParser.parseEvent(k,c,!1,d,t.valueSpan||d,i,K,H),Fy(K,o)}return!0}let A=h(d,"",l);return this.bindingParser.parsePropertyInterpolation(l,c,d,t.valueSpan,i,r,A,t.valueTokens??null)}extractDirectives(e){let t=e instanceof Nn?e.tagName:e.name,i=[],r=new Set;for(let o of e.directives){let s=!1;for(let y of o.attrs)y.name.startsWith(Ry)?(s=!0,this.reportError(`Shorthand template syntax "${y.name}" is not supported inside a directive context`,y.sourceSpan)):V4.has(y.name)&&(s=!0,this.reportError(`Attribute "${y.name}" is not supported in a directive context`,y.sourceSpan));if(!s&&r.has(o.name)&&(s=!0,this.reportError(`Cannot apply directive "${o.name}" multiple times on the same element`,o.sourceSpan)),s)continue;let{attributes:a,parsedProperties:l,boundEvents:c,references:d,i18nAttrsMeta:p}=this.prepareAttributes(o.attrs,!1);this.validateSelectorlessReferences(d);let{bound:h}=this.categorizePropertyAttributes(t,l,p);for(let y of h)y.type!==$e.Property&&y.type!==$e.TwoWay&&(s=!0,this.reportError("Binding is not supported in a directive context",y.sourceSpan));s||(r.add(o.name),i.push(new I1(o.name,a,h,c,d,o.sourceSpan,o.startSourceSpan,o.endSourceSpan,void 0)))}return i}filterAnimationAttributes(e){return e.filter(t=>!t.name.startsWith("animate."))}filterAnimationInputs(e){return e.filter(t=>t.type!==$e.Animation)}wrapInTemplate(e,t,i,r,o,s){let a=this.categorizePropertyAttributes("ng-template",t,r),l=[];a.literal.forEach(h=>l.push(h)),a.bound.forEach(h=>l.push(h));let c={attributes:[],inputs:[],outputs:[]};(e instanceof gr||e instanceof Fu)&&(c.attributes.push(...this.filterAnimationAttributes(e.attributes)),c.inputs.push(...this.filterAnimationInputs(e.inputs)),c.outputs.push(...e.outputs));let d=o&&s?void 0:e.i18n,p;return e instanceof Fu?p=e.tagName:e instanceof ni?p=null:p=e.name,new ni(p,c.attributes,c.inputs,c.outputs,[],l,[e],[],i,!1,e.sourceSpan,e.startSourceSpan,e.endSourceSpan,d)}_visitTextWithInterpolation(e,t,i,r){let o=mT(e),s=this.bindingParser.parseInterpolation(o,t,i);return s?new cl(s,t,r):new _s(o,t)}parseVariable(e,t,i,r,o,s){e.indexOf("-")>-1?this.reportError('"-" is not allowed in variable names',i):e.length===0&&this.reportError("Variable does not have a name",i),s.push(new Do(e,t,i,r,o))}parseReference(e,t,i,r,o,s){e.indexOf("-")>-1?this.reportError('"-" is not allowed in reference names',i):e.length===0?this.reportError("Reference does not have a name",i):s.some(a=>a.name===e)&&this.reportError(`Reference "#${e}" is defined more than once`,i),s.push(new cd(e,t,i,r,o))}parseAssignmentEvent(e,t,i,r,o,s,a,l){let c=[];this.bindingParser.parseEvent(`${e}Change`,t,!0,i,r||i,o,c,a),Fy(c,s)}validateSelectorlessReferences(e){if(e.length===0)return;let t=new Set;for(let i of e)i.value.length>0?this.reportError("Cannot specify a value for a local reference in this context",i.valueSpan||i.sourceSpan):t.has(i.name)?this.reportError("Duplicate reference names are not allowed",i.sourceSpan):t.add(i.name)}reportError(e,t,i=xo.ERROR){this.errors.push(new he(t,e,i))}},Xv=class{visitElement(e){let t=VT(e);if(t.type===Xn.SCRIPT||t.type===Xn.STYLE||t.type===Xn.STYLESHEET)return null;let i=it(this,e.children,null);return new gr(e.name,it(this,e.attrs),[],[],[],i,[],e.isSelfClosing,e.sourceSpan,e.startSourceSpan,e.endSourceSpan,e.isVoid)}visitComment(e){return null}visitAttribute(e){return new ul(e.name,e.value,e.sourceSpan,e.keySpan,e.valueSpan,e.i18n)}visitText(e){return new _s(e.value,e.sourceSpan)}visitExpansion(e){return null}visitExpansionCase(e){return null}visitBlock(e,t){let i=[new _s(e.startSourceSpan.toString(),e.startSourceSpan),...it(this,e.children)];return e.endSourceSpan!==null&&i.push(new _s(e.endSourceSpan.toString(),e.endSourceSpan)),i}visitBlockParameter(e,t){return null}visitLetDeclaration(e,t){return new _s(`@let ${e.name} = ${e.value};`,e.sourceSpan)}visitComponent(e,t){let i=it(this,e.children,null);return new gr(e.fullName,it(this,e.attrs),[],[],[],i,[],e.isSelfClosing,e.sourceSpan,e.startSourceSpan,e.endSourceSpan,!1)}visitDirective(e,t){return null}},u1=new Xv;function d1(n){return/^data-/i.test(n)?n.substring(5):n}function Fy(n,e){e.push(...n.map(t=>Zy.fromParsedEvent(t)))}function U4(n){return n.children.length!==1||!(n.children[0]instanceof Hs)?null:n.children[0].value}var $4=[" ",`
`,"\r","	"];function H4(n,e,t={}){let{interpolationConfig:i,preserveWhitespaces:r,enableI18nLegacyMessageIdFormat:o}=t,s=t.enableSelectorless??!1,a=kh(i,s),c=new Gv().parse(n,e,Z(P({leadingTriviaChars:$4},t),{tokenizeExpansionForms:!0,tokenizeBlocks:t.enableBlockSyntax??!0,tokenizeLet:t.enableLetSyntax??!0,selectorlessEnabled:s}));if(!t.alwaysAttemptHtmlToR3AstConversion&&c.errors&&c.errors.length>0){let oe={interpolationConfig:i,preserveWhitespaces:r,errors:c.errors,nodes:[],styleUrls:[],styles:[],ngContentSelectors:[]};return t.collectCommentNodes&&(oe.commentNodes=[]),oe}let d=c.rootNodes,p=!(t.preserveSignificantWhitespace??!0),h=new Ch(i,!r,o,void 0,t.preserveSignificantWhitespace,p),y=h.visitAllWithErrors(d);if(!t.alwaysAttemptHtmlToR3AstConversion&&y.errors&&y.errors.length>0){let oe={interpolationConfig:i,preserveWhitespaces:r,errors:y.errors,nodes:[],styleUrls:[],styles:[],ngContentSelectors:[]};return t.collectCommentNodes&&(oe.commentNodes=[]),oe}d=y.rootNodes,r||(d=it(new _h(!0,void 0,!1),d),h.hasI18nMeta&&(d=it(new Ch(i,!1,void 0,void 0,!0,p),d)));let{nodes:E,errors:A,styleUrls:R,styles:k,ngContentSelectors:H,commentNodes:K}=B4(d,a,{collectCommentNodes:!!t.collectCommentNodes});A.push(...c.errors,...y.errors);let z={interpolationConfig:i,preserveWhitespaces:r,errors:A.length>0?A:null,nodes:E,styleUrls:R,styles:k,ngContentSelectors:H};return t.collectCommentNodes&&(z.commentNodes=K),z}var q4=new Cl;function kh(n=ur,e=!1){return new Wv(new wh(new Ad,e),n,q4,[])}var UT="%COMP%",G4=`_nghost-${UT}`,W4=`_ngcontent-${UT}`;function $T(n,e,t){let i=new Mo,r=c_(n.selector);return i.set("type",n.type.value),r.length>0&&i.set("selectors",Ka(r)),n.queries.length>0&&i.set("contentQueries",P8(n.queries,e,n.name)),n.viewQueries.length&&i.set("viewQuery",N8(n.viewQueries,e,n.name)),i.set("hostBindings",Z4(n.host,n.typeSourceSpan,t,e,n.selector||"",n.name,i)),i.set("inputs",Wb(n.inputs,!0)),i.set("outputs",Wb(n.outputs)),n.exportAs!==null&&i.set("exportAs",Ge(n.exportAs.map(o=>L(o)))),n.isStandalone===!1&&i.set("standalone",L(!1)),n.isSignal&&i.set("signals",L(!0)),i}function HT(n,e){let t=[],i=e.providers,r=e.viewProviders;if(i||r){let o=[i||new zi([])];r&&o.push(r),t.push(ce(D.ProvidersFeature).callFn(o))}if(e.hostDirectives?.length&&t.push(ce(D.HostDirectivesFeature).callFn([rU(e.hostDirectives)])),e.usesInheritance&&t.push(ce(D.InheritDefinitionFeature)),e.fullInheritance&&t.push(ce(D.CopyDefinitionFeature)),e.lifecycle.usesOnChanges&&t.push(ce(D.NgOnChangesFeature)),"externalStyles"in e&&e.externalStyles?.length){let o=e.externalStyles.map(s=>L(s));t.push(ce(D.ExternalStylesFeature).callFn([Ge(o)]))}t.length&&n.set("features",Ge(t))}function z4(n,e,t){let i=$T(n,e,t);HT(i,n);let r=ce(D.defineDirective).callFn([i.toLiteralMap()],void 0,!0),o=X4(n);return{expression:r,type:o,statements:[]}}function j4(n,e,t){let i=$T(n,e,t);HT(i,n);let r=n.selector&&il.parse(n.selector),o=r&&r[0];if(o){let E=o.getAttrs();E.length&&i.set("attrs",e.getConstLiteral(Ge(E.map(A=>A!=null?L(A):L(void 0))),!0))}let s=n.name,a=null;if(n.defer.mode===1&&n.defer.dependenciesFn!==null){let E=`${s}_DeferFn`;e.statements.push(new Rt(E,n.defer.dependenciesFn,void 0,Qt.Final)),a=De(E)}let l=n.isStandalone&&!n.hasDirectiveDependencies?Mn.DomOnly:Mn.Full,c=l8(n.name,n.template.nodes,e,l,n.relativeContextFilePath,n.i18nUseExternalIds,n.defer,a,n.relativeTemplatePath,A8());IT(c,ne.Tmpl);let d=r8(c,e);if(c.contentSelectors!==null&&i.set("ngContentSelectors",c.contentSelectors),i.set("decls",L(c.root.decls)),i.set("vars",L(c.root.vars)),c.consts.length>0&&(c.constsInitializers.length>0?i.set("consts",ji([],[...c.constsInitializers,new Xt(Ge(c.consts))])):i.set("consts",Ge(c.consts))),i.set("template",d),n.declarationListEmitMode!==3&&n.declarations.length>0)i.set("dependencies",Y4(Ge(n.declarations.map(E=>E.type)),n.declarationListEmitMode));else if(n.declarationListEmitMode===3){let E=[n.type.value];n.rawImports&&E.push(n.rawImports),i.set("dependencies",ce(D.getComponentDepsFactory).callFn(E))}n.encapsulation===null&&(n.encapsulation=ps.Emulated);let p=!!n.externalStyles?.length;if(n.styles&&n.styles.length){let A=(n.encapsulation==ps.Emulated?iU(n.styles,W4,G4):n.styles).reduce((R,k)=>(k.trim().length>0&&R.push(e.getConstLiteral(L(k))),R),[]);A.length>0&&(p=!0,i.set("styles",Ge(A)))}!p&&n.encapsulation===ps.Emulated&&(n.encapsulation=ps.None),n.encapsulation!==ps.Emulated&&i.set("encapsulation",L(n.encapsulation)),n.animations!==null&&i.set("data",xn([{key:"animation",value:n.animations,quoted:!1}])),n.changeDetection!==null&&(typeof n.changeDetection=="number"&&n.changeDetection!==l_.Default?i.set("changeDetection",L(n.changeDetection)):typeof n.changeDetection=="object"&&i.set("changeDetection",n.changeDetection));let h=ce(D.defineComponent).callFn([i.toLiteralMap()],void 0,!0),y=K4(n);return{expression:h,type:y,statements:[]}}function K4(n){let e=qT(n);return e.push(e_(n.template.ngContentSelectors)),e.push(Zt(L(n.isStandalone))),e.push(GT(n)),n.isSignal&&e.push(Zt(L(n.isSignal))),Zt(ce(D.ComponentDeclaration,e))}function Y4(n,e){switch(e){case 0:return n;case 1:return ji([],n);case 2:let t=n.prop("map").callFn([ce(D.resolveForwardRef)]);return ji([],t);case 3:throw new Error("Unsupported with an array of pre-resolved dependencies")}}function J4(n){return Zt(L(n))}function Zv(n){let e=Object.keys(n).map(t=>{let i=Array.isArray(n[t])?n[t][0]:n[t];return{key:t,value:L(i),quoted:!0}});return xn(e)}function e_(n){return n.length>0?Zt(Ge(n.map(e=>L(e)))):fr}function qT(n){let e=n.selector!==null?n.selector.replace(/\n/g,""):null;return[Rh(n.type.type,n.typeArgumentCount),e!==null?J4(e):fr,n.exportAs!==null?e_(n.exportAs):fr,Zt(Q4(n)),Zt(Zv(n.outputs)),e_(n.queries.map(t=>t.propertyName))]}function Q4(n){return xn(Object.keys(n.inputs).map(e=>{let t=n.inputs[e],i=[{key:"alias",value:L(t.bindingPropertyName),quoted:!0},{key:"required",value:L(t.required),quoted:!0}];return t.isSignal&&i.push({key:"isSignal",value:L(t.isSignal),quoted:!0}),{key:e,value:xn(i),quoted:!0}}))}function X4(n){let e=qT(n);return e.push(fr),e.push(Zt(L(n.isStandalone))),e.push(GT(n)),n.isSignal&&e.push(Zt(L(n.isSignal))),Zt(ce(D.DirectiveDeclaration,e))}function Z4(n,e,t,i,r,o,s){let a=t.createBoundHostProperties(n.properties,e),l=t.createDirectiveHostEventAsts(n.listeners,e);n.specialAttributes.styleAttr&&(n.attributes.style=L(n.specialAttributes.styleAttr)),n.specialAttributes.classAttr&&(n.attributes.class=L(n.specialAttributes.classAttr));let c=c8({componentName:o,componentSelector:r,properties:a,events:l,attributes:n.attributes},t,i);IT(c,ne.Host),s.set("hostAttrs",c.root.attributes);let d=c.root.vars;return d!==null&&d>0&&s.set("hostVars",L(d)),o8(c)}var eU=/^(?:\[([^\]]+)\])|(?:\(([^\)]+)\))$/;function tU(n){let e={},t={},i={},r={};for(let o of Object.keys(n)){let s=n[o],a=o.match(eU);if(a===null)switch(o){case"class":if(typeof s!="string")throw new Error("Class binding must be string");r.classAttr=s;break;case"style":if(typeof s!="string")throw new Error("Style binding must be string");r.styleAttr=s;break;default:typeof s=="string"?e[o]=L(s):e[o]=s}else if(a[1]!=null){if(typeof s!="string")throw new Error("Property binding must be string");i[a[1]]=s}else if(a[2]!=null){if(typeof s!="string")throw new Error("Event binding must be string");t[a[2]]=s}}return{attributes:e,listeners:t,properties:i,specialAttributes:r}}function nU(n,e){let t=kh();return t.createDirectiveHostEventAsts(n.listeners,e),t.createBoundHostProperties(n.properties,e),t.errors}function iU(n,e,t){let i=new fv;return n.map(r=>i.shimCssText(r,e,t))}function GT(n){return n.hostDirectives?.length?Zt(Ge(n.hostDirectives.map(e=>xn([{key:"directive",value:Fd(e.directive.type),quoted:!1},{key:"inputs",value:Zv(e.inputs||{}),quoted:!1},{key:"outputs",value:Zv(e.outputs||{}),quoted:!1}])))):fr}function rU(n){let e=[],t=!1;for(let i of n){if(!i.inputs&&!i.outputs)e.push(i.directive.type);else{let r=[{key:"directive",value:i.directive.type,quoted:!1}];if(i.inputs){let o=f1(i.inputs);o&&r.push({key:"inputs",value:o,quoted:!1})}if(i.outputs){let o=f1(i.outputs);o&&r.push({key:"outputs",value:o,quoted:!1})}e.push(xn(r))}i.isForwardReference&&(t=!0)}return t?new So([],[new Xt(Ge(e))]):Ge(e)}function f1(n){let e=[];for(let t in n)n.hasOwnProperty(t)&&e.push(L(t),L(n[t]));return e.length>0?Ge(e):null}var t_=class extends id{visit(e){e instanceof Jn?this.visit(e.ast):e.visit(this)}visitElement(e){this.visitAllTemplateNodes(e.attributes),this.visitAllTemplateNodes(e.inputs),this.visitAllTemplateNodes(e.outputs),this.visitAllTemplateNodes(e.directives),this.visitAllTemplateNodes(e.references),this.visitAllTemplateNodes(e.children)}visitTemplate(e){this.visitAllTemplateNodes(e.attributes),this.visitAllTemplateNodes(e.inputs),this.visitAllTemplateNodes(e.outputs),this.visitAllTemplateNodes(e.directives),this.visitAllTemplateNodes(e.templateAttrs),this.visitAllTemplateNodes(e.variables),this.visitAllTemplateNodes(e.references),this.visitAllTemplateNodes(e.children)}visitContent(e){this.visitAllTemplateNodes(e.children)}visitBoundAttribute(e){this.visit(e.value)}visitBoundEvent(e){this.visit(e.handler)}visitBoundText(e){this.visit(e.value)}visitIcu(e){Object.keys(e.vars).forEach(t=>this.visit(e.vars[t])),Object.keys(e.placeholders).forEach(t=>this.visit(e.placeholders[t]))}visitDeferredBlock(e){e.visitAll(this)}visitDeferredTrigger(e){e instanceof qp&&this.visit(e.value)}visitDeferredBlockPlaceholder(e){this.visitAllTemplateNodes(e.children)}visitDeferredBlockError(e){this.visitAllTemplateNodes(e.children)}visitDeferredBlockLoading(e){this.visitAllTemplateNodes(e.children)}visitSwitchBlock(e){this.visit(e.expression),this.visitAllTemplateNodes(e.cases)}visitSwitchBlockCase(e){e.expression&&this.visit(e.expression),this.visitAllTemplateNodes(e.children)}visitForLoopBlock(e){e.item.visit(this),this.visitAllTemplateNodes(e.contextVariables),this.visit(e.expression),this.visitAllTemplateNodes(e.children),e.empty?.visit(this)}visitForLoopBlockEmpty(e){this.visitAllTemplateNodes(e.children)}visitIfBlock(e){this.visitAllTemplateNodes(e.branches)}visitIfBlockBranch(e){e.expression&&this.visit(e.expression),e.expressionAlias?.visit(this),this.visitAllTemplateNodes(e.children)}visitLetDeclaration(e){this.visit(e.value)}visitComponent(e){this.visitAllTemplateNodes(e.attributes),this.visitAllTemplateNodes(e.inputs),this.visitAllTemplateNodes(e.outputs),this.visitAllTemplateNodes(e.directives),this.visitAllTemplateNodes(e.references),this.visitAllTemplateNodes(e.children)}visitDirective(e){this.visitAllTemplateNodes(e.attributes),this.visitAllTemplateNodes(e.inputs),this.visitAllTemplateNodes(e.outputs),this.visitAllTemplateNodes(e.references)}visitVariable(e){}visitReference(e){}visitTextAttribute(e){}visitText(e){}visitUnknownBlock(e){}visitAllTemplateNodes(e){for(let t of e)this.visit(t)}};var n_=class{directiveMatcher;constructor(e){this.directiveMatcher=e}bind(e){if(!e.template&&!e.host)throw new Error("Empty bound targets are not supported");let t=new Map,i=[],r=new Set,o=new Map,s=new Map,a=new Map,l=new Map,c=new Map,d=new Map,p=new Set,h=new Set,y=[];if(e.template){let E=Mh.apply(e.template);oU(E,a),i_.apply(e.template,this.directiveMatcher,t,i,r,o,s),Nh.applyWithScope(e.template,E,l,c,d,p,h,y)}return e.host&&(t.set(e.host.node,e.host.directives),Nh.applyWithScope(e.host.node,Mh.apply(e.host.node),l,c,d,p,h,y)),new r_(e,t,i,r,o,s,l,c,d,a,p,h,y)}},Mh=class n{parentScope;rootNode;namedEntities=new Map;elementLikeInScope=new Set;childScopes=new Map;isDeferred;constructor(e,t){this.parentScope=e,this.rootNode=t,this.isDeferred=e!==null&&e.isDeferred?!0:t instanceof Ls}static newRootScope(){return new n(null,null)}static apply(e){let t=n.newRootScope();return t.ingest(e),t}ingest(e){e instanceof ni?(e.variables.forEach(t=>this.visitVariable(t)),e.children.forEach(t=>t.visit(this))):e instanceof xs?(e.expressionAlias!==null&&this.visitVariable(e.expressionAlias),e.children.forEach(t=>t.visit(this))):e instanceof dl?(this.visitVariable(e.item),e.contextVariables.forEach(t=>this.visitVariable(t)),e.children.forEach(t=>t.visit(this))):e instanceof ad||e instanceof ld||e instanceof Ls||e instanceof sd||e instanceof rd||e instanceof od||e instanceof fl?e.children.forEach(t=>t.visit(this)):e instanceof ud||e.forEach(t=>t.visit(this))}visitElement(e){this.visitElementLike(e)}visitTemplate(e){e.directives.forEach(t=>t.visit(this)),e.references.forEach(t=>this.visitReference(t)),this.ingestScopedNode(e)}visitVariable(e){this.maybeDeclare(e)}visitReference(e){this.maybeDeclare(e)}visitDeferredBlock(e){this.ingestScopedNode(e),e.placeholder?.visit(this),e.loading?.visit(this),e.error?.visit(this)}visitDeferredBlockPlaceholder(e){this.ingestScopedNode(e)}visitDeferredBlockError(e){this.ingestScopedNode(e)}visitDeferredBlockLoading(e){this.ingestScopedNode(e)}visitSwitchBlock(e){e.cases.forEach(t=>t.visit(this))}visitSwitchBlockCase(e){this.ingestScopedNode(e)}visitForLoopBlock(e){this.ingestScopedNode(e),e.empty?.visit(this)}visitForLoopBlockEmpty(e){this.ingestScopedNode(e)}visitIfBlock(e){e.branches.forEach(t=>t.visit(this))}visitIfBlockBranch(e){this.ingestScopedNode(e)}visitContent(e){this.ingestScopedNode(e)}visitLetDeclaration(e){this.maybeDeclare(e)}visitComponent(e){this.visitElementLike(e)}visitDirective(e){e.references.forEach(t=>this.visitReference(t))}visitBoundAttribute(e){}visitBoundEvent(e){}visitBoundText(e){}visitText(e){}visitTextAttribute(e){}visitIcu(e){}visitDeferredTrigger(e){}visitUnknownBlock(e){}visitElementLike(e){e.directives.forEach(t=>t.visit(this)),e.references.forEach(t=>this.visitReference(t)),e.children.forEach(t=>t.visit(this)),this.elementLikeInScope.add(e)}maybeDeclare(e){this.namedEntities.has(e.name)||this.namedEntities.set(e.name,e)}lookup(e){return this.namedEntities.has(e)?this.namedEntities.get(e):this.parentScope!==null?this.parentScope.lookup(e):null}getChildScope(e){let t=this.childScopes.get(e);if(t===void 0)throw new Error(`Assertion error: child scope for ${e} not found`);return t}ingestScopedNode(e){let t=new n(this,e);t.ingest(e),this.childScopes.set(e,t)}},i_=class n{directiveMatcher;directives;eagerDirectives;missingDirectives;bindings;references;isInDeferBlock=!1;constructor(e,t,i,r,o,s){this.directiveMatcher=e,this.directives=t,this.eagerDirectives=i,this.missingDirectives=r,this.bindings=o,this.references=s}static apply(e,t,i,r,o,s,a){new n(t,i,r,o,s,a).ingest(e)}ingest(e){e.forEach(t=>t.visit(this))}visitElement(e){this.visitElementOrTemplate(e)}visitTemplate(e){this.visitElementOrTemplate(e)}visitDeferredBlock(e){let t=this.isInDeferBlock;this.isInDeferBlock=!0,e.children.forEach(i=>i.visit(this)),this.isInDeferBlock=t,e.placeholder?.visit(this),e.loading?.visit(this),e.error?.visit(this)}visitDeferredBlockPlaceholder(e){e.children.forEach(t=>t.visit(this))}visitDeferredBlockError(e){e.children.forEach(t=>t.visit(this))}visitDeferredBlockLoading(e){e.children.forEach(t=>t.visit(this))}visitSwitchBlock(e){e.cases.forEach(t=>t.visit(this))}visitSwitchBlockCase(e){e.children.forEach(t=>t.visit(this))}visitForLoopBlock(e){e.item.visit(this),e.contextVariables.forEach(t=>t.visit(this)),e.children.forEach(t=>t.visit(this)),e.empty?.visit(this)}visitForLoopBlockEmpty(e){e.children.forEach(t=>t.visit(this))}visitIfBlock(e){e.branches.forEach(t=>t.visit(this))}visitIfBlockBranch(e){e.expressionAlias?.visit(this),e.children.forEach(t=>t.visit(this))}visitContent(e){e.children.forEach(t=>t.visit(this))}visitComponent(e){if(this.directiveMatcher instanceof Ep){let t=this.directiveMatcher.match(e.componentName);t.length>0?this.trackSelectorlessMatchesAndDirectives(e,t):this.missingDirectives.add(e.componentName)}e.directives.forEach(t=>t.visit(this)),e.children.forEach(t=>t.visit(this))}visitDirective(e){if(this.directiveMatcher instanceof Ep){let t=this.directiveMatcher.match(e.name);t.length>0?this.trackSelectorlessMatchesAndDirectives(e,t):this.missingDirectives.add(e.name)}}visitElementOrTemplate(e){if(this.directiveMatcher instanceof Cp){let t=[],i=aR(e);this.directiveMatcher.match(i,(r,o)=>t.push(...o)),this.trackSelectorBasedBindingsAndDirectives(e,t)}else e.references.forEach(t=>{t.value.trim()===""&&this.references.set(t,e)});e.directives.forEach(t=>t.visit(this)),e.children.forEach(t=>t.visit(this))}trackMatchedDirectives(e,t){t.length>0&&(this.directives.set(e,t),this.isInDeferBlock||this.eagerDirectives.push(...t))}trackSelectorlessMatchesAndDirectives(e,t){if(t.length===0)return;this.trackMatchedDirectives(e,t);let i=(r,o,s)=>{r[s].hasBindingPropertyName(o.name)&&this.bindings.set(o,r)};for(let r of t)e.inputs.forEach(o=>i(r,o,"inputs")),e.attributes.forEach(o=>i(r,o,"inputs")),e.outputs.forEach(o=>i(r,o,"outputs"));e.references.forEach(r=>this.references.set(r,{directive:t[0],node:e}))}trackSelectorBasedBindingsAndDirectives(e,t){this.trackMatchedDirectives(e,t),e.references.forEach(r=>{let o=null;if(r.value.trim()==="")o=t.find(s=>s.isComponent)||null;else if(o=t.find(s=>s.exportAs!==null&&s.exportAs.some(a=>a===r.value))||null,o===null)return;o!==null?this.references.set(r,{directive:o,node:e}):this.references.set(r,e)});let i=(r,o)=>{let s=t.find(l=>l[o].hasBindingPropertyName(r.name)),a=s!==void 0?s:e;this.bindings.set(r,a)};e.inputs.forEach(r=>i(r,"inputs")),e.attributes.forEach(r=>i(r,"inputs")),e instanceof ni&&e.templateAttrs.forEach(r=>i(r,"inputs")),e.outputs.forEach(r=>i(r,"outputs"))}visitVariable(e){}visitReference(e){}visitTextAttribute(e){}visitBoundAttribute(e){}visitBoundEvent(e){}visitBoundAttributeOrEvent(e){}visitText(e){}visitBoundText(e){}visitIcu(e){}visitDeferredTrigger(e){}visitUnknownBlock(e){}visitLetDeclaration(e){}},Nh=class n extends t_{bindings;symbols;usedPipes;eagerPipes;deferBlocks;nestingLevel;scope;rootNode;level;visitNode=e=>e.visit(this);constructor(e,t,i,r,o,s,a,l,c){super(),this.bindings=e,this.symbols=t,this.usedPipes=i,this.eagerPipes=r,this.deferBlocks=o,this.nestingLevel=s,this.scope=a,this.rootNode=l,this.level=c}static applyWithScope(e,t,i,r,o,s,a,l){let c=e instanceof ni?e:null;new n(i,r,s,a,l,o,t,c,0).ingest(e)}ingest(e){if(e instanceof ni)e.variables.forEach(this.visitNode),e.children.forEach(this.visitNode),this.nestingLevel.set(e,this.level);else if(e instanceof xs)e.expressionAlias!==null&&this.visitNode(e.expressionAlias),e.children.forEach(this.visitNode),this.nestingLevel.set(e,this.level);else if(e instanceof dl)this.visitNode(e.item),e.contextVariables.forEach(t=>this.visitNode(t)),e.trackBy.visit(this),e.children.forEach(this.visitNode),this.nestingLevel.set(e,this.level);else if(e instanceof Ls){if(this.scope.rootNode!==e)throw new Error(`Assertion error: resolved incorrect scope for deferred block ${e}`);this.deferBlocks.push([e,this.scope]),e.children.forEach(t=>t.visit(this)),this.nestingLevel.set(e,this.level)}else e instanceof ad||e instanceof ld||e instanceof sd||e instanceof rd||e instanceof od||e instanceof fl?(e.children.forEach(t=>t.visit(this)),this.nestingLevel.set(e,this.level)):e instanceof ud?this.nestingLevel.set(e,0):e.forEach(this.visitNode)}visitTemplate(e){e.inputs.forEach(this.visitNode),e.outputs.forEach(this.visitNode),e.directives.forEach(this.visitNode),e.templateAttrs.forEach(this.visitNode),e.references.forEach(this.visitNode),this.ingestScopedNode(e)}visitVariable(e){this.rootNode!==null&&this.symbols.set(e,this.rootNode)}visitReference(e){this.rootNode!==null&&this.symbols.set(e,this.rootNode)}visitDeferredBlock(e){this.ingestScopedNode(e),e.triggers.when?.value.visit(this),e.prefetchTriggers.when?.value.visit(this),e.hydrateTriggers.when?.value.visit(this),e.hydrateTriggers.never?.visit(this),e.placeholder&&this.visitNode(e.placeholder),e.loading&&this.visitNode(e.loading),e.error&&this.visitNode(e.error)}visitDeferredBlockPlaceholder(e){this.ingestScopedNode(e)}visitDeferredBlockError(e){this.ingestScopedNode(e)}visitDeferredBlockLoading(e){this.ingestScopedNode(e)}visitSwitchBlockCase(e){e.expression?.visit(this),this.ingestScopedNode(e)}visitForLoopBlock(e){e.expression.visit(this),this.ingestScopedNode(e),e.empty?.visit(this)}visitForLoopBlockEmpty(e){this.ingestScopedNode(e)}visitIfBlockBranch(e){e.expression?.visit(this),this.ingestScopedNode(e)}visitContent(e){this.ingestScopedNode(e)}visitLetDeclaration(e){super.visitLetDeclaration(e),this.rootNode!==null&&this.symbols.set(e,this.rootNode)}visitPipe(e,t){return this.usedPipes.add(e.name),this.scope.isDeferred||this.eagerPipes.add(e.name),super.visitPipe(e,t)}visitPropertyRead(e,t){return this.maybeMap(e,e.name),super.visitPropertyRead(e,t)}visitSafePropertyRead(e,t){return this.maybeMap(e,e.name),super.visitSafePropertyRead(e,t)}ingestScopedNode(e){let t=this.scope.getChildScope(e);new n(this.bindings,this.symbols,this.usedPipes,this.eagerPipes,this.deferBlocks,this.nestingLevel,t,e,this.level+1).ingest(e)}maybeMap(e,t){if(!(e.receiver instanceof mr)||e.receiver instanceof Rs)return;let i=this.scope.lookup(t);i!==null&&this.bindings.set(e,i)}},r_=class{target;directives;eagerDirectives;missingDirectives;bindings;references;exprTargets;symbols;nestingLevel;scopedNodeEntities;usedPipes;eagerPipes;deferredBlocks;deferredScopes;constructor(e,t,i,r,o,s,a,l,c,d,p,h,y){this.target=e,this.directives=t,this.eagerDirectives=i,this.missingDirectives=r,this.bindings=o,this.references=s,this.exprTargets=a,this.symbols=l,this.nestingLevel=c,this.scopedNodeEntities=d,this.usedPipes=p,this.eagerPipes=h,this.deferredBlocks=y.map(E=>E[0]),this.deferredScopes=new Map(y)}getEntitiesInScope(e){return this.scopedNodeEntities.get(e)??new Set}getDirectivesOfNode(e){return this.directives.get(e)||null}getReferenceTarget(e){return this.references.get(e)||null}getConsumerOfBinding(e){return this.bindings.get(e)||null}getExpressionTarget(e){return this.exprTargets.get(e)||null}getDefinitionNodeOfSymbol(e){return this.symbols.get(e)||null}getNestingLevel(e){return this.nestingLevel.get(e)||0}getUsedDirectives(){let e=new Set;return this.directives.forEach(t=>t.forEach(i=>e.add(i))),Array.from(e.values())}getEagerlyUsedDirectives(){let e=new Set(this.eagerDirectives);return Array.from(e.values())}getUsedPipes(){return Array.from(this.usedPipes)}getEagerlyUsedPipes(){return Array.from(this.eagerPipes)}getDeferBlocks(){return this.deferredBlocks}getDeferredTriggerTarget(e,t){if(!(t instanceof Wp)&&!(t instanceof zp)&&!(t instanceof Gp))return null;let i=t.reference;if(i===null){let o=null;if(e.placeholder!==null){for(let s of e.placeholder.children)if(!(s instanceof Fh)){if(o!==null)return null;s instanceof gr&&(o=s)}}return o}let r=this.findEntityInScope(e,i);if(r instanceof cd&&this.getDefinitionNodeOfSymbol(r)!==e){let o=this.getReferenceTarget(r);if(o!==null)return this.referenceTargetToElement(o)}if(e.placeholder!==null){let o=this.findEntityInScope(e.placeholder,i),s=o instanceof cd?this.getReferenceTarget(o):null;if(s!==null)return this.referenceTargetToElement(s)}return null}isDeferred(e){for(let t of this.deferredBlocks){if(!this.deferredScopes.has(t))continue;let i=[this.deferredScopes.get(t)];for(;i.length>0;){let r=i.pop();if(r.elementLikeInScope.has(e))return!0;i.push(...r.childScopes.values())}}return!1}referencedDirectiveExists(e){return!this.missingDirectives.has(e)}findEntityInScope(e,t){let i=this.getEntitiesInScope(e);for(let r of i)if(r.name===t)return r;return null}referenceTargetToElement(e){return e instanceof gr?e:e instanceof ni||e.node instanceof Fu||e.node instanceof I1||e.node instanceof ud?null:this.referenceTargetToElement(e.node)}};function oU(n,e){let t=new Map;function i(o){if(t.has(o.rootNode))return t.get(o.rootNode);let s=o.namedEntities,a;return o.parentScope!==null?a=new Map([...i(o.parentScope),...s]):a=new Map(s),t.set(o.rootNode,a),a}let r=[n];for(;r.length>0;){let o=r.pop();for(let s of o.childScopes.values())r.push(s);i(o)}for(let[o,s]of t)e.set(o,new Set(s.values()))}var o_=class{},s_=class{jitEvaluator;FactoryTarget=Ur;ResourceLoader=o_;elementSchemaRegistry=new Cl;constructor(e=new cv){this.jitEvaluator=e}compilePipe(e,t,i){let r={name:i.name,type:Nt(i.type),typeArgumentCount:0,deps:null,pipeName:i.pipeName,pure:i.pure,isStandalone:i.isStandalone},o=nS(r);return this.jitExpression(o.expression,e,t,[])}compilePipeDeclaration(e,t,i){let r=EU(i),o=nS(r);return this.jitExpression(o.expression,e,t,[])}compileInjectable(e,t,i){let{expression:r,statements:o}=zb({name:i.name,type:Nt(i.type),typeArgumentCount:i.typeArgumentCount,providedIn:v1(i.providedIn),useClass:Ga(i,"useClass"),useFactory:y1(i,"useFactory"),useValue:Ga(i,"useValue"),useExisting:Ga(i,"useExisting"),deps:i.deps?.map(KT)},!0);return this.jitExpression(r,e,t,o)}compileInjectableDeclaration(e,t,i){let{expression:r,statements:o}=zb({name:i.type.name,type:Nt(i.type),typeArgumentCount:0,providedIn:v1(i.providedIn),useClass:Ga(i,"useClass"),useFactory:y1(i,"useFactory"),useValue:Ga(i,"useValue"),useExisting:Ga(i,"useExisting"),deps:i.deps?.map(_1)},!0);return this.jitExpression(r,e,t,o)}compileInjector(e,t,i){let r={name:i.name,type:Nt(i.type),providers:i.providers&&i.providers.length>0?new Pe(i.providers):null,imports:i.imports.map(s=>new Pe(s))},o=tS(r);return this.jitExpression(o.expression,e,t,[])}compileInjectorDeclaration(e,t,i){let r=xU(i),o=tS(r);return this.jitExpression(o.expression,e,t,[])}compileNgModule(e,t,i){let r={kind:bo.Global,type:Nt(i.type),bootstrap:i.bootstrap.map(Nt),declarations:i.declarations.map(Nt),publicDeclarationTypes:null,imports:i.imports.map(Nt),includeImportTypes:!0,exports:i.exports.map(Nt),selectorScopeMode:nh.Inline,containsForwardDecls:!1,schemas:i.schemas?i.schemas.map(Nt):null,id:i.id?new Pe(i.id):null},o=kR(r);return this.jitExpression(o.expression,e,t,[])}compileNgModuleDeclaration(e,t,i){let r=MR(i);return this.jitExpression(r,e,t,[])}compileDirective(e,t,i){let r=m1(i);return this.compileDirectiveFromMeta(e,t,r)}compileDirectiveDeclaration(e,t,i){let r=this.createParseSourceSpan("Directive",i.type.name,t),o=zT(i,r);return this.compileDirectiveFromMeta(e,t,o)}compileDirectiveFromMeta(e,t,i){let r=new Np,o=kh(),s=z4(i,r,o);return this.jitExpression(s.expression,e,t,r.statements)}compileComponent(e,t,i){let{template:r,interpolation:o,defer:s}=jT(i.template,i.name,t,i.preserveWhitespaces,i.interpolation,void 0),a=Z(P(P({},i),m1(i)),{selector:i.selector||this.elementSchemaRegistry.getDefaultComponentElementName(),template:r,declarations:i.declarations.map(cU),declarationListEmitMode:0,defer:s,styles:[...i.styles,...r.styles],encapsulation:i.encapsulation,interpolation:o,changeDetection:i.changeDetection??null,animations:i.animations!=null?new Pe(i.animations):null,viewProviders:i.viewProviders!=null?new Pe(i.viewProviders):null,relativeContextFilePath:"",i18nUseExternalIds:!0,relativeTemplatePath:null}),l=`ng:///${i.name}.js`;return this.compileComponentFromMeta(e,l,a)}compileComponentDeclaration(e,t,i){let r=this.createParseSourceSpan("Component",i.type.name,t),o=lU(i,r,t);return this.compileComponentFromMeta(e,t,o)}compileComponentFromMeta(e,t,i){let r=new Np,o=kh(i.interpolation),s=j4(i,r,o);return this.jitExpression(s.expression,e,t,r.statements)}compileFactory(e,t,i){let r=hs({name:i.name,type:Nt(i.type),typeArgumentCount:i.typeArgumentCount,deps:fU(i.deps),target:i.target});return this.jitExpression(r.expression,e,t,r.statements)}compileFactoryDeclaration(e,t,i){let r=hs({name:i.type.name,type:Nt(i.type),typeArgumentCount:0,deps:Array.isArray(i.deps)?i.deps.map(_1):i.deps,target:i.target});return this.jitExpression(r.expression,e,t,r.statements)}createParseSourceSpan(e,t,i){return xR(e,t,i)}jitExpression(e,t,i,r){let o=[...r,new Rt("$def",e,void 0,Qt.Exported)];return this.jitEvaluator.evaluateStatements(i,o,new dv(t),!0).$def}};function p1(n){return Z(P({},n),{isSignal:n.isSignal,predicate:WT(n.predicate),read:n.read?new Pe(n.read):null,static:n.static,emitDistinctChangesOnly:n.emitDistinctChangesOnly})}function h1(n){return{propertyName:n.propertyName,first:n.first??!1,predicate:WT(n.predicate),descendants:n.descendants??!1,read:n.read?new Pe(n.read):null,static:n.static??!1,emitDistinctChangesOnly:n.emitDistinctChangesOnly??!0,isSignal:!!n.isSignal}}function WT(n){return Array.isArray(n)?n:p_(new Pe(n),1)}function m1(n){let e=CU(n.inputs||[]),t=Oy(n.outputs||[]),i=n.propMetadata,r={},o={};for(let a in i)i.hasOwnProperty(a)&&i[a].forEach(l=>{yU(l)?r[a]={bindingPropertyName:l.alias||a,classPropertyName:a,required:l.required||!1,isSignal:!!l.isSignal,transformFunction:l.transform!=null?new Pe(l.transform):null}:vU(l)&&(o[a]=l.alias||a)});let s=n.hostDirectives?.length?n.hostDirectives.map(a=>typeof a=="function"?{directive:Nt(a),inputs:null,outputs:null,isForwardReference:!1}:{directive:Nt(a.directive),isForwardReference:!1,inputs:a.inputs?Oy(a.inputs):null,outputs:a.outputs?Oy(a.outputs):null}):null;return Z(P({},n),{typeArgumentCount:0,typeSourceSpan:n.typeSourceSpan,type:Nt(n.type),deps:null,host:P({},hU(n.propMetadata,n.typeSourceSpan,n.host)),inputs:P(P({},e),r),outputs:P(P({},t),o),queries:n.queries.map(p1),providers:n.providers!=null?new Pe(n.providers):null,viewQueries:n.viewQueries.map(p1),fullInheritance:!1,hostDirectives:s})}function zT(n,e){let t=n.hostDirectives?.length?n.hostDirectives.map(i=>({directive:Nt(i.directive),isForwardReference:!1,inputs:i.inputs?g1(i.inputs):null,outputs:i.outputs?g1(i.outputs):null})):null;return{name:n.type.name,type:Nt(n.type),typeSourceSpan:e,selector:n.selector??null,inputs:n.inputs?_U(n.inputs):{},outputs:n.outputs??{},host:sU(n.host),queries:(n.queries??[]).map(h1),viewQueries:(n.viewQueries??[]).map(h1),providers:n.providers!==void 0?new Pe(n.providers):null,exportAs:n.exportAs??null,usesInheritance:n.usesInheritance??!1,lifecycle:{usesOnChanges:n.usesOnChanges??!1},deps:null,typeArgumentCount:0,fullInheritance:!1,isStandalone:n.isStandalone??T1(n.version),isSignal:n.isSignal??!1,hostDirectives:t}}function sU(n={}){return{attributes:aU(n.attributes??{}),listeners:n.listeners??{},properties:n.properties??{},specialAttributes:{classAttr:n.classAttribute,styleAttr:n.styleAttribute}}}function g1(n){let e=null;for(let t=1;t<n.length;t+=2)e=e||{},e[n[t-1]]=n[t];return e}function aU(n){let e={};for(let t of Object.keys(n))e[t]=new Pe(n[t]);return e}function lU(n,e,t){let{template:i,interpolation:r,defer:o}=jT(n.template,n.type.name,t,n.preserveWhitespaces??!1,n.interpolation,n.deferBlockDependencies),s=[];if(n.dependencies)for(let l of n.dependencies)switch(l.kind){case"directive":case"component":s.push(Ly(l));break;case"pipe":s.push(dU(l));break}else(n.components||n.directives||n.pipes)&&(n.components&&s.push(...n.components.map(l=>Ly(l,!0))),n.directives&&s.push(...n.directives.map(l=>Ly(l))),n.pipes&&s.push(...uU(n.pipes)));let a=s.some(({kind:l})=>l===ml.Directive||l===ml.NgModule);return Z(P({},zT(n,e)),{template:i,styles:n.styles??[],declarations:s,viewProviders:n.viewProviders!==void 0?new Pe(n.viewProviders):null,animations:n.animations!==void 0?new Pe(n.animations):null,defer:o,changeDetection:n.changeDetection??l_.Default,encapsulation:n.encapsulation??ps.Emulated,interpolation:r,declarationListEmitMode:2,relativeContextFilePath:"",i18nUseExternalIds:!0,relativeTemplatePath:null,hasDirectiveDependencies:a})}function cU(n){return Z(P({},n),{type:new Pe(n.type)})}function Ly(n,e=null){return{kind:ml.Directive,isComponent:e||n.kind==="component",selector:n.selector,type:new Pe(n.type),inputs:n.inputs??[],outputs:n.outputs??[],exportAs:n.exportAs??null}}function uU(n){return n?Object.keys(n).map(e=>({kind:ml.Pipe,name:e,type:new Pe(n[e])})):[]}function dU(n){return{kind:ml.Pipe,name:n.name,type:new Pe(n.type)}}function jT(n,e,t,i,r,o){let s=r?Qp.fromArray(r):ur,a=H4(n,t,{preserveWhitespaces:i,interpolationConfig:s});if(a.errors!==null){let d=a.errors.map(p=>p.toString()).join(", ");throw new Error(`Errors during JIT compilation of template for ${e}: ${d}`)}let c=new n_(null).bind({template:a.nodes});return{template:a,interpolation:s,defer:pU(c,o)}}function Ga(n,e){if(n.hasOwnProperty(e))return p_(new Pe(n[e]),0)}function y1(n,e){if(n.hasOwnProperty(e))return new Pe(n[e])}function v1(n){let e=typeof n=="function"?new Pe(n):new en(n??null);return p_(e,0)}function fU(n){return n==null?null:n.map(KT)}function KT(n){let e=n.attribute!=null,t=n.token===null?null:new Pe(n.token),i=e?new Pe(n.attribute):t;return YT(i,e,n.host,n.optional,n.self,n.skipSelf)}function _1(n){let e=n.attribute??!1,t=n.token===null?null:new Pe(n.token);return YT(t,e,n.host??!1,n.optional??!1,n.self??!1,n.skipSelf??!1)}function YT(n,e,t,i,r,o){let s=e?L("unknown"):null;return{token:n,attributeNameType:s,host:t,optional:i,self:r,skipSelf:o}}function pU(n,e){let t=n.getDeferBlocks(),i=new Map;for(let r=0;r<t.length;r++){let o=e?.[r];i.set(t[r],o?new Pe(o):null)}return{mode:0,blocks:i}}function hU(n,e,t){let i=tU(t||{}),r=nU(i,e);if(r.length)throw new Error(r.map(o=>o.msg).join(`
`));for(let o in n)n.hasOwnProperty(o)&&n[o].forEach(s=>{mU(s)?i.properties[s.hostPropertyName||o]=qP("this",o):gU(s)&&(i.listeners[s.eventName||o]=`${o}(${(s.args||[]).join(",")})`)});return i}function mU(n){return n.ngMetadataName==="HostBinding"}function gU(n){return n.ngMetadataName==="HostListener"}function yU(n){return n.ngMetadataName==="Input"}function vU(n){return n.ngMetadataName==="Output"}function _U(n){return Object.keys(n).reduce((e,t)=>{let i=n[t];return typeof i=="string"||Array.isArray(i)?e[t]=wU(i):e[t]={bindingPropertyName:i.publicName,classPropertyName:t,transformFunction:i.transformFunction!==null?new Pe(i.transformFunction):null,required:i.isRequired,isSignal:i.isSignal},e},{})}function wU(n){return typeof n=="string"?{bindingPropertyName:n,classPropertyName:n,transformFunction:null,required:!1,isSignal:!1}:{bindingPropertyName:n[0],classPropertyName:n[1],transformFunction:n[2]?new Pe(n[2]):null,required:!1,isSignal:!1}}function CU(n){return n.reduce((e,t)=>{if(typeof t=="string"){let[i,r]=JT(t);e[r]={bindingPropertyName:i,classPropertyName:r,required:!1,isSignal:!1,transformFunction:null}}else e[t.name]={bindingPropertyName:t.alias||t.name,classPropertyName:t.name,required:t.required||!1,isSignal:!1,transformFunction:t.transform!=null?new Pe(t.transform):null};return e},{})}function Oy(n){return n.reduce((e,t)=>{let[i,r]=JT(t);return e[r]=i,e},{})}function JT(n){let[e,t]=n.split(":",2).map(i=>i.trim());return[t??e,e]}function EU(n){return{name:n.type.name,type:Nt(n.type),typeArgumentCount:0,pipeName:n.name,deps:null,pure:n.pure??!0,isStandalone:n.isStandalone??T1(n.version)}}function xU(n){return{name:n.type.name,type:Nt(n.type),providers:n.providers!==void 0&&n.providers.length>0?new Pe(n.providers):null,imports:n.imports!==void 0?n.imports.map(e=>new Pe(e)):[]}}function bU(n){let e=n.ng||(n.ng={});e.\u0275compilerFacade=new s_}var a_=class{closedByParent=!1;implicitNamespacePrefix=null;isVoid=!1;ignoreFirstLf=!1;canSelfClose=!0;preventNamespaceInheritance=!1;requireExtraParent(e){return!1}isClosedByChild(e){return!1}getContentType(){return cr.PARSABLE_DATA}},cte=new a_;var ute=new qy("20.3.11");bU(Ru);var F_;function $h(){return F_}function wr(n){let e=F_;return F_=n,e}var QT=Symbol("NotFound");function Dl(n){return n===QT||n?.name==="\u0275NotFound"}var dn=null,Hh=!1,L_=1,SU=null,qt=Symbol("SIGNAL");function we(n){let e=dn;return dn=n,e}function zh(){return dn}var qs={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Al(n){if(Hh)throw new Error("");if(dn===null)return;dn.consumerOnSignalRead(n);let e=dn.producersTail;if(e!==void 0&&e.producer===n)return;let t,i=dn.recomputing;if(i&&(t=e!==void 0?e.nextProducer:dn.producers,t!==void 0&&t.producer===n)){dn.producersTail=t,t.lastReadVersion=n.version;return}let r=n.consumersTail;if(r!==void 0&&r.consumer===dn&&(!i||IU(r,dn)))return;let o=Nl(dn),s={producer:n,consumer:dn,nextProducer:t,prevConsumer:r,lastReadVersion:n.version,nextConsumer:void 0};dn.producersTail=s,e!==void 0?e.nextProducer=s:dn.producers=s,o&&tI(n,s)}function XT(){L_++}function jh(n){if(!(Nl(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===L_)){if(!n.producerMustRecompute(n)&&!Ml(n)){Wh(n);return}n.producerRecomputeValue(n),Wh(n)}}function O_(n){if(n.consumers===void 0)return;let e=Hh;Hh=!0;try{for(let t=n.consumers;t!==void 0;t=t.nextConsumer){let i=t.consumer;i.dirty||TU(i)}}finally{Hh=e}}function V_(){return dn?.consumerAllowSignalWrites!==!1}function TU(n){n.dirty=!0,O_(n),n.consumerMarkedDirty?.(n)}function Wh(n){n.dirty=!1,n.lastCleanEpoch=L_}function Gs(n){return n&&ZT(n),we(n)}function ZT(n){n.producersTail=void 0,n.recomputing=!0}function kl(n,e){we(e),n&&eI(n)}function eI(n){n.recomputing=!1;let e=n.producersTail,t=e!==void 0?e.nextProducer:n.producers;if(t!==void 0){if(Nl(n))do t=B_(t);while(t!==void 0);e!==void 0?e.nextProducer=void 0:n.producers=void 0}}function Ml(n){for(let e=n.producers;e!==void 0;e=e.nextProducer){let t=e.producer,i=e.lastReadVersion;if(i!==t.version||(jh(t),i!==t.version))return!0}return!1}function Ws(n){if(Nl(n)){let e=n.producers;for(;e!==void 0;)e=B_(e)}n.producers=void 0,n.producersTail=void 0,n.consumers=void 0,n.consumersTail=void 0}function tI(n,e){let t=n.consumersTail,i=Nl(n);if(t!==void 0?(e.nextConsumer=t.nextConsumer,t.nextConsumer=e):(e.nextConsumer=void 0,n.consumers=e),e.prevConsumer=t,n.consumersTail=e,!i)for(let r=n.producers;r!==void 0;r=r.nextProducer)tI(r.producer,r)}function B_(n){let e=n.producer,t=n.nextProducer,i=n.nextConsumer,r=n.prevConsumer;if(n.nextConsumer=void 0,n.prevConsumer=void 0,i!==void 0?i.prevConsumer=r:e.consumersTail=r,r!==void 0)r.nextConsumer=i;else if(e.consumers=i,!Nl(e)){let o=e.producers;for(;o!==void 0;)o=B_(o)}return t}function Nl(n){return n.consumerIsAlwaysLive||n.consumers!==void 0}function Kh(n){SU?.(n)}function IU(n,e){let t=e.producersTail;if(t!==void 0){let i=e.producers;do{if(i===n)return!0;if(i===t)break;i=i.nextProducer}while(i!==void 0)}return!1}function Yh(n,e){return Object.is(n,e)}function Ud(n,e){let t=Object.create(DU);t.computation=n,e!==void 0&&(t.equal=e);let i=()=>{if(jh(t),Al(t),t.value===Bd)throw t.error;return t.value};return i[qt]=t,Kh(t),i}var qh=Symbol("UNSET"),Gh=Symbol("COMPUTING"),Bd=Symbol("ERRORED"),DU=Z(P({},qs),{value:qh,dirty:!0,error:null,equal:Yh,kind:"computed",producerMustRecompute(n){return n.value===qh||n.value===Gh},producerRecomputeValue(n){if(n.value===Gh)throw new Error("");let e=n.value;n.value=Gh;let t=Gs(n),i,r=!1;try{i=n.computation(),we(null),r=e!==qh&&e!==Bd&&i!==Bd&&n.equal(e,i)}catch(o){i=Bd,n.error=o}finally{kl(n,t)}if(r){n.value=e;return}n.value=i,n.version++}});function AU(){throw new Error}var nI=AU;function iI(n){nI(n)}function U_(n){nI=n}var kU=null;function $_(n,e){let t=Object.create(Jh);t.value=n,e!==void 0&&(t.equal=e);let i=()=>rI(t);return i[qt]=t,Kh(t),[i,s=>Pl(t,s),s=>H_(t,s)]}function rI(n){return Al(n),n.value}function Pl(n,e){V_()||iI(n),n.equal(n.value,e)||(n.value=e,MU(n))}function H_(n,e){V_()||iI(n),Pl(n,e(n.value))}var Jh=Z(P({},qs),{equal:Yh,value:void 0,kind:"signal"});function MU(n){n.version++,XT(),O_(n),kU?.(n)}function Oe(n){return typeof n=="function"}function Qh(n){let t=n(i=>{Error.call(i),i.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Xh=Qh(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((i,r)=>`${r+1}) ${i.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function $d(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var bn=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:i}=this;if(Oe(i))try{i()}catch(o){e=o instanceof Xh?o.errors:[o]}let{_finalizers:r}=this;if(r){this._finalizers=null;for(let o of r)try{oI(o)}catch(s){e=e??[],s instanceof Xh?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Xh(e)}}add(e){var t;if(e&&e!==this)if(this.closed)oI(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&$d(t,e)}remove(e){let{_finalizers:t}=this;t&&$d(t,e),e instanceof n&&e._removeParent(this)}};bn.EMPTY=(()=>{let n=new bn;return n.closed=!0,n})();var q_=bn.EMPTY;function Zh(n){return n instanceof bn||n&&"closed"in n&&Oe(n.remove)&&Oe(n.add)&&Oe(n.unsubscribe)}function oI(n){Oe(n)?n():n.unsubscribe()}var Ji={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Rl={setTimeout(n,e,...t){let{delegate:i}=Rl;return i?.setTimeout?i.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Rl;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function em(n){Rl.setTimeout(()=>{let{onUnhandledError:e}=Ji;if(e)e(n);else throw n})}function Hd(){}var sI=G_("C",void 0,void 0);function aI(n){return G_("E",void 0,n)}function lI(n){return G_("N",n,void 0)}function G_(n,e,t){return{kind:n,value:e,error:t}}var zs=null;function Fl(n){if(Ji.useDeprecatedSynchronousErrorHandling){let e=!zs;if(e&&(zs={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:i}=zs;if(zs=null,t)throw i}}else n()}function cI(n){Ji.useDeprecatedSynchronousErrorHandling&&zs&&(zs.errorThrown=!0,zs.error=n)}var js=class extends bn{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Zh(e)&&e.add(this)):this.destination=RU}static create(e,t,i){return new Ll(e,t,i)}next(e){this.isStopped?z_(lI(e),this):this._next(e)}error(e){this.isStopped?z_(aI(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?z_(sI,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},NU=Function.prototype.bind;function W_(n,e){return NU.call(n,e)}var j_=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(i){tm(i)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(i){tm(i)}else tm(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){tm(t)}}},Ll=class extends js{constructor(e,t,i){super();let r;if(Oe(e)||!e)r={next:e??void 0,error:t??void 0,complete:i??void 0};else{let o;this&&Ji.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&W_(e.next,o),error:e.error&&W_(e.error,o),complete:e.complete&&W_(e.complete,o)}):r=e}this.destination=new j_(r)}};function tm(n){Ji.useDeprecatedSynchronousErrorHandling?cI(n):em(n)}function PU(n){throw n}function z_(n,e){let{onStoppedNotification:t}=Ji;t&&Rl.setTimeout(()=>t(n,e))}var RU={closed:!0,next:Hd,error:PU,complete:Hd};var Ol=typeof Symbol=="function"&&Symbol.observable||"@@observable";function uI(n){return n}function dI(n){return n.length===0?uI:n.length===1?n[0]:function(t){return n.reduce((i,r)=>r(i),t)}}var rt=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let i=new n;return i.source=this,i.operator=t,i}subscribe(t,i,r){let o=LU(t)?t:new Ll(t,i,r);return Fl(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(i){t.error(i)}}forEach(t,i){return i=fI(i),new i((r,o)=>{let s=new Ll({next:a=>{try{t(a)}catch(l){o(l),s.unsubscribe()}},error:o,complete:r});this.subscribe(s)})}_subscribe(t){var i;return(i=this.source)===null||i===void 0?void 0:i.subscribe(t)}[Ol](){return this}pipe(...t){return dI(t)(this)}toPromise(t){return t=fI(t),new t((i,r)=>{let o;this.subscribe(s=>o=s,s=>r(s),()=>i(o))})}}return n.create=e=>new n(e),n})();function fI(n){var e;return(e=n??Ji.Promise)!==null&&e!==void 0?e:Promise}function FU(n){return n&&Oe(n.next)&&Oe(n.error)&&Oe(n.complete)}function LU(n){return n&&n instanceof js||FU(n)&&Zh(n)}function OU(n){return Oe(n?.lift)}function Gt(n){return e=>{if(OU(e))return e.lift(function(t){try{return n(t,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function Wt(n,e,t,i,r){return new K_(n,e,t,i,r)}var K_=class extends js{constructor(e,t,i,r,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(l){e.error(l)}}:super._next,this._error=r?function(a){try{r(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};var pI=Qh(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var nn=(()=>{class n extends rt{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let i=new nm(this,this);return i.operator=t,i}_throwIfClosed(){if(this.closed)throw new pI}next(t){Fl(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let i of this.currentObservers)i.next(t)}})}error(t){Fl(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:i}=this;for(;i.length;)i.shift().error(t)}})}complete(){Fl(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:i,isStopped:r,observers:o}=this;return i||r?q_:(this.currentObservers=null,o.push(t),new bn(()=>{this.currentObservers=null,$d(o,t)}))}_checkFinalizedStatuses(t){let{hasError:i,thrownError:r,isStopped:o}=this;i?t.error(r):o&&t.complete()}asObservable(){let t=new rt;return t.source=this,t}}return n.create=(e,t)=>new nm(e,t),n})(),nm=class extends nn{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,i;(i=(t=this.destination)===null||t===void 0?void 0:t.next)===null||i===void 0||i.call(t,e)}error(e){var t,i;(i=(t=this.destination)===null||t===void 0?void 0:t.error)===null||i===void 0||i.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,i;return(i=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&i!==void 0?i:q_}};var qd=class extends nn{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:i}=this;if(e)throw t;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}};function hI(n){return n&&Oe(n.schedule)}function mI(n){return n[n.length-1]}function gI(n){return Oe(mI(n))?n.pop():void 0}function yI(n){return hI(mI(n))?n.pop():void 0}function _I(n,e,t,i){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{c(i.next(d))}catch(p){s(p)}}function l(d){try{c(i.throw(d))}catch(p){s(p)}}function c(d){d.done?o(d.value):r(d.value).then(a,l)}c((i=i.apply(n,e||[])).next())})}function vI(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ks(n){return this instanceof Ks?(this.v=n,this):new Ks(n)}function wI(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),r,o=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),r[Symbol.asyncIterator]=function(){return this},r;function s(y){return function(E){return Promise.resolve(E).then(y,p)}}function a(y,E){i[y]&&(r[y]=function(A){return new Promise(function(R,k){o.push([y,A,R,k])>1||l(y,A)})},E&&(r[y]=E(r[y])))}function l(y,E){try{c(i[y](E))}catch(A){h(o[0][3],A)}}function c(y){y.value instanceof Ks?Promise.resolve(y.value.v).then(d,p):h(o[0][2],y)}function d(y){l("next",y)}function p(y){l("throw",y)}function h(y,E){y(E),o.shift(),o.length&&l(o[0][0],o[0][1])}}function CI(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof vI=="function"?vI(n):n[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(o){t[o]=n[o]&&function(s){return new Promise(function(a,l){s=n[o](s),r(a,l,s.done,s.value)})}}function r(o,s,a,l){Promise.resolve(l).then(function(c){o({value:c,done:a})},s)}}var im=n=>n&&typeof n.length=="number"&&typeof n!="function";function rm(n){return Oe(n?.then)}function om(n){return Oe(n[Ol])}function sm(n){return Symbol.asyncIterator&&Oe(n?.[Symbol.asyncIterator])}function am(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function VU(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var lm=VU();function cm(n){return Oe(n?.[lm])}function um(n){return wI(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:i,done:r}=yield Ks(t.read());if(r)return yield Ks(void 0);yield yield Ks(i)}}finally{t.releaseLock()}})}function dm(n){return Oe(n?.getReader)}function zt(n){if(n instanceof rt)return n;if(n!=null){if(om(n))return BU(n);if(im(n))return UU(n);if(rm(n))return $U(n);if(sm(n))return EI(n);if(cm(n))return HU(n);if(dm(n))return qU(n)}throw am(n)}function BU(n){return new rt(e=>{let t=n[Ol]();if(Oe(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function UU(n){return new rt(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function $U(n){return new rt(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,em)})}function HU(n){return new rt(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function EI(n){return new rt(e=>{GU(n,e).catch(t=>e.error(t))})}function qU(n){return EI(um(n))}function GU(n,e){var t,i,r,o;return _I(this,void 0,void 0,function*(){try{for(t=CI(n);i=yield t.next(),!i.done;){let s=i.value;if(e.next(s),e.closed)return}}catch(s){r={error:s}}finally{try{i&&!i.done&&(o=t.return)&&(yield o.call(t))}finally{if(r)throw r.error}}e.complete()})}function Si(n,e,t,i=0,r=!1){let o=e.schedule(function(){t(),r?n.add(this.schedule(null,i)):this.unsubscribe()},i);if(n.add(o),!r)return o}function fm(n,e=0){return Gt((t,i)=>{t.subscribe(Wt(i,r=>Si(i,n,()=>i.next(r),e),()=>Si(i,n,()=>i.complete(),e),r=>Si(i,n,()=>i.error(r),e)))})}function pm(n,e=0){return Gt((t,i)=>{i.add(n.schedule(()=>t.subscribe(i),e))})}function xI(n,e){return zt(n).pipe(pm(e),fm(e))}function bI(n,e){return zt(n).pipe(pm(e),fm(e))}function SI(n,e){return new rt(t=>{let i=0;return e.schedule(function(){i===n.length?t.complete():(t.next(n[i++]),t.closed||this.schedule())})})}function TI(n,e){return new rt(t=>{let i;return Si(t,e,()=>{i=n[lm](),Si(t,e,()=>{let r,o;try{({value:r,done:o}=i.next())}catch(s){t.error(s);return}o?t.complete():t.next(r)},0,!0)}),()=>Oe(i?.return)&&i.return()})}function hm(n,e){if(!n)throw new Error("Iterable cannot be null");return new rt(t=>{Si(t,e,()=>{let i=n[Symbol.asyncIterator]();Si(t,e,()=>{i.next().then(r=>{r.done?t.complete():t.next(r.value)})},0,!0)})})}function II(n,e){return hm(um(n),e)}function DI(n,e){if(n!=null){if(om(n))return xI(n,e);if(im(n))return SI(n,e);if(rm(n))return bI(n,e);if(sm(n))return hm(n,e);if(cm(n))return TI(n,e);if(dm(n))return II(n,e)}throw am(n)}function Gd(n,e){return e?DI(n,e):zt(n)}function Vl(...n){let e=yI(n);return Gd(n,e)}function mm(n,e){let t=Oe(n)?n:()=>n,i=r=>r.error(t());return new rt(e?r=>e.schedule(i,0,r):i)}function Ft(n,e){return Gt((t,i)=>{let r=0;t.subscribe(Wt(i,o=>{i.next(n.call(e,o,r++))}))})}var{isArray:WU}=Array;function zU(n,e){return WU(e)?n(...e):n(e)}function AI(n){return Ft(e=>zU(n,e))}var{isArray:jU}=Array,{getPrototypeOf:KU,prototype:YU,keys:JU}=Object;function kI(n){if(n.length===1){let e=n[0];if(jU(e))return{args:e,keys:null};if(QU(e)){let t=JU(e);return{args:t.map(i=>e[i]),keys:t}}}return{args:n,keys:null}}function QU(n){return n&&typeof n=="object"&&KU(n)===YU}function MI(n,e){return n.reduce((t,i,r)=>(t[i]=e[r],t),{})}function NI(n,e,t,i,r,o,s,a){let l=[],c=0,d=0,p=!1,h=()=>{p&&!l.length&&!c&&e.complete()},y=A=>c<i?E(A):l.push(A),E=A=>{o&&e.next(A),c++;let R=!1;zt(t(A,d++)).subscribe(Wt(e,k=>{r?.(k),o?y(k):e.next(k)},()=>{R=!0},void 0,()=>{if(R)try{for(c--;l.length&&c<i;){let k=l.shift();s?Si(e,s,()=>E(k)):E(k)}h()}catch(k){e.error(k)}}))};return n.subscribe(Wt(e,y,()=>{p=!0,h()})),()=>{a?.()}}function gm(n,e,t=1/0){return Oe(e)?gm((i,r)=>Ft((o,s)=>e(i,o,r,s))(zt(n(i,r))),t):(typeof e=="number"&&(t=e),Gt((i,r)=>NI(i,r,n,t)))}function Y_(...n){let e=gI(n),{args:t,keys:i}=kI(n),r=new rt(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),l=s,c=s;for(let d=0;d<s;d++){let p=!1;zt(t[d]).subscribe(Wt(o,h=>{p||(p=!0,c--),a[d]=h},()=>l--,void 0,()=>{(!l||!p)&&(c||o.next(i?MI(i,a):a),o.complete())}))}});return e?r.pipe(AI(e)):r}function J_(n,e){return Gt((t,i)=>{let r=0;t.subscribe(Wt(i,o=>n.call(e,o,r++)&&i.next(o)))})}function ym(n){return Gt((e,t)=>{let i=null,r=!1,o;i=e.subscribe(Wt(t,void 0,void 0,s=>{o=zt(n(s,ym(n)(e))),i?(i.unsubscribe(),i=null,o.subscribe(t)):r=!0})),r&&(i.unsubscribe(),i=null,o.subscribe(t))})}function Q_(n,e){return Oe(e)?gm(n,e,1):gm(n,1)}function Bl(n){return Gt((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function X_(n,e){return Gt((t,i)=>{let r=null,o=0,s=!1,a=()=>s&&!r&&i.complete();t.subscribe(Wt(i,l=>{r?.unsubscribe();let c=0,d=o++;zt(n(l,d)).subscribe(r=Wt(i,p=>i.next(e?e(l,p,d,c++):p),()=>{r=null,a()}))},()=>{s=!0,a()}))})}function Z_(n){return Gt((e,t)=>{zt(n).subscribe(Wt(t,()=>t.complete(),Hd)),!t.closed&&e.subscribe(t)})}function PI(n){let e=we(null);try{return n()}finally{we(e)}}var RI=Z(P({},qs),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!0,dirty:!0,kind:"effect"});function FI(n){if(n.dirty=!1,n.version>0&&!Ml(n))return;n.version++;let e=Gs(n);try{n.cleanup(),n.fn()}finally{kl(n,e)}}var Cm="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",ae=class extends Error{code;constructor(e,t){super(Bo(e,t)),this.code=e}};function XU(n){return`NG0${Math.abs(n)}`}function Bo(n,e){return`${XU(n)}${e?": "+e:""}`}var Ii=globalThis;function Je(n){for(let e in n)if(n[e]===Je)return e;throw Error("")}function VI(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Zr(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(Zr).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let i=t.indexOf(`
`);return i>=0?t.slice(0,i):t}function Em(n,e){return n?e?`${n} ${e}`:n:e||""}var ZU=Je({__forward_ref__:Je});function li(n){return n.__forward_ref__=li,n.toString=function(){return Zr(this())},n}function rn(n){return uw(n)?n():n}function uw(n){return typeof n=="function"&&n.hasOwnProperty(ZU)&&n.__forward_ref__===li}function de(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Cr(n){return{providers:n.providers||[],imports:n.imports||[]}}function xm(n){return e$(n,bm)}function e$(n,e){return n.hasOwnProperty(e)&&n[e]||null}function t$(n){let e=n?.[bm]??null;return e||null}function tw(n){return n&&n.hasOwnProperty(_m)?n[_m]:null}var bm=Je({\u0275prov:Je}),_m=Je({\u0275inj:Je}),ye=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=de({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function dw(n){return n&&!!n.\u0275providers}var fw=Je({\u0275cmp:Je}),pw=Je({\u0275dir:Je}),hw=Je({\u0275pipe:Je}),mw=Je({\u0275mod:Je}),zd=Je({\u0275fac:Je}),Zs=Je({__NG_ELEMENT_ID__:Je}),LI=Je({__NG_ENV_ID__:Je});function Uo(n){return typeof n=="string"?n:n==null?"":String(n)}function BI(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Uo(n)}var UI=Je({ngErrorCode:Je}),n$=Je({ngErrorMessage:Je}),i$=Je({ngTokenPath:Je});function gw(n,e){return $I("",-200,e)}function Sm(n,e){throw new ae(-201,!1)}function $I(n,e,t){let i=new ae(e,n);return i[UI]=e,i[n$]=n,t&&(i[i$]=t),i}function r$(n){return n[UI]}var nw;function HI(){return nw}function Sn(n){let e=nw;return nw=n,e}function yw(n,e,t){let i=xm(n);if(i&&i.providedIn=="root")return i.value===void 0?i.value=i.factory():i.value;if(t&8)return null;if(e!==void 0)return e;Sm(n,"Injector")}var o$={},Ys=o$,s$="__NG_DI_FLAG__",iw=class{injector;constructor(e){this.injector=e}retrieve(e,t){let i=Js(t)||0;try{return this.injector.get(e,i&8?null:Ys,i)}catch(r){if(Dl(r))return r;throw r}}};function a$(n,e=0){let t=$h();if(t===void 0)throw new ae(-203,!1);if(t===null)return yw(n,void 0,e);{let i=l$(e),r=t.retrieve(n,i);if(Dl(r)){if(i.optional)return null;throw r}return r}}function Re(n,e=0){return(HI()||a$)(rn(n),e)}function F(n,e){return Re(n,Js(e))}function Js(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function l$(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function rw(n){let e=[];for(let t=0;t<n.length;t++){let i=rn(n[t]);if(Array.isArray(i)){if(i.length===0)throw new ae(900,!1);let r,o=0;for(let s=0;s<i.length;s++){let a=i[s],l=c$(a);typeof l=="number"?l===-1?r=a.token:o|=l:r=a}e.push(Re(r,o))}else e.push(Re(i))}return e}function c$(n){return n[s$]}function Oo(n,e){let t=n.hasOwnProperty(zd);return t?n[zd]:null}function qI(n,e,t){if(n.length!==e.length)return!1;for(let i=0;i<n.length;i++){let r=n[i],o=e[i];if(t&&(r=t(r),o=t(o)),o!==r)return!1}return!0}function GI(n){return n.flat(Number.POSITIVE_INFINITY)}function Tm(n,e){n.forEach(t=>Array.isArray(t)?Tm(t,e):e(t))}function vw(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Yd(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function WI(n,e,t,i){let r=n.length;if(r==e)n.push(t,i);else if(r===1)n.push(i,n[0]),n[0]=t;else{for(r--,n.push(n[r-1],n[r]);r>e;){let o=r-2;n[r]=n[o],r--}n[e]=t,n[e+1]=i}}function Im(n,e,t){let i=$l(n,e);return i>=0?n[i|1]=t:(i=~i,WI(n,i,e,t)),i}function Dm(n,e){let t=$l(n,e);if(t>=0)return n[t|1]}function $l(n,e){return u$(n,e,1)}function u$(n,e,t){let i=0,r=n.length>>t;for(;r!==i;){let o=i+(r-i>>1),s=n[o<<t];if(e===s)return o<<t;s>e?r=o:i=o+1}return~(r<<t)}var $o={},fn=[],Ho=new ye(""),_w=new ye("",-1),ww=new ye(""),jd=class{get(e,t=Ys){if(t===Ys){let r=$I("",-201);throw r.name="\u0275NotFound",r}return t}};function zI(n){return n[mw]||null}function ea(n){return n[fw]||null}function Cw(n){return n[pw]||null}function jI(n){return n[hw]||null}function Hl(n){return{\u0275providers:n}}function KI(...n){return{\u0275providers:Ew(!0,n),\u0275fromNgModule:!0}}function Ew(n,...e){let t=[],i=new Set,r,o=s=>{t.push(s)};return Tm(e,s=>{let a=s;wm(a,o,[],i)&&(r||=[],r.push(a))}),r!==void 0&&YI(r,o),t}function YI(n,e){for(let t=0;t<n.length;t++){let{ngModule:i,providers:r}=n[t];xw(r,o=>{e(o,i)})}}function wm(n,e,t,i){if(n=rn(n),!n)return!1;let r=null,o=tw(n),s=!o&&ea(n);if(!o&&!s){let l=n.ngModule;if(o=tw(l),o)r=l;else return!1}else{if(s&&!s.standalone)return!1;r=n}let a=i.has(r);if(s){if(a)return!1;if(i.add(r),s.dependencies){let l=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let c of l)wm(c,e,t,i)}}else if(o){if(o.imports!=null&&!a){i.add(r);let c;try{Tm(o.imports,d=>{wm(d,e,t,i)&&(c||=[],c.push(d))})}finally{}c!==void 0&&YI(c,e)}if(!a){let c=Oo(r)||(()=>new r);e({provide:r,useFactory:c,deps:fn},r),e({provide:ww,useValue:r,multi:!0},r),e({provide:Ho,useValue:()=>Re(r),multi:!0},r)}let l=o.providers;if(l!=null&&!a){let c=n;xw(l,d=>{e(d,c)})}}else return!1;return r!==n&&n.providers!==void 0}function xw(n,e){for(let t of n)dw(t)&&(t=t.\u0275providers),Array.isArray(t)?xw(t,e):e(t)}var d$=Je({provide:String,useValue:Je});function JI(n){return n!==null&&typeof n=="object"&&d$ in n}function f$(n){return!!(n&&n.useExisting)}function p$(n){return!!(n&&n.useFactory)}function Qs(n){return typeof n=="function"}function QI(n){return!!n.useClass}var Jd=new ye(""),vm={},OI={},ew;function Qd(){return ew===void 0&&(ew=new jd),ew}var On=class{},Xs=class extends On{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,i,r){super(),this.parent=t,this.source=i,this.scopes=r,sw(e,s=>this.processProvider(s)),this.records.set(_w,Ul(void 0,this)),r.has("environment")&&this.records.set(On,Ul(void 0,this));let o=this.records.get(Jd);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(ww,fn,{self:!0}))}retrieve(e,t){let i=Js(t)||0;try{return this.get(e,Ys,i)}catch(r){if(Dl(r))return r;throw r}}destroy(){Wd(this),this._destroyed=!0;let e=we(null);try{for(let i of this._ngOnDestroyHooks)i.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let i of t)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),we(e)}}onDestroy(e){return Wd(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Wd(this);let t=wr(this),i=Sn(void 0),r;try{return e()}finally{wr(t),Sn(i)}}get(e,t=Ys,i){if(Wd(this),e.hasOwnProperty(LI))return e[LI](this);let r=Js(i),o,s=wr(this),a=Sn(void 0);try{if(!(r&4)){let c=this.records.get(e);if(c===void 0){let d=v$(e)&&xm(e);d&&this.injectableDefInScope(d)?c=Ul(ow(e),vm):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c,r)}let l=r&2?Qd():this.parent;return t=r&8&&t===Ys?null:t,l.get(e,t)}catch(l){let c=r$(l);throw c===-200||c===-201?new ae(c,null):l}finally{Sn(a),wr(s)}}resolveInjectorInitializers(){let e=we(null),t=wr(this),i=Sn(void 0),r;try{let o=this.get(Ho,fn,{self:!0});for(let s of o)s()}finally{wr(t),Sn(i),we(e)}}toString(){let e=[],t=this.records;for(let i of t.keys())e.push(Zr(i));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=rn(e);let t=Qs(e)?e:rn(e&&e.provide),i=m$(e);if(!Qs(e)&&e.multi===!0){let r=this.records.get(t);r||(r=Ul(void 0,vm,!0),r.factory=()=>rw(r.multi),this.records.set(t,r)),t=e,r.multi.push(e)}this.records.set(t,i)}hydrate(e,t,i){let r=we(null);try{if(t.value===OI)throw gw(Zr(e));return t.value===vm&&(t.value=OI,t.value=t.factory(void 0,i)),typeof t.value=="object"&&t.value&&y$(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{we(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=rn(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function ow(n){let e=xm(n),t=e!==null?e.factory:Oo(n);if(t!==null)return t;if(n instanceof ye)throw new ae(204,!1);if(n instanceof Function)return h$(n);throw new ae(204,!1)}function h$(n){if(n.length>0)throw new ae(204,!1);let t=t$(n);return t!==null?()=>t.factory(n):()=>new n}function m$(n){if(JI(n))return Ul(void 0,n.useValue);{let e=bw(n);return Ul(e,vm)}}function bw(n,e,t){let i;if(Qs(n)){let r=rn(n);return Oo(r)||ow(r)}else if(JI(n))i=()=>rn(n.useValue);else if(p$(n))i=()=>n.useFactory(...rw(n.deps||[]));else if(f$(n))i=(r,o)=>Re(rn(n.useExisting),o!==void 0&&o&8?8:void 0);else{let r=rn(n&&(n.useClass||n.provide));if(g$(n))i=()=>new r(...rw(n.deps));else return Oo(r)||ow(r)}return i}function Wd(n){if(n.destroyed)throw new ae(205,!1)}function Ul(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function g$(n){return!!n.deps}function y$(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function v$(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function sw(n,e){for(let t of n)Array.isArray(t)?sw(t,e):t&&dw(t)?sw(t.\u0275providers,e):e(t)}function ql(n,e){let t;n instanceof Xs?(Wd(n),t=n):t=new iw(n);let i,r=wr(t),o=Sn(void 0);try{return e()}finally{wr(r),Sn(o)}}function XI(){return HI()!==void 0||$h()!=null}var Qi=0,ge=1,Ee=2,Lt=3,Di=4,Ai=5,Gl=6,Wl=7,wt=8,eo=9,Er=10,ot=11,zl=12,Sw=13,ta=14,ci=15,qo=16,na=17,xr=18,Xd=19,Tw=20,Xr=21,Am=22,to=23,ui=24,ia=25,ra=26,pt=27,ZI=1,Iw=6,Go=7,Zd=8,oa=9,mt=10;function br(n){return Array.isArray(n)&&typeof n[ZI]=="object"}function Xi(n){return Array.isArray(n)&&n[ZI]===!0}function Dw(n){return(n.flags&4)!==0}function Wo(n){return n.componentOffset>-1}function ef(n){return(n.flags&1)===1}function Sr(n){return!!n.template}function jl(n){return(n[Ee]&512)!==0}function sa(n){return(n[Ee]&256)===256}var Aw="svg",eD="math";function ki(n){for(;Array.isArray(n);)n=n[Qi];return n}function kw(n,e){return ki(e[n])}function Zi(n,e){return ki(e[n.index])}function tf(n,e){return n.data[e]}function nf(n,e){return n[e]}function Mw(n,e,t,i){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=i}function Mi(n,e){let t=e[n];return br(t)?t:t[Qi]}function tD(n){return(n[Ee]&4)===4}function km(n){return(n[Ee]&128)===128}function nD(n){return Xi(n[Lt])}function Tr(n,e){return e==null?null:n[e]}function Nw(n){n[na]=0}function Pw(n){n[Ee]&1024||(n[Ee]|=1024,km(n)&&zo(n))}function iD(n,e){for(;n>0;)e=e[ta],n--;return e}function rf(n){return!!(n[Ee]&9216||n[ui]?.dirty)}function Mm(n){n[Er].changeDetectionScheduler?.notify(8),n[Ee]&64&&(n[Ee]|=1024),rf(n)&&zo(n)}function zo(n){n[Er].changeDetectionScheduler?.notify(0);let e=Vo(n);for(;e!==null&&!(e[Ee]&8192||(e[Ee]|=8192,!km(e)));)e=Vo(e)}function Rw(n,e){if(sa(n))throw new ae(911,!1);n[Xr]===null&&(n[Xr]=[]),n[Xr].push(e)}function rD(n,e){if(n[Xr]===null)return;let t=n[Xr].indexOf(e);t!==-1&&n[Xr].splice(t,1)}function Vo(n){let e=n[Lt];return Xi(e)?e[Lt]:e}function Fw(n){return n[Wl]??=[]}function Lw(n){return n.cleanup??=[]}function oD(n,e,t,i){let r=Fw(e);r.push(t),n.firstCreatePass&&Lw(n).push(i,r.length-1)}var ke={lFrame:_D(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var aw=!1;function sD(){return ke.lFrame.elementDepthCount}function aD(){ke.lFrame.elementDepthCount++}function Ow(){ke.lFrame.elementDepthCount--}function Vw(){return ke.bindingsEnabled}function lD(){return ke.skipHydrationRootTNode!==null}function Bw(n){return ke.skipHydrationRootTNode===n}function Uw(){ke.skipHydrationRootTNode=null}function xe(){return ke.lFrame.lView}function gt(){return ke.lFrame.tView}function S(n){return ke.lFrame.contextLView=n,n[wt]}function T(n){return ke.lFrame.contextLView=null,n}function Kt(){let n=$w();for(;n!==null&&n.type===64;)n=n.parent;return n}function $w(){return ke.lFrame.currentTNode}function cD(){let n=ke.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Kl(n,e){let t=ke.lFrame;t.currentTNode=n,t.isParent=e}function Hw(){return ke.lFrame.isParent}function uD(){ke.lFrame.isParent=!1}function dD(){return ke.lFrame.contextLView}function qw(){return aw}function Yl(n){let e=aw;return aw=n,e}function of(){let n=ke.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function fD(){return ke.lFrame.bindingIndex}function pD(n){return ke.lFrame.bindingIndex=n}function jo(){return ke.lFrame.bindingIndex++}function Nm(n){let e=ke.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function hD(){return ke.lFrame.inI18n}function mD(n,e){let t=ke.lFrame;t.bindingIndex=t.bindingRootIndex=n,Pm(e)}function gD(){return ke.lFrame.currentDirectiveIndex}function Pm(n){ke.lFrame.currentDirectiveIndex=n}function yD(n){let e=ke.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function Rm(){return ke.lFrame.currentQueryIndex}function sf(n){ke.lFrame.currentQueryIndex=n}function _$(n){let e=n[ge];return e.type===2?e.declTNode:e.type===1?n[Ai]:null}function Gw(n,e,t){if(t&4){let r=e,o=n;for(;r=r.parent,r===null&&!(t&1);)if(r=_$(o),r===null||(o=o[ta],r.type&10))break;if(r===null)return!1;e=r,n=o}let i=ke.lFrame=vD();return i.currentTNode=e,i.lView=n,!0}function Fm(n){let e=vD(),t=n[ge];ke.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function vD(){let n=ke.lFrame,e=n===null?null:n.child;return e===null?_D(n):e}function _D(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function wD(){let n=ke.lFrame;return ke.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var Ww=wD;function Lm(){let n=wD();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function CD(n){return(ke.lFrame.contextLView=iD(n,ke.lFrame.contextLView))[wt]}function Ir(){return ke.lFrame.selectedIndex}function Ko(n){ke.lFrame.selectedIndex=n}function af(){let n=ke.lFrame;return tf(n.tView,n.selectedIndex)}function Yo(){ke.lFrame.currentNamespace=Aw}function Jl(){w$()}function w$(){ke.lFrame.currentNamespace=null}function ED(){return ke.lFrame.currentNamespace}var xD=!0;function Om(){return xD}function lf(n){xD=n}function lw(n,e=null,t=null,i){let r=zw(n,e,t,i);return r.resolveInjectorInitializers(),r}function zw(n,e=null,t=null,i,r=new Set){let o=[t||fn,KI(n)];return i=i||(typeof n=="object"?void 0:Zr(n)),new Xs(o,e||Qd(),i||null,r)}var jt=class n{static THROW_IF_NOT_FOUND=Ys;static NULL=new jd;static create(e,t){if(Array.isArray(e))return lw({name:""},t,e,"");{let i=e.name??"";return lw({name:i},e.parent,e.providers,i)}}static \u0275prov=de({token:n,providedIn:"any",factory:()=>Re(_w)});static __NG_ELEMENT_ID__=-1},on=new ye(""),ht=(()=>{class n{static __NG_ELEMENT_ID__=C$;static __NG_ENV_ID__=t=>t}return n})(),Kd=class extends ht{_lView;constructor(e){super(),this._lView=e}get destroyed(){return sa(this._lView)}onDestroy(e){let t=this._lView;return Rw(t,e),()=>rD(t,e)}};function C$(){return new Kd(xe())}var ai=class{_console=console;handleError(e){this._console.error("ERROR",e)}},Dr=new ye("",{providedIn:"root",factory:()=>{let n=F(On),e;return t=>{n.destroyed&&!e?setTimeout(()=>{throw t}):(e??=n.get(ai),e.handleError(t))}}}),bD={provide:Ho,useValue:()=>void F(ai),multi:!0};function jw(n){return typeof n=="function"&&n[qt]!==void 0}function I(n,e){let[t,i,r]=$_(n,e?.equal),o=t,s=o[qt];return o.set=i,o.update=r,o.asReadonly=Kw.bind(o),o}function Kw(){let n=this[qt];if(n.readonlyFn===void 0){let e=()=>this();e[qt]=n,n.readonlyFn=e}return n.readonlyFn}function Yw(n){return jw(n)&&typeof n.set=="function"}var Ql=(()=>{class n{view;node;constructor(t,i){this.view=t,this.node=i}static __NG_ELEMENT_ID__=E$}return n})();function E$(){return new Ql(xe(),Kt())}var Ti=class{},Xl=new ye("",{providedIn:"root",factory:()=>!1});var Jw=new ye(""),Vm=new ye(""),Jo=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new qd(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new rt(t=>{t.next(!1),t.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=de({token:n,providedIn:"root",factory:()=>new n})}return n})(),Zl=(()=>{class n{internalPendingTasks=F(Jo);scheduler=F(Ti);errorHandler=F(Dr);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){let i=this.add();t().catch(this.errorHandler).finally(i)}static \u0275prov=de({token:n,providedIn:"root",factory:()=>new n})}return n})();function aa(...n){}var cf=(()=>{class n{static \u0275prov=de({token:n,providedIn:"root",factory:()=>new cw})}return n})(),cw=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let t=e.zone,i=this.queues.get(t);i.has(e)&&(i.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let i=this.queues.get(t);i.has(e)||i.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[t,i]of this.queues)t===null?e||=this.flushQueue(i):e||=t.run(()=>this.flushQueue(i));e||(this.dirtyEffectCount=0)}}flushQueue(e){let t=!1;for(let i of e)i.dirty&&(this.dirtyEffectCount--,t=!0,i.run());return t}};function wf(n){return{toString:n}.toString()}function A$(n){return typeof n=="function"}var Ym=class{previousValue;currentValue;firstChange;constructor(e,t,i){this.previousValue=e,this.currentValue=t,this.firstChange=i}isFirstChange(){return this.firstChange}};function oA(n,e,t,i){e!==null?e.applyValueToInputSignal(e,i):n[t]=i}var sc=(()=>{let n=()=>sA;return n.ngInherit=!0,n})();function sA(n){return n.type.prototype.ngOnChanges&&(n.setInput=M$),k$}function k$(){let n=lA(this),e=n?.current;if(e){let t=n.previous;if(t===$o)n.previous=e;else for(let i in e)t[i]=e[i];n.current=null,this.ngOnChanges(e)}}function M$(n,e,t,i,r){let o=this.declaredInputs[i],s=lA(n)||N$(n,{previous:$o,current:null}),a=s.current||(s.current={}),l=s.previous,c=l[o];a[o]=new Ym(c&&c.currentValue,t,l===$o),oA(n,e,r,t)}var aA="__ngSimpleChanges__";function lA(n){return n[aA]||null}function N$(n,e){return n[aA]=e}var SD=[];var Ze=function(n,e=null,t){for(let i=0;i<SD.length;i++){let r=SD[i];r(n,e,t)}};function P$(n,e,t){let{ngOnChanges:i,ngOnInit:r,ngDoCheck:o}=e.type.prototype;if(i){let s=sA(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}r&&(t.preOrderHooks??=[]).push(0-n,r),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function R$(n,e){for(let t=e.directiveStart,i=e.directiveEnd;t<i;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:d}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),l&&(n.viewHooks??=[]).push(-t,l),c&&((n.viewHooks??=[]).push(t,c),(n.viewCheckHooks??=[]).push(t,c)),d!=null&&(n.destroyHooks??=[]).push(t,d)}}function Gm(n,e,t){cA(n,e,3,t)}function Wm(n,e,t,i){(n[Ee]&3)===t&&cA(n,e,t,i)}function Qw(n,e){let t=n[Ee];(t&3)===e&&(t&=16383,t+=1,n[Ee]=t)}function cA(n,e,t,i){let r=i!==void 0?n[na]&65535:0,o=i??-1,s=e.length-1,a=0;for(let l=r;l<s;l++)if(typeof e[l+1]=="number"){if(a=e[l],i!=null&&a>=i)break}else e[l]<0&&(n[na]+=65536),(a<o||o==-1)&&(F$(n,t,e,l),n[na]=(n[na]&4294901760)+l+2),l++}function TD(n,e){Ze(4,n,e);let t=we(null);try{e.call(n)}finally{we(t),Ze(5,n,e)}}function F$(n,e,t,i){let r=t[i]<0,o=t[i+1],s=r?-t[i]:t[i],a=n[s];r?n[Ee]>>14<n[na]>>16&&(n[Ee]&3)===e&&(n[Ee]+=16384,TD(a,o)):TD(a,o)}var tc=-1,ca=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,i,r){this.factory=e,this.name=r,this.canSeeViewProviders=t,this.injectImpl=i}};function L$(n){return(n.flags&8)!==0}function O$(n){return(n.flags&16)!==0}function V$(n,e,t){let i=0;for(;i<t.length;){let r=t[i];if(typeof r=="number"){if(r!==0)break;i++;let o=t[i++],s=t[i++],a=t[i++];n.setAttribute(e,s,a,o)}else{let o=r,s=t[++i];U$(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),i++}}return i}function B$(n){return n===3||n===4||n===6}function U$(n){return n.charCodeAt(0)===64}function nc(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let i=0;i<e.length;i++){let r=e[i];typeof r=="number"?t=r:t===0||(t===-1||t===2?ID(n,t,r,null,e[++i]):ID(n,t,r,null,null))}}return n}function ID(n,e,t,i,r){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){r!==null&&(n[o+1]=r);return}o++,r!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),r!==null&&n.splice(o++,0,r)}function uA(n){return n!==tc}function Jm(n){return n&32767}function $$(n){return n>>16}function Qm(n,e){let t=$$(n),i=e;for(;t>0;)i=i[ta],t--;return i}var lC=!0;function Xm(n){let e=lC;return lC=n,e}var H$=256,dA=H$-1,fA=5,q$=0,Ar={};function G$(n,e,t){let i;typeof t=="string"?i=t.charCodeAt(0)||0:t.hasOwnProperty(Zs)&&(i=t[Zs]),i==null&&(i=t[Zs]=q$++);let r=i&dA,o=1<<r;e.data[n+(r>>fA)]|=o}function Zm(n,e){let t=pA(n,e);if(t!==-1)return t;let i=e[ge];i.firstCreatePass&&(n.injectorIndex=e.length,Xw(i.data,n),Xw(e,null),Xw(i.blueprint,null));let r=KC(n,e),o=n.injectorIndex;if(uA(r)){let s=Jm(r),a=Qm(r,e),l=a[ge].data;for(let c=0;c<8;c++)e[o+c]=a[s+c]|l[s+c]}return e[o+8]=r,o}function Xw(n,e){n.push(0,0,0,0,0,0,0,0,e)}function pA(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function KC(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,i=null,r=e;for(;r!==null;){if(i=vA(r),i===null)return tc;if(t++,r=r[ta],i.injectorIndex!==-1)return i.injectorIndex|t<<16}return tc}function cC(n,e,t){G$(n,e,t)}function hA(n,e,t){if(t&8||n!==void 0)return n;Sm(e,"NodeInjector")}function mA(n,e,t,i){if(t&8&&i===void 0&&(i=null),(t&3)===0){let r=n[eo],o=Sn(void 0);try{return r?r.get(e,i,t&8):yw(e,i,t&8)}finally{Sn(o)}}return hA(i,e,t)}function gA(n,e,t,i=0,r){if(n!==null){if(e[Ee]&2048&&!(i&2)){let s=K$(n,e,t,i,Ar);if(s!==Ar)return s}let o=yA(n,e,t,i,Ar);if(o!==Ar)return o}return mA(e,t,i,r)}function yA(n,e,t,i,r){let o=z$(t);if(typeof o=="function"){if(!Gw(e,n,i))return i&1?hA(r,t,i):mA(e,t,i,r);try{let s;if(s=o(i),s==null&&!(i&8))Sm(t);else return s}finally{Ww()}}else if(typeof o=="number"){let s=null,a=pA(n,e),l=tc,c=i&1?e[ci][Ai]:null;for((a===-1||i&4)&&(l=a===-1?KC(n,e):e[a+8],l===tc||!AD(i,!1)?a=-1:(s=e[ge],a=Jm(l),e=Qm(l,e)));a!==-1;){let d=e[ge];if(DD(o,a,d.data)){let p=W$(a,e,t,s,i,c);if(p!==Ar)return p}l=e[a+8],l!==tc&&AD(i,e[ge].data[a+8]===c)&&DD(o,a,e)?(s=d,a=Jm(l),e=Qm(l,e)):a=-1}}return r}function W$(n,e,t,i,r,o){let s=e[ge],a=s.data[n+8],l=i==null?Wo(a)&&lC:i!=s&&(a.type&3)!==0,c=r&1&&o===a,d=zm(a,s,t,l,c);return d!==null?ff(e,s,d,a,r):Ar}function zm(n,e,t,i,r){let o=n.providerIndexes,s=e.data,a=o&1048575,l=n.directiveStart,c=n.directiveEnd,d=o>>20,p=i?a:a+d,h=r?a+d:c;for(let y=p;y<h;y++){let E=s[y];if(y<l&&t===E||y>=l&&E.type===t)return y}if(r){let y=s[l];if(y&&Sr(y)&&y.type===t)return l}return null}function ff(n,e,t,i,r){let o=n[t],s=e.data;if(o instanceof ca){let a=o;if(a.resolving){let y=BI(s[t]);throw gw(y)}let l=Xm(a.canSeeViewProviders);a.resolving=!0;let c=s[t].type||s[t],d,p=a.injectImpl?Sn(a.injectImpl):null,h=Gw(n,i,0);try{o=n[t]=a.factory(void 0,r,s,n,i),e.firstCreatePass&&t>=i.directiveStart&&P$(t,s[t],e)}finally{p!==null&&Sn(p),Xm(l),a.resolving=!1,Ww()}}return o}function z$(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(Zs)?n[Zs]:void 0;return typeof e=="number"?e>=0?e&dA:j$:e}function DD(n,e,t){let i=1<<n;return!!(t[e+(n>>fA)]&i)}function AD(n,e){return!(n&2)&&!(n&1&&e)}var la=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,i){return gA(this._tNode,this._lView,e,Js(i),t)}};function j$(){return new la(Kt(),xe())}function Zo(n){return wf(()=>{let e=n.prototype.constructor,t=e[zd]||uC(e),i=Object.prototype,r=Object.getPrototypeOf(n.prototype).constructor;for(;r&&r!==i;){let o=r[zd]||uC(r);if(o&&o!==t)return o;r=Object.getPrototypeOf(r)}return o=>new o})}function uC(n){return uw(n)?()=>{let e=uC(rn(n));return e&&e()}:Oo(n)}function K$(n,e,t,i,r){let o=n,s=e;for(;o!==null&&s!==null&&s[Ee]&2048&&!jl(s);){let a=yA(o,s,t,i|2,Ar);if(a!==Ar)return a;let l=o.parent;if(!l){let c=s[Tw];if(c){let d=c.get(t,Ar,i);if(d!==Ar)return d}l=vA(s),s=s[ta]}o=l}return r}function vA(n){let e=n[ge],t=e.type;return t===2?e.declTNode:t===1?n[Ai]:null}function Y$(){return ac(Kt(),xe())}function ac(n,e){return new Bn(Zi(n,e))}var Bn=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=Y$}return n})();function _A(n){return n instanceof Bn?n.nativeElement:n}function J$(){return this._results[Symbol.iterator]()}var eg=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new nn}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let i=GI(e);(this._changesDetected=!qI(this._results,i,t))&&(this._results=i,this.length=i.length,this.last=i[this.length-1],this.first=i[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=J$};function wA(n){return(n.flags&128)===128}var YC=(function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n})(YC||{}),CA=new Map,Q$=0;function X$(){return Q$++}function Z$(n){CA.set(n[Xd],n)}function dC(n){CA.delete(n[Xd])}var kD="__ngContext__";function ic(n,e){br(e)?(n[kD]=e[Xd],Z$(e)):n[kD]=e}function EA(n){return bA(n[zl])}function xA(n){return bA(n[Di])}function bA(n){for(;n!==null&&!Xi(n);)n=n[Di];return n}var fC;function JC(n){fC=n}function QC(){if(fC!==void 0)return fC;if(typeof document<"u")return document;throw new ae(210,!1)}var fg=new ye("",{providedIn:"root",factory:()=>e5}),e5="ng",pg=new ye(""),ro=new ye("",{providedIn:"platform",factory:()=>"unknown"});var hg=new ye("",{providedIn:"root",factory:()=>QC().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var t5="h",n5="b";var SA="r";var TA="di";var IA=!1,DA=new ye("",{providedIn:"root",factory:()=>IA});var i5=(n,e,t,i)=>{};function r5(n,e,t,i){i5(n,e,t,i)}function XC(n){return(n.flags&32)===32}var o5=()=>null;function AA(n,e,t=!1){return o5(n,e,t)}function kA(n,e){let t=n.contentQueries;if(t!==null){let i=we(null);try{for(let r=0;r<t.length;r+=2){let o=t[r],s=t[r+1];if(s!==-1){let a=n.data[s];sf(o),a.contentQueries(2,e[s],s)}}}finally{we(i)}}}function pC(n,e,t){sf(0);let i=we(null);try{e(n,t)}finally{we(i)}}function ZC(n,e,t){if(Dw(e)){let i=we(null);try{let r=e.directiveStart,o=e.directiveEnd;for(let s=r;s<o;s++){let a=n.data[s];if(a.contentQueries){let l=t[s];a.contentQueries(1,l,s)}}}finally{we(i)}}}var no=(function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n})(no||{}),Bm;function s5(){if(Bm===void 0&&(Bm=null,Ii.trustedTypes))try{Bm=Ii.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Bm}function mg(n){return s5()?.createHTML(n)||n}var Um;function MA(){if(Um===void 0&&(Um=null,Ii.trustedTypes))try{Um=Ii.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Um}function MD(n){return MA()?.createHTML(n)||n}function ND(n){return MA()?.createScriptURL(n)||n}var io=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Cm})`}},hC=class extends io{getTypeName(){return"HTML"}},mC=class extends io{getTypeName(){return"Style"}},gC=class extends io{getTypeName(){return"Script"}},yC=class extends io{getTypeName(){return"URL"}},vC=class extends io{getTypeName(){return"ResourceURL"}};function Ni(n){return n instanceof io?n.changingThisBreaksApplicationSecurity:n}function Mr(n,e){let t=NA(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${Cm})`)}return t===e}function NA(n){return n instanceof io&&n.getTypeName()||null}function eE(n){return new hC(n)}function tE(n){return new mC(n)}function nE(n){return new gC(n)}function iE(n){return new yC(n)}function rE(n){return new vC(n)}function a5(n){let e=new wC(n);return l5()?new _C(e):e}var _C=class{inertDocumentHelper;constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{let t=new window.DOMParser().parseFromString(mg(e),"text/html").body;return t===null?this.inertDocumentHelper.getInertBodyElement(e):(t.firstChild?.remove(),t)}catch{return null}}},wC=class{defaultDoc;inertDocument;constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){let t=this.inertDocument.createElement("template");return t.innerHTML=mg(e),t}};function l5(){try{return!!new window.DOMParser().parseFromString(mg(""),"text/html")}catch{return!1}}var c5=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Cf(n){return n=String(n),n.match(c5)?n:"unsafe:"+n}function oo(n){let e={};for(let t of n.split(","))e[t]=!0;return e}function Ef(...n){let e={};for(let t of n)for(let i in t)t.hasOwnProperty(i)&&(e[i]=!0);return e}var PA=oo("area,br,col,hr,img,wbr"),RA=oo("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),FA=oo("rp,rt"),u5=Ef(FA,RA),d5=Ef(RA,oo("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),f5=Ef(FA,oo("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),PD=Ef(PA,d5,f5,u5),LA=oo("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),p5=oo("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),h5=oo("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),m5=Ef(LA,p5,h5),g5=oo("script,style,template"),CC=class{sanitizedSomething=!1;buf=[];sanitizeChildren(e){let t=e.firstChild,i=!0,r=[];for(;t;){if(t.nodeType===Node.ELEMENT_NODE?i=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,i&&t.firstChild){r.push(t),t=_5(t);continue}for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let o=v5(t);if(o){t=o;break}t=r.pop()}}return this.buf.join("")}startElement(e){let t=RD(e).toLowerCase();if(!PD.hasOwnProperty(t))return this.sanitizedSomething=!0,!g5.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);let i=e.attributes;for(let r=0;r<i.length;r++){let o=i.item(r),s=o.name,a=s.toLowerCase();if(!m5.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let l=o.value;LA[a]&&(l=Cf(l)),this.buf.push(" ",s,'="',FD(l),'"')}return this.buf.push(">"),!0}endElement(e){let t=RD(e).toLowerCase();PD.hasOwnProperty(t)&&!PA.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(FD(e))}};function y5(n,e){return(n.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}function v5(n){let e=n.nextSibling;if(e&&n!==e.previousSibling)throw OA(e);return e}function _5(n){let e=n.firstChild;if(e&&y5(n,e))throw OA(e);return e}function RD(n){let e=n.nodeName;return typeof e=="string"?e:"FORM"}function OA(n){return new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`)}var w5=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,C5=/([^\#-~ |!])/g;function FD(n){return n.replace(/&/g,"&amp;").replace(w5,function(e){let t=e.charCodeAt(0),i=e.charCodeAt(1);return"&#"+((t-55296)*1024+(i-56320)+65536)+";"}).replace(C5,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var $m;function gg(n,e){let t=null;try{$m=$m||a5(n);let i=e?String(e):"";t=$m.getInertBodyElement(i);let r=5,o=i;do{if(r===0)throw new Error("Failed to sanitize html because the input is unstable");r--,i=o,o=t.innerHTML,t=$m.getInertBodyElement(i)}while(i!==o);let a=new CC().sanitizeChildren(LD(t)||t);return mg(a)}finally{if(t){let i=LD(t)||t;for(;i.firstChild;)i.firstChild.remove()}}}function LD(n){return"content"in n&&E5(n)?n.content:null}function E5(n){return n.nodeType===Node.ELEMENT_NODE&&n.nodeName==="TEMPLATE"}var Pi=(function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n})(Pi||{});function pa(n){let e=oE();return e?MD(e.sanitize(Pi.HTML,n)||""):Mr(n,"HTML")?MD(Ni(n)):gg(QC(),Uo(n))}function Qe(n){let e=oE();return e?e.sanitize(Pi.URL,n)||"":Mr(n,"URL")?Ni(n):Cf(Uo(n))}function ha(n){let e=oE();if(e)return ND(e.sanitize(Pi.RESOURCE_URL,n)||"");if(Mr(n,"ResourceURL"))return ND(Ni(n));throw new ae(904,!1)}function oE(){let n=xe();return n&&n[Er].sanitizer}var x5=/^>|^->|<!--|-->|--!>|<!-$/g,b5=/(<|>)/g,S5="\u200B$1\u200B";function T5(n){return n.replace(x5,e=>e.replace(b5,S5))}function xf(n){return n.ownerDocument.defaultView}function sE(n){return n.ownerDocument}function I5(n){return n instanceof Function?n():n}function D5(n,e,t){let i=n.length;for(;;){let r=n.indexOf(e,t);if(r===-1)return r;if(r===0||n.charCodeAt(r-1)<=32){let o=e.length;if(r+o===i||n.charCodeAt(r+o)<=32)return r}t=r+1}}var VA="ng-template";function A5(n,e,t,i){let r=0;if(i){for(;r<e.length&&typeof e[r]=="string";r+=2)if(e[r]==="class"&&D5(e[r+1].toLowerCase(),t,0)!==-1)return!0}else if(aE(n))return!1;if(r=e.indexOf(1,r),r>-1){let o;for(;++r<e.length&&typeof(o=e[r])=="string";)if(o.toLowerCase()===t)return!0}return!1}function aE(n){return n.type===4&&n.value!==VA}function k5(n,e,t){let i=n.type===4&&!t?VA:n.value;return e===i}function M5(n,e,t){let i=4,r=n.attrs,o=r!==null?R5(r):0,s=!1;for(let a=0;a<e.length;a++){let l=e[a];if(typeof l=="number"){if(!s&&!er(i)&&!er(l))return!1;if(s&&er(l))continue;s=!1,i=l|i&1;continue}if(!s)if(i&4){if(i=2|i&1,l!==""&&!k5(n,l,t)||l===""&&e.length===1){if(er(i))return!1;s=!0}}else if(i&8){if(r===null||!A5(n,r,l,t)){if(er(i))return!1;s=!0}}else{let c=e[++a],d=N5(l,r,aE(n),t);if(d===-1){if(er(i))return!1;s=!0;continue}if(c!==""){let p;if(d>o?p="":p=r[d+1].toLowerCase(),i&2&&c!==p){if(er(i))return!1;s=!0}}}}return er(i)||s}function er(n){return(n&1)===0}function N5(n,e,t,i){if(e===null)return-1;let r=0;if(i||!t){let o=!1;for(;r<e.length;){let s=e[r];if(s===n)return r;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++r];for(;typeof a=="string";)a=e[++r];continue}else{if(s===4)break;if(s===0){r+=4;continue}}r+=o?1:2}return-1}else return F5(e,n)}function P5(n,e,t=!1){for(let i=0;i<e.length;i++)if(M5(n,e[i],t))return!0;return!1}function R5(n){for(let e=0;e<n.length;e++){let t=n[e];if(B$(t))return e}return n.length}function F5(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let i=n[t];if(typeof i=="number")return-1;if(i===e)return t;t++}return-1}function OD(n,e){return n?":not("+e.trim()+")":e}function L5(n){let e=n[0],t=1,i=2,r="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(i&2){let a=n[++t];r+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else i&8?r+="."+s:i&4&&(r+=" "+s);else r!==""&&!er(s)&&(e+=OD(o,r),r=""),i=s,o=o||!er(i);t++}return r!==""&&(e+=OD(o,r)),e}function O5(n){return n.map(L5).join(",")}function V5(n){let e=[],t=[],i=1,r=2;for(;i<n.length;){let o=n[i];if(typeof o=="string")r===2?o!==""&&e.push(o,n[++i]):r===8&&t.push(o);else{if(!er(r))break;r=o}i++}return t.length&&e.push(1,...t),e}var Tn={};function B5(n,e){return n.createText(e)}function U5(n,e,t){n.setValue(e,t)}function $5(n,e){return n.createComment(T5(e))}function BA(n,e,t){return n.createElement(e,t)}function tg(n,e,t,i,r){n.insertBefore(e,t,i,r)}function UA(n,e,t){n.appendChild(e,t)}function VD(n,e,t,i,r){i!==null?tg(n,e,t,i,r):UA(n,e,t)}function $A(n,e,t,i){n.removeChild(null,e,t,i)}function H5(n,e,t){n.setAttribute(e,"style",t)}function q5(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function HA(n,e,t){let{mergedAttrs:i,classes:r,styles:o}=t;i!==null&&V$(n,e,i),r!==null&&q5(n,e,r),o!==null&&H5(n,e,o)}function lE(n,e,t,i,r,o,s,a,l,c,d){let p=pt+i,h=p+r,y=G5(p,h),E=typeof c=="function"?c():c;return y[ge]={type:n,blueprint:y,template:t,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:l,consts:E,incompleteFirstPass:!1,ssrId:d}}function G5(n,e){let t=[];for(let i=0;i<e;i++)t.push(i<n?null:Tn);return t}function W5(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=lE(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function cE(n,e,t,i,r,o,s,a,l,c,d){let p=e.blueprint.slice();return p[Qi]=r,p[Ee]=i|4|128|8|64|1024,(c!==null||n&&n[Ee]&2048)&&(p[Ee]|=2048),Nw(p),p[Lt]=p[ta]=n,p[wt]=t,p[Er]=s||n&&n[Er],p[ot]=a||n&&n[ot],p[eo]=l||n&&n[eo]||null,p[Ai]=o,p[Xd]=X$(),p[Gl]=d,p[Tw]=c,p[ci]=e.type==2?n[ci]:p,p}function z5(n,e,t){let i=Zi(e,n),r=W5(t),o=n[Er].rendererFactory,s=uE(n,cE(n,r,null,qA(t),i,e,null,o.createRenderer(i,t),null,null,null));return n[e.index]=s}function qA(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function GA(n,e,t,i){if(t===0)return-1;let r=e.length;for(let o=0;o<t;o++)e.push(i),n.blueprint.push(i),n.data.push(null);return r}function uE(n,e){return n[zl]?n[Sw][Di]=e:n[zl]=e,n[Sw]=e,e}function w(n=1){WA(gt(),xe(),Ir()+n,!1)}function WA(n,e,t,i){if(!i)if((e[Ee]&3)===3){let o=n.preOrderCheckHooks;o!==null&&Gm(e,o,t)}else{let o=n.preOrderHooks;o!==null&&Wm(e,o,0,t)}Ko(t)}var yg=(function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n})(yg||{});function EC(n,e,t,i){let r=we(null);try{let[o,s,a]=n.inputs[t],l=null;(s&yg.SignalBased)!==0&&(l=e[o][qt]),l!==null&&l.transformFn!==void 0?i=l.transformFn(i):a!==null&&(i=a.call(e,i)),n.setInput!==null?n.setInput(e,l,i,t,o):oA(e,l,o,i)}finally{we(r)}}var kr=(function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n})(kr||{}),j5;function dE(n,e){return j5(n,e)}var ua=new Set,vg=(function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n})(vg||{}),ma=new ye(""),BD=new Set;function es(n){BD.has(n)||(BD.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var zA=!1,xC=class extends nn{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,XI()&&(this.destroyRef=F(ht,{optional:!0})??void 0,this.pendingTasks=F(Jo,{optional:!0})??void 0)}emit(e){let t=we(null);try{super.next(e)}finally{we(t)}}subscribe(e,t,i){let r=e,o=t||(()=>null),s=i;if(e&&typeof e=="object"){let l=e;r=l.next?.bind(l),o=l.error?.bind(l),s=l.complete?.bind(l)}this.__isAsync&&(o=this.wrapInTimeout(o),r&&(r=this.wrapInTimeout(r)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:r,error:o,complete:s});return e instanceof bn&&e.add(a),a}wrapInTimeout(e){return t=>{let i=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{i!==void 0&&this.pendingTasks?.remove(i)}})}}},Vn=xC;function jA(n){let e,t;function i(){n=aa;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),i()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),i()})),()=>i()}function UD(n){return queueMicrotask(()=>n()),()=>{n=aa}}var fE="isAngularZone",ng=fE+"_ID",K5=0,Ct=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Vn(!1);onMicrotaskEmpty=new Vn(!1);onStable=new Vn(!1);onError=new Vn(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:i=!1,shouldCoalesceRunChangeDetection:r=!1,scheduleInRootZone:o=zA}=e;if(typeof Zone>"u")throw new ae(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!r&&i,s.shouldCoalesceRunChangeDetection=r,s.callbackScheduled=!1,s.scheduleInRootZone=o,Q5(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(fE)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new ae(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new ae(909,!1)}run(e,t,i){return this._inner.run(e,t,i)}runTask(e,t,i,r){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+r,e,Y5,aa,aa);try{return o.runTask(s,t,i)}finally{o.cancelTask(s)}}runGuarded(e,t,i){return this._inner.runGuarded(e,t,i)}runOutsideAngular(e){return this._outer.run(e)}},Y5={};function pE(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function J5(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){jA(()=>{n.callbackScheduled=!1,bC(n),n.isCheckStableRunning=!0,pE(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),bC(n)}function Q5(n){let e=()=>{J5(n)},t=K5++;n._inner=n._inner.fork({name:"angular",properties:{[fE]:!0,[ng]:t,[ng+t]:!0},onInvokeTask:(i,r,o,s,a,l)=>{if(X5(l))return i.invokeTask(o,s,a,l);try{return $D(n),i.invokeTask(o,s,a,l)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),HD(n)}},onInvoke:(i,r,o,s,a,l,c)=>{try{return $D(n),i.invoke(o,s,a,l,c)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!Z5(l)&&e(),HD(n)}},onHasTask:(i,r,o,s)=>{i.hasTask(o,s),r===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,bC(n),pE(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(i,r,o,s)=>(i.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function bC(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function $D(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function HD(n){n._nesting--,pE(n)}var pf=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Vn;onMicrotaskEmpty=new Vn;onStable=new Vn;onError=new Vn;run(e,t,i){return e.apply(t,i)}runGuarded(e,t,i){return e.apply(t,i)}runOutsideAngular(e){return e()}runTask(e,t,i,r){return e.apply(t,i)}};function X5(n){return KA(n,"__ignore_ng_zone__")}function Z5(n){return KA(n,"__scheduler_tick__")}function KA(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var hE=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=de({token:n,providedIn:"root",factory:()=>new n})}return n})(),YA=[0,1,2,3],JA=(()=>{class n{ngZone=F(Ct);scheduler=F(Ti);errorHandler=F(ai,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){F(ma,{optional:!0})}execute(){let t=this.sequences.size>0;t&&Ze(16),this.executing=!0;for(let i of YA)for(let r of this.sequences)if(!(r.erroredOrDestroyed||!r.hooks[i]))try{r.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=r.hooks[i];return o(r.pipelinedValue)},r.snapshot))}catch(o){r.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let i of this.sequences)i.afterRun(),i.once&&(this.sequences.delete(i),i.destroy());for(let i of this.deferredRegistrations)this.sequences.add(i);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),t&&Ze(17)}register(t){let{view:i}=t;i!==void 0?((i[ia]??=[]).push(t),zo(i),i[Ee]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,i){return i?i.run(vg.AFTER_NEXT_RENDER,t):t()}static \u0275prov=de({token:n,providedIn:"root",factory:()=>new n})}return n})(),ig=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,i,r,o,s=null){this.impl=e,this.hooks=t,this.view=i,this.once=r,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[ia];e&&(this.view[ia]=e.filter(t=>t!==this))}};function mE(n,e){let t=e?.injector??F(jt);return es("NgAfterNextRender"),tH(n,t,e,!0)}function eH(n){return n instanceof Function?[void 0,void 0,n,void 0]:[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function tH(n,e,t,i){let r=e.get(hE);r.impl??=e.get(JA);let o=e.get(ma,null,{optional:!0}),s=t?.manualCleanup!==!0?e.get(ht):null,a=e.get(Ql,null,{optional:!0}),l=new ig(r.impl,eH(n),a?.view,i,s,o?.snapshot(null));return r.impl.register(l),l}var QA=new ye("",{providedIn:"root",factory:()=>({queue:new Set,isScheduled:!1,scheduler:null})});function XA(n,e,t){let i=n.get(QA);if(Array.isArray(e))for(let r of e)i.queue.add(r),t?.detachedLeaveAnimationFns?.push(r);else i.queue.add(e),t?.detachedLeaveAnimationFns?.push(e);i.scheduler&&i.scheduler(n)}function nH(n,e){let t=n.get(QA);if(e.detachedLeaveAnimationFns){for(let i of e.detachedLeaveAnimationFns)t.queue.delete(i);e.detachedLeaveAnimationFns=void 0}}function iH(n,e){for(let[t,i]of e)XA(n,i.animateFns)}function qD(n,e,t,i){let r=n?.[ra]?.enter;e!==null&&r&&r.has(t.index)&&iH(i,r)}function ec(n,e,t,i,r,o,s,a){if(r!=null){let l,c=!1;Xi(r)?l=r:br(r)&&(c=!0,r=r[Qi]);let d=ki(r);n===0&&i!==null?(qD(a,i,o,t),s==null?UA(e,i,d):tg(e,i,d,s||null,!0)):n===1&&i!==null?(qD(a,i,o,t),tg(e,i,d,s||null,!0)):n===2?GD(a,o,t,p=>{$A(e,d,c,p)}):n===3&&GD(a,o,t,()=>{e.destroyNode(d)}),l!=null&&gH(e,n,t,l,o,i,s)}}function rH(n,e){ZA(n,e),e[Qi]=null,e[Ai]=null}function oH(n,e,t,i,r,o){i[Qi]=r,i[Ai]=e,wg(n,i,t,1,r,o)}function ZA(n,e){e[Er].changeDetectionScheduler?.notify(9),wg(n,e,e[ot],2,null,null)}function sH(n){let e=n[zl];if(!e)return Zw(n[ge],n);for(;e;){let t=null;if(br(e))t=e[zl];else{let i=e[mt];i&&(t=i)}if(!t){for(;e&&!e[Di]&&e!==n;)br(e)&&Zw(e[ge],e),e=e[Lt];e===null&&(e=n),br(e)&&Zw(e[ge],e),t=e&&e[Di]}e=t}}function gE(n,e){let t=n[oa],i=t.indexOf(e);t.splice(i,1)}function _g(n,e){if(sa(e))return;let t=e[ot];t.destroyNode&&wg(n,e,t,3,null,null),sH(e)}function Zw(n,e){if(sa(e))return;let t=we(null);try{e[Ee]&=-129,e[Ee]|=256,e[ui]&&Ws(e[ui]),cH(n,e),lH(n,e),e[ge].type===1&&e[ot].destroy();let i=e[qo];if(i!==null&&Xi(e[Lt])){i!==e[Lt]&&gE(i,e);let r=e[xr];r!==null&&r.detachView(n)}dC(e)}finally{we(t)}}function GD(n,e,t,i){let r=n?.[ra];if(r==null||r.leave==null||!r.leave.has(e.index))return i(!1);n&&ua.add(n),XA(t,()=>{if(r.leave&&r.leave.has(e.index)){let s=r.leave.get(e.index),a=[];if(s){for(let l=0;l<s.animateFns.length;l++){let c=s.animateFns[l],{promise:d}=c();a.push(d)}r.detachedLeaveAnimationFns=void 0}r.running=Promise.allSettled(a),aH(n,i)}else n&&ua.delete(n),i(!1)},r)}function aH(n,e){let t=n[ra]?.running;if(t){t.then(()=>{n[ra].running=void 0,ua.delete(n),e(!0)});return}e(!1)}function lH(n,e){let t=n.cleanup,i=e[Wl];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let a=t[s+3];a>=0?i[a]():i[-a].unsubscribe(),s+=2}else{let a=i[t[s+1]];t[s].call(a)}i!==null&&(e[Wl]=null);let r=e[Xr];if(r!==null){e[Xr]=null;for(let s=0;s<r.length;s++){let a=r[s];a()}}let o=e[to];if(o!==null){e[to]=null;for(let s of o)s.destroy()}}function cH(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let i=0;i<t.length;i+=2){let r=e[t[i]];if(!(r instanceof ca)){let o=t[i+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=r[o[s]],l=o[s+1];Ze(4,a,l);try{l.call(a)}finally{Ze(5,a,l)}}else{Ze(4,r,o);try{o.call(r)}finally{Ze(5,r,o)}}}}}function uH(n,e,t){return dH(n,e.parent,t)}function dH(n,e,t){let i=e;for(;i!==null&&i.type&168;)e=i,i=e.parent;if(i===null)return t[Qi];if(Wo(i)){let{encapsulation:r}=n.data[i.directiveStart+i.componentOffset];if(r===no.None||r===no.Emulated)return null}return Zi(i,t)}function fH(n,e,t){return hH(n,e,t)}function pH(n,e,t){return n.type&40?Zi(n,t):null}var hH=pH,WD;function yE(n,e,t,i){let r=uH(n,i,e),o=e[ot],s=i.parent||e[Ai],a=fH(s,i,e);if(r!=null)if(Array.isArray(t))for(let l=0;l<t.length;l++)VD(o,r,t[l],a,!1);else VD(o,r,t,a,!1);WD!==void 0&&WD(o,i,e,t,r)}function uf(n,e){if(e!==null){let t=e.type;if(t&3)return Zi(e,n);if(t&4)return SC(-1,n[e.index]);if(t&8){let i=e.child;if(i!==null)return uf(n,i);{let r=n[e.index];return Xi(r)?SC(-1,r):ki(r)}}else{if(t&128)return uf(n,e.next);if(t&32)return dE(e,n)()||ki(n[e.index]);{let i=ek(n,e);if(i!==null){if(Array.isArray(i))return i[0];let r=Vo(n[ci]);return uf(r,i)}else return uf(n,e.next)}}}return null}function ek(n,e){if(e!==null){let i=n[ci][Ai],r=e.projection;return i.projection[r]}return null}function SC(n,e){let t=mt+n+1;if(t<e.length){let i=e[t],r=i[ge].firstChild;if(r!==null)return uf(i,r)}return e[Go]}function vE(n,e,t,i,r,o,s){for(;t!=null;){let a=i[eo];if(t.type===128){t=t.next;continue}let l=i[t.index],c=t.type;if(s&&e===0&&(l&&ic(ki(l),i),t.flags|=2),!XC(t))if(c&8)vE(n,e,t.child,i,r,o,!1),ec(e,n,a,r,l,t,o,i);else if(c&32){let d=dE(t,i),p;for(;p=d();)ec(e,n,a,r,p,t,o,i);ec(e,n,a,r,l,t,o,i)}else c&16?mH(n,e,i,t,r,o):ec(e,n,a,r,l,t,o,i);t=s?t.projectionNext:t.next}}function wg(n,e,t,i,r,o){vE(t,i,n.firstChild,e,r,o,!1)}function mH(n,e,t,i,r,o){let s=t[ci],l=s[Ai].projection[i.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++){let d=l[c];ec(e,n,t[eo],r,d,i,o,t)}else{let c=l,d=s[Lt];wA(i)&&(c.flags|=128),vE(n,e,c,d,r,o,!0)}}function gH(n,e,t,i,r,o,s){let a=i[Go],l=ki(i);a!==l&&ec(e,n,t,o,a,r,s);for(let c=mt;c<i.length;c++){let d=i[c];wg(d[ge],d,n,e,o,a)}}function yH(n,e,t,i,r){if(e)r?n.addClass(t,i):n.removeClass(t,i);else{let o=i.indexOf("-")===-1?void 0:kr.DashCase;r==null?n.removeStyle(t,i,o):(typeof r=="string"&&r.endsWith("!important")&&(r=r.slice(0,-10),o|=kr.Important),n.setStyle(t,i,r,o))}}function tk(n,e,t,i,r){let o=Ir(),s=i&2;try{Ko(-1),s&&e.length>pt&&WA(n,e,pt,!1),Ze(s?2:0,r,t),t(i,r)}finally{Ko(o),Ze(s?3:1,r,t)}}function _E(n,e,t){xH(n,e,t),(t.flags&64)===64&&bH(n,e,t)}function Cg(n,e,t=Zi){let i=e.localNames;if(i!==null){let r=e.index+1;for(let o=0;o<i.length;o+=2){let s=i[o+1],a=s===-1?t(e,n):n[s];n[r++]=a}}}function vH(n,e,t,i){let o=i.get(DA,IA)||t===no.ShadowDom,s=n.selectRootElement(e,o);return _H(s),s}function _H(n){wH(n)}var wH=()=>null;function CH(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function nk(n,e,t,i,r,o){let s=e[ge];if(EE(n,s,e,t,i)){Wo(n)&&EH(e,n.index);return}n.type&3&&(t=CH(t)),ik(n,e,t,i,r,o)}function ik(n,e,t,i,r,o){if(n.type&3){let s=Zi(n,e);i=o!=null?o(i,n.value||"",t):i,r.setProperty(s,t,i)}else n.type&12}function EH(n,e){let t=Mi(e,n);t[Ee]&16||(t[Ee]|=64)}function xH(n,e,t){let i=t.directiveStart,r=t.directiveEnd;Wo(t)&&z5(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||Zm(t,e);let o=t.initialInputs;for(let s=i;s<r;s++){let a=n.data[s],l=ff(e,n,s,t);if(ic(l,e),o!==null&&DH(e,s-i,l,a,t,o),Sr(a)){let c=Mi(t.index,e);c[wt]=ff(e,n,s,t)}}}function bH(n,e,t){let i=t.directiveStart,r=t.directiveEnd,o=t.index,s=gD();try{Ko(o);for(let a=i;a<r;a++){let l=n.data[a],c=e[a];Pm(a),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&SH(l,c)}}finally{Ko(-1),Pm(s)}}function SH(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function rk(n,e){let t=n.directiveRegistry,i=null;if(t)for(let r=0;r<t.length;r++){let o=t[r];P5(e,o.selectors,!1)&&(i??=[],Sr(o)?i.unshift(o):i.push(o))}return i}function TH(n,e,t,i,r,o){let s=Zi(n,e);IH(e[ot],s,o,n.value,t,i,r)}function IH(n,e,t,i,r,o,s){if(o==null)n.removeAttribute(e,r,t);else{let a=s==null?Uo(o):s(o,i||"",r);n.setAttribute(e,r,a,t)}}function DH(n,e,t,i,r,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let l=s[a],c=s[a+1];EC(i,t,l,c)}}function wE(n,e,t,i,r){let o=pt+t,s=e[ge],a=r(s,e,n,i,t);e[o]=a,Kl(n,!0);let l=n.type===2;return l?(HA(e[ot],a,n),(sD()===0||ef(n))&&ic(a,e),aD()):ic(a,e),Om()&&(!l||!XC(n))&&yE(s,e,a,n),n}function CE(n){let e=n;return Hw()?uD():(e=e.parent,Kl(e,!1)),e}function AH(n,e){let t=n[eo];if(!t)return;let i;try{i=t.get(Dr,null)}catch{i=null}i?.(e)}function EE(n,e,t,i,r){let o=n.inputs?.[i],s=n.hostDirectiveInputs?.[i],a=!1;if(s)for(let l=0;l<s.length;l+=2){let c=s[l],d=s[l+1],p=e.data[c];EC(p,t[c],d,r),a=!0}if(o)for(let l of o){let c=t[l],d=e.data[l];EC(d,c,i,r),a=!0}return a}function kH(n,e){let t=Mi(e,n),i=t[ge];MH(i,t);let r=t[Qi];r!==null&&t[Gl]===null&&(t[Gl]=AA(r,t[eo])),Ze(18),xE(i,t,t[wt]),Ze(19,t[wt])}function MH(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function xE(n,e,t){Fm(e);try{let i=n.viewQuery;i!==null&&pC(1,i,t);let r=n.template;r!==null&&tk(n,e,r,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[xr]?.finishViewCreation(n),n.staticContentQueries&&kA(n,e),n.staticViewQueries&&pC(2,n.viewQuery,t);let o=n.components;o!==null&&NH(e,o)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{e[Ee]&=-5,Lm()}}function NH(n,e){for(let t=0;t<e.length;t++)kH(n,e[t])}function Eg(n,e,t,i){let r=we(null);try{let o=e.tView,a=n[Ee]&4096?4096:16,l=cE(n,o,t,a,null,e,null,null,i?.injector??null,i?.embeddedViewInjector??null,i?.dehydratedView??null),c=n[e.index];l[qo]=c;let d=n[xr];return d!==null&&(l[xr]=d.createEmbeddedView(o)),xE(o,l,t),l}finally{we(r)}}function hf(n,e){return!e||e.firstChild===null||wA(n)}function mf(n,e,t,i,r=!1){for(;t!==null;){if(t.type===128){t=r?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&i.push(ki(o)),Xi(o)&&ok(o,i);let s=t.type;if(s&8)mf(n,e,t.child,i);else if(s&32){let a=dE(t,e),l;for(;l=a();)i.push(l)}else if(s&16){let a=ek(e,t);if(Array.isArray(a))i.push(...a);else{let l=Vo(e[ci]);mf(l[ge],l,a,i,!0)}}t=r?t.projectionNext:t.next}return i}function ok(n,e){for(let t=mt;t<n.length;t++){let i=n[t],r=i[ge].firstChild;r!==null&&mf(i[ge],i,r,e)}n[Go]!==n[Qi]&&e.push(n[Go])}function sk(n){if(n[ia]!==null){for(let e of n[ia])e.impl.addSequence(e);n[ia].length=0}}var ak=[];function PH(n){return n[ui]??RH(n)}function RH(n){let e=ak.pop()??Object.create(LH);return e.lView=n,e}function FH(n){n.lView[ui]!==n&&(n.lView=null,ak.push(n))}var LH=Z(P({},qs),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{zo(n.lView)},consumerOnSignalRead(){this.lView[ui]=this}});function OH(n){let e=n[ui]??Object.create(VH);return e.lView=n,e}var VH=Z(P({},qs),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=Vo(n.lView);for(;e&&!lk(e[ge]);)e=Vo(e);e&&Pw(e)},consumerOnSignalRead(){this.lView[ui]=this}});function lk(n){return n.type!==2}function ck(n){if(n[to]===null)return;let e=!0;for(;e;){let t=!1;for(let i of n[to])i.dirty&&(t=!0,i.zone===null||Zone.current===i.zone?i.run():i.zone.run(()=>i.run()));e=t&&!!(n[Ee]&8192)}}var BH=100;function uk(n,e=0){let i=n[Er].rendererFactory,r=!1;r||i.begin?.();try{UH(n,e)}finally{r||i.end?.()}}function UH(n,e){let t=qw();try{Yl(!0),TC(n,e);let i=0;for(;rf(n);){if(i===BH)throw new ae(103,!1);i++,TC(n,1)}}finally{Yl(t)}}function $H(n,e,t,i){if(sa(e))return;let r=e[Ee],o=!1,s=!1;Fm(e);let a=!0,l=null,c=null;o||(lk(n)?(c=PH(e),l=Gs(c)):zh()===null?(a=!1,c=OH(e),l=Gs(c)):e[ui]&&(Ws(e[ui]),e[ui]=null));try{Nw(e),pD(n.bindingStartIndex),t!==null&&tk(n,e,t,2,i);let d=(r&3)===3;if(!o)if(d){let y=n.preOrderCheckHooks;y!==null&&Gm(e,y,null)}else{let y=n.preOrderHooks;y!==null&&Wm(e,y,0,null),Qw(e,0)}if(s||HH(e),ck(e),dk(e,0),n.contentQueries!==null&&kA(n,e),!o)if(d){let y=n.contentCheckHooks;y!==null&&Gm(e,y)}else{let y=n.contentHooks;y!==null&&Wm(e,y,1),Qw(e,1)}GH(n,e);let p=n.components;p!==null&&pk(e,p,0);let h=n.viewQuery;if(h!==null&&pC(2,h,i),!o)if(d){let y=n.viewCheckHooks;y!==null&&Gm(e,y)}else{let y=n.viewHooks;y!==null&&Wm(e,y,2),Qw(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[Am]){for(let y of e[Am])y();e[Am]=null}o||(sk(e),e[Ee]&=-73)}catch(d){throw o||zo(e),d}finally{c!==null&&(kl(c,l),a&&FH(c)),Lm()}}function dk(n,e){for(let t=EA(n);t!==null;t=xA(t))for(let i=mt;i<t.length;i++){let r=t[i];fk(r,e)}}function HH(n){for(let e=EA(n);e!==null;e=xA(e)){if(!(e[Ee]&2))continue;let t=e[oa];for(let i=0;i<t.length;i++){let r=t[i];Pw(r)}}}function qH(n,e,t){Ze(18);let i=Mi(e,n);fk(i,t),Ze(19,i[wt])}function fk(n,e){km(n)&&TC(n,e)}function TC(n,e){let i=n[ge],r=n[Ee],o=n[ui],s=!!(e===0&&r&16);if(s||=!!(r&64&&e===0),s||=!!(r&1024),s||=!!(o?.dirty&&Ml(o)),s||=!1,o&&(o.dirty=!1),n[Ee]&=-9217,s)$H(i,n,i.template,n[wt]);else if(r&8192){let a=we(null);try{ck(n),dk(n,1);let l=i.components;l!==null&&pk(n,l,1),sk(n)}finally{we(a)}}}function pk(n,e,t){for(let i=0;i<e.length;i++)qH(n,e[i],t)}function GH(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let i=0;i<t.length;i++){let r=t[i];if(r<0)Ko(~r);else{let o=r,s=t[++i],a=t[++i];mD(s,o);let l=e[o];Ze(24,l),a(2,l),Ze(25,l)}}}finally{Ko(-1)}}function bE(n,e){let t=qw()?64:1088;for(n[Er].changeDetectionScheduler?.notify(e);n;){n[Ee]|=t;let i=Vo(n);if(jl(n)&&!i)return n;n=i}return null}function hk(n,e,t,i){return[n,!0,0,e,null,i,null,t,null,null]}function mk(n,e){let t=mt+e;if(t<n.length)return n[t]}function xg(n,e,t,i=!0){let r=e[ge];if(WH(r,e,n,t),i){let s=SC(t,n),a=e[ot],l=a.parentNode(n[Go]);l!==null&&oH(r,n[Ai],a,e,l,s)}let o=e[Gl];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function gk(n,e){let t=gf(n,e);return t!==void 0&&_g(t[ge],t),t}function gf(n,e){if(n.length<=mt)return;let t=mt+e,i=n[t];if(i){let r=i[qo];r!==null&&r!==n&&gE(r,i),e>0&&(n[t-1][Di]=i[Di]);let o=Yd(n,mt+e);rH(i[ge],i);let s=o[xr];s!==null&&s.detachView(o[ge]),i[Lt]=null,i[Di]=null,i[Ee]&=-129}return i}function WH(n,e,t,i){let r=mt+i,o=t.length;i>0&&(t[r-1][Di]=e),i<o-mt?(e[Di]=t[r],vw(t,mt+i,e)):(t.push(e),e[Di]=null),e[Lt]=t;let s=e[qo];s!==null&&t!==s&&yk(s,e);let a=e[xr];a!==null&&a.insertView(n),Mm(e),e[Ee]|=128}function yk(n,e){let t=n[oa],i=e[Lt];if(br(i))n[Ee]|=2;else{let r=i[Lt][ci];e[ci]!==r&&(n[Ee]|=2)}t===null?n[oa]=[e]:t.push(e)}var Qo=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,t=e[ge];return mf(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t}get context(){return this._lView[wt]}set context(e){this._lView[wt]=e}get destroyed(){return sa(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Lt];if(Xi(e)){let t=e[Zd],i=t?t.indexOf(this):-1;i>-1&&(gf(e,i),Yd(t,i))}this._attachedToViewContainer=!1}_g(this._lView[ge],this._lView)}onDestroy(e){Rw(this._lView,e)}markForCheck(){bE(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Ee]&=-129}reattach(){Mm(this._lView),this._lView[Ee]|=128}detectChanges(){this._lView[Ee]|=1024,uk(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ae(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=jl(this._lView),t=this._lView[qo];t!==null&&!e&&gE(t,this._lView),ZA(this._lView[ge],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new ae(902,!1);this._appRef=e;let t=jl(this._lView),i=this._lView[qo];i!==null&&!t&&yk(i,this._lView),Mm(this._lView)}};var rc=(()=>{class n{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=zH;constructor(t,i,r){this._declarationLView=t,this._declarationTContainer=i,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,i){return this.createEmbeddedViewImpl(t,i)}createEmbeddedViewImpl(t,i,r){let o=Eg(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:i,dehydratedView:r});return new Qo(o)}}return n})();function zH(){return SE(Kt(),xe())}function SE(n,e){return n.type&4?new rc(e,n,ac(n,e)):null}function bg(n,e,t,i,r){let o=n.data[e];if(o===null)o=jH(n,e,t,i,r),hD()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=i,o.attrs=r;let s=cD();o.injectorIndex=s===null?-1:s.injectorIndex}return Kl(o,!0),o}function jH(n,e,t,i,r){let o=$w(),s=Hw(),a=s?o:o&&o.parent,l=n.data[e]=YH(n,a,t,e,i,r);return KH(n,l,o,s),l}function KH(n,e,t,i){n.firstChild===null&&(n.firstChild=e),t!==null&&(i?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function YH(n,e,t,i,r,o){let s=e?e.injectorIndex:-1,a=0;return lD()&&(a|=128),{type:t,index:i,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:r,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var Vse=new RegExp(`^(\\d+)*(${n5}|${t5})*(.*)`);function JH(n){let e=n[Iw]??[],i=n[Lt][ot],r=[];for(let o of e)o.data[TA]!==void 0?r.push(o):QH(o,i);n[Iw]=r}function QH(n,e){let t=0,i=n.firstChild;if(i){let r=n.data[SA];for(;t<r;){let o=i.nextSibling;$A(e,i,!1),i=o,t++}}}var XH=()=>null,ZH=()=>null;function IC(n,e){return XH(n,e)}function vk(n,e,t){return ZH(n,e,t)}var _k=class{},Sg=class{},DC=class{resolveComponentFactory(e){throw new ae(917,!1)}},bf=class{static NULL=new DC},da=class{},Ri=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>e6()}return n})();function e6(){let n=xe(),e=Kt(),t=Mi(e.index,n);return(br(t)?t:n)[ot]}var wk=(()=>{class n{static \u0275prov=de({token:n,providedIn:"root",factory:()=>null})}return n})();var jm={},AC=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,i){let r=this.injector.get(e,jm,i);return r!==jm||t===jm?r:this.parentInjector.get(e,t,i)}};function rg(n,e,t){let i=t?n.styles:null,r=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)r=Em(r,a);else if(o==2){let l=a,c=e[++s];i=Em(i,l+": "+c+";")}}t?n.styles=i:n.stylesWithoutHost=i,t?n.classes=r:n.classesWithoutHost=r}function He(n,e=0){let t=xe();if(t===null)return Re(n,e);let i=Kt();return gA(i,t,rn(n),e)}function t6(n,e,t,i,r){let o=i===null?null:{"":-1},s=r(n,t);if(s!==null){let a=s,l=null,c=null;for(let d of s)if(d.resolveHostDirectives!==null){[a,l,c]=d.resolveHostDirectives(s);break}r6(n,e,t,a,o,l,c)}o!==null&&i!==null&&n6(t,i,o)}function n6(n,e,t){let i=n.localNames=[];for(let r=0;r<e.length;r+=2){let o=t[e[r+1]];if(o==null)throw new ae(-301,!1);i.push(e[r],o)}}function i6(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function r6(n,e,t,i,r,o,s){let a=i.length,l=!1;for(let h=0;h<a;h++){let y=i[h];!l&&Sr(y)&&(l=!0,i6(n,t,h)),cC(Zm(t,e),n,y.type)}u6(t,n.data.length,a);for(let h=0;h<a;h++){let y=i[h];y.providersResolver&&y.providersResolver(y)}let c=!1,d=!1,p=GA(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let h=0;h<a;h++){let y=i[h];if(t.mergedAttrs=nc(t.mergedAttrs,y.hostAttrs),s6(n,t,e,p,y),c6(p,y,r),s!==null&&s.has(y)){let[A,R]=s.get(y);t.directiveToIndex.set(y.type,[p,A+t.directiveStart,R+t.directiveStart])}else(o===null||!o.has(y))&&t.directiveToIndex.set(y.type,p);y.contentQueries!==null&&(t.flags|=4),(y.hostBindings!==null||y.hostAttrs!==null||y.hostVars!==0)&&(t.flags|=64);let E=y.type.prototype;!c&&(E.ngOnChanges||E.ngOnInit||E.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),c=!0),!d&&(E.ngOnChanges||E.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),d=!0),p++}o6(n,t,o)}function o6(n,e,t){for(let i=e.directiveStart;i<e.directiveEnd;i++){let r=n.data[i];if(t===null||!t.has(r))zD(0,e,r,i),zD(1,e,r,i),KD(e,i,!1);else{let o=t.get(r);jD(0,e,o,i),jD(1,e,o,i),KD(e,i,!0)}}}function zD(n,e,t,i){let r=n===0?t.inputs:t.outputs;for(let o in r)if(r.hasOwnProperty(o)){let s;n===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(i),Ck(e,o)}}function jD(n,e,t,i){let r=n===0?t.inputs:t.outputs;for(let o in r)if(r.hasOwnProperty(o)){let s=r[o],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(i,o),Ck(e,s)}}function Ck(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function KD(n,e,t){let{attrs:i,inputs:r,hostDirectiveInputs:o}=n;if(i===null||!t&&r===null||t&&o===null||aE(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let s=null,a=0;for(;a<i.length;){let l=i[a];if(l===0){a+=4;continue}else if(l===5){a+=2;continue}else if(typeof l=="number")break;if(!t&&r.hasOwnProperty(l)){let c=r[l];for(let d of c)if(d===e){s??=[],s.push(l,i[a+1]);break}}else if(t&&o.hasOwnProperty(l)){let c=o[l];for(let d=0;d<c.length;d+=2)if(c[d]===e){s??=[],s.push(c[d+1],i[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(s)}function s6(n,e,t,i,r){n.data[i]=r;let o=r.factory||(r.factory=Oo(r.type,!0)),s=new ca(o,Sr(r),He,null);n.blueprint[i]=s,t[i]=s,a6(n,e,i,GA(n,t,r.hostVars,Tn),r)}function a6(n,e,t,i,r){let o=r.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;l6(s)!=a&&s.push(a),s.push(t,i,o)}}function l6(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function c6(n,e,t){if(t){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)t[e.exportAs[i]]=n;Sr(e)&&(t[""]=n)}}function u6(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function TE(n,e,t,i,r,o,s,a){let l=e[ge],c=l.consts,d=Tr(c,s),p=bg(l,n,t,i,d);return o&&t6(l,e,p,Tr(c,a),r),p.mergedAttrs=nc(p.mergedAttrs,p.attrs),p.attrs!==null&&rg(p,p.attrs,!1),p.mergedAttrs!==null&&rg(p,p.mergedAttrs,!0),l.queries!==null&&l.queries.elementStart(l,p),p}function IE(n,e){R$(n,e),Dw(e)&&n.queries.elementEnd(e)}function d6(n,e,t,i,r,o){let s=e.consts,a=Tr(s,r),l=bg(e,n,t,i,a);if(l.mergedAttrs=nc(l.mergedAttrs,l.attrs),o!=null){let c=Tr(s,o);l.localNames=[];for(let d=0;d<c.length;d+=2)l.localNames.push(c[d],-1)}return l.attrs!==null&&rg(l,l.attrs,!1),l.mergedAttrs!==null&&rg(l,l.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,l),l}function Tg(n,e,t){return n[e]=t}function f6(n,e){return n[e]}function di(n,e,t){if(t===Tn)return!1;let i=n[e];return Object.is(i,t)?!1:(n[e]=t,!0)}function DE(n,e,t,i){let r=di(n,e,t);return di(n,e+1,i)||r}function p6(n,e,t,i,r){let o=DE(n,e,t,i);return di(n,e+2,r)||o}function Km(n,e,t){return function i(r){let o=Wo(n)?Mi(n.index,e):e;bE(o,5);let s=e[wt],a=YD(e,s,t,r),l=i.__ngNextListenerFn__;for(;l;)a=YD(e,s,l,r)&&a,l=l.__ngNextListenerFn__;return a}}function YD(n,e,t,i){let r=we(null);try{return Ze(6,e,t),t(i)!==!1}catch(o){return AH(n,o),!1}finally{Ze(7,e,t),we(r)}}function Ek(n,e,t,i,r,o,s,a){let l=ef(n),c=!1,d=null;if(!i&&l&&(d=m6(e,t,o,n.index)),d!==null){let p=d.__ngLastListenerFn__||d;p.__ngNextListenerFn__=s,d.__ngLastListenerFn__=s,c=!0}else{let p=Zi(n,t),h=i?i(p):p;r5(t,h,o,a);let y=r.listen(h,o,a);if(!h6(o)){let E=i?A=>i(ki(A[n.index])):n.index;xk(E,e,t,o,a,y,!1)}}return c}function h6(n){return n.startsWith("animation")||n.startsWith("transition")}function m6(n,e,t,i){let r=n.cleanup;if(r!=null)for(let o=0;o<r.length-1;o+=2){let s=r[o];if(s===t&&r[o+1]===i){let a=e[Wl],l=r[o+2];return a&&a.length>l?a[l]:null}typeof s=="string"&&(o+=2)}return null}function xk(n,e,t,i,r,o,s){let a=e.firstCreatePass?Lw(e):null,l=Fw(t),c=l.length;l.push(r,o),a&&a.push(i,n,c,(c+1)*(s?-1:1))}function JD(n,e,t,i,r,o){let s=e[t],a=e[ge],c=a.data[t].outputs[i],p=s[c].subscribe(o);xk(n.index,a,e,r,o,p,!0)}var kC=Symbol("BINDING");var og=class extends bf{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=ea(e);return new yf(t,this.ngModule)}};function g6(n){return Object.keys(n).map(e=>{let[t,i,r]=n[e],o={propName:t,templateName:e,isSignal:(i&yg.SignalBased)!==0};return r&&(o.transform=r),o})}function y6(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function v6(n,e,t){let i=e instanceof On?e:e?.injector;return i&&n.getStandaloneInjector!==null&&(i=n.getStandaloneInjector(i)||i),i?new AC(t,i):t}function _6(n){let e=n.get(da,null);if(e===null)throw new ae(407,!1);let t=n.get(wk,null),i=n.get(Ti,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:i,ngReflect:!1}}function w6(n,e){let t=bk(n);return BA(e,t,t==="svg"?Aw:t==="math"?eD:null)}function bk(n){return(n.selectors[0][0]||"div").toLowerCase()}var yf=class extends Sg{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=g6(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=y6(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=O5(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,i,r,o,s){Ze(22);let a=we(null);try{let l=this.componentDef,c=C6(i,l,s,o),d=v6(l,r||this.ngModule,e),p=_6(d),h=p.rendererFactory.createRenderer(null,l),y=i?vH(h,i,l.encapsulation,d):w6(l,h),E=s?.some(QD)||o?.some(k=>typeof k!="function"&&k.bindings.some(QD)),A=cE(null,c,null,512|qA(l),null,null,p,h,d,null,AA(y,d,!0));A[pt]=y,Fm(A);let R=null;try{let k=TE(pt,A,2,"#host",()=>c.directiveRegistry,!0,0);HA(h,y,k),ic(y,A),_E(c,A,k),ZC(c,k,A),IE(c,k),t!==void 0&&x6(k,this.ngContentSelectors,t),R=Mi(k.index,A),A[wt]=R[wt],xE(c,A,null)}catch(k){throw R!==null&&dC(R),dC(A),k}finally{Ze(23),Lm()}return new sg(this.componentType,A,!!E)}finally{we(a)}}};function C6(n,e,t,i){let r=n?["ng-version","20.3.11"]:V5(e.selectors[0]),o=null,s=null,a=0;if(t)for(let d of t)a+=d[kC].requiredVars,d.create&&(d.targetIdx=0,(o??=[]).push(d)),d.update&&(d.targetIdx=0,(s??=[]).push(d));if(i)for(let d=0;d<i.length;d++){let p=i[d];if(typeof p!="function")for(let h of p.bindings){a+=h[kC].requiredVars;let y=d+1;h.create&&(h.targetIdx=y,(o??=[]).push(h)),h.update&&(h.targetIdx=y,(s??=[]).push(h))}}let l=[e];if(i)for(let d of i){let p=typeof d=="function"?d:d.type,h=Cw(p);l.push(h)}return lE(0,null,E6(o,s),1,a,l,null,null,null,[r],null)}function E6(n,e){return!n&&!e?null:t=>{if(t&1&&n)for(let i of n)i.create();if(t&2&&e)for(let i of e)i.update()}}function QD(n){let e=n[kC].kind;return e==="input"||e==="twoWay"}var sg=class extends _k{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t,i){super(),this._rootLView=t,this._hasInputBindings=i,this._tNode=tf(t[ge],pt),this.location=ac(this._tNode,t),this.instance=Mi(this._tNode.index,t)[wt],this.hostView=this.changeDetectorRef=new Qo(t,void 0),this.componentType=e}setInput(e,t){this._hasInputBindings;let i=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let r=this._rootLView,o=EE(i,r[ge],r,e,t);this.previousInputValues.set(e,t);let s=Mi(i.index,r);bE(s,1)}get injector(){return new la(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function x6(n,e,t){let i=n.projection=[];for(let r=0;r<e.length;r++){let o=t[r];i.push(o!=null&&o.length?Array.from(o):null)}}var lc=(()=>{class n{static __NG_ELEMENT_ID__=b6}return n})();function b6(){let n=Kt();return Tk(n,xe())}var S6=lc,Sk=class extends S6{_lContainer;_hostTNode;_hostLView;constructor(e,t,i){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=i}get element(){return ac(this._hostTNode,this._hostLView)}get injector(){return new la(this._hostTNode,this._hostLView)}get parentInjector(){let e=KC(this._hostTNode,this._hostLView);if(uA(e)){let t=Qm(e,this._hostLView),i=Jm(e),r=t[ge].data[i+8];return new la(r,t)}else return new la(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=XD(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-mt}createEmbeddedView(e,t,i){let r,o;typeof i=="number"?r=i:i!=null&&(r=i.index,o=i.injector);let s=IC(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,r,hf(this._hostTNode,s)),a}createComponent(e,t,i,r,o,s,a){let l=e&&!A$(e),c;if(l)c=t;else{let R=t||{};c=R.index,i=R.injector,r=R.projectableNodes,o=R.environmentInjector||R.ngModuleRef,s=R.directives,a=R.bindings}let d=l?e:new yf(ea(e)),p=i||this.parentInjector;if(!o&&d.ngModule==null){let k=(l?p:this.parentInjector).get(On,null);k&&(o=k)}let h=ea(d.componentType??{}),y=IC(this._lContainer,h?.id??null),E=y?.firstChild??null,A=d.create(p,r,E,o,s,a);return this.insertImpl(A.hostView,c,hf(this._hostTNode,y)),A}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,i){let r=e._lView;if(nD(r)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let l=r[Lt],c=new Sk(l,l[Ai],l[Lt]);c.detach(c.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return xg(s,r,o,i),e.attachToViewContainerRef(),vw(eC(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=XD(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),i=gf(this._lContainer,t);i&&(Yd(eC(this._lContainer),t),_g(i[ge],i))}detach(e){let t=this._adjustIndex(e,-1),i=gf(this._lContainer,t);return i&&Yd(eC(this._lContainer),t)!=null?new Qo(i):null}_adjustIndex(e,t=0){return e??this.length+t}};function XD(n){return n[Zd]}function eC(n){return n[Zd]||(n[Zd]=[])}function Tk(n,e){let t,i=e[n.index];return Xi(i)?t=i:(t=hk(i,e,null,n),e[n.index]=t,uE(e,t)),I6(t,e,n,i),new Sk(t,n,e)}function T6(n,e){let t=n[ot],i=t.createComment(""),r=Zi(e,n),o=t.parentNode(r);return tg(t,o,i,t.nextSibling(r),!1),i}var I6=k6,D6=()=>!1;function A6(n,e,t){return D6(n,e,t)}function k6(n,e,t,i){if(n[Go])return;let r;t.type&8?r=ki(i):r=T6(e,t),n[Go]=r}var MC=class n{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},NC=class n{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let i=e.contentQueries!==null?e.contentQueries[0]:t.length,r=[];for(let o=0;o<i;o++){let s=t.getByIndex(o),a=this.queries[s.indexInDeclarationView];r.push(a.clone())}return new n(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)kE(e,t).matches!==null&&this.queries[t].setDirty()}},PC=class{flags;read;predicate;constructor(e,t,i=null){this.flags=t,this.read=i,typeof e=="string"?this.predicate=L6(e):this.predicate=e}},RC=class n{queries;constructor(e=[]){this.queries=e}elementStart(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let i=0;i<this.length;i++){let r=t!==null?t.length:0,o=this.getByIndex(i).embeddedTView(e,r);o&&(o.indexInDeclarationView=i,t!==null?t.push(o):t=[o])}return t!==null?new n(t):null}template(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},FC=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,t=-1){this.metadata=e,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,i=e.parent;for(;i!==null&&i.type&8&&i.index!==t;)i=i.parent;return t===(i!==null?i.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){let o=i[r];this.matchTNodeWithReadOption(e,t,M6(t,o)),this.matchTNodeWithReadOption(e,t,zm(t,e,o,!1,!1))}else i===rc?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,zm(t,e,i,!1,!1))}matchTNodeWithReadOption(e,t,i){if(i!==null){let r=this.metadata.read;if(r!==null)if(r===Bn||r===lc||r===rc&&t.type&4)this.addMatch(t.index,-2);else{let o=zm(t,e,r,!1,!1);o!==null&&this.addMatch(t.index,o)}else this.addMatch(t.index,i)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function M6(n,e){let t=n.localNames;if(t!==null){for(let i=0;i<t.length;i+=2)if(t[i]===e)return t[i+1]}return null}function N6(n,e){return n.type&11?ac(n,e):n.type&4?SE(n,e):null}function P6(n,e,t,i){return t===-1?N6(e,n):t===-2?R6(n,e,i):ff(n,n[ge],t,e)}function R6(n,e,t){if(t===Bn)return ac(e,n);if(t===rc)return SE(e,n);if(t===lc)return Tk(e,n)}function Ik(n,e,t,i){let r=e[xr].queries[i];if(r.matches===null){let o=n.data,s=t.matches,a=[];for(let l=0;s!==null&&l<s.length;l+=2){let c=s[l];if(c<0)a.push(null);else{let d=o[c];a.push(P6(e,d,s[l+1],t.metadata.read))}}r.matches=a}return r.matches}function LC(n,e,t,i){let r=n.queries.getByIndex(t),o=r.matches;if(o!==null){let s=Ik(n,e,r,t);for(let a=0;a<o.length;a+=2){let l=o[a];if(l>0)i.push(s[a/2]);else{let c=o[a+1],d=e[-l];for(let p=mt;p<d.length;p++){let h=d[p];h[qo]===h[Lt]&&LC(h[ge],h,c,i)}if(d[oa]!==null){let p=d[oa];for(let h=0;h<p.length;h++){let y=p[h];LC(y[ge],y,c,i)}}}}}return i}function AE(n,e){return n[xr].queries[e].queryList}function F6(n,e,t){let i=new eg((t&4)===4);return oD(n,e,i,i.destroy),(e[xr]??=new NC).queries.push(new MC(i))-1}function Dk(n,e,t){let i=gt();return i.firstCreatePass&&(O6(i,new PC(n,e,t),-1),(e&2)===2&&(i.staticViewQueries=!0)),F6(i,xe(),e)}function L6(n){return n.split(",").map(e=>e.trim())}function O6(n,e,t){n.queries===null&&(n.queries=new RC),n.queries.track(new FC(e,t))}function kE(n,e){return n.queries.getByIndex(e)}function Ak(n,e){let t=n[ge],i=kE(t,e);return i.crossesNgTemplate?LC(t,n,e,[]):Ik(t,n,i,e)}function kk(n,e,t){let i,r=Ud(()=>{i._dirtyCounter();let o=B6(i,n);if(e&&o===void 0)throw new ae(-951,!1);return o});return i=r[qt],i._dirtyCounter=I(0),i._flatValue=void 0,r}function Mk(n){return kk(!0,!1,n)}function Nk(n){return kk(!0,!0,n)}function V6(n,e){let t=n[qt];t._lView=xe(),t._queryIndex=e,t._queryList=AE(t._lView,e),t._queryList.onDirty(()=>t._dirtyCounter.update(i=>i+1))}function B6(n,e){let t=n._lView,i=n._queryIndex;if(t===void 0||i===void 0||t[Ee]&4)return e?void 0:fn;let r=AE(t,i),o=Ak(t,i);return r.reset(o,_A),e?r.first:r._changesDetected||n._flatValue===void 0?n._flatValue=r.toArray():n._flatValue}var Xo=class{};function ME(n,e){return new ag(n,e??null,[])}var ag=class extends Xo{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new og(this);constructor(e,t,i,r=!0){super(),this.ngModuleType=e,this._parent=t;let o=zI(e);this._bootstrapComponents=I5(o.bootstrap),this._r3Injector=zw(e,t,[{provide:Xo,useValue:this},{provide:bf,useValue:this.componentFactoryResolver},...i],Zr(e),new Set(["environment"])),r&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}};var vf=class extends Xo{injector;componentFactoryResolver=new og(this);instance=null;constructor(e){super();let t=new Xs([...e.providers,{provide:Xo,useValue:this},{provide:bf,useValue:this.componentFactoryResolver}],e.parent||Qd(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Pk(n,e,t=null){return new vf({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var U6=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let i=Ew(!1,t.type),r=i.length>0?Pk([i],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,r)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=de({token:n,providedIn:"environment",factory:()=>new n(Re(On))})}return n})();function ee(n){return wf(()=>{let e=Rk(n),t=Z(P({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===YC.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?r=>r.get(U6).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||no.Emulated,styles:n.styles||fn,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&es("NgStandalone"),Fk(t);let i=n.dependencies;return t.directiveDefs=ZD(i,$6),t.pipeDefs=ZD(i,jI),t.id=G6(t),t})}function $6(n){return ea(n)||Cw(n)}function so(n){return wf(()=>({type:n.type,bootstrap:n.bootstrap||fn,declarations:n.declarations||fn,imports:n.imports||fn,exports:n.exports||fn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function H6(n,e){if(n==null)return $o;let t={};for(let i in n)if(n.hasOwnProperty(i)){let r=n[i],o,s,a,l;Array.isArray(r)?(a=r[0],o=r[1],s=r[2]??o,l=r[3]||null):(o=r,s=r,a=yg.None,l=null),t[o]=[i,a,l],e[o]=s}return t}function q6(n){if(n==null)return $o;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function Et(n){return wf(()=>{let e=Rk(n);return Fk(e),e})}function Ig(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function Rk(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||$o,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||fn,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:H6(n.inputs,e),outputs:q6(n.outputs),debugInfo:null}}function Fk(n){n.features?.forEach(e=>e(n))}function ZD(n,e){return n?()=>{let t=typeof n=="function"?n():n,i=[];for(let r of t){let o=e(r);o!==null&&i.push(o)}return i}:null}function G6(n){let e=0,t=typeof n.consts=="function"?"":n.consts,i=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of i.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function W6(n){return Object.getPrototypeOf(n.prototype).constructor}function Un(n){let e=W6(n.type),t=!0,i=[n];for(;e;){let r;if(Sr(n))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new ae(903,!1);r=e.\u0275dir}if(r){if(t){i.push(r);let s=n;s.inputs=tC(n.inputs),s.declaredInputs=tC(n.declaredInputs),s.outputs=tC(n.outputs);let a=r.hostBindings;a&&J6(n,a);let l=r.viewQuery,c=r.contentQueries;if(l&&K6(n,l),c&&Y6(n,c),z6(n,r),VI(n.outputs,r.outputs),Sr(r)&&r.data.animation){let d=n.data;d.animation=(d.animation||[]).concat(r.data.animation)}}let o=r.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===Un&&(t=!1)}}e=Object.getPrototypeOf(e)}j6(i)}function z6(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let i=e.inputs[t];i!==void 0&&(n.inputs[t]=i,n.declaredInputs[t]=e.declaredInputs[t])}}function j6(n){let e=0,t=null;for(let i=n.length-1;i>=0;i--){let r=n[i];r.hostVars=e+=r.hostVars,r.hostAttrs=nc(r.hostAttrs,t=nc(t,r.hostAttrs))}}function tC(n){return n===$o?{}:n===fn?[]:n}function K6(n,e){let t=n.viewQuery;t?n.viewQuery=(i,r)=>{e(i,r),t(i,r)}:n.viewQuery=e}function Y6(n,e){let t=n.contentQueries;t?n.contentQueries=(i,r,o)=>{e(i,r,o),t(i,r,o)}:n.contentQueries=e}function J6(n,e){let t=n.hostBindings;t?n.hostBindings=(i,r)=>{e(i,r),t(i,r)}:n.hostBindings=e}function Q6(n,e,t,i,r,o,s,a){if(t.firstCreatePass){n.mergedAttrs=nc(n.mergedAttrs,n.attrs);let d=n.tView=lE(2,n,r,o,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,t.consts,null);t.queries!==null&&(t.queries.template(t,n),d.queries=t.queries.embeddedTView(n))}a&&(n.flags|=a),Kl(n,!1);let l=X6(t,e,n,i);Om()&&yE(t,e,l,n),ic(l,e);let c=hk(l,e,l,n);e[i+pt]=c,uE(e,c),A6(c,n,e)}function lg(n,e,t,i,r,o,s,a,l,c,d){let p=t+pt,h;if(e.firstCreatePass){if(h=bg(e,p,4,s||null,a||null),c!=null){let y=Tr(e.consts,c);h.localNames=[];for(let E=0;E<y.length;E+=2)h.localNames.push(y[E],-1)}}else h=e.data[p];return Q6(h,n,e,t,i,r,o,l),c!=null&&Cg(n,h,d),h}var X6=Z6;function Z6(n,e,t,i){return lf(!0),e[ot].createComment("")}var NE=new ye("");function cc(n){return!!n&&typeof n.then=="function"}function PE(n){return!!n&&typeof n.subscribe=="function"}var Lk=new ye("");var RE=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,i)=>{this.resolve=t,this.reject=i});appInits=F(Lk,{optional:!0})??[];injector=F(jt);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let r of this.appInits){let o=ql(this.injector,r);if(cc(o))t.push(o);else if(PE(o)){let s=new Promise((a,l)=>{o.subscribe({complete:a,error:l})});t.push(s)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{i()}).catch(r=>{this.reject(r)}),t.length===0&&i(),this.initialized=!0}static \u0275fac=function(i){return new(i||n)};static \u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ok=new ye("");function Vk(){U_(()=>{let n="";throw new ae(600,n)})}function Bk(n){return n.isBoundToModule}var eq=10;var ts=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=F(Dr);afterRenderManager=F(hE);zonelessEnabled=F(Xl);rootEffectScheduler=F(cf);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new nn;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=F(Jo);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(Ft(t=>!t))}constructor(){F(ma,{optional:!0})}whenStable(){let t;return new Promise(i=>{t=this.isStable.subscribe({next:r=>{r&&i()}})}).finally(()=>{t.unsubscribe()})}_injector=F(On);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,i){return this.bootstrapImpl(t,i)}bootstrapImpl(t,i,r=jt.NULL){return this._injector.get(Ct).run(()=>{Ze(10);let s=t instanceof Sg;if(!this._injector.get(RE).done){let E="";throw new ae(405,E)}let l;s?l=t:l=this._injector.get(bf).resolveComponentFactory(t),this.componentTypes.push(l.componentType);let c=Bk(l)?void 0:this._injector.get(Xo),d=i||l.selector,p=l.create(r,[],d,c),h=p.location.nativeElement,y=p.injector.get(NE,null);return y?.registerApplication(h),p.onDestroy(()=>{this.detachView(p.hostView),df(this.components,p),y?.unregisterApplication(h)}),this._loadComponent(p),Ze(11,p),p})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){Ze(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(vg.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new ae(101,!1);let t=we(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,we(t),this.afterTick.next(),Ze(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(da,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<eq;)Ze(14),this.synchronizeOnce(),Ze(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let t=!1;if(this.dirtyFlags&7){let i=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:r}of this.allViews){if(!i&&!rf(r))continue;let o=i&&!this.zonelessEnabled?0:1;uk(r,o),t=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}t||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>rf(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let i=t;this._views.push(i),i.attachToAppRef(this)}detachView(t){let i=t;df(this._views,i),i.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView);try{this.tick()}catch(r){this.internalErrorHandler(r)}this.components.push(t),this._injector.get(Ok,[]).forEach(r=>r(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>df(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new ae(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(i){return new(i||n)};static \u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function df(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function Fi(n,e,t,i){let r=xe(),o=jo();if(di(r,o,e)){let s=gt(),a=af();TH(a,r,n,e,t,i)}return Fi}var Gse=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";var OC=class{destroy(e){}updateValue(e,t){}swap(e,t){let i=Math.min(e,t),r=Math.max(e,t),o=this.detach(r);if(r-i>1){let s=this.detach(i);this.attach(i,o),this.attach(r,s)}else this.attach(i,o)}move(e,t){this.attach(t,this.detach(e))}};function nC(n,e,t,i,r){return n===t&&Object.is(e,i)?1:Object.is(r(n,e),r(t,i))?-1:0}function tq(n,e,t){let i,r,o=0,s=n.length-1,a=void 0;if(Array.isArray(e)){let l=e.length-1;for(;o<=s&&o<=l;){let c=n.at(o),d=e[o],p=nC(o,c,o,d,t);if(p!==0){p<0&&n.updateValue(o,d),o++;continue}let h=n.at(s),y=e[l],E=nC(s,h,l,y,t);if(E!==0){E<0&&n.updateValue(s,y),s--,l--;continue}let A=t(o,c),R=t(s,h),k=t(o,d);if(Object.is(k,R)){let H=t(l,y);Object.is(H,A)?(n.swap(o,s),n.updateValue(s,y),l--,s--):n.move(s,o),n.updateValue(o,d),o++;continue}if(i??=new cg,r??=tA(n,o,s,t),VC(n,i,o,k))n.updateValue(o,d),o++,s++;else if(r.has(k))i.set(A,n.detach(o)),s--;else{let H=n.create(o,e[o]);n.attach(o,H),o++,s++}}for(;o<=l;)eA(n,i,t,o,e[o]),o++}else if(e!=null){let l=e[Symbol.iterator](),c=l.next();for(;!c.done&&o<=s;){let d=n.at(o),p=c.value,h=nC(o,d,o,p,t);if(h!==0)h<0&&n.updateValue(o,p),o++,c=l.next();else{i??=new cg,r??=tA(n,o,s,t);let y=t(o,p);if(VC(n,i,o,y))n.updateValue(o,p),o++,s++,c=l.next();else if(!r.has(y))n.attach(o,n.create(o,p)),o++,s++,c=l.next();else{let E=t(o,d);i.set(E,n.detach(o)),s--}}}for(;!c.done;)eA(n,i,t,n.length,c.value),c=l.next()}for(;o<=s;)n.destroy(n.detach(s--));i?.forEach(l=>{n.destroy(l)})}function VC(n,e,t,i){return e!==void 0&&e.has(i)?(n.attach(t,e.get(i)),e.delete(i),!0):!1}function eA(n,e,t,i,r){if(VC(n,e,i,t(i,r)))n.updateValue(i,r);else{let o=n.create(i,r);n.attach(i,o)}}function tA(n,e,t,i){let r=new Set;for(let o=e;o<=t;o++)r.add(i(o,n.at(o)));return r}var cg=class{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let t=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(t)?(this.kvMap.set(e,this._vMap.get(t)),this._vMap.delete(t)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,t){if(this.kvMap.has(e)){let i=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let r=this._vMap;for(;r.has(i);)i=r.get(i);r.set(i,t)}else this.kvMap.set(e,t)}forEach(e){for(let[t,i]of this.kvMap)if(e(i,t),this._vMap!==void 0){let r=this._vMap;for(;r.has(i);)i=r.get(i),e(i,t)}}};function U(n,e,t,i,r,o,s,a){es("NgControlFlow");let l=xe(),c=gt(),d=Tr(c.consts,o);return lg(l,c,n,e,t,i,r,d,256,s,a),FE}function FE(n,e,t,i,r,o,s,a){es("NgControlFlow");let l=xe(),c=gt(),d=Tr(c.consts,o);return lg(l,c,n,e,t,i,r,d,512,s,a),FE}function $(n,e){es("NgControlFlow");let t=xe(),i=jo(),r=t[i]!==Tn?t[i]:-1,o=r!==-1?ug(t,pt+r):void 0,s=0;if(di(t,i,n)){let a=we(null);try{if(o!==void 0&&gk(o,s),n!==-1){let l=pt+n,c=ug(t,l),d=HC(t[ge],l),p=vk(c,d,t),h=Eg(t,d,e,{dehydratedView:p});xg(c,h,s,hf(d,p))}}finally{we(a)}}else if(o!==void 0){let a=mk(o,s);a!==void 0&&(a[wt]=e)}}var BC=class{lContainer;$implicit;$index;constructor(e,t,i){this.lContainer=e,this.$implicit=t,this.$index=i}get $count(){return this.lContainer.length-mt}};function Ve(n){return n}function Ot(n,e){return e}var UC=class{hasEmptyBlock;trackByFn;liveCollection;constructor(e,t,i){this.hasEmptyBlock=e,this.trackByFn=t,this.liveCollection=i}};function Q(n,e,t,i,r,o,s,a,l,c,d,p,h){es("NgControlFlow");let y=xe(),E=gt(),A=l!==void 0,R=xe(),k=a?s.bind(R[ci][wt]):s,H=new UC(A,k);R[pt+n]=H,lg(y,E,n+1,e,t,i,r,Tr(E.consts,o),256),A&&lg(y,E,n+2,l,c,d,p,Tr(E.consts,h),512)}var $C=class extends OC{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,t,i){super(),this.lContainer=e,this.hostLView=t,this.templateTNode=i}get length(){return this.lContainer.length-mt}at(e){return this.getLView(e)[wt].$implicit}attach(e,t){let i=t[Gl];this.needsIndexUpdate||=e!==this.length,xg(this.lContainer,t,e,hf(this.templateTNode,i)),nq(this.lContainer,e)}detach(e){return this.needsIndexUpdate||=e!==this.length-1,iq(this.lContainer,e),rq(this.lContainer,e)}create(e,t){let i=IC(this.lContainer,this.templateTNode.tView.ssrId),r=Eg(this.hostLView,this.templateTNode,new BC(this.lContainer,t,e),{dehydratedView:i});return this.operationsCounter?.recordCreate(),r}destroy(e){_g(e[ge],e),this.operationsCounter?.recordDestroy()}updateValue(e,t){this.getLView(e)[wt].$implicit=t}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[wt].$index=e}getLView(e){return oq(this.lContainer,e)}};function X(n){let e=we(null),t=Ir();try{let i=xe(),r=i[ge],o=i[t],s=t+1,a=ug(i,s);if(o.liveCollection===void 0){let c=HC(r,s);o.liveCollection=new $C(a,i,c)}else o.liveCollection.reset();let l=o.liveCollection;if(tq(l,n,o.trackByFn),l.updateIndexes(),o.hasEmptyBlock){let c=jo(),d=l.length===0;if(di(i,c,d)){let p=t+2,h=ug(i,p);if(d){let y=HC(r,p),E=vk(h,y,i),A=Eg(i,y,void 0,{dehydratedView:E});xg(h,A,0,hf(y,E))}else r.firstUpdatePass&&JH(h),gk(h,0)}}}finally{we(e)}}function ug(n,e){return n[e]}function nq(n,e){if(n.length<=mt)return;let t=mt+e,i=n[t],r=i?i[ra]:void 0;if(i&&r&&r.detachedLeaveAnimationFns&&r.detachedLeaveAnimationFns.length>0){let o=i[eo];nH(o,r),ua.delete(i),r.detachedLeaveAnimationFns=void 0}}function iq(n,e){if(n.length<=mt)return;let t=mt+e,i=n[t],r=i?i[ra]:void 0;r&&r.leave&&r.leave.size>0&&(r.detachedLeaveAnimationFns=[])}function rq(n,e){return gf(n,e)}function oq(n,e){return mk(n,e)}function HC(n,e){return tf(n,e)}function J(n,e,t){let i=xe(),r=jo();if(di(i,r,e)){let o=gt(),s=af();nk(s,i,n,e,i[ot],t)}return J}function qC(n,e,t,i,r){EE(e,n,t,r?"class":"style",i)}function m(n,e,t,i){let r=xe(),o=r[ge],s=n+pt,a=o.firstCreatePass?TE(s,r,2,e,rk,Vw(),t,i):o.data[s];if(wE(a,r,n,e,Uk),ef(a)){let l=r[ge];_E(l,r,a),ZC(l,a,r)}return i!=null&&Cg(r,a),m}function v(){let n=gt(),e=Kt(),t=CE(e);return n.firstCreatePass&&IE(n,t),Bw(t)&&Uw(),Ow(),t.classesWithoutHost!=null&&L$(t)&&qC(n,t,xe(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&O$(t)&&qC(n,t,xe(),t.stylesWithoutHost,!1),v}function O(n,e,t,i){return m(n,e,t,i),v(),O}function x(n,e,t,i){let r=xe(),o=r[ge],s=n+pt,a=o.firstCreatePass?d6(s,o,2,e,t,i):o.data[s];return wE(a,r,n,e,Uk),i!=null&&Cg(r,a),x}function b(){let n=Kt(),e=CE(n);return Bw(e)&&Uw(),Ow(),b}function W(n,e,t,i){return x(n,e,t,i),b(),W}var Uk=(n,e,t,i,r)=>(lf(!0),BA(e[ot],i,ED()));function LE(n,e,t){let i=xe(),r=i[ge],o=n+pt,s=r.firstCreatePass?TE(o,i,8,"ng-container",rk,Vw(),e,t):r.data[o];if(wE(s,i,n,"ng-container",sq),ef(s)){let a=i[ge];_E(a,i,s),ZC(a,s,i)}return t!=null&&Cg(i,s),LE}function OE(){let n=gt(),e=Kt(),t=CE(e);return n.firstCreatePass&&IE(n,t),OE}function Dg(n,e,t){return LE(n,e,t),OE(),Dg}var sq=(n,e,t,i,r)=>(lf(!0),$5(e[ot],""));function B(){return xe()}function Fe(n,e,t){let i=xe(),r=jo();if(di(i,r,e)){let o=gt(),s=af();ik(s,i,n,e,i[ot],t)}return Fe}var Hm=void 0;function aq(n){let e=Math.floor(Math.abs(n)),t=n.toString().replace(/^[^.]*\.?/,"").length;return e===1&&t===0?1:5}var lq=["en",[["a","p"],["AM","PM"]],[["AM","PM"]],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Hm,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Hm,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Hm,"{1} 'at' {0}",Hm],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",aq],iC={};function $n(n){let e=cq(n),t=nA(e);if(t)return t;let i=e.split("-")[0];if(t=nA(i),t)return t;if(i==="en")return lq;throw new ae(701,!1)}function nA(n){return n in iC||(iC[n]=Ii.ng&&Ii.ng.common&&Ii.ng.common.locales&&Ii.ng.common.locales[n]),iC[n]}var yt=(function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n})(yt||{});function cq(n){return n.toLowerCase().replace(/_/g,"-")}var Sf="en-US";var uq=Sf;function $k(n){typeof n=="string"&&(uq=n.toLowerCase().replace(/_/g,"-"))}function N(n,e,t){let i=xe(),r=gt(),o=Kt();return Hk(r,i,i[ot],o,n,e,t),N}function G(n,e,t){let i=xe(),r=gt(),o=Kt();return(o.type&3||t)&&Ek(o,r,i,t,i[ot],n,e,Km(o,i,e)),G}function Hk(n,e,t,i,r,o,s){let a=!0,l=null;if((i.type&3||s)&&(l??=Km(i,e,o),Ek(i,n,e,s,t,r,o,l)&&(a=!1)),a){let c=i.outputs?.[r],d=i.hostDirectiveOutputs?.[r];if(d&&d.length)for(let p=0;p<d.length;p+=2){let h=d[p],y=d[p+1];l??=Km(i,e,o),JD(i,e,h,y,r,l)}if(c&&c.length)for(let p of c)l??=Km(i,e,o),JD(i,e,p,r,r,l)}}function C(n=1){return CD(n)}function pn(n,e,t){Dk(n,e,t)}function hn(n){let e=xe(),t=gt(),i=Rm();sf(i+1);let r=kE(t,i);if(n.dirty&&tD(e)===((r.metadata.flags&2)===2)){if(r.matches===null)n.reset([]);else{let o=Ak(e,i);n.reset(o,_A),n.notifyOnChanges()}return!0}return!1}function mn(){return AE(xe(),Rm())}function Nr(n,e,t,i){V6(n,Dk(e,t,i))}function ao(n=1){sf(Rm()+n)}function Hn(n){let e=dD();return nf(e,pt+n)}function qm(n,e){return n<<17|e<<2}function fa(n){return n>>17&32767}function dq(n){return(n&2)==2}function fq(n,e){return n&131071|e<<17}function GC(n){return n|2}function oc(n){return(n&131068)>>2}function rC(n,e){return n&-131069|e<<2}function pq(n){return(n&1)===1}function WC(n){return n|1}function hq(n,e,t,i,r,o){let s=o?e.classBindings:e.styleBindings,a=fa(s),l=oc(s);n[i]=t;let c=!1,d;if(Array.isArray(t)){let p=t;d=p[1],(d===null||$l(p,d)>0)&&(c=!0)}else d=t;if(r)if(l!==0){let h=fa(n[a+1]);n[i+1]=qm(h,a),h!==0&&(n[h+1]=rC(n[h+1],i)),n[a+1]=fq(n[a+1],i)}else n[i+1]=qm(a,0),a!==0&&(n[a+1]=rC(n[a+1],i)),a=i;else n[i+1]=qm(l,0),a===0?a=i:n[l+1]=rC(n[l+1],i),l=i;c&&(n[i+1]=GC(n[i+1])),iA(n,d,i,!0),iA(n,d,i,!1),mq(e,d,n,i,o),s=qm(a,l),o?e.classBindings=s:e.styleBindings=s}function mq(n,e,t,i,r){let o=r?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&$l(o,e)>=0&&(t[i+1]=WC(t[i+1]))}function iA(n,e,t,i){let r=n[t+1],o=e===null,s=i?fa(r):oc(r),a=!1;for(;s!==0&&(a===!1||o);){let l=n[s],c=n[s+1];gq(l,e)&&(a=!0,n[s+1]=i?WC(c):GC(c)),s=i?fa(c):oc(c)}a&&(n[t+1]=i?GC(r):WC(r))}function gq(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?$l(n,e)>=0:!1}var tr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function yq(n){return n.substring(tr.key,tr.keyEnd)}function vq(n){return _q(n),qk(n,Gk(n,0,tr.textEnd))}function qk(n,e){let t=tr.textEnd;return t===e?-1:(e=tr.keyEnd=wq(n,tr.key=e,t),Gk(n,e,t))}function _q(n){tr.key=0,tr.keyEnd=0,tr.value=0,tr.valueEnd=0,tr.textEnd=n.length}function Gk(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function wq(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}function Be(n,e,t){return Wk(n,e,t,!1),Be}function Y(n,e){return Wk(n,e,null,!0),Y}function ga(n){Eq(Dq,Cq,n,!0)}function Cq(n,e){for(let t=vq(e);t>=0;t=qk(e,t))Im(n,yq(e),!0)}function Wk(n,e,t,i){let r=xe(),o=gt(),s=Nm(2);if(o.firstUpdatePass&&jk(o,n,s,i),e!==Tn&&di(r,s,e)){let a=o.data[Ir()];Kk(o,a,r,r[ot],n,r[s+1]=kq(e,t),i,s)}}function Eq(n,e,t,i){let r=gt(),o=Nm(2);r.firstUpdatePass&&jk(r,null,o,i);let s=xe();if(t!==Tn&&di(s,o,t)){let a=r.data[Ir()];if(Yk(a,i)&&!zk(r,o)){let l=i?a.classesWithoutHost:a.stylesWithoutHost;l!==null&&(t=Em(l,t||"")),qC(r,a,s,t,i)}else Aq(r,a,s,s[ot],s[o+1],s[o+1]=Iq(n,e,t),i,o)}}function zk(n,e){return e>=n.expandoStartIndex}function jk(n,e,t,i){let r=n.data;if(r[t+1]===null){let o=r[Ir()],s=zk(n,t);Yk(o,i)&&e===null&&!s&&(e=!1),e=xq(r,o,e,i),hq(r,o,e,t,s,i)}}function xq(n,e,t,i){let r=yD(n),o=i?e.residualClasses:e.residualStyles;if(r===null)(i?e.classBindings:e.styleBindings)===0&&(t=oC(null,n,e,t,i),t=_f(t,e.attrs,i),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==r)if(t=oC(r,n,e,t,i),o===null){let l=bq(n,e,i);l!==void 0&&Array.isArray(l)&&(l=oC(null,n,e,l[1],i),l=_f(l,e.attrs,i),Sq(n,e,i,l))}else o=Tq(n,e,i)}return o!==void 0&&(i?e.residualClasses=o:e.residualStyles=o),t}function bq(n,e,t){let i=t?e.classBindings:e.styleBindings;if(oc(i)!==0)return n[fa(i)]}function Sq(n,e,t,i){let r=t?e.classBindings:e.styleBindings;n[fa(r)]=i}function Tq(n,e,t){let i,r=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<r;o++){let s=n[o].hostAttrs;i=_f(i,s,t)}return _f(i,e.attrs,t)}function oC(n,e,t,i,r){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],i=_f(i,o.hostAttrs,r),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),i}function _f(n,e,t){let i=t?1:2,r=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?r=s:r===i&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),Im(n,s,t?!0:e[++o]))}return n===void 0?null:n}function Iq(n,e,t){if(t==null||t==="")return fn;let i=[],r=Ni(t);if(Array.isArray(r))for(let o=0;o<r.length;o++)n(i,r[o],!0);else if(typeof r=="object")for(let o in r)r.hasOwnProperty(o)&&n(i,o,r[o]);else typeof r=="string"&&e(i,r);return i}function Dq(n,e,t){let i=String(e);i!==""&&!i.includes(" ")&&Im(n,i,t)}function Aq(n,e,t,i,r,o,s,a){r===Tn&&(r=fn);let l=0,c=0,d=0<r.length?r[0]:null,p=0<o.length?o[0]:null;for(;d!==null||p!==null;){let h=l<r.length?r[l+1]:void 0,y=c<o.length?o[c+1]:void 0,E=null,A;d===p?(l+=2,c+=2,h!==y&&(E=p,A=y)):p===null||d!==null&&d<p?(l+=2,E=d):(c+=2,E=p,A=y),E!==null&&Kk(n,e,t,i,E,A,s,a),d=l<r.length?r[l]:null,p=c<o.length?o[c]:null}}function Kk(n,e,t,i,r,o,s,a){if(!(e.type&3))return;let l=n.data,c=l[a+1],d=pq(c)?rA(l,e,t,r,oc(c),s):void 0;if(!dg(d)){dg(o)||dq(c)&&(o=rA(l,null,t,r,a,s));let p=kw(Ir(),t);yH(i,s,p,r,o)}}function rA(n,e,t,i,r,o){let s=e===null,a;for(;r>0;){let l=n[r],c=Array.isArray(l),d=c?l[1]:l,p=d===null,h=t[r+1];h===Tn&&(h=p?fn:void 0);let y=p?Dm(h,i):d===i?h:void 0;if(c&&!dg(y)&&(y=Dm(l,i)),dg(y)&&(a=y,s))return a;let E=n[r+1];r=s?fa(E):oc(E)}if(e!==null){let l=o?e.residualClasses:e.residualStyles;l!=null&&(a=Dm(l,i))}return a}function dg(n){return n!==void 0}function kq(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Zr(Ni(n)))),n}function Yk(n,e){return(n.flags&(e?8:16))!==0}function g(n,e=""){let t=xe(),i=gt(),r=n+pt,o=i.firstCreatePass?bg(i,r,1,e,null):i.data[r],s=Mq(i,t,o,e,n);t[r]=s,Om()&&yE(i,t,s,o),Kl(o,!1)}var Mq=(n,e,t,i,r)=>(lf(!0),B5(e[ot],i));function Nq(n,e,t,i=""){return di(n,jo(),t)?e+Uo(t)+i:Tn}function Pq(n,e,t,i,r,o=""){let s=fD(),a=DE(n,s,t,r);return Nm(2),a?e+Uo(t)+i+Uo(r)+o:Tn}function V(n){return me("",n),V}function me(n,e,t){let i=xe(),r=Nq(i,n,e,t);return r!==Tn&&Jk(i,Ir(),r),me}function Li(n,e,t,i,r){let o=xe(),s=Pq(o,n,e,t,i,r);return s!==Tn&&Jk(o,Ir(),s),Li}function Jk(n,e,t){let i=kw(e,n);U5(n[ot],i,t)}function In(n,e,t){Yw(e)&&(e=e());let i=xe(),r=jo();if(di(i,r,e)){let o=gt(),s=af();nk(s,i,n,e,i[ot],t)}return In}function qn(n,e){let t=Yw(n);return t&&n.set(e),t}function Dn(n,e){let t=xe(),i=gt(),r=Kt();return Hk(i,t,t[ot],r,n,e),Dn}function Rq(n,e,t){let i=gt();if(i.firstCreatePass){let r=Sr(n);zC(t,i.data,i.blueprint,r,!0),zC(e,i.data,i.blueprint,r,!1)}}function zC(n,e,t,i,r){if(n=rn(n),Array.isArray(n))for(let o=0;o<n.length;o++)zC(n[o],e,t,i,r);else{let o=gt(),s=xe(),a=Kt(),l=Qs(n)?n:rn(n.provide),c=bw(n),d=a.providerIndexes&1048575,p=a.directiveStart,h=a.providerIndexes>>20;if(Qs(n)||!n.multi){let y=new ca(c,r,He,null),E=aC(l,e,r?d:d+h,p);E===-1?(cC(Zm(a,s),o,l),sC(o,n,e.length),e.push(l),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),t.push(y),s.push(y)):(t[E]=y,s[E]=y)}else{let y=aC(l,e,d+h,p),E=aC(l,e,d,d+h),A=y>=0&&t[y],R=E>=0&&t[E];if(r&&!R||!r&&!A){cC(Zm(a,s),o,l);let k=Oq(r?Lq:Fq,t.length,r,i,c,n);!r&&R&&(t[E].providerFactory=k),sC(o,n,e.length,0),e.push(l),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),t.push(k),s.push(k)}else{let k=Qk(t[r?E:y],c,!r&&i);sC(o,n,y>-1?y:E,k)}!r&&i&&R&&t[E].componentProviders++}}}function sC(n,e,t,i){let r=Qs(e),o=QI(e);if(r||o){let l=(o?rn(e.useClass):e).prototype.ngOnDestroy;if(l){let c=n.destroyHooks||(n.destroyHooks=[]);if(!r&&e.multi){let d=c.indexOf(t);d===-1?c.push(t,[i,l]):c[d+1].push(i,l)}else c.push(t,l)}}}function Qk(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function aC(n,e,t,i){for(let r=t;r<i;r++)if(e[r]===n)return r;return-1}function Fq(n,e,t,i,r){return jC(this.multi,[])}function Lq(n,e,t,i,r){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,l=ff(i,i[ge],this.providerFactory.index,r);s=l.slice(0,a),jC(o,s);for(let c=a;c<l.length;c++)s.push(l[c])}else s=[],jC(o,s);return s}function jC(n,e){for(let t=0;t<n.length;t++){let i=n[t];e.push(i())}return e}function Oq(n,e,t,i,r,o){let s=new ca(n,t,He,null);return s.multi=[],s.index=e,s.componentProviders=0,Qk(s,r,i&&!t),s}function Pr(n,e=[]){return t=>{t.providersResolver=(i,r)=>Rq(i,r?r(n):n,e)}}function uc(n,e,t){let i=of()+n,r=xe();return r[i]===Tn?Tg(r,i,t?e.call(t):e()):f6(r,i)}function VE(n,e){let t=n[e];return t===Tn?void 0:t}function Vq(n,e,t,i,r,o){let s=e+t;return di(n,s,r)?Tg(n,s+1,o?i.call(o,r):i(r)):VE(n,s+1)}function Bq(n,e,t,i,r,o,s){let a=e+t;return DE(n,a,r,o)?Tg(n,a+2,s?i.call(s,r,o):i(r,o)):VE(n,a+2)}function Uq(n,e,t,i,r,o,s,a){let l=e+t;return p6(n,l,r,o,s)?Tg(n,l+3,a?i.call(a,r,o,s):i(r,o,s)):VE(n,l+3)}function Ue(n,e){let t=gt(),i,r=n+pt;t.firstCreatePass?(i=$q(e,t.pipeRegistry),t.data[r]=i,i.onDestroy&&(t.destroyHooks??=[]).push(r,i.onDestroy)):i=t.data[r];let o=i.factory||(i.factory=Oo(i.type,!0)),s,a=Sn(He);try{let l=Xm(!1),c=o();return Xm(l),Mw(t,xe(),r,c),c}finally{Sn(a)}}function $q(n,e){if(e)for(let t=e.length-1;t>=0;t--){let i=e[t];if(n===i.name)return i}}function Tf(n,e,t){let i=n+pt,r=xe(),o=nf(r,i);return BE(r,i)?Vq(r,of(),e,o.transform,t,o):o.transform(t)}function et(n,e,t,i){let r=n+pt,o=xe(),s=nf(o,r);return BE(o,r)?Bq(o,of(),e,s.transform,t,i,s):s.transform(t,i)}function ya(n,e,t,i,r){let o=n+pt,s=xe(),a=nf(s,o);return BE(s,o)?Uq(s,of(),e,a.transform,t,i,r,a):a.transform(t,i,r)}function BE(n,e){return n[ge].data[e].pure}var Hq=(()=>{class n{zone=F(Ct);changeDetectionScheduler=F(Ti);applicationRef=F(ts);applicationErrorHandler=F(Dr);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(t){this.applicationErrorHandler(t)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(i){return new(i||n)};static \u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Xk({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new Ct(Z(P({},Zk()),{scheduleInRootZone:t})),[{provide:Ct,useFactory:n},{provide:Ho,multi:!0,useFactory:()=>{let i=F(Hq,{optional:!0});return()=>i.initialize()}},{provide:Ho,multi:!0,useFactory:()=>{let i=F(qq);return()=>{i.initialize()}}},e===!0?{provide:Jw,useValue:!0}:[],{provide:Vm,useValue:t??zA},{provide:Dr,useFactory:()=>{let i=F(Ct),r=F(On),o;return s=>{i.runOutsideAngular(()=>{r.destroyed&&!o?setTimeout(()=>{throw s}):(o??=r.get(ai),o.handleError(s))})}}}]}function Zk(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var qq=(()=>{class n{subscription=new bn;initialized=!1;zone=F(Ct);pendingTasks=F(Jo);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Ct.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Ct.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(i){return new(i||n)};static \u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var UE=(()=>{class n{applicationErrorHandler=F(Dr);appRef=F(ts);taskService=F(Jo);ngZone=F(Ct);zonelessEnabled=F(Xl);tracing=F(ma,{optional:!0});disableScheduling=F(Jw,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new bn;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(ng):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(F(Vm,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof pf||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let i=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,i=!0;break}case 12:{this.appRef.dirtyFlags|=16,i=!0;break}case 13:{this.appRef.dirtyFlags|=2,i=!0;break}case 11:{i=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(i))return;let r=this.useMicrotaskScheduler?UD:jA;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(ng+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(i){this.taskService.remove(t),this.applicationErrorHandler(i)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,UD(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(i){return new(i||n)};static \u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function $E(){return es("NgZoneless"),Hl([{provide:Ti,useExisting:UE},{provide:Ct,useClass:pf},{provide:Xl,useValue:!0},{provide:Vm,useValue:!1},[]])}function Gq(){return typeof $localize<"u"&&$localize.locale||Sf}var dc=new ye("",{providedIn:"root",factory:()=>F(dc,{optional:!0,skipSelf:!0})||Gq()});var Ag=class{destroyed=!1;listeners=null;errorHandler=F(ai,{optional:!0});destroyRef=F(ht);constructor(){this.destroyRef.onDestroy(()=>{this.destroyed=!0,this.listeners=null})}subscribe(e){if(this.destroyed)throw new ae(953,!1);return(this.listeners??=[]).push(e),{unsubscribe:()=>{let t=this.listeners?.indexOf(e);t!==void 0&&t!==-1&&this.listeners?.splice(t,1)}}}emit(e){if(this.destroyed){console.warn(Bo(953,!1));return}if(this.listeners===null)return;let t=we(null);try{for(let i of this.listeners)try{i(e)}catch(r){this.errorHandler?.handleError(r)}}finally{we(t)}}};function Rr(n){return PI(n)}function le(n,e){return Ud(n,e?.equal)}var HE=class{[qt];constructor(e){this[qt]=e}destroy(){this[qt].destroy()}};function Ae(n,e){let t=e?.injector??F(jt),i=e?.manualCleanup!==!0?t.get(ht):null,r,o=t.get(Ql,null,{optional:!0}),s=t.get(Ti);return o!==null?(r=jq(o.view,s,n),i instanceof Kd&&i._lView===o.view&&(i=null)):r=Kq(n,t.get(cf),s),r.injector=t,i!==null&&(r.onDestroyFn=i.onDestroy(()=>r.destroy())),new HE(r)}var eM=Z(P({},RI),{cleanupFns:void 0,zone:null,onDestroyFn:aa,run(){let n=Yl(!1);try{FI(this)}finally{Yl(n)}},cleanup(){if(!this.cleanupFns?.length)return;let n=we(null);try{for(;this.cleanupFns.length;)this.cleanupFns.pop()()}finally{this.cleanupFns=[],we(n)}}}),Wq=Z(P({},eM),{consumerMarkedDirty(){this.scheduler.schedule(this),this.notifier.notify(12)},destroy(){Ws(this),this.onDestroyFn(),this.cleanup(),this.scheduler.remove(this)}}),zq=Z(P({},eM),{consumerMarkedDirty(){this.view[Ee]|=8192,zo(this.view),this.notifier.notify(13)},destroy(){Ws(this),this.onDestroyFn(),this.cleanup(),this.view[to]?.delete(this)}});function jq(n,e,t){let i=Object.create(zq);return i.view=n,i.zone=typeof Zone<"u"?Zone.current:null,i.notifier=e,i.fn=tM(i,t),n[to]??=new Set,n[to].add(i),i.consumerMarkedDirty(i),i}function Kq(n,e,t){let i=Object.create(Wq);return i.fn=tM(i,n),i.scheduler=e,i.notifier=t,i.zone=typeof Zone<"u"?Zone.current:null,i.scheduler.add(i),i.notifier.notify(12),i}function tM(n,e){return()=>{e(t=>(n.cleanupFns??=[]).push(t))}}var oM=Symbol("InputSignalNode#UNSET"),aG=Z(P({},Jh),{transformFn:void 0,applyValueToInputSignal(n,e){Pl(n,e)}});function sM(n,e){let t=Object.create(aG);t.value=n,t.transformFn=e?.transform;function i(){if(Al(t),t.value===oM){let r=null;throw new ae(-950,r)}return t.value}return i[qt]=t,i}var lG=new ye("");lG.__NG_ELEMENT_ID__=n=>{let e=Kt();if(e===null)throw new ae(204,!1);if(e.type&2)return e.value;if(n&8)return null;throw new ae(204,!1)};function fc(n){return new Ag}function nM(n,e){return sM(n,e)}function cG(n){return sM(oM,n)}var GE=(nM.required=cG,nM);function iM(n,e){return Mk(e)}function uG(n,e){return Nk(e)}var lo=(iM.required=uG,iM);var qE=new ye(""),dG=new ye("");function If(n){return!n.moduleRef}function fG(n){let e=If(n)?n.r3Injector:n.moduleRef.injector,t=e.get(Ct);return t.run(()=>{If(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let i=e.get(Dr),r;if(t.runOutsideAngular(()=>{r=t.onError.subscribe({next:i})}),If(n)){let o=()=>e.destroy(),s=n.platformInjector.get(qE);s.add(o),e.onDestroy(()=>{r.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(qE);s.add(o),n.moduleRef.onDestroy(()=>{df(n.allPlatformModules,n.moduleRef),r.unsubscribe(),s.delete(o)})}return hG(i,t,()=>{let o=e.get(Jo),s=o.add(),a=e.get(RE);return a.runInitializers(),a.donePromise.then(()=>{let l=e.get(dc,Sf);if($k(l||Sf),!e.get(dG,!0))return If(n)?e.get(ts):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(If(n)){let d=e.get(ts);return n.rootComponent!==void 0&&d.bootstrap(n.rootComponent),d}else return pG?.(n.moduleRef,n.allPlatformModules),n.moduleRef}).finally(()=>void o.remove(s))})})}var pG;function hG(n,e,t){try{let i=t();return cc(i)?i.catch(r=>{throw e.runOutsideAngular(()=>n(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>n(i)),i}}var kg=null;function mG(n=[],e){return jt.create({name:e,providers:[{provide:Jd,useValue:"platform"},{provide:qE,useValue:new Set([()=>kg=null])},...n]})}function gG(n=[]){if(kg)return kg;let e=mG(n);return kg=e,Vk(),yG(e),e}function yG(n){let e=n.get(pg,null);ql(n,()=>{e?.forEach(t=>t())})}var Mg=(()=>{class n{static __NG_ELEMENT_ID__=vG}return n})();function vG(n){return _G(Kt(),xe(),(n&16)===16)}function _G(n,e,t){if(Wo(n)&&!t){let i=Mi(n.index,e);return new Qo(i,i)}else if(n.type&175){let i=e[ci];return new Qo(i,e)}return null}function aM(n){let{rootComponent:e,appProviders:t,platformProviders:i,platformRef:r}=n;Ze(8);try{let o=r?.injector??gG(i),s=[Xk({}),{provide:Ti,useExisting:UE},bD,...t||[]],a=new vf({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1});return fG({r3Injector:a.injector,platformInjector:o,rootComponent:e})}catch(o){return Promise.reject(o)}finally{Ze(9)}}function lM(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}var cM=null;function co(){return cM}function WE(n){cM??=n}var Df=class{};var XE=(function(n){return n[n.Decimal=0]="Decimal",n[n.Percent=1]="Percent",n[n.Currency=2]="Currency",n[n.Scientific=3]="Scientific",n})(XE||{});var gn=(function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n})(gn||{}),nt=(function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n})(nt||{}),Gn=(function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n})(Gn||{}),Wn={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function hM(n){return $n(n)[yt.LocaleId]}function mM(n,e,t){let i=$n(n),r=[i[yt.DayPeriodsFormat],i[yt.DayPeriodsStandalone]],o=Oi(r,e);return Oi(o,t)}function gM(n,e,t){let i=$n(n),r=[i[yt.DaysFormat],i[yt.DaysStandalone]],o=Oi(r,e);return Oi(o,t)}function yM(n,e,t){let i=$n(n),r=[i[yt.MonthsFormat],i[yt.MonthsStandalone]],o=Oi(r,e);return Oi(o,t)}function vM(n,e){let i=$n(n)[yt.Eras];return Oi(i,e)}function Af(n,e){let t=$n(n);return Oi(t[yt.DateFormat],e)}function kf(n,e){let t=$n(n);return Oi(t[yt.TimeFormat],e)}function Mf(n,e){let i=$n(n)[yt.DateTimeFormat];return Oi(i,e)}function Fr(n,e){let t=$n(n),i=t[yt.NumberSymbols][e];if(typeof i>"u"){if(e===Wn.CurrencyDecimal)return t[yt.NumberSymbols][Wn.Decimal];if(e===Wn.CurrencyGroup)return t[yt.NumberSymbols][Wn.Group]}return i}function _M(n,e){return $n(n)[yt.NumberFormats][e]}function wM(n){if(!n[yt.ExtraData])throw new ae(2303,!1)}function CM(n){let e=$n(n);return wM(e),(e[yt.ExtraData][2]||[]).map(i=>typeof i=="string"?zE(i):[zE(i[0]),zE(i[1])])}function EM(n,e,t){let i=$n(n);wM(i);let r=[i[yt.ExtraData][0],i[yt.ExtraData][1]],o=Oi(r,e)||[];return Oi(o,t)||[]}function Oi(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new ae(2304,!1)}function zE(n){let[e,t]=n.split(":");return{hours:+e,minutes:+t}}var wG=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Ng={},CG=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function xM(n,e,t,i){let r=kG(n);e=uo(t,e)||e;let s=[],a;for(;e;)if(a=CG.exec(e),a){s=s.concat(a.slice(1));let d=s.pop();if(!d)break;e=d}else{s.push(e);break}let l=r.getTimezoneOffset();i&&(l=SM(i,l),r=AG(r,i));let c="";return s.forEach(d=>{let p=IG(d);c+=p?p(r,t,l):d==="''"?"'":d.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),c}function Og(n,e,t){let i=new Date(0);return i.setFullYear(n,e,t),i.setHours(0,0,0),i}function uo(n,e){let t=hM(n);if(Ng[t]??={},Ng[t][e])return Ng[t][e];let i="";switch(e){case"shortDate":i=Af(n,Gn.Short);break;case"mediumDate":i=Af(n,Gn.Medium);break;case"longDate":i=Af(n,Gn.Long);break;case"fullDate":i=Af(n,Gn.Full);break;case"shortTime":i=kf(n,Gn.Short);break;case"mediumTime":i=kf(n,Gn.Medium);break;case"longTime":i=kf(n,Gn.Long);break;case"fullTime":i=kf(n,Gn.Full);break;case"short":let r=uo(n,"shortTime"),o=uo(n,"shortDate");i=Pg(Mf(n,Gn.Short),[r,o]);break;case"medium":let s=uo(n,"mediumTime"),a=uo(n,"mediumDate");i=Pg(Mf(n,Gn.Medium),[s,a]);break;case"long":let l=uo(n,"longTime"),c=uo(n,"longDate");i=Pg(Mf(n,Gn.Long),[l,c]);break;case"full":let d=uo(n,"fullTime"),p=uo(n,"fullDate");i=Pg(Mf(n,Gn.Full),[d,p]);break}return i&&(Ng[t][e]=i),i}function Pg(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,i){return e!=null&&i in e?e[i]:t})),n}function nr(n,e,t="-",i,r){let o="";(n<0||r&&n<=0)&&(r?n=-n+1:(n=-n,o=t));let s=String(n);for(;s.length<e;)s="0"+s;return i&&(s=s.slice(s.length-e)),o+s}function EG(n,e){return nr(n,3).substring(0,e)}function It(n,e,t=0,i=!1,r=!1){return function(o,s){let a=xG(n,o);if((t>0||a>-t)&&(a+=t),n===3)a===0&&t===-12&&(a=12);else if(n===6)return EG(a,e);let l=Fr(s,Wn.MinusSign);return nr(a,e,l,i,r)}}function xG(n,e){switch(n){case 0:return e.getFullYear();case 1:return e.getMonth();case 2:return e.getDate();case 3:return e.getHours();case 4:return e.getMinutes();case 5:return e.getSeconds();case 6:return e.getMilliseconds();case 7:return e.getDay();default:throw new ae(2301,!1)}}function lt(n,e,t=gn.Format,i=!1){return function(r,o){return bG(r,o,n,e,t,i)}}function bG(n,e,t,i,r,o){switch(t){case 2:return yM(e,r,i)[n.getMonth()];case 1:return gM(e,r,i)[n.getDay()];case 0:let s=n.getHours(),a=n.getMinutes();if(o){let c=CM(e),d=EM(e,r,i),p=c.findIndex(h=>{if(Array.isArray(h)){let[y,E]=h,A=s>=y.hours&&a>=y.minutes,R=s<E.hours||s===E.hours&&a<E.minutes;if(y.hours<E.hours){if(A&&R)return!0}else if(A||R)return!0}else if(h.hours===s&&h.minutes===a)return!0;return!1});if(p!==-1)return d[p]}return mM(e,r,i)[s<12?0:1];case 3:return vM(e,i)[n.getFullYear()<=0?0:1];default:let l=t;throw new ae(2302,!1)}}function Rg(n){return function(e,t,i){let r=-1*i,o=Fr(t,Wn.MinusSign),s=r>0?Math.floor(r/60):Math.ceil(r/60);switch(n){case 0:return(r>=0?"+":"")+nr(s,2,o)+nr(Math.abs(r%60),2,o);case 1:return"GMT"+(r>=0?"+":"")+nr(s,1,o);case 2:return"GMT"+(r>=0?"+":"")+nr(s,2,o)+":"+nr(Math.abs(r%60),2,o);case 3:return i===0?"Z":(r>=0?"+":"")+nr(s,2,o)+":"+nr(Math.abs(r%60),2,o);default:throw new ae(2310,!1)}}}var SG=0,Lg=4;function TG(n){let e=Og(n,SG,1).getDay();return Og(n,0,1+(e<=Lg?Lg:Lg+7)-e)}function bM(n){let e=n.getDay(),t=e===0?-3:Lg-e;return Og(n.getFullYear(),n.getMonth(),n.getDate()+t)}function jE(n,e=!1){return function(t,i){let r;if(e){let o=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,s=t.getDate();r=1+Math.floor((s+o)/7)}else{let o=bM(t),s=TG(o.getFullYear()),a=o.getTime()-s.getTime();r=1+Math.round(a/6048e5)}return nr(r,n,Fr(i,Wn.MinusSign))}}function Fg(n,e=!1){return function(t,i){let o=bM(t).getFullYear();return nr(o,n,Fr(i,Wn.MinusSign),e)}}var KE={};function IG(n){if(KE[n])return KE[n];let e;switch(n){case"G":case"GG":case"GGG":e=lt(3,nt.Abbreviated);break;case"GGGG":e=lt(3,nt.Wide);break;case"GGGGG":e=lt(3,nt.Narrow);break;case"y":e=It(0,1,0,!1,!0);break;case"yy":e=It(0,2,0,!0,!0);break;case"yyy":e=It(0,3,0,!1,!0);break;case"yyyy":e=It(0,4,0,!1,!0);break;case"Y":e=Fg(1);break;case"YY":e=Fg(2,!0);break;case"YYY":e=Fg(3);break;case"YYYY":e=Fg(4);break;case"M":case"L":e=It(1,1,1);break;case"MM":case"LL":e=It(1,2,1);break;case"MMM":e=lt(2,nt.Abbreviated);break;case"MMMM":e=lt(2,nt.Wide);break;case"MMMMM":e=lt(2,nt.Narrow);break;case"LLL":e=lt(2,nt.Abbreviated,gn.Standalone);break;case"LLLL":e=lt(2,nt.Wide,gn.Standalone);break;case"LLLLL":e=lt(2,nt.Narrow,gn.Standalone);break;case"w":e=jE(1);break;case"ww":e=jE(2);break;case"W":e=jE(1,!0);break;case"d":e=It(2,1);break;case"dd":e=It(2,2);break;case"c":case"cc":e=It(7,1);break;case"ccc":e=lt(1,nt.Abbreviated,gn.Standalone);break;case"cccc":e=lt(1,nt.Wide,gn.Standalone);break;case"ccccc":e=lt(1,nt.Narrow,gn.Standalone);break;case"cccccc":e=lt(1,nt.Short,gn.Standalone);break;case"E":case"EE":case"EEE":e=lt(1,nt.Abbreviated);break;case"EEEE":e=lt(1,nt.Wide);break;case"EEEEE":e=lt(1,nt.Narrow);break;case"EEEEEE":e=lt(1,nt.Short);break;case"a":case"aa":case"aaa":e=lt(0,nt.Abbreviated);break;case"aaaa":e=lt(0,nt.Wide);break;case"aaaaa":e=lt(0,nt.Narrow);break;case"b":case"bb":case"bbb":e=lt(0,nt.Abbreviated,gn.Standalone,!0);break;case"bbbb":e=lt(0,nt.Wide,gn.Standalone,!0);break;case"bbbbb":e=lt(0,nt.Narrow,gn.Standalone,!0);break;case"B":case"BB":case"BBB":e=lt(0,nt.Abbreviated,gn.Format,!0);break;case"BBBB":e=lt(0,nt.Wide,gn.Format,!0);break;case"BBBBB":e=lt(0,nt.Narrow,gn.Format,!0);break;case"h":e=It(3,1,-12);break;case"hh":e=It(3,2,-12);break;case"H":e=It(3,1);break;case"HH":e=It(3,2);break;case"m":e=It(4,1);break;case"mm":e=It(4,2);break;case"s":e=It(5,1);break;case"ss":e=It(5,2);break;case"S":e=It(6,1);break;case"SS":e=It(6,2);break;case"SSS":e=It(6,3);break;case"Z":case"ZZ":case"ZZZ":e=Rg(0);break;case"ZZZZZ":e=Rg(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Rg(1);break;case"OOOO":case"ZZZZ":case"zzzz":e=Rg(2);break;default:return null}return KE[n]=e,e}function SM(n,e){n=n.replace(/:/g,"");let t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function DG(n,e){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+e),n}function AG(n,e,t){let r=n.getTimezoneOffset(),o=SM(e,r);return DG(n,-1*(o-r))}function kG(n){if(uM(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[r,o=1,s=1]=n.split("-").map(a=>+a);return Og(r,o-1,s)}let t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let i;if(i=n.match(wG))return MG(i)}let e=new Date(n);if(!uM(e))throw new ae(2311,!1);return e}function MG(n){let e=new Date(0),t=0,i=0,r=n[8]?e.setUTCFullYear:e.setFullYear,o=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),i=Number(n[9]+n[11])),r.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));let s=Number(n[4]||0)-t,a=Number(n[5]||0)-i,l=Number(n[6]||0),c=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return o.call(e,s,a,l,c),e}function uM(n){return n instanceof Date&&!isNaN(n.valueOf())}var NG=/^(\d+)?\.((\d+)(-(\d+))?)?$/,dM=22,Vg=".",Nf="0",PG=";",RG=",",YE="#";function FG(n,e,t,i,r,o,s=!1){let a="",l=!1;if(!isFinite(n))a=Fr(t,Wn.Infinity);else{let c=VG(n);s&&(c=OG(c));let d=e.minInt,p=e.minFrac,h=e.maxFrac;if(o){let H=o.match(NG);if(H===null)throw new ae(2306,!1);let K=H[1],z=H[3],oe=H[5];K!=null&&(d=JE(K)),z!=null&&(p=JE(z)),oe!=null?h=JE(oe):z!=null&&p>h&&(h=p)}BG(c,p,h);let y=c.digits,E=c.integerLen,A=c.exponent,R=[];for(l=y.every(H=>!H);E<d;E++)y.unshift(0);for(;E<0;E++)y.unshift(0);E>0?R=y.splice(E,y.length):(R=y,y=[0]);let k=[];for(y.length>=e.lgSize&&k.unshift(y.splice(-e.lgSize,y.length).join(""));y.length>e.gSize;)k.unshift(y.splice(-e.gSize,y.length).join(""));y.length&&k.unshift(y.join("")),a=k.join(Fr(t,i)),R.length&&(a+=Fr(t,r)+R.join("")),A&&(a+=Fr(t,Wn.Exponential)+"+"+A)}return n<0&&!l?a=e.negPre+a+e.negSuf:a=e.posPre+a+e.posSuf,a}function TM(n,e,t){let i=_M(e,XE.Decimal),r=LG(i,Fr(e,Wn.MinusSign));return FG(n,r,e,Wn.Group,Wn.Decimal,t)}function LG(n,e="-"){let t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},i=n.split(PG),r=i[0],o=i[1],s=r.indexOf(Vg)!==-1?r.split(Vg):[r.substring(0,r.lastIndexOf(Nf)+1),r.substring(r.lastIndexOf(Nf)+1)],a=s[0],l=s[1]||"";t.posPre=a.substring(0,a.indexOf(YE));for(let d=0;d<l.length;d++){let p=l.charAt(d);p===Nf?t.minFrac=t.maxFrac=d+1:p===YE?t.maxFrac=d+1:t.posSuf+=p}let c=a.split(RG);if(t.gSize=c[1]?c[1].length:0,t.lgSize=c[2]||c[1]?(c[2]||c[1]).length:0,o){let d=r.length-t.posPre.length-t.posSuf.length,p=o.indexOf(YE);t.negPre=o.substring(0,p).replace(/'/g,""),t.negSuf=o.slice(p+d).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}function OG(n){if(n.digits[0]===0)return n;let e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(e===0?n.digits.push(0,0):e===1&&n.digits.push(0),n.integerLen+=2),n}function VG(n){let e=Math.abs(n)+"",t=0,i,r,o,s,a;for((r=e.indexOf(Vg))>-1&&(e=e.replace(Vg,"")),(o=e.search(/e/i))>0?(r<0&&(r=o),r+=+e.slice(o+1),e=e.substring(0,o)):r<0&&(r=e.length),o=0;e.charAt(o)===Nf;o++);if(o===(a=e.length))i=[0],r=1;else{for(a--;e.charAt(a)===Nf;)a--;for(r-=o,i=[],s=0;o<=a;o++,s++)i[s]=Number(e.charAt(o))}return r>dM&&(i=i.splice(0,dM-1),t=r-1,r=1),{digits:i,exponent:t,integerLen:r}}function BG(n,e,t){if(e>t)throw new ae(2307,!1);let i=n.digits,r=i.length-n.integerLen,o=Math.min(Math.max(e,r),t),s=o+n.integerLen,a=i[s];if(s>0){i.splice(Math.max(n.integerLen,s));for(let p=s;p<i.length;p++)i[p]=0}else{r=Math.max(0,r),n.integerLen=1,i.length=Math.max(1,s=o+1),i[0]=0;for(let p=1;p<s;p++)i[p]=0}if(a>=5)if(s-1<0){for(let p=0;p>s;p--)i.unshift(0),n.integerLen++;i.unshift(1),n.integerLen++}else i[s-1]++;for(;r<Math.max(0,o);r++)i.push(0);let l=o!==0,c=e+n.integerLen,d=i.reduceRight(function(p,h,y,E){return h=h+p,E[y]=h<10?h:h-10,l&&(E[y]===0&&y>=c?E.pop():l=!1),h>=10?1:0},0);d&&(i.unshift(d),n.integerLen++)}function JE(n){let e=parseInt(n);if(isNaN(e))throw new ae(2305,!1);return e}var QE=/\s+/,fM=[],Vt=(()=>{class n{_ngEl;_renderer;initialClasses=fM;rawClass;stateMap=new Map;constructor(t,i){this._ngEl=t,this._renderer=i}set klass(t){this.initialClasses=t!=null?t.trim().split(QE):fM}set ngClass(t){this.rawClass=typeof t=="string"?t.trim().split(QE):t}ngDoCheck(){for(let i of this.initialClasses)this._updateState(i,!0);let t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(let i of t)this._updateState(i,!0);else if(t!=null)for(let i of Object.keys(t))this._updateState(i,!!t[i]);this._applyStateDiff()}_updateState(t,i){let r=this.stateMap.get(t);r!==void 0?(r.enabled!==i&&(r.changed=!0,r.enabled=i),r.touched=!0):this.stateMap.set(t,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(let t of this.stateMap){let i=t[0],r=t[1];r.changed?(this._toggleClass(i,r.enabled),r.changed=!1):r.touched||(r.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),r.touched=!1}}_toggleClass(t,i){t=t.trim(),t.length>0&&t.split(QE).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}static \u0275fac=function(i){return new(i||n)(He(Bn),He(Ri))};static \u0275dir=Et({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return n})(),ZE=(()=>{class n{_viewContainerRef;ngComponentOutlet=null;ngComponentOutletInputs;ngComponentOutletInjector;ngComponentOutletEnvironmentInjector;ngComponentOutletContent;ngComponentOutletNgModule;ngComponentOutletNgModuleFactory;_componentRef;_moduleRef;_inputsUsed=new Map;get componentInstance(){return this._componentRef?.instance??null}constructor(t){this._viewContainerRef=t}_needToReCreateNgModuleInstance(t){return t.ngComponentOutletNgModule!==void 0||t.ngComponentOutletNgModuleFactory!==void 0}_needToReCreateComponentInstance(t){return t.ngComponentOutlet!==void 0||t.ngComponentOutletContent!==void 0||t.ngComponentOutletInjector!==void 0||t.ngComponentOutletEnvironmentInjector!==void 0||this._needToReCreateNgModuleInstance(t)}ngOnChanges(t){if(this._needToReCreateComponentInstance(t)&&(this._viewContainerRef.clear(),this._inputsUsed.clear(),this._componentRef=void 0,this.ngComponentOutlet)){let i=this.ngComponentOutletInjector||this._viewContainerRef.parentInjector;this._needToReCreateNgModuleInstance(t)&&(this._moduleRef?.destroy(),this.ngComponentOutletNgModule?this._moduleRef=ME(this.ngComponentOutletNgModule,pM(i)):this.ngComponentOutletNgModuleFactory?this._moduleRef=this.ngComponentOutletNgModuleFactory.create(pM(i)):this._moduleRef=void 0),this._componentRef=this._viewContainerRef.createComponent(this.ngComponentOutlet,{injector:i,ngModuleRef:this._moduleRef,projectableNodes:this.ngComponentOutletContent,environmentInjector:this.ngComponentOutletEnvironmentInjector})}}ngDoCheck(){if(this._componentRef){if(this.ngComponentOutletInputs)for(let t of Object.keys(this.ngComponentOutletInputs))this._inputsUsed.set(t,!0);this._applyInputStateDiff(this._componentRef)}}ngOnDestroy(){this._moduleRef?.destroy()}_applyInputStateDiff(t){for(let[i,r]of this._inputsUsed)r?(t.setInput(i,this.ngComponentOutletInputs[i]),this._inputsUsed.set(i,!1)):(t.setInput(i,void 0),this._inputsUsed.delete(i))}static \u0275fac=function(i){return new(i||n)(He(lc))};static \u0275dir=Et({type:n,selectors:[["","ngComponentOutlet",""]],inputs:{ngComponentOutlet:"ngComponentOutlet",ngComponentOutletInputs:"ngComponentOutletInputs",ngComponentOutletInjector:"ngComponentOutletInjector",ngComponentOutletEnvironmentInjector:"ngComponentOutletEnvironmentInjector",ngComponentOutletContent:"ngComponentOutletContent",ngComponentOutletNgModule:"ngComponentOutletNgModule",ngComponentOutletNgModuleFactory:"ngComponentOutletNgModuleFactory"},exportAs:["ngComponentOutlet"],features:[sc]})}return n})();function pM(n){return n.get(Xo).injector}function IM(n,e){return new ae(2100,!1)}var UG="mediumDate",DM=new ye(""),AM=new ye(""),sn=(()=>{class n{locale;defaultTimezone;defaultOptions;constructor(t,i,r){this.locale=t,this.defaultTimezone=i,this.defaultOptions=r}transform(t,i,r,o){if(t==null||t===""||t!==t)return null;try{let s=i??this.defaultOptions?.dateFormat??UG,a=r??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return xM(t,s,o||this.locale,a)}catch(s){throw IM(n,s.message)}}static \u0275fac=function(i){return new(i||n)(He(dc,16),He(DM,24),He(AM,24))};static \u0275pipe=Ig({name:"date",type:n,pure:!0})}return n})();var fo=(()=>{class n{_locale;constructor(t){this._locale=t}transform(t,i,r){if(!$G(t))return null;r||=this._locale;try{let o=HG(t);return TM(o,r,i)}catch(o){throw IM(n,o.message)}}static \u0275fac=function(i){return new(i||n)(He(dc,16))};static \u0275pipe=Ig({name:"number",type:n,pure:!0})}return n})();function $G(n){return!(n==null||n===""||n!==n)}function HG(n){if(typeof n=="string"&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if(typeof n!="number")throw new ae(2309,!1);return n}var te=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=so({type:n});static \u0275inj=Cr({})}return n})();function Pf(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let i=t.indexOf("="),[r,o]=i==-1?[t,""]:[t.slice(0,i),t.slice(i+1)];if(r.trim()===e)return decodeURIComponent(o)}return null}var va=class{};var ex="browser";function ns(n){return n===ex}var Rf=class{_doc;constructor(e){this._doc=e}manager},Bg=(()=>{class n extends Rf{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,r,o){return t.addEventListener(i,r,o),()=>this.removeEventListener(t,i,r,o)}removeEventListener(t,i,r,o){return t.removeEventListener(i,r,o)}static \u0275fac=function(i){return new(i||n)(Re(on))};static \u0275prov=de({token:n,factory:n.\u0275fac})}return n})(),$g=new ye(""),ox=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,i){this._zone=i,t.forEach(s=>{s.manager=this});let r=t.filter(s=>!(s instanceof Bg));this._plugins=r.slice().reverse();let o=t.find(s=>s instanceof Bg);o&&this._plugins.push(o)}addEventListener(t,i,r,o){return this._findPluginFor(i).addEventListener(t,i,r,o)}getZone(){return this._zone}_findPluginFor(t){let i=this._eventNameToPlugin.get(t);if(i)return i;if(i=this._plugins.find(o=>o.supports(t)),!i)throw new ae(5101,!1);return this._eventNameToPlugin.set(t,i),i}static \u0275fac=function(i){return new(i||n)(Re($g),Re(Ct))};static \u0275prov=de({token:n,factory:n.\u0275fac})}return n})(),tx="ng-app-id";function kM(n){for(let e of n)e.remove()}function MM(n,e){let t=e.createElement("style");return t.textContent=n,t}function GG(n,e,t,i){let r=n.head?.querySelectorAll(`style[${tx}="${e}"],link[${tx}="${e}"]`);if(r)for(let o of r)o.removeAttribute(tx),o instanceof HTMLLinkElement?i.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}function ix(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var sx=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(t,i,r,o={}){this.doc=t,this.appId=i,this.nonce=r,GG(t,i,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,i){for(let r of t)this.addUsage(r,this.inline,MM);i?.forEach(r=>this.addUsage(r,this.external,ix))}removeStyles(t,i){for(let r of t)this.removeUsage(r,this.inline);i?.forEach(r=>this.removeUsage(r,this.external))}addUsage(t,i,r){let o=i.get(t);o?o.usage++:i.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,r(t,this.doc)))})}removeUsage(t,i){let r=i.get(t);r&&(r.usage--,r.usage<=0&&(kM(r.elements),i.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])kM(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[i,{elements:r}]of this.inline)r.push(this.addElement(t,MM(i,this.doc)));for(let[i,{elements:r}]of this.external)r.push(this.addElement(t,ix(i,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,i){return this.nonce&&i.setAttribute("nonce",this.nonce),t.appendChild(i)}static \u0275fac=function(i){return new(i||n)(Re(on),Re(fg),Re(hg,8),Re(ro))};static \u0275prov=de({token:n,factory:n.\u0275fac})}return n})(),nx={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},ax=/%COMP%/g;var PM="%COMP%",WG=`_nghost-${PM}`,zG=`_ngcontent-${PM}`,jG=!0,KG=new ye("",{providedIn:"root",factory:()=>jG});function YG(n){return zG.replace(ax,n)}function JG(n){return WG.replace(ax,n)}function RM(n,e){return e.map(t=>t.replace(ax,n))}var lx=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,i,r,o,s,a,l=null,c=null){this.eventManager=t,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestroy=o,this.doc=s,this.ngZone=a,this.nonce=l,this.tracingService=c,this.platformIsServer=!1,this.defaultRenderer=new Ff(t,s,a,this.platformIsServer,this.tracingService)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;let r=this.getOrCreateRenderer(t,i);return r instanceof Ug?r.applyToHost(t):r instanceof Lf&&r.applyStyles(),r}getOrCreateRenderer(t,i){let r=this.rendererByCompId,o=r.get(i.id);if(!o){let s=this.doc,a=this.ngZone,l=this.eventManager,c=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,p=this.platformIsServer,h=this.tracingService;switch(i.encapsulation){case no.Emulated:o=new Ug(l,c,i,this.appId,d,s,a,p,h);break;case no.ShadowDom:return new rx(l,c,t,i,s,a,this.nonce,p,h);default:o=new Lf(l,c,i,d,s,a,p,h);break}r.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(i){return new(i||n)(Re(ox),Re(sx),Re(fg),Re(KG),Re(on),Re(Ct),Re(hg),Re(ma,8))};static \u0275prov=de({token:n,factory:n.\u0275fac})}return n})(),Ff=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,i,r,o){this.eventManager=e,this.doc=t,this.ngZone=i,this.platformIsServer=r,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(nx[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(NM(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){e&&(NM(e)?e.content:e).insertBefore(t,i)}removeChild(e,t){t.remove()}selectRootElement(e,t){let i=typeof e=="string"?this.doc.querySelector(e):e;if(!i)throw new ae(-5104,!1);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;let o=nx[r];o?e.setAttributeNS(o,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){let r=nx[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(kr.DashCase|kr.Important)?e.style.setProperty(t,i,r&kr.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&kr.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e!=null&&(e[t]=i)}setValue(e,t){e.nodeValue=t}listen(e,t,i,r){if(typeof e=="string"&&(e=co().getGlobalEventTarget(this.doc,e),!e))throw new ae(5102,!1);let o=this.decoratePreventDefault(i);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,t,o)),this.eventManager.addEventListener(e,t,o,r)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;e(t)===!1&&t.preventDefault()}}};function NM(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var rx=class extends Ff{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,i,r,o,s,a,l,c){super(e,o,s,l,c),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let d=r.styles;d=RM(r.id,d);for(let h of d){let y=document.createElement("style");a&&y.setAttribute("nonce",a),y.textContent=h,this.shadowRoot.appendChild(y)}let p=r.getExternalStyles?.();if(p)for(let h of p){let y=ix(h,o);a&&y.setAttribute("nonce",a),this.shadowRoot.appendChild(y)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Lf=class extends Ff{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,i,r,o,s,a,l,c){super(e,o,s,a,l),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=r;let d=i.styles;this.styles=c?RM(c,d):d,this.styleUrls=i.getExternalStyles?.(c)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&ua.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Ug=class extends Lf{contentAttr;hostAttr;constructor(e,t,i,r,o,s,a,l,c){let d=r+"-"+i.id;super(e,t,i,o,s,a,l,c,d),this.contentAttr=YG(d),this.hostAttr=JG(d)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}};var Hg=class n extends Df{supportsDOMEvents=!0;static makeCurrent(){WE(new n)}onAndCancel(e,t,i,r){return e.addEventListener(t,i,r),()=>{e.removeEventListener(t,i,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=QG();return t==null?null:XG(t)}resetBaseElement(){Of=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Pf(document.cookie,e)}},Of=null;function QG(){return Of=Of||document.head.querySelector("base"),Of?Of.getAttribute("href"):null}function XG(n){return new URL(n,document.baseURI).pathname}var ZG=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(i){return new(i||n)};static \u0275prov=de({token:n,factory:n.\u0275fac})}return n})(),FM=["alt","control","meta","shift"],e9={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},t9={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},LM=(()=>{class n extends Rf{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,i,r,o){let s=n.parseEventName(i),a=n.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>co().onAndCancel(t,s.domEventName,a,o))}static parseEventName(t){let i=t.toLowerCase().split("."),r=i.shift();if(i.length===0||!(r==="keydown"||r==="keyup"))return null;let o=n._normalizeKey(i.pop()),s="",a=i.indexOf("code");if(a>-1&&(i.splice(a,1),s="code."),FM.forEach(c=>{let d=i.indexOf(c);d>-1&&(i.splice(d,1),s+=c+".")}),s+=o,i.length!=0||o.length===0)return null;let l={};return l.domEventName=r,l.fullKey=s,l}static matchEventFullKeyCode(t,i){let r=e9[t.key]||t.key,o="";return i.indexOf("code.")>-1&&(r=t.code,o="code."),r==null||!r?!1:(r=r.toLowerCase(),r===" "?r="space":r==="."&&(r="dot"),FM.forEach(s=>{if(s!==r){let a=t9[s];a(t)&&(o+=s+".")}}),o+=r,o===i)}static eventCallback(t,i,r){return o=>{n.matchEventFullKeyCode(o,t)&&r.runGuarded(()=>i(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(i){return new(i||n)(Re(on))};static \u0275prov=de({token:n,factory:n.\u0275fac})}return n})();function cx(n,e,t){let i=P({rootComponent:n,platformRef:t?.platformRef},n9(e));return aM(i)}function n9(n){return{appProviders:[...a9,...n?.providers??[]],platformProviders:s9}}function i9(){Hg.makeCurrent()}function r9(){return new ai}function o9(){return JC(document),document}var s9=[{provide:ro,useValue:ex},{provide:pg,useValue:i9,multi:!0},{provide:on,useFactory:o9}];var a9=[{provide:Jd,useValue:"root"},{provide:ai,useFactory:r9},{provide:$g,useClass:Bg,multi:!0,deps:[on]},{provide:$g,useClass:LM,multi:!0,deps:[on]},lx,sx,ox,{provide:da,useExisting:lx},{provide:va,useClass:ZG},[]];var mc=class{},Vf=class{},is=class n{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(e){e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let i=t.indexOf(":");if(i>0){let r=t.slice(0,i),o=t.slice(i+1).trim();this.addHeaderEntry(r,o)}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,i)=>{this.addHeaderEntry(i,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,i])=>{this.setHeaderEntries(t,i)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if(typeof i=="string"&&(i=[i]),i.length===0)return;this.maybeSetNormalizedName(e.name,t);let r=(e.op==="a"?this.headers.get(t):void 0)||[];r.push(...i),this.headers.set(t,r);break;case"d":let o=e.value;if(!o)this.headers.delete(t),this.normalizedNames.delete(t);else{let s=this.headers.get(t);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}break}}addHeaderEntry(e,t){let i=e.toLowerCase();this.maybeSetNormalizedName(e,i),this.headers.has(i)?this.headers.get(i).push(t):this.headers.set(i,[t])}setHeaderEntries(e,t){let i=(Array.isArray(t)?t:[t]).map(o=>o.toString()),r=e.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(e,r)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var Gg=class{encodeKey(e){return OM(e)}encodeValue(e){return OM(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function l9(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{let o=r.indexOf("="),[s,a]=o==-1?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,o)),e.decodeValue(r.slice(o+1))],l=t.get(s)||[];l.push(a),t.set(s,l)}),t}var c9=/%(\d[a-f0-9])/gi,u9={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function OM(n){return encodeURIComponent(n).replace(c9,(e,t)=>u9[t]??e)}function qg(n){return`${n}`}var po=class n{map;encoder;updates=null;cloneFrom=null;constructor(e={}){if(this.encoder=e.encoder||new Gg,e.fromString){if(e.fromObject)throw new ae(2805,!1);this.map=l9(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let i=e.fromObject[t],r=Array.isArray(i)?i.map(qg):[qg(i)];this.map.set(t,r)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(i=>{let r=e[i];Array.isArray(r)?r.forEach(o=>{t.push({param:i,value:o,op:"a"})}):t.push({param:i,value:r,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(i=>t+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(qg(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let i=this.map.get(e.param)||[],r=i.indexOf(qg(e.value));r!==-1&&i.splice(r,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var Wg=class{map=new Map;set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function d9(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function VM(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function BM(n){return typeof Blob<"u"&&n instanceof Blob}function UM(n){return typeof FormData<"u"&&n instanceof FormData}function f9(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var $M="Content-Type",HM="Accept",qM="X-Request-URL",GM="text/plain",WM="application/json",p9=`${WM}, ${GM}, */*`,pc=class n{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;credentials;keepalive=!1;cache;priority;mode;redirect;referrer;integrity;responseType="json";method;params;urlWithParams;transferCache;timeout;constructor(e,t,i,r){this.url=t,this.method=e.toUpperCase();let o;if(d9(this.method)||r?(this.body=i!==void 0?i:null,o=r):o=i,o){if(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,this.keepalive=!!o.keepalive,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),o.priority&&(this.priority=o.priority),o.cache&&(this.cache=o.cache),o.credentials&&(this.credentials=o.credentials),typeof o.timeout=="number"){if(o.timeout<1||!Number.isInteger(o.timeout))throw new ae(2822,"");this.timeout=o.timeout}o.mode&&(this.mode=o.mode),o.redirect&&(this.redirect=o.redirect),o.integrity&&(this.integrity=o.integrity),o.referrer&&(this.referrer=o.referrer),this.transferCache=o.transferCache}if(this.headers??=new is,this.context??=new Wg,!this.params)this.params=new po,this.urlWithParams=t;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=t;else{let a=t.indexOf("?"),l=a===-1?"?":a<t.length-1?"&":"";this.urlWithParams=t+l+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||VM(this.body)||BM(this.body)||UM(this.body)||f9(this.body)?this.body:this.body instanceof po?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||UM(this.body)?null:BM(this.body)?this.body.type||null:VM(this.body)?null:typeof this.body=="string"?GM:this.body instanceof po?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?WM:null}clone(e={}){let t=e.method||this.method,i=e.url||this.url,r=e.responseType||this.responseType,o=e.keepalive??this.keepalive,s=e.priority||this.priority,a=e.cache||this.cache,l=e.mode||this.mode,c=e.redirect||this.redirect,d=e.credentials||this.credentials,p=e.referrer||this.referrer,h=e.integrity||this.integrity,y=e.transferCache??this.transferCache,E=e.timeout??this.timeout,A=e.body!==void 0?e.body:this.body,R=e.withCredentials??this.withCredentials,k=e.reportProgress??this.reportProgress,H=e.headers||this.headers,K=e.params||this.params,z=e.context??this.context;return e.setHeaders!==void 0&&(H=Object.keys(e.setHeaders).reduce((oe,pe)=>oe.set(pe,e.setHeaders[pe]),H)),e.setParams&&(K=Object.keys(e.setParams).reduce((oe,pe)=>oe.set(pe,e.setParams[pe]),K)),new n(t,i,A,{params:K,headers:H,context:z,reportProgress:k,responseType:r,withCredentials:R,transferCache:y,keepalive:o,cache:a,priority:s,timeout:E,mode:l,redirect:c,credentials:d,referrer:p,integrity:h})}},_a=(function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n})(_a||{}),gc=class{headers;status;statusText;url;ok;type;redirected;constructor(e,t=200,i="OK"){this.headers=e.headers||new is,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||i,this.url=e.url||null,this.redirected=e.redirected,this.ok=this.status>=200&&this.status<300}},zg=class n extends gc{constructor(e={}){super(e)}type=_a.ResponseHeader;clone(e={}){return new n({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Bf=class n extends gc{body;constructor(e={}){super(e),this.body=e.body!==void 0?e.body:null}type=_a.Response;clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0,redirected:e.redirected??this.redirected})}},hc=class extends gc{name="HttpErrorResponse";message;error;ok=!1;constructor(e){super(e,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},h9=200,m9=204;function ux(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,credentials:n.credentials,transferCache:n.transferCache,timeout:n.timeout,keepalive:n.keepalive,priority:n.priority,cache:n.cache,mode:n.mode,redirect:n.redirect,integrity:n.integrity,referrer:n.referrer}}var Lr=(()=>{class n{handler;constructor(t){this.handler=t}request(t,i,r={}){let o;if(t instanceof pc)o=t;else{let l;r.headers instanceof is?l=r.headers:l=new is(r.headers);let c;r.params&&(r.params instanceof po?c=r.params:c=new po({fromObject:r.params})),o=new pc(t,i,r.body!==void 0?r.body:null,{headers:l,context:r.context,params:c,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials,transferCache:r.transferCache,keepalive:r.keepalive,priority:r.priority,cache:r.cache,mode:r.mode,redirect:r.redirect,credentials:r.credentials,referrer:r.referrer,integrity:r.integrity,timeout:r.timeout})}let s=Vl(o).pipe(Q_(l=>this.handler.handle(l)));if(t instanceof pc||r.observe==="events")return s;let a=s.pipe(J_(l=>l instanceof Bf));switch(r.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(Ft(l=>{if(l.body!==null&&!(l.body instanceof ArrayBuffer))throw new ae(2806,!1);return l.body}));case"blob":return a.pipe(Ft(l=>{if(l.body!==null&&!(l.body instanceof Blob))throw new ae(2807,!1);return l.body}));case"text":return a.pipe(Ft(l=>{if(l.body!==null&&typeof l.body!="string")throw new ae(2808,!1);return l.body}));case"json":default:return a.pipe(Ft(l=>l.body))}case"response":return a;default:throw new ae(2809,!1)}}delete(t,i={}){return this.request("DELETE",t,i)}get(t,i={}){return this.request("GET",t,i)}head(t,i={}){return this.request("HEAD",t,i)}jsonp(t,i){return this.request("JSONP",t,{params:new po().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,i={}){return this.request("OPTIONS",t,i)}patch(t,i,r={}){return this.request("PATCH",t,ux(r,i))}post(t,i,r={}){return this.request("POST",t,ux(r,i))}put(t,i,r={}){return this.request("PUT",t,ux(r,i))}static \u0275fac=function(i){return new(i||n)(Re(mc))};static \u0275prov=de({token:n,factory:n.\u0275fac})}return n})();var g9=new ye("");function y9(n,e){return e(n)}function v9(n,e,t){return(i,r)=>ql(t,()=>e(i,o=>n(o,r)))}var zM=new ye(""),jM=new ye(""),KM=new ye("",{providedIn:"root",factory:()=>!0});var jg=(()=>{class n extends mc{backend;injector;chain=null;pendingTasks=F(Zl);contributeToStability=F(KM);constructor(t,i){super(),this.backend=t,this.injector=i}handle(t){if(this.chain===null){let i=Array.from(new Set([...this.injector.get(zM),...this.injector.get(jM,[])]));this.chain=i.reduceRight((r,o)=>v9(r,o,this.injector),y9)}if(this.contributeToStability){let i=this.pendingTasks.add();return this.chain(t,r=>this.backend.handle(r)).pipe(Bl(i))}else return this.chain(t,i=>this.backend.handle(i))}static \u0275fac=function(i){return new(i||n)(Re(Vf),Re(On))};static \u0275prov=de({token:n,factory:n.\u0275fac})}return n})();var _9=/^\)\]\}',?\n/,w9=RegExp(`^${qM}:`,"m");function C9(n){return"responseURL"in n&&n.responseURL?n.responseURL:w9.test(n.getAllResponseHeaders())?n.getResponseHeader(qM):null}var dx=(()=>{class n{xhrFactory;constructor(t){this.xhrFactory=t}handle(t){if(t.method==="JSONP")throw new ae(-2800,!1);let i=this.xhrFactory;return Vl(null).pipe(X_(()=>new rt(o=>{let s=i.build();if(s.open(t.method,t.urlWithParams),t.withCredentials&&(s.withCredentials=!0),t.headers.forEach((R,k)=>s.setRequestHeader(R,k.join(","))),t.headers.has(HM)||s.setRequestHeader(HM,p9),!t.headers.has($M)){let R=t.detectContentTypeHeader();R!==null&&s.setRequestHeader($M,R)}if(t.timeout&&(s.timeout=t.timeout),t.responseType){let R=t.responseType.toLowerCase();s.responseType=R!=="json"?R:"text"}let a=t.serializeBody(),l=null,c=()=>{if(l!==null)return l;let R=s.statusText||"OK",k=new is(s.getAllResponseHeaders()),H=C9(s)||t.url;return l=new zg({headers:k,status:s.status,statusText:R,url:H}),l},d=()=>{let{headers:R,status:k,statusText:H,url:K}=c(),z=null;k!==m9&&(z=typeof s.response>"u"?s.responseText:s.response),k===0&&(k=z?h9:0);let oe=k>=200&&k<300;if(t.responseType==="json"&&typeof z=="string"){let pe=z;z=z.replace(_9,"");try{z=z!==""?JSON.parse(z):null}catch(Ne){z=pe,oe&&(oe=!1,z={error:Ne,text:z})}}oe?(o.next(new Bf({body:z,headers:R,status:k,statusText:H,url:K||void 0})),o.complete()):o.error(new hc({error:z,headers:R,status:k,statusText:H,url:K||void 0}))},p=R=>{let{url:k}=c(),H=new hc({error:R,status:s.status||0,statusText:s.statusText||"Unknown Error",url:k||void 0});o.error(H)},h=p;t.timeout&&(h=R=>{let{url:k}=c(),H=new hc({error:new DOMException("Request timed out","TimeoutError"),status:s.status||0,statusText:s.statusText||"Request timeout",url:k||void 0});o.error(H)});let y=!1,E=R=>{y||(o.next(c()),y=!0);let k={type:_a.DownloadProgress,loaded:R.loaded};R.lengthComputable&&(k.total=R.total),t.responseType==="text"&&s.responseText&&(k.partialText=s.responseText),o.next(k)},A=R=>{let k={type:_a.UploadProgress,loaded:R.loaded};R.lengthComputable&&(k.total=R.total),o.next(k)};return s.addEventListener("load",d),s.addEventListener("error",p),s.addEventListener("timeout",h),s.addEventListener("abort",p),t.reportProgress&&(s.addEventListener("progress",E),a!==null&&s.upload&&s.upload.addEventListener("progress",A)),s.send(a),o.next({type:_a.Sent}),()=>{s.removeEventListener("error",p),s.removeEventListener("abort",p),s.removeEventListener("load",d),s.removeEventListener("timeout",h),t.reportProgress&&(s.removeEventListener("progress",E),a!==null&&s.upload&&s.upload.removeEventListener("progress",A)),s.readyState!==s.DONE&&s.abort()}})))}static \u0275fac=function(i){return new(i||n)(Re(va))};static \u0275prov=de({token:n,factory:n.\u0275fac})}return n})(),YM=new ye(""),E9="XSRF-TOKEN",x9=new ye("",{providedIn:"root",factory:()=>E9}),b9="X-XSRF-TOKEN",S9=new ye("",{providedIn:"root",factory:()=>b9}),Uf=class{},T9=(()=>{class n{doc;cookieName;lastCookieString="";lastToken=null;parseCount=0;constructor(t,i){this.doc=t,this.cookieName=i}getToken(){let t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Pf(t,this.cookieName),this.lastCookieString=t),this.lastToken}static \u0275fac=function(i){return new(i||n)(Re(on),Re(x9))};static \u0275prov=de({token:n,factory:n.\u0275fac})}return n})();function I9(n,e){let t=n.url.toLowerCase();if(!F(YM)||n.method==="GET"||n.method==="HEAD"||t.startsWith("http://")||t.startsWith("https://"))return e(n);let i=F(Uf).getToken(),r=F(S9);return i!=null&&!n.headers.has(r)&&(n=n.clone({headers:n.headers.set(r,i)})),e(n)}function fx(...n){let e=[Lr,dx,jg,{provide:mc,useExisting:jg},{provide:Vf,useFactory:()=>F(g9,{optional:!0})??F(dx)},{provide:zM,useValue:I9,multi:!0},{provide:YM,useValue:!0},{provide:Uf,useClass:T9}];for(let t of n)e.push(...t.\u0275providers);return Hl(e)}var ir=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=de({token:n,factory:function(i){let r=null;return i?r=new(i||n):r=Re(D9),r},providedIn:"root"})}return n})(),D9=(()=>{class n extends ir{_doc;constructor(t){super(),this._doc=t}sanitize(t,i){if(i==null)return null;switch(t){case Pi.NONE:return i;case Pi.HTML:return Mr(i,"HTML")?Ni(i):gg(this._doc,String(i)).toString();case Pi.STYLE:return Mr(i,"Style")?Ni(i):i;case Pi.SCRIPT:if(Mr(i,"Script"))return Ni(i);throw new ae(5200,!1);case Pi.URL:return Mr(i,"URL")?Ni(i):Cf(String(i));case Pi.RESOURCE_URL:if(Mr(i,"ResourceURL"))return Ni(i);throw new ae(5201,!1);default:throw new ae(5202,!1)}}bypassSecurityTrustHtml(t){return eE(t)}bypassSecurityTrustStyle(t){return tE(t)}bypassSecurityTrustScript(t){return nE(t)}bypassSecurityTrustUrl(t){return iE(t)}bypassSecurityTrustResourceUrl(t){return rE(t)}static \u0275fac=function(i){return new(i||n)(Re(on))};static \u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var A9=["headerEl"];function k9(n,e){if(n&1&&O(0,"div",16),n&2){let t=C();Be("background-image","url("+t.window().icon+")")}}function M9(n,e){if(n&1&&O(0,"i",4),n&2){let t=C();J("ngClass",t.window().icon)}}function N9(n,e){n&1&&O(0,"i",10)}function P9(n,e){n&1&&O(0,"i",11)}var yc=class yc{constructor(){this.window=GE.required();this.isActive=GE.required();this.close=fc();this.minimize=fc();this.maximize=fc();this.onFocus=fc();this.drag=fc();this.isDragging=I(!1);this.renderer=F(Ri);this.headerEl=lo.required("headerEl");this.dragMouseDown=e=>{if(e.target.closest("button"))return;e.preventDefault(),this.isDragging.set(!0);let t=e.clientX,i=e.clientY,r=this.window().position.x,o=this.window().position.y;this.dragUnlistenMouseMove=this.renderer.listen("document","mousemove",s=>{s.preventDefault();let a=s.clientX-t,l=s.clientY-i;this.drag.emit({x:r+a,y:o+l})}),this.dragUnlistenMouseUp=this.renderer.listen("document","mouseup",()=>{this.isDragging.set(!1),this.dragUnlistenMouseMove(),this.dragUnlistenMouseUp()})};Ae(()=>{this.headerEl().nativeElement.addEventListener("mousedown",this.dragMouseDown)})}};yc.\u0275fac=function(t){return new(t||yc)},yc.\u0275cmp=ee({type:yc,selectors:[["app-window"]],viewQuery:function(t,i){t&1&&Nr(i.headerEl,A9,5),t&2&&ao()},hostAttrs:[1,"absolute","top-0","left-0","bg-gray-800","border","border-gray-700/50","rounded-lg","shadow-lg","overflow-hidden","flex","flex-col"],hostVars:20,hostBindings:function(t,i){t&1&&N("mousedown",function(){return i.onFocus.emit()}),t&2&&(Be("width",i.window().size.width,"px")("height",i.window().size.height,"px")("transform","translate("+i.window().position.x+"px, "+i.window().position.y+"px)")("z-index",i.window().zIndex),Y("transition-all",!i.isDragging())("duration-200",!i.isDragging())("opacity-0",i.window().state==="minimized")("scale-95",i.window().state==="minimized")("shadow-2xl",i.isActive())("shadow-lg",!i.isActive()))},inputs:{window:[1,"window"],isActive:[1,"isActive"]},outputs:{close:"close",minimize:"minimize",maximize:"maximize",onFocus:"onFocus",drag:"drag"},decls:17,vars:9,consts:[["headerEl",""],[1,"flex-shrink-0","h-10","px-3","py-2","flex","justify-between","items-center","cursor-move","backdrop-blur-md","border-b","border-gray-700/50","transition-colors"],[1,"flex","items-center","gap-2","overflow-hidden"],[1,"w-5","h-5","bg-contain","bg-no-repeat","bg-center","flex-shrink-0",3,"background-image"],[1,"app-icon","text-lg",3,"ngClass"],[1,"app-title","font-medium","text-gray-200","truncate"],[1,"flex","space-x-2"],["title","Minimize",1,"w-7","h-7","flex","items-center","justify-center","hover:bg-gray-600","rounded-full","transition-colors",3,"click"],[1,"fas","fa-minus","text-xs"],["title","Maximize",1,"w-7","h-7","flex","items-center","justify-center","hover:bg-gray-600","rounded-full","transition-colors",3,"click"],[1,"far","fa-window-restore","text-xs"],[1,"far","fa-square","text-xs"],["title","Close",1,"w-7","h-7","flex","items-center","justify-center","hover:bg-red-600","rounded-full","transition-colors",3,"click"],[1,"fas","fa-times","text-sm"],[1,"app-content","flex-1","h-full","overflow-auto"],[3,"ngComponentOutlet","ngComponentOutletInjector"],[1,"w-5","h-5","bg-contain","bg-no-repeat","bg-center","flex-shrink-0"]],template:function(t,i){if(t&1){let r=B();m(0,"div",1,0)(2,"div",2),U(3,k9,1,2,"div",3)(4,M9,1,1,"i",4),m(5,"span",5),g(6),v()(),m(7,"div",6)(8,"button",7),N("click",function(){return S(r),T(i.minimize.emit())}),O(9,"i",8),v(),m(10,"button",9),N("click",function(){return S(r),T(i.maximize.emit())}),U(11,N9,1,0,"i",10)(12,P9,1,0,"i",11),v(),m(13,"button",12),N("click",function(){return S(r),T(i.close.emit())}),O(14,"i",13),v()()(),m(15,"div",14),Dg(16,15),v()}t&2&&(Y("bg-gray-700/80",i.isActive())("bg-gray-900/50",!i.isActive()),w(3),$(i.window().icon.startsWith("data:image")?3:4),w(3),V(i.window().title),w(5),$(i.window().state==="maximized"?11:12),w(5),J("ngComponentOutlet",i.window().component)("ngComponentOutletInjector",i.window().injector))},dependencies:[te,Vt,ZE],encapsulation:2});var Kg=yc;var JM="banana-os-wallpaper",QM="banana-os-accent-color",wa=class wa{constructor(){this.wallpaper=I(typeof localStorage<"u"&&localStorage.getItem(JM)||"wallpaper-default");this.accentColor=I(typeof localStorage<"u"&&localStorage.getItem(QM)||"blue");Ae(()=>{typeof localStorage<"u"&&localStorage.setItem(JM,this.wallpaper())}),Ae(()=>{typeof localStorage<"u"&&localStorage.setItem(QM,this.accentColor())})}setWallpaper(e){this.wallpaper.set(e)}setAccentColor(e){this.accentColor.set(e)}resetToDefaults(){this.setWallpaper("wallpaper-default"),this.setAccentColor("blue")}};wa.\u0275fac=function(t){return new(t||wa)},wa.\u0275prov=de({token:wa,factory:wa.\u0275fac,providedIn:"root"});var rs=wa;var Ca=[{id:"banana-copilot",title:"Banana Copilot",icon:"fas fa-robot text-cyan-400",category:"System",description:"Your AI assistant for Banana OS.",isCore:!0,defaultSize:{width:450,height:600}},{id:"file-explorer",title:"File Explorer",icon:"fas fa-folder text-yellow-400",category:"System",description:"Browse and manage your files.",isCore:!0,defaultSize:{width:700,height:500}},{id:"terminal",title:"Terminal",icon:"fas fa-terminal text-green-400",category:"System",description:"Command-line interface for power users.",isCore:!0,defaultSize:{width:600,height:400}},{id:"settings",title:"Settings",icon:"fas fa-cog text-gray-400",category:"System",description:"Customize your system settings.",isCore:!0,defaultSize:{width:650,height:550}},{id:"store",title:"App Store",icon:"fas fa-store text-indigo-400",category:"System",description:"Discover and install new apps.",isCore:!0,defaultSize:{width:750,height:550}},{id:"photo-viewer",title:"Photos",icon:"fas fa-images text-teal-400",category:"Creative",description:"View your favorite images.",defaultSize:{width:800,height:600}},{id:"camera",title:"Camera",icon:"fas fa-camera text-pink-400",category:"Creative",description:"Use your device camera to take photos.",defaultSize:{width:640,height:480}},{id:"creative-music",title:"Music Player",icon:"fas fa-music text-pink-500",category:"Creative",description:"Listen to your favorite tunes.",defaultSize:{width:800,height:500}},{id:"creative-markdown",title:"Markdown Editor",icon:"fab fa-markdown text-gray-400",category:"Creative",description:"Write in Markdown with live preview.",defaultSize:{width:900,height:600}},{id:"creative-podcast",title:"Podcasts",icon:"fas fa-podcast text-orange-500",category:"Creative",description:"Discover and listen to podcasts.",defaultSize:{width:750,height:550}},{id:"creative-audio-editor",title:"AudioLab",icon:"fas fa-wave-square text-blue-400",category:"Creative",description:"Record and edit audio files."},{id:"creative-animation",title:"Animator",icon:"fas fa-film text-purple-500",category:"Creative",description:"Create 2D animations."},{id:"creative-dj-mixer",title:"DJ Mixer",icon:"fas fa-headphones text-pink-500",category:"Creative",description:"Mix your favorite tracks."},{id:"creative-storyboard",title:"Storyboarder",icon:"fas fa-book-open text-yellow-600",category:"Creative",description:"Plan your visual stories."},{id:"creative-font-manager",title:"Font Manager",icon:"fas fa-font text-green-400",category:"Creative",description:"Organize and preview fonts."},{id:"creative-ecard-maker",title:"Card Maker",icon:"fas fa-birthday-cake text-pink-400",category:"Creative",description:"Design digital greeting cards."},{id:"creative-photo-collage",title:"Photo Collage",icon:"fas fa-th text-teal-400",category:"Creative",description:"Combine photos into collages."},{id:"app-builder",title:"App Builder",icon:"fas fa-drafting-compass text-cyan-400",category:"Productivity",description:"Create and install your own apps.",defaultSize:{width:900,height:700}},{id:"browser",title:"Browser",icon:"fas fa-globe text-blue-400",category:"Productivity",description:"Surf the web.",isCore:!0,defaultSize:{width:800,height:600}},{id:"text-editor",title:"Text Editor",icon:"fas fa-file-alt text-red-400",category:"Productivity",description:"A simple editor for text files.",defaultSize:{width:600,height:500}},{id:"prod-notes",title:"Notes",icon:"fas fa-sticky-note text-yellow-300",category:"Productivity",description:"Jot down your thoughts.",defaultSize:{width:600,height:450}},{id:"prod-calendar",title:"Calendar",icon:"fas fa-calendar-alt text-blue-500",category:"Productivity",description:"Organize your schedule.",defaultSize:{width:700,height:500}},{id:"prod-clock",title:"Clock",icon:"fas fa-clock text-white",category:"Productivity",description:"Alarms, timer, and stopwatch.",defaultSize:{width:500,height:400}},{id:"prod-maps",title:"Maps",icon:"fas fa-map-marked-alt text-teal-400",category:"Productivity",description:"Find your way around the world.",defaultSize:{width:700,height:550}},{id:"prod-email",title:"Mail",icon:"fas fa-envelope text-red-400",category:"Productivity",description:"Manage your emails."},{id:"prod-todo",title:"To-Do",icon:"fas fa-check-square text-gray-400",category:"Productivity",description:"Track your tasks."},{id:"prod-voice-memos",title:"Voice Memos",icon:"fas fa-microphone-alt text-red-500",category:"Productivity",description:"Record quick audio notes."},{id:"prod-code-editor",title:"CodePad",icon:"fas fa-code text-purple-400",category:"Productivity",description:"A lightweight code editor."},{id:"prod-compressor",title:"Zipper",icon:"fas fa-file-archive text-yellow-600",category:"Productivity",description:"Compress and extract files."},{id:"prod-mindmap",title:"Mind Map",icon:"fas fa-project-diagram text-indigo-400",category:"Productivity",description:"Visualize your ideas."},{id:"calculator",title:"Calculator",icon:"fas fa-calculator text-purple-400",category:"Utilities",description:"Perform basic calculations.",defaultSize:{width:320,height:480}},{id:"weather",title:"Weather",icon:"fas fa-cloud-sun text-cyan-400",category:"Utilities",description:"Get the latest weather forecast.",defaultSize:{width:400,height:550}},{id:"util-system-monitor",title:"System Monitor",icon:"fas fa-chart-line text-red-500",category:"Utilities",description:"Monitor system resource usage.",defaultSize:{width:500,height:450}},{id:"util-pdf-reader",title:"PDF Reader",icon:"fas fa-file-pdf text-red-500",category:"Utilities",description:"View and manage PDF documents.",defaultSize:{width:800,height:600}},{id:"app-translator",title:"Translator",icon:"fas fa-language text-blue-500",category:"Utilities",description:"Translate text between languages.",defaultSize:{width:700,height:500}},{id:"util-password-manager",title:"Password Safe",icon:"fas fa-key text-yellow-400",category:"Utilities",description:"Securely store passwords."},{id:"util-unit-converter",title:"Converter",icon:"fas fa-exchange-alt text-blue-400",category:"Utilities",description:"Convert various units."},{id:"util-world-clock",title:"World Clock",icon:"fas fa-globe text-green-400",category:"Utilities",description:"View time across the globe."},{id:"util-authenticator",title:"Authenticator",icon:"fas fa-shield-alt text-purple-400",category:"Utilities",description:"Generate 2FA codes."},{id:"util-disk-analyzer",title:"Disk Analyzer",icon:"fas fa-chart-pie text-orange-400",category:"Utilities",description:"Visualize disk space usage."},{id:"util-qr-scanner",title:"QR Scanner",icon:"fas fa-qrcode text-gray-400",category:"Utilities",description:"Scan and generate QR codes."},{id:"util-remote-desktop",title:"Remote Desktop",icon:"fas fa-desktop text-indigo-400",category:"Utilities",description:"Access other computers remotely."},{id:"util-clipboard-manager",title:"Clipboard History",icon:"fas fa-clipboard-list text-gray-500",category:"Utilities",description:"Manage your clipboard history."},{id:"game-chess",title:"Chess",icon:"fas fa-chess text-gray-200",category:"Games",description:"Classic strategy board game.",defaultSize:{width:700,height:750}},{id:"game-solitaire",title:"Solitaire",icon:"fas fa-heart text-red-500",category:"Games",description:"Classic card game.",defaultSize:{width:800,height:600}},{id:"game-minesweeper",title:"Minesweeper",icon:"fas fa-bomb text-gray-400",category:"Games",description:"Find all the mines.",defaultSize:{width:400,height:500}},{id:"game-sudoku",title:"Sudoku",icon:"fas fa-border-all text-blue-300",category:"Games",description:"Logic-based number puzzle.",defaultSize:{width:500,height:600}},{id:"game-puzzle-blocks",title:"Puzzle Blocks",icon:"fas fa-cubes text-purple-400",category:"Games",description:"A block-dropping puzzle game.",defaultSize:{width:550,height:750}},{id:"game-2048",title:"2048",icon:"fas fa-th text-orange-400",category:"Games",description:"Slide tiles to get to 2048.",defaultSize:{width:500,height:650}},{id:"game-word-finder",title:"Word Finder",icon:"fas fa-search text-teal-300",category:"Games",description:"Find hidden words in a grid.",defaultSize:{width:700,height:500}},{id:"game-pacman",title:"Pac-Man",icon:"fas fa-ghost text-yellow-400",category:"Games",description:"Classic arcade game."},{id:"game-space-invaders",title:"Space Invaders",icon:"fas fa-space-shuttle text-gray-400",category:"Games",description:"Defend against alien hordes."},{id:"game-asteroids",title:"Asteroids",icon:"fas fa-meteor text-gray-500",category:"Games",description:"Blast asteroids and survive."},{id:"game-snake",title:"Snake",icon:"fas fa-plus text-green-400",category:"Games",description:"Grow your snake by eating."},{id:"game-checkers",title:"Checkers",icon:"fas fa-square text-red-500",category:"Games",description:"Classic board game of strategy."},{id:"game-reversi",title:"Reversi",icon:"fas fa-circle text-white",category:"Games",description:"Flip discs to dominate the board."},{id:"game-go",title:"Go",icon:"fas fa-border-all text-black",category:"Games",description:"Ancient game of territory."},{id:"game-mahjong",title:"Mahjong Solitaire",icon:"fas fa-dragon text-green-600",category:"Games",description:"Match tiles to clear the board."},{id:"game-crossword",title:"Crossword",icon:"fas fa-puzzle-piece text-blue-400",category:"Games",description:"Solve crossword puzzles."},{id:"game-wordsearch",title:"Word Search",icon:"fas fa-search text-purple-400",category:"Games",description:"Find hidden words in a grid."},{id:"game-trivia",title:"Trivia Quiz",icon:"fas fa-question-circle text-yellow-500",category:"Games",description:"Test your knowledge."},{id:"game-hangman",title:"Hangman",icon:"fas fa-user-ninja text-gray-600",category:"Games",description:"Guess the word before it's too late."},{id:"game-blackjack",title:"Blackjack",icon:"fas fa-heart text-red-600",category:"Games",description:"Card game to get 21."},{id:"game-poker",title:"Poker",icon:"fas fa-trophy text-yellow-400",category:"Games",description:"Texas Hold'em poker."},{id:"game-flappy",title:"Flappy Banana",icon:"fas fa-lemon text-yellow-300",category:"Games",description:"A fun and challenging game."},{id:"social-forums",title:"Forums",icon:"fas fa-id-card text-cyan-400",category:"Social",description:"My social and contact information."},{id:"social-events",title:"Events",icon:"fas fa-calendar-check text-purple-400",category:"Social",description:"Plan and attend social events."},{id:"app-recipes",title:"Recipe Book",icon:"fas fa-utensils text-orange-600",category:"Other",description:"Find and save delicious recipes.",defaultSize:{width:800,height:600}},{id:"app-stocks",title:"Stocks",icon:"fas fa-chart-line text-green-600",category:"Other",description:"Track the stock market.",defaultSize:{width:400,height:550}},{id:"app-news",title:"News Feed",icon:"fas fa-newspaper text-gray-300",category:"Other",description:"Get the latest news headlines.",defaultSize:{width:850,height:600}},{id:"other-ide",title:"Banana IDE",icon:"fas fa-laptop-code text-indigo-500",category:"Other",description:"Integrated Development Environment.",defaultSize:{width:900,height:600}},{id:"other-language",title:"Lingo Learn",icon:"fas fa-language text-green-500",category:"Other",description:"Learn new languages."},{id:"other-dictionary",title:"Dictionary",icon:"fas fa-book text-yellow-700",category:"Other",description:"Look up word definitions."},{id:"other-encyclopedia",title:"Encyclopedia",icon:"fas fa-globe-americas text-blue-600",category:"Other",description:"Browse a world of knowledge."},{id:"other-stargazing",title:"Stargazer",icon:"fas fa-star text-yellow-300",category:"Other",description:"Explore the night sky."},{id:"other-inventory",title:"Home Inventory",icon:"fas fa-box-open text-orange-600",category:"Other",description:"Keep track of your belongings."},{id:"other-petcare",title:"Pet Care",icon:"fas fa-paw text-yellow-900",category:"Other",description:"Manage your pet's health."}];var XM="banana-os-installed-apps",ZM="banana-os-custom-apps",Ea=class Ea{constructor(){this.coreAppIds=Ca.filter(e=>e.isCore).map(e=>e.id);this.installedAppIds=I(this.getInitialInstalledApps());this.customApps=I(this.loadCustomApps());this.allApps=le(()=>[...Ca,...this.customApps()]);Ae(()=>{localStorage.setItem(XM,JSON.stringify(this.installedAppIds()))}),Ae(()=>{localStorage.setItem(ZM,JSON.stringify(this.customApps()))})}getInitialInstalledApps(){let e=localStorage.getItem(XM);if(e)try{let t=JSON.parse(e);return[...new Set([...this.coreAppIds,...t])]}catch{return[...this.coreAppIds]}return[...this.coreAppIds]}loadCustomApps(){let e=localStorage.getItem(ZM);if(e)try{return JSON.parse(e)}catch{return[]}return[]}isAppInstalled(e){return this.installedAppIds().includes(e)}installApp(e){this.isAppInstalled(e)||this.installedAppIds.update(t=>[...t,e])}uninstallApp(e){if(this.coreAppIds.includes(e)){console.warn(`Attempted to uninstall a core app: ${e}`);return}e.startsWith("custom-")&&this.customApps.update(t=>t.filter(i=>i.id!==e)),this.installedAppIds.update(t=>t.filter(i=>i!==e))}uninstallAllNonCoreApps(){this.customApps.set([]),this.installedAppIds.set([...this.coreAppIds])}addCustomApp(e){let t={id:`custom-${Date.now()}`,title:e.title,icon:e.icon,projectType:e.projectType,code:e.code,category:"Other",description:"A user-created application."};this.customApps.update(i=>[...i,t]),this.installApp(t.id)}getCustomApp(e){return this.customApps().find(t=>t.id===e)}};Ea.\u0275fac=function(t){return new(t||Ea)},Ea.\u0275prov=de({token:Ea,factory:Ea.\u0275fac,providedIn:"root"});var Vi=Ea;var xa=class xa{constructor(){this.openAppRequest=new nn;this.updateWindowTitle=new nn;this.factoryResetRequest=new nn;this.restartRequest=new nn;this.copilotActionRequest=new nn;this.inAppActionRequest=new nn}};xa.\u0275fac=function(t){return new(t||xa)},xa.\u0275prov=de({token:xa,factory:xa.\u0275fac,providedIn:"root"});var dt=xa;var yn=new ye("WINDOW_CONTEXT");var ba=class ba{constructor(){this.openWindows=I([])}};ba.\u0275fac=function(t){return new(t||ba)},ba.\u0275prov=de({token:ba,factory:ba.\u0275fac,providedIn:"root"});var os=ba;var Sa=class Sa{constructor(){this.notifications=I([]);this.nextId=0;this.appManagementService=F(Vi);this.unreadCount=le(()=>this.notifications().filter(e=>!e.isRead).length)}show(e){let t=this.appManagementService.allApps().find(r=>r.id===e.appId),i={id:this.nextId++,title:e.title,body:e.body,type:e.type||"info",appId:e.appId,appIcon:t?.icon||"fas fa-info-circle",timestamp:Date.now(),isRead:!1};this.notifications.update(r=>[i,...r])}remove(e){this.notifications.update(t=>t.filter(i=>i.id!==e))}markAllAsRead(){this.notifications.update(e=>e.map(t=>t.isRead?t:Z(P({},t),{isRead:!0})))}clearAll(){this.notifications.set([])}};Sa.\u0275fac=function(t){return new(t||Sa)},Sa.\u0275prov=de({token:Sa,factory:Sa.\u0275fac,providedIn:"root"});var vt=Sa;var Ta=class Ta{constructor(){this.componentRegistry=new Map}register(e,t){this.componentRegistry.set(e,t)}get(e){return this.componentRegistry.get(e)}};Ta.\u0275fac=function(t){return new(t||Ta)},Ta.\u0275prov=de({token:Ta,factory:Ta.\u0275fac,providedIn:"root"});var Yg=Ta;var e2="banana-os-filesystem",t2="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAAAHhJREFUeJzt0DEBAAAAwqD1T20ND6AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8AAn2AAB2G1p5AAAAABJRU5ErkJggg==",n2="Welcome to the Banana OS Text Editor!",ho=Date.now(),i2=n=>Math.ceil(n.length/4)*3,R9={name:"welcome.txt",path:"/Documents/welcome.txt",type:"file",content:n2,size:n2.length,modifiedDate:ho-2e5},F9={name:"photo.png",path:"/Documents/photo.png",type:"file",content:t2,size:i2(t2),modifiedDate:ho-5e5},L9={name:"kernel.bin",path:"/System/kernel.bin",type:"file",content:"BINARY_DATA",size:4096,modifiedDate:ho-8e6},O9={name:"config.sys",path:"/System/config.sys",type:"file",content:"CONFIG_DATA",size:1024,modifiedDate:ho-7e6},px={name:"",path:"/",type:"directory",children:{Desktop:{name:"Desktop",path:"/Desktop",type:"directory",children:{},size:0,modifiedDate:ho-9e6},Documents:{name:"Documents",path:"/Documents",type:"directory",children:{"welcome.txt":R9,"photo.png":F9},size:0,modifiedDate:ho-5e5},Downloads:{name:"Downloads",path:"/Downloads",type:"directory",children:{},size:0,modifiedDate:ho-85e5},System:{name:"System",path:"/System",type:"directory",children:{"kernel.bin":L9,"config.sys":O9},size:0,modifiedDate:ho-95e5}},size:0,modifiedDate:ho-1e7},Ia=class Ia{constructor(){this.fileSystem=I(this.loadFromLocalStorage());this.isCorrupted=I(!1);Ae(()=>{localStorage.setItem(e2,JSON.stringify(this.fileSystem()))})}calculateSize(e){return e.startsWith("data:image")?i2(e):e.length}resetToDefaults(){this.fileSystem.set(px),this.isCorrupted.set(!1)}loadFromLocalStorage(){try{let e=localStorage.getItem(e2);return e?JSON.parse(e):px}catch{return px}}updateNodeByPath(e,t){if(e.startsWith("/System/"))return this.isCorrupted.set(!0),!1;let i=e.split("/").filter(r=>r);return i.length===0&&e!=="/"?!1:(this.fileSystem.update(r=>{let o=JSON.parse(JSON.stringify(r)),s=o;if(e==="/")return t(s),o;for(let l=0;l<i.length-1;l++){let c=s.children[i[l]];if(c&&c.type==="directory")s=c;else return r}let a=s.children[i[i.length-1]];return a&&t(a),o}),!0)}getNode(e){if(e==="/")return this.fileSystem();let t=e.split("/").filter(r=>r),i=this.fileSystem();for(let r of t)if(i.type==="directory"){let o=i.children[r];if(o)i=o;else return null}else return null;return i}getDirectory(e){let t=this.getNode(e);return t?.type==="directory"?t:null}readFile(e){let t=this.getNode(e);return t?.type==="file"?t.content:null}writeFile(e,t){return e.startsWith("/System/")?(this.isCorrupted.set(!0),!1):this.updateNodeByPath(e,i=>{i.content=t,i.size=this.calculateSize(t),i.modifiedDate=Date.now()})}createDirectory(e,t){let i=this.getDirectory(e);return!i||i.children[t]?!1:this.updateNodeByPath(e,r=>{r.children[t]={name:t,path:`${e==="/"?"":e}/${t}`,type:"directory",children:{},size:0,modifiedDate:Date.now()},r.modifiedDate=Date.now()})}createFile(e,t,i=""){let r=this.getDirectory(e);return!r||r.children[t]?!1:this.updateNodeByPath(e,o=>{o.children[t]={name:t,path:`${e==="/"?"":e}/${t}`,type:"file",content:i,size:this.calculateSize(i),modifiedDate:Date.now()},o.modifiedDate=Date.now()})}deleteNode(e){if(e.startsWith("/System/"))return this.isCorrupted.set(!0),!1;let t=e.substring(0,e.lastIndexOf("/"))||"/",i=e.substring(e.lastIndexOf("/")+1),r=this.getDirectory(t);return!r||!r.children[i]?!1:this.updateNodeByPath(t,o=>{delete o.children[i],o.modifiedDate=Date.now()})}renameNode(e,t){if(e.startsWith("/System/"))return this.isCorrupted.set(!0),!1;let i=e.substring(0,e.lastIndexOf("/"))||"/",r=e.substring(e.lastIndexOf("/")+1),o=this.getDirectory(i);return!o||!o.children[r]||o.children[t]?!1:this.updateNodeByPath(i,s=>{let a=s.children[r];a.name=t,a.path=`${i==="/"?"":i}/${t}`,a.modifiedDate=Date.now(),a.type==="directory"&&this.updateChildrenPaths(a,a.path),s.children[t]=a,delete s.children[r],s.modifiedDate=Date.now()})}moveNode(e,t){let i=this.getNode(e),r=this.getDirectory(t);if(!i||!r||r.children[i.name]||e.startsWith("/System/")||i.type==="directory"&&t.startsWith(i.path))return!1;let o=e.substring(0,e.lastIndexOf("/"))||"/";return o===t?!1:(this.fileSystem.update(s=>{let a=JSON.parse(JSON.stringify(s)),l=a;o.split("/").filter(h=>h).forEach(h=>{l=l.children[h]});let c=e.substring(e.lastIndexOf("/")+1),d=l.children[c];if(!d)return s;delete l.children[c];let p=a;return t.split("/").filter(h=>h).forEach(h=>{p=p.children[h]}),this.updateChildrenPaths(d,t),p.children[d.name]=d,a}),!0)}copyNode(e,t){let i=this.getNode(e),r=this.getDirectory(t);if(!i||!r)return!1;let o=i.name,s=1;for(;r.children[o];){let a=i.name.split("."),l=a.length>1?"."+a.pop():"";o=`${a.join(".")} (copy${s>1?" "+s:""})${l}`,s++}return i.type==="directory"&&t.startsWith(e)?!1:(this.fileSystem.update(a=>{let l=JSON.parse(JSON.stringify(a)),c=JSON.parse(JSON.stringify(i));c.name=o,this.updateChildrenPaths(c,t);let d=l;return t.split("/").filter(p=>p).forEach(p=>{d.children[p]?.type==="directory"&&(d=d.children[p])}),d.children[c.name]=c,l}),!0)}updateChildrenPaths(e,t){if(e.path=`${t==="/"?"":t}/${e.name}`,e.modifiedDate=Date.now(),e.type==="directory")for(let i in e.children)this.updateChildrenPaths(e.children[i],e.path)}corruptFileSystem(){this.fileSystem.update(e=>{let t=JSON.parse(JSON.stringify(e)),i=()=>Math.random().toString(36).substring(2,7),r=o=>{for(let s in o.children){let a=o.children[s];Math.random()<.5&&(a.type==="file"?(a.name=`${i()}.dat`,a.content=`CORRUPTED_DATA_${i()}`):(a.name=i(),r(a))),Math.random()<.2&&!["System","Desktop"].includes(s)&&delete o.children[s]}};return r(t),t})}normalizePath(e){let t=e.split("/").filter(r=>r),i=[];for(let r of t)r===".."?i.pop():r!=="."&&i.push(r);return"/"+i.join("/")}};Ia.\u0275fac=function(t){return new(t||Ia)},Ia.\u0275prov=de({token:Ia,factory:Ia.\u0275fac,providedIn:"root"});var Bi=Ia;var r2="banana-os-dnd",o2="banana-os-volume",s2="banana-os-system-sounds",a2="banana-os-language",l2="banana-os-time-format",c2="banana-os-mouse-speed",u2="banana-os-scroll-speed",d2="banana-os-primary-mouse-button",f2="banana-os-screen-lock-timeout",p2="banana-os-power-mode";var Da=class Da{constructor(){this.dndEnabled=I(this.loadFromStorage(r2,!1));this.masterVolume=I(this.loadFromStorage(o2,80));this.systemSoundsEnabled=I(this.loadFromStorage(s2,!0));this.language=I(this.loadFromStorage(a2,"en-US"));this.timeFormat=I(this.loadFromStorage(l2,"12h"));this.mouseSpeed=I(this.loadFromStorage(c2,50));this.scrollSpeed=I(this.loadFromStorage(u2,50));this.primaryMouseButton=I(this.loadFromStorage(d2,"left"));this.screenLockTimeout=I(this.loadFromStorage(f2,5));this.powerMode=I(this.loadFromStorage(p2,"balanced"));this.createEffect(this.dndEnabled,r2),this.createEffect(this.masterVolume,o2),this.createEffect(this.systemSoundsEnabled,s2),this.createEffect(this.language,a2),this.createEffect(this.timeFormat,l2),this.createEffect(this.mouseSpeed,c2),this.createEffect(this.scrollSpeed,u2),this.createEffect(this.primaryMouseButton,d2),this.createEffect(this.screenLockTimeout,f2),this.createEffect(this.powerMode,p2)}loadFromStorage(e,t){if(typeof localStorage>"u")return t;let i=localStorage.getItem(e);try{return i?JSON.parse(i):t}catch{return t}}createEffect(e,t){Ae(()=>{typeof localStorage<"u"&&localStorage.setItem(t,JSON.stringify(e()))})}resetAllToDefaults(){this.dndEnabled.set(!1),this.masterVolume.set(80),this.systemSoundsEnabled.set(!0),this.language.set("en-US"),this.timeFormat.set("12h"),this.mouseSpeed.set(50),this.scrollSpeed.set(50),this.primaryMouseButton.set("left"),this.screenLockTimeout.set(5),this.powerMode.set("balanced")}};Da.\u0275fac=function(t){return new(t||Da)},Da.\u0275prov=de({token:Da,factory:Da.\u0275fac,providedIn:"root"});var ss=Da;var h2="banana-os-crypto-key",Aa=class Aa{constructor(){this.cryptoKey=I(null);this.keyReady=this.initializeKey()}async initializeKey(){if(!(typeof crypto>"u"||typeof localStorage>"u"))try{let e=localStorage.getItem(h2);if(e){let t=JSON.parse(e),i=await crypto.subtle.importKey("jwk",t,{name:"AES-GCM"},!0,["encrypt","decrypt"]);this.cryptoKey.set(i)}else{let t=await crypto.subtle.generateKey({name:"AES-GCM",length:256},!0,["encrypt","decrypt"]);this.cryptoKey.set(t);let i=await crypto.subtle.exportKey("jwk",t);localStorage.setItem(h2,JSON.stringify(i))}}catch(e){console.error("Crypto key initialization failed:",e)}}async encrypt(e){await this.keyReady;let t=this.cryptoKey();if(!t||!e)return e;try{let i=crypto.getRandomValues(new Uint8Array(12)),r=new TextEncoder().encode(e),o=await crypto.subtle.encrypt({name:"AES-GCM",iv:i},t,r),s=btoa(String.fromCharCode.apply(null,Array.from(i))),a=btoa(String.fromCharCode.apply(null,Array.from(new Uint8Array(o))));return`${s}:${a}`}catch(i){return console.error("Encryption failed:",i),e}}async decrypt(e){await this.keyReady;let t=this.cryptoKey();if(!t||!e.includes(":"))throw new Error("Decryption pre-conditions not met: Key missing or invalid data format.");try{let[i,r]=e.split(":"),o=new Uint8Array(atob(i).split("").map(l=>l.charCodeAt(0))),s=new Uint8Array(atob(r).split("").map(l=>l.charCodeAt(0))),a=await crypto.subtle.decrypt({name:"AES-GCM",iv:o},t,s);return new TextDecoder().decode(a)}catch(i){throw console.error("Decryption failed:",i),i}}};Aa.\u0275fac=function(t){return new(t||Aa)},Aa.\u0275prov=de({token:Aa,factory:Aa.\u0275fac,providedIn:"root"});var vc=Aa;var hx="banana-os-password-hash",ka=class ka{constructor(){this.cryptoService=F(vc);this.passwordHash=I(null);this.isPasswordSet=le(()=>this.passwordHash()!==null);typeof localStorage<"u"&&this.passwordHash.set(localStorage.getItem(hx))}async setPassword(e){let t=await this.cryptoService.encrypt(e);this.passwordHash.set(t),localStorage.setItem(hx,t)}async verifyPassword(e){let t=this.passwordHash();if(!t)return!1;try{let i=await this.cryptoService.decrypt(t);return e===i}catch(i){return console.error("Password verification failed during decryption:",i),!1}}removePassword(){this.passwordHash.set(null),localStorage.removeItem(hx)}};ka.\u0275fac=function(t){return new(t||ka)},ka.\u0275prov=de({token:ka,factory:ka.\u0275fac,providedIn:"root"});var _c=ka;var m2="banana-os-lock-state",Ma=class Ma{constructor(){this.systemPreferences=F(ss);this.authService=F(_c);this.platformId=F(ro);this.isLocked=I(this.loadLockState());this.activityEvents=["mousemove","keydown","mousedown","scroll"];this.resetInactivityTimer=()=>{if(clearTimeout(this.inactivityTimer),this.isLocked()||!this.authService.isPasswordSet())return;let e=this.systemPreferences.screenLockTimeout();e>0&&(this.inactivityTimer=setTimeout(()=>this.lockNow(),e*60*1e3))};ns(this.platformId)&&(this.activityEvents.forEach(e=>document.addEventListener(e,this.resetInactivityTimer)),Ae(()=>{localStorage.setItem(m2,JSON.stringify(this.isLocked()))}),Ae(()=>{this.resetInactivityTimer(),!this.authService.isPasswordSet()&&this.isLocked()&&this.isLocked.set(!1)}))}loadLockState(){if(ns(this.platformId))try{return localStorage.getItem(m2)==="true"&&!!localStorage.getItem("banana-os-password-hash")}catch{return!1}return!1}ngOnDestroy(){ns(this.platformId)&&(this.activityEvents.forEach(e=>document.removeEventListener(e,this.resetInactivityTimer)),clearTimeout(this.inactivityTimer))}lockNow(){this.authService.isPasswordSet()&&(this.isLocked.set(!0),clearTimeout(this.inactivityTimer))}async unlock(e){let t=await this.authService.verifyPassword(e);return t&&(this.isLocked.set(!1),this.resetInactivityTimer()),t}};Ma.\u0275fac=function(t){return new(t||Ma)},Ma.\u0275prov=de({token:Ma,factory:Ma.\u0275fac,providedIn:"root"});var wc=Ma;function Or(n){n||(n=F(ht));let e=new rt(t=>{if(n.destroyed){t.next();return}return n.onDestroy(t.next.bind(t))});return t=>t.pipe(Z_(e))}var V9,B9;function U9(){return{geminiUrl:V9,vertexUrl:B9}}function $9(n,e,t,i){var r,o;if(!n?.baseUrl){let s=U9();return e?(r=s.vertexUrl)!==null&&r!==void 0?r:t:(o=s.geminiUrl)!==null&&o!==void 0?o:i}return n.baseUrl}var rr=class{};function re(n,e){let t=/\{([^}]+)\}/g;return n.replace(t,(i,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){let o=e[r];return o!=null?String(o):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function f(n,e,t){for(let o=0;o<e.length-1;o++){let s=e[o];if(s.endsWith("[]")){let a=s.slice(0,-2);if(!(a in n))if(Array.isArray(t))n[a]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${s}`);if(Array.isArray(n[a])){let l=n[a];if(Array.isArray(t))for(let c=0;c<l.length;c++){let d=l[c];f(d,e.slice(o+1),t[c])}else for(let c of l)f(c,e.slice(o+1),t)}return}else if(s.endsWith("[0]")){let a=s.slice(0,-3);a in n||(n[a]=[{}]);let l=n[a];f(l[0],e.slice(o+1),t);return}(!n[s]||typeof n[s]!="object")&&(n[s]={}),n=n[s]}let i=e[e.length-1],r=n[i];if(r!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===r)return;if(typeof r=="object"&&typeof t=="object"&&r!==null&&t!==null)Object.assign(r,t);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof t=="object"&&t!==null&&!Array.isArray(t)?Object.assign(n,t):n[i]=t}function u(n,e,t=void 0){try{if(e.length===1&&e[0]==="_self")return n;for(let i=0;i<e.length;i++){if(typeof n!="object"||n===null)return t;let r=e[i];if(r.endsWith("[]")){let o=r.slice(0,-2);if(o in n){let s=n[o];return Array.isArray(s)?s.map(a=>u(a,e.slice(i+1),t)):t}else return t}else n=n[r]}return n}catch(i){if(i instanceof TypeError)return t;throw i}}function H9(n,e){for(let[t,i]of Object.entries(e)){let r=t.split("."),o=i.split("."),s=new Set,a=-1;for(let l=0;l<r.length;l++)if(r[l]==="*"){a=l;break}if(a!==-1&&o.length>a)for(let l=a;l<o.length;l++){let c=o[l];c!=="*"&&!c.endsWith("[]")&&!c.endsWith("[0]")&&s.add(c)}mx(n,r,o,0,s)}}function mx(n,e,t,i,r){if(i>=e.length||typeof n!="object"||n===null)return;let o=e[i];if(o.endsWith("[]")){let s=o.slice(0,-2),a=n;if(s in a&&Array.isArray(a[s]))for(let l of a[s])mx(l,e,t,i+1,r)}else if(o==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){let s=n,a=Object.keys(s).filter(c=>!c.startsWith("_")&&!r.has(c)),l={};for(let c of a)l[c]=s[c];for(let[c,d]of Object.entries(l)){let p=[];for(let h of t.slice(i))h==="*"?p.push(c):p.push(h);f(s,p,d)}for(let c of a)delete s[c]}}else{let s=n;o in s&&mx(s[o],e,t,i+1,r)}}function sb(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}function q9(n){let e={},t=u(n,["operationName"]);t!=null&&f(e,["operationName"],t);let i=u(n,["resourceName"]);return i!=null&&f(e,["_url","resourceName"],i),e}function G9(n){let e={},t=u(n,["name"]);t!=null&&f(e,["name"],t);let i=u(n,["metadata"]);i!=null&&f(e,["metadata"],i);let r=u(n,["done"]);r!=null&&f(e,["done"],r);let o=u(n,["error"]);o!=null&&f(e,["error"],o);let s=u(n,["response","generateVideoResponse"]);return s!=null&&f(e,["response"],z9(s)),e}function W9(n){let e={},t=u(n,["name"]);t!=null&&f(e,["name"],t);let i=u(n,["metadata"]);i!=null&&f(e,["metadata"],i);let r=u(n,["done"]);r!=null&&f(e,["done"],r);let o=u(n,["error"]);o!=null&&f(e,["error"],o);let s=u(n,["response"]);return s!=null&&f(e,["response"],j9(s)),e}function z9(n){let e={},t=u(n,["generatedSamples"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(s=>K9(s))),f(e,["generatedVideos"],o)}let i=u(n,["raiMediaFilteredCount"]);i!=null&&f(e,["raiMediaFilteredCount"],i);let r=u(n,["raiMediaFilteredReasons"]);return r!=null&&f(e,["raiMediaFilteredReasons"],r),e}function j9(n){let e={},t=u(n,["videos"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(s=>Y9(s))),f(e,["generatedVideos"],o)}let i=u(n,["raiMediaFilteredCount"]);i!=null&&f(e,["raiMediaFilteredCount"],i);let r=u(n,["raiMediaFilteredReasons"]);return r!=null&&f(e,["raiMediaFilteredReasons"],r),e}function K9(n){let e={},t=u(n,["video"]);return t!=null&&f(e,["video"],t7(t)),e}function Y9(n){let e={},t=u(n,["_self"]);return t!=null&&f(e,["video"],n7(t)),e}function J9(n){let e={},t=u(n,["operationName"]);return t!=null&&f(e,["_url","operationName"],t),e}function Q9(n){let e={},t=u(n,["operationName"]);return t!=null&&f(e,["_url","operationName"],t),e}function X9(n){let e={},t=u(n,["name"]);t!=null&&f(e,["name"],t);let i=u(n,["metadata"]);i!=null&&f(e,["metadata"],i);let r=u(n,["done"]);r!=null&&f(e,["done"],r);let o=u(n,["error"]);o!=null&&f(e,["error"],o);let s=u(n,["response"]);return s!=null&&f(e,["response"],Z9(s)),e}function Z9(n){let e={},t=u(n,["sdkHttpResponse"]);t!=null&&f(e,["sdkHttpResponse"],t);let i=u(n,["parent"]);i!=null&&f(e,["parent"],i);let r=u(n,["documentName"]);return r!=null&&f(e,["documentName"],r),e}function F2(n){let e={},t=u(n,["name"]);t!=null&&f(e,["name"],t);let i=u(n,["metadata"]);i!=null&&f(e,["metadata"],i);let r=u(n,["done"]);r!=null&&f(e,["done"],r);let o=u(n,["error"]);o!=null&&f(e,["error"],o);let s=u(n,["response"]);return s!=null&&f(e,["response"],e7(s)),e}function e7(n){let e={},t=u(n,["sdkHttpResponse"]);t!=null&&f(e,["sdkHttpResponse"],t);let i=u(n,["parent"]);i!=null&&f(e,["parent"],i);let r=u(n,["documentName"]);return r!=null&&f(e,["documentName"],r),e}function t7(n){let e={},t=u(n,["uri"]);t!=null&&f(e,["uri"],t);let i=u(n,["encodedVideo"]);i!=null&&f(e,["videoBytes"],sb(i));let r=u(n,["encoding"]);return r!=null&&f(e,["mimeType"],r),e}function n7(n){let e={},t=u(n,["gcsUri"]);t!=null&&f(e,["uri"],t);let i=u(n,["bytesBase64Encoded"]);i!=null&&f(e,["videoBytes"],sb(i));let r=u(n,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}var Pa=(function(n){return n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL",n})(Pa||{});var gx=(function(n){return n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO",n})(gx||{});var L2=(function(n){return n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED",n})(L2||{});var $f=(function(n){return n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT",n})($f||{});var qf=class{constructor(e){let t={};for(let i of e.headers.entries())t[i[0]]=i[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}};var Na=class{get text(){var e,t,i,r,o,s,a,l;if(((r=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let c="",d=!1,p=[];for(let h of(l=(a=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)!==null&&l!==void 0?l:[]){for(let[y,E]of Object.entries(h))y!=="text"&&y!=="thought"&&y!=="thoughtSignature"&&(E!==null||E!==void 0)&&p.push(y);if(typeof h.text=="string"){if(typeof h.thought=="boolean"&&h.thought)continue;d=!0,c+=h.text}}return p.length>0&&console.warn(`there are non-text parts ${p} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),d?c:void 0}get data(){var e,t,i,r,o,s,a,l;if(((r=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let c="",d=[];for(let p of(l=(a=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)!==null&&l!==void 0?l:[]){for(let[h,y]of Object.entries(p))h!=="inlineData"&&(y!==null||y!==void 0)&&d.push(h);p.inlineData&&typeof p.inlineData.data=="string"&&(c+=atob(p.inlineData.data))}return d.length>0&&console.warn(`there are non-data parts ${d} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),c.length>0?btoa(c):void 0}get functionCalls(){var e,t,i,r,o,s,a,l;if(((r=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");let c=(l=(a=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(d=>d.functionCall).map(d=>d.functionCall).filter(d=>d!==void 0);if(c?.length!==0)return c}get executableCode(){var e,t,i,r,o,s,a,l,c;if(((r=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");let d=(l=(a=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(p=>p.executableCode).map(p=>p.executableCode).filter(p=>p!==void 0);if(d?.length!==0)return(c=d?.[0])===null||c===void 0?void 0:c.code}get codeExecutionResult(){var e,t,i,r,o,s,a,l,c;if(((r=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");let d=(l=(a=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(p=>p.codeExecutionResult).map(p=>p.codeExecutionResult).filter(p=>p!==void 0);if(d?.length!==0)return(c=d?.[0])===null||c===void 0?void 0:c.output}},Xg=class{},Zg=class{},yx=class{},vx=class{},_x=class{},wx=class{},e0=class{},t0=class{},n0=class{},Cx=class{};var i0=class n{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){let i=new n,r,o=e;return t?r=W9(o):r=G9(o),Object.assign(i,r),i}},r0=class{},o0=class{},s0=class{},Ex=class{},xx=class{},bx=class{};var Sx=class n{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){let i=new n,o=X9(e);return Object.assign(i,o),i}},Tx=class{},Ix=class{},Dx=class{};var a0=class{};var Ax=class{get text(){var e,t,i;let r="",o=!1,s=[];for(let a of(i=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&i!==void 0?i:[]){for(let[l,c]of Object.entries(a))l!=="text"&&l!=="thought"&&c!==null&&s.push(l);if(typeof a.text=="string"){if(typeof a.thought=="boolean"&&a.thought)continue;o=!0,r+=a.text}}return s.length>0&&console.warn(`there are non-text parts ${s} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),o?r:void 0}get data(){var e,t,i;let r="",o=[];for(let s of(i=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&i!==void 0?i:[]){for(let[a,l]of Object.entries(s))a!=="inlineData"&&l!==null&&o.push(a);s.inlineData&&typeof s.inlineData.data=="string"&&(r+=atob(s.inlineData.data))}return o.length>0&&console.warn(`there are non-data parts ${o} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}};var kx=class{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}};var Mx=class n{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){let i=new n,o=F2(e);return Object.assign(i,o),i}};function We(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){let t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function O2(n,e){let t=We(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function V2(n){return Array.isArray(n)?n.map(e=>l0(e)):[l0(n)]}function l0(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function B2(n){let e=l0(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function U2(n){let e=l0(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function g2(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function $2(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>g2(e)):[g2(n)]}function Nx(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function y2(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function v2(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function vn(n){if(n==null)throw new Error("ContentUnion is required");return Nx(n)?n:{role:"user",parts:$2(n)}}function ab(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{let i=vn(t);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(n.isVertexAI()){let t=vn(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>vn(t)):[vn(e)]}function Ui(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(y2(n)||v2(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[vn(n)]}let e=[],t=[],i=Nx(n[0]);for(let r of n){let o=Nx(r);if(o!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(o)e.push(r);else{if(y2(r)||v2(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(r)}}return i||e.push({role:"user",parts:$2(t)}),e}function i7(n,e){n.includes("null")&&(e.nullable=!0);let t=n.filter(i=>i!=="null");if(t.length===1)e.type=Object.values(Pa).includes(t[0].toUpperCase())?t[0].toUpperCase():Pa.TYPE_UNSPECIFIED;else{e.anyOf=[];for(let i of t)e.anyOf.push({type:Object.values(Pa).includes(i.toUpperCase())?i.toUpperCase():Pa.TYPE_UNSPECIFIED})}}function Cc(n){let e={},t=["items"],i=["anyOf"],r=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");let o=n.anyOf;o!=null&&o.length==2&&(o[0].type==="null"?(e.nullable=!0,n=o[1]):o[1].type==="null"&&(e.nullable=!0,n=o[0])),n.type instanceof Array&&i7(n.type,e);for(let[s,a]of Object.entries(n))if(a!=null)if(s=="type"){if(a==="null")throw new Error("type: null can not be the only possible type for the field.");if(a instanceof Array)continue;e.type=Object.values(Pa).includes(a.toUpperCase())?a.toUpperCase():Pa.TYPE_UNSPECIFIED}else if(t.includes(s))e[s]=Cc(a);else if(i.includes(s)){let l=[];for(let c of a){if(c.type=="null"){e.nullable=!0;continue}l.push(Cc(c))}e[s]=l}else if(r.includes(s)){let l={};for(let[c,d]of Object.entries(a))l[c]=Cc(d);e[s]=l}else{if(s==="additionalProperties")continue;e[s]=a}return e}function lb(n){return Cc(n)}function cb(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function ub(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function bc(n){if(n.functionDeclarations)for(let e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Cc(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Cc(e.response));return n}function Sc(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");let e=[];for(let t of n)e.push(t);return e}function r7(n,e,t,i=1){let r=!e.startsWith(`${t}/`)&&e.split("/").length===i;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:r?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:r?`${t}/${e}`:e}function go(n,e){if(typeof e!="string")throw new Error("name must be a string");return r7(n,e,"cachedContents")}function H2(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function as(n){return sb(n)}function o7(n){return n!=null&&typeof n=="object"&&"name"in n}function s7(n){return n!=null&&typeof n=="object"&&"video"in n}function a7(n){return n!=null&&typeof n=="object"&&"uri"in n}function q2(n){var e;let t;if(o7(n)&&(t=n.name),!(a7(n)&&(t=n.uri,t===void 0))&&!(s7(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){let r=t.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${t}`);t=r[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function G2(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function W2(n){for(let e of["models","tunedModels","publisherModels"])if(l7(n,e))return n[e];return[]}function l7(n,e){return n!==null&&typeof n=="object"&&e in n}function c7(n,e={}){let t=n,i={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(i.responseJsonSchema=t.outputSchema),e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function u7(n,e={}){let t=[],i=new Set;for(let r of n){let o=r.name;if(i.has(o))throw new Error(`Duplicate function name ${o} found in MCP tools. Please ensure function names are unique.`);i.add(o);let s=c7(r,e);s.functionDeclarations&&t.push(...s.functionDeclarations)}return{functionDeclarations:t}}function z2(n,e){let t;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))t={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))t={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))t={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");t={inlinedRequests:e}}else t=e;let i=[t.gcsUri,t.bigqueryUri].filter(Boolean).length,r=[t.inlinedRequests,t.fileName].filter(Boolean).length;if(n.isVertexAI()){if(r>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return t}function d7(n){if(typeof n!="string")return n;let e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function j2(n){if(typeof n!="object"||n===null)return{};let e=n,t=e.inlinedResponses;if(typeof t!="object"||t===null)return n;let r=t.inlinedResponses;if(!Array.isArray(r)||r.length===0)return n;let o=!1;for(let s of r){if(typeof s!="object"||s===null)continue;let l=s.response;if(typeof l!="object"||l===null)continue;if(l.embedding!==void 0){o=!0;break}}return o&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function Tc(n,e){let t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function K2(n){let e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}function f7(n){let e={},t=u(n,["responsesFile"]);t!=null&&f(e,["fileName"],t);let i=u(n,["inlinedResponses","inlinedResponses"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>q7(s))),f(e,["inlinedResponses"],o)}let r=u(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>s)),f(e,["inlinedEmbedContentResponses"],o)}return e}function p7(n){let e={},t=u(n,["predictionsFormat"]);t!=null&&f(e,["format"],t);let i=u(n,["gcsDestination","outputUriPrefix"]);i!=null&&f(e,["gcsUri"],i);let r=u(n,["bigqueryDestination","outputUri"]);return r!=null&&f(e,["bigqueryUri"],r),e}function h7(n){let e={},t=u(n,["format"]);t!=null&&f(e,["predictionsFormat"],t);let i=u(n,["gcsUri"]);i!=null&&f(e,["gcsDestination","outputUriPrefix"],i);let r=u(n,["bigqueryUri"]);if(r!=null&&f(e,["bigqueryDestination","outputUri"],r),u(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(u(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(u(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Jg(n){let e={},t=u(n,["name"]);t!=null&&f(e,["name"],t);let i=u(n,["metadata","displayName"]);i!=null&&f(e,["displayName"],i);let r=u(n,["metadata","state"]);r!=null&&f(e,["state"],K2(r));let o=u(n,["metadata","createTime"]);o!=null&&f(e,["createTime"],o);let s=u(n,["metadata","endTime"]);s!=null&&f(e,["endTime"],s);let a=u(n,["metadata","updateTime"]);a!=null&&f(e,["updateTime"],a);let l=u(n,["metadata","model"]);l!=null&&f(e,["model"],l);let c=u(n,["metadata","output"]);return c!=null&&f(e,["dest"],f7(j2(c))),e}function Px(n){let e={},t=u(n,["name"]);t!=null&&f(e,["name"],t);let i=u(n,["displayName"]);i!=null&&f(e,["displayName"],i);let r=u(n,["state"]);r!=null&&f(e,["state"],K2(r));let o=u(n,["error"]);o!=null&&f(e,["error"],o);let s=u(n,["createTime"]);s!=null&&f(e,["createTime"],s);let a=u(n,["startTime"]);a!=null&&f(e,["startTime"],a);let l=u(n,["endTime"]);l!=null&&f(e,["endTime"],l);let c=u(n,["updateTime"]);c!=null&&f(e,["updateTime"],c);let d=u(n,["model"]);d!=null&&f(e,["model"],d);let p=u(n,["inputConfig"]);p!=null&&f(e,["src"],m7(p));let h=u(n,["outputConfig"]);h!=null&&f(e,["dest"],p7(j2(h)));let y=u(n,["completionStats"]);return y!=null&&f(e,["completionStats"],y),e}function m7(n){let e={},t=u(n,["instancesFormat"]);t!=null&&f(e,["format"],t);let i=u(n,["gcsSource","uris"]);i!=null&&f(e,["gcsUri"],i);let r=u(n,["bigquerySource","inputUri"]);return r!=null&&f(e,["bigqueryUri"],r),e}function g7(n,e){let t={};if(u(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(u(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(u(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");let i=u(e,["fileName"]);i!=null&&f(t,["fileName"],i);let r=u(e,["inlinedRequests"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>H7(n,s))),f(t,["requests","requests"],o)}return t}function y7(n){let e={},t=u(n,["format"]);t!=null&&f(e,["instancesFormat"],t);let i=u(n,["gcsUri"]);i!=null&&f(e,["gcsSource","uris"],i);let r=u(n,["bigqueryUri"]);if(r!=null&&f(e,["bigquerySource","inputUri"],r),u(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(u(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function v7(n){let e={},t=u(n,["data"]);if(t!=null&&f(e,["data"],t),u(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let i=u(n,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function _7(n,e){let t={},i=u(e,["name"]);return i!=null&&f(t,["_url","name"],Tc(n,i)),t}function w7(n,e){let t={},i=u(e,["name"]);return i!=null&&f(t,["_url","name"],Tc(n,i)),t}function C7(n){let e={},t=u(n,["content"]);t!=null&&f(e,["content"],t);let i=u(n,["citationMetadata"]);i!=null&&f(e,["citationMetadata"],E7(i));let r=u(n,["tokenCount"]);r!=null&&f(e,["tokenCount"],r);let o=u(n,["finishReason"]);o!=null&&f(e,["finishReason"],o);let s=u(n,["avgLogprobs"]);s!=null&&f(e,["avgLogprobs"],s);let a=u(n,["groundingMetadata"]);a!=null&&f(e,["groundingMetadata"],a);let l=u(n,["index"]);l!=null&&f(e,["index"],l);let c=u(n,["logprobsResult"]);c!=null&&f(e,["logprobsResult"],c);let d=u(n,["safetyRatings"]);if(d!=null){let h=d;Array.isArray(h)&&(h=h.map(y=>y)),f(e,["safetyRatings"],h)}let p=u(n,["urlContextMetadata"]);return p!=null&&f(e,["urlContextMetadata"],p),e}function E7(n){let e={},t=u(n,["citationSources"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>r)),f(e,["citations"],i)}return e}function Y2(n){let e={},t=u(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(o=>J7(o))),f(e,["parts"],r)}let i=u(n,["role"]);return i!=null&&f(e,["role"],i),e}function x7(n,e){let t={},i=u(n,["displayName"]);if(e!==void 0&&i!=null&&f(e,["batch","displayName"],i),u(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function b7(n,e){let t={},i=u(n,["displayName"]);e!==void 0&&i!=null&&f(e,["displayName"],i);let r=u(n,["dest"]);return e!==void 0&&r!=null&&f(e,["outputConfig"],h7(d7(r))),t}function _2(n,e){let t={},i=u(e,["model"]);i!=null&&f(t,["_url","model"],We(n,i));let r=u(e,["src"]);r!=null&&f(t,["batch","inputConfig"],g7(n,z2(n,r)));let o=u(e,["config"]);return o!=null&&x7(o,t),t}function S7(n,e){let t={},i=u(e,["model"]);i!=null&&f(t,["model"],We(n,i));let r=u(e,["src"]);r!=null&&f(t,["inputConfig"],y7(z2(n,r)));let o=u(e,["config"]);return o!=null&&b7(o,t),t}function T7(n,e){let t={},i=u(n,["displayName"]);return e!==void 0&&i!=null&&f(e,["batch","displayName"],i),t}function I7(n,e){let t={},i=u(e,["model"]);i!=null&&f(t,["_url","model"],We(n,i));let r=u(e,["src"]);r!=null&&f(t,["batch","inputConfig"],R7(n,r));let o=u(e,["config"]);return o!=null&&T7(o,t),t}function D7(n,e){let t={},i=u(e,["name"]);return i!=null&&f(t,["_url","name"],Tc(n,i)),t}function A7(n,e){let t={},i=u(e,["name"]);return i!=null&&f(t,["_url","name"],Tc(n,i)),t}function k7(n){let e={},t=u(n,["sdkHttpResponse"]);t!=null&&f(e,["sdkHttpResponse"],t);let i=u(n,["name"]);i!=null&&f(e,["name"],i);let r=u(n,["done"]);r!=null&&f(e,["done"],r);let o=u(n,["error"]);return o!=null&&f(e,["error"],o),e}function M7(n){let e={},t=u(n,["sdkHttpResponse"]);t!=null&&f(e,["sdkHttpResponse"],t);let i=u(n,["name"]);i!=null&&f(e,["name"],i);let r=u(n,["done"]);r!=null&&f(e,["done"],r);let o=u(n,["error"]);return o!=null&&f(e,["error"],o),e}function N7(n,e){let t={},i=u(e,["contents"]);if(i!=null){let o=ab(n,i);Array.isArray(o)&&(o=o.map(s=>s)),f(t,["requests[]","request","content"],o)}let r=u(e,["config"]);return r!=null&&(f(t,["_self"],P7(r,t)),H9(t,{"requests[].*":"requests[].request.*"})),t}function P7(n,e){let t={},i=u(n,["taskType"]);e!==void 0&&i!=null&&f(e,["requests[]","taskType"],i);let r=u(n,["title"]);e!==void 0&&r!=null&&f(e,["requests[]","title"],r);let o=u(n,["outputDimensionality"]);if(e!==void 0&&o!=null&&f(e,["requests[]","outputDimensionality"],o),u(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(u(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function R7(n,e){let t={},i=u(e,["fileName"]);i!=null&&f(t,["file_name"],i);let r=u(e,["inlinedRequests"]);return r!=null&&f(t,["requests"],N7(n,r)),t}function F7(n){let e={};if(u(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let t=u(n,["fileUri"]);t!=null&&f(e,["fileUri"],t);let i=u(n,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function L7(n,e,t){let i={},r=u(e,["systemInstruction"]);t!==void 0&&r!=null&&f(t,["systemInstruction"],Y2(vn(r)));let o=u(e,["temperature"]);o!=null&&f(i,["temperature"],o);let s=u(e,["topP"]);s!=null&&f(i,["topP"],s);let a=u(e,["topK"]);a!=null&&f(i,["topK"],a);let l=u(e,["candidateCount"]);l!=null&&f(i,["candidateCount"],l);let c=u(e,["maxOutputTokens"]);c!=null&&f(i,["maxOutputTokens"],c);let d=u(e,["stopSequences"]);d!=null&&f(i,["stopSequences"],d);let p=u(e,["responseLogprobs"]);p!=null&&f(i,["responseLogprobs"],p);let h=u(e,["logprobs"]);h!=null&&f(i,["logprobs"],h);let y=u(e,["presencePenalty"]);y!=null&&f(i,["presencePenalty"],y);let E=u(e,["frequencyPenalty"]);E!=null&&f(i,["frequencyPenalty"],E);let A=u(e,["seed"]);A!=null&&f(i,["seed"],A);let R=u(e,["responseMimeType"]);R!=null&&f(i,["responseMimeType"],R);let k=u(e,["responseSchema"]);k!=null&&f(i,["responseSchema"],lb(k));let H=u(e,["responseJsonSchema"]);if(H!=null&&f(i,["responseJsonSchema"],H),u(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(u(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");let K=u(e,["safetySettings"]);if(t!==void 0&&K!=null){let st=K;Array.isArray(st)&&(st=st.map(jn=>Q7(jn))),f(t,["safetySettings"],st)}let z=u(e,["tools"]);if(t!==void 0&&z!=null){let st=Sc(z);Array.isArray(st)&&(st=st.map(jn=>X7(bc(jn)))),f(t,["tools"],st)}let oe=u(e,["toolConfig"]);if(t!==void 0&&oe!=null&&f(t,["toolConfig"],oe),u(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");let pe=u(e,["cachedContent"]);t!==void 0&&pe!=null&&f(t,["cachedContent"],go(n,pe));let Ne=u(e,["responseModalities"]);Ne!=null&&f(i,["responseModalities"],Ne);let kt=u(e,["mediaResolution"]);kt!=null&&f(i,["mediaResolution"],kt);let be=u(e,["speechConfig"]);if(be!=null&&f(i,["speechConfig"],cb(be)),u(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");let ze=u(e,["thinkingConfig"]);ze!=null&&f(i,["thinkingConfig"],ze);let bt=u(e,["imageConfig"]);return bt!=null&&f(i,["imageConfig"],bt),i}function O7(n){let e={},t=u(n,["sdkHttpResponse"]);t!=null&&f(e,["sdkHttpResponse"],t);let i=u(n,["candidates"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>C7(c))),f(e,["candidates"],l)}let r=u(n,["modelVersion"]);r!=null&&f(e,["modelVersion"],r);let o=u(n,["promptFeedback"]);o!=null&&f(e,["promptFeedback"],o);let s=u(n,["responseId"]);s!=null&&f(e,["responseId"],s);let a=u(n,["usageMetadata"]);return a!=null&&f(e,["usageMetadata"],a),e}function V7(n,e){let t={},i=u(e,["name"]);return i!=null&&f(t,["_url","name"],Tc(n,i)),t}function B7(n,e){let t={},i=u(e,["name"]);return i!=null&&f(t,["_url","name"],Tc(n,i)),t}function U7(n){let e={};if(u(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");let t=u(n,["enableWidget"]);return t!=null&&f(e,["enableWidget"],t),e}function $7(n){let e={};if(u(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");let t=u(n,["timeRangeFilter"]);return t!=null&&f(e,["timeRangeFilter"],t),e}function H7(n,e){let t={},i=u(e,["model"]);i!=null&&f(t,["request","model"],We(n,i));let r=u(e,["contents"]);if(r!=null){let a=Ui(r);Array.isArray(a)&&(a=a.map(l=>Y2(l))),f(t,["request","contents"],a)}let o=u(e,["metadata"]);o!=null&&f(t,["metadata"],o);let s=u(e,["config"]);return s!=null&&f(t,["request","generationConfig"],L7(n,s,u(t,["request"],{}))),t}function q7(n){let e={},t=u(n,["response"]);t!=null&&f(e,["response"],O7(t));let i=u(n,["error"]);return i!=null&&f(e,["error"],i),e}function G7(n,e){let t={},i=u(n,["pageSize"]);e!==void 0&&i!=null&&f(e,["_query","pageSize"],i);let r=u(n,["pageToken"]);if(e!==void 0&&r!=null&&f(e,["_query","pageToken"],r),u(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function W7(n,e){let t={},i=u(n,["pageSize"]);e!==void 0&&i!=null&&f(e,["_query","pageSize"],i);let r=u(n,["pageToken"]);e!==void 0&&r!=null&&f(e,["_query","pageToken"],r);let o=u(n,["filter"]);return e!==void 0&&o!=null&&f(e,["_query","filter"],o),t}function z7(n){let e={},t=u(n,["config"]);return t!=null&&G7(t,e),e}function j7(n){let e={},t=u(n,["config"]);return t!=null&&W7(t,e),e}function K7(n){let e={},t=u(n,["sdkHttpResponse"]);t!=null&&f(e,["sdkHttpResponse"],t);let i=u(n,["nextPageToken"]);i!=null&&f(e,["nextPageToken"],i);let r=u(n,["operations"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>Jg(s))),f(e,["batchJobs"],o)}return e}function Y7(n){let e={},t=u(n,["sdkHttpResponse"]);t!=null&&f(e,["sdkHttpResponse"],t);let i=u(n,["nextPageToken"]);i!=null&&f(e,["nextPageToken"],i);let r=u(n,["batchPredictionJobs"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>Px(s))),f(e,["batchJobs"],o)}return e}function J7(n){let e={},t=u(n,["functionCall"]);t!=null&&f(e,["functionCall"],t);let i=u(n,["codeExecutionResult"]);i!=null&&f(e,["codeExecutionResult"],i);let r=u(n,["executableCode"]);r!=null&&f(e,["executableCode"],r);let o=u(n,["fileData"]);o!=null&&f(e,["fileData"],F7(o));let s=u(n,["functionResponse"]);s!=null&&f(e,["functionResponse"],s);let a=u(n,["inlineData"]);a!=null&&f(e,["inlineData"],v7(a));let l=u(n,["text"]);l!=null&&f(e,["text"],l);let c=u(n,["thought"]);c!=null&&f(e,["thought"],c);let d=u(n,["thoughtSignature"]);d!=null&&f(e,["thoughtSignature"],d);let p=u(n,["videoMetadata"]);return p!=null&&f(e,["videoMetadata"],p),e}function Q7(n){let e={},t=u(n,["category"]);if(t!=null&&f(e,["category"],t),u(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");let i=u(n,["threshold"]);return i!=null&&f(e,["threshold"],i),e}function X7(n){let e={},t=u(n,["functionDeclarations"]);if(t!=null){let d=t;Array.isArray(d)&&(d=d.map(p=>p)),f(e,["functionDeclarations"],d)}if(u(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let i=u(n,["googleSearchRetrieval"]);i!=null&&f(e,["googleSearchRetrieval"],i);let r=u(n,["computerUse"]);r!=null&&f(e,["computerUse"],r);let o=u(n,["fileSearch"]);o!=null&&f(e,["fileSearch"],o);let s=u(n,["codeExecution"]);if(s!=null&&f(e,["codeExecution"],s),u(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");let a=u(n,["googleMaps"]);a!=null&&f(e,["googleMaps"],U7(a));let l=u(n,["googleSearch"]);l!=null&&f(e,["googleSearch"],$7(l));let c=u(n,["urlContext"]);return c!=null&&f(e,["urlContext"],c),e}var ls=(function(n){return n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",n.PAGED_ITEM_DOCUMENTS="documents",n})(ls||{}),mo=class{constructor(e,t,i,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,i,r)}init(e,t,i){var r,o;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t?.sdkHttpResponse,this.idxInternal=0;let s={config:{}};!i||Object.keys(i).length===0?s={config:{}}:typeof i=="object"?s=Object.assign({},i):s=i,s.config&&(s.config.pageToken=t.nextPageToken),this.paramsInternal=s,this.pageInternalSize=(o=(r=s.config)===null||r===void 0?void 0:r.pageSize)!==null&&o!==void 0?o:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};let e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");let e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}};var Rx=class extends rr{constructor(e){super(),this.apiClient=e,this.create=async t=>(this.apiClient.isVertexAI()&&(t.config=this.formatDestination(t.src,t.config)),this.createInternal(t)),this.createEmbeddings=async t=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(t)},this.list=async(t={})=>new mo(ls.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(t),t)}createInlinedGenerateContentRequest(e){let t=_2(this.apiClient,e),i=t._url,r=re("{model}:batchGenerateContent",i),a=t.batch.inputConfig.requests,l=a.requests,c=[];for(let d of l){let p=Object.assign({},d);if(p.systemInstruction){let h=p.systemInstruction;delete p.systemInstruction;let y=p.request;y.systemInstruction=h,p.request=y}c.push(p)}return a.requests=c,delete t.config,delete t._url,delete t._query,{path:r,body:t}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,t){let i=t?Object.assign({},t):{},r=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${r}`),i.dest===void 0){let o=this.getGcsUri(e),s=this.getBigqueryUri(e);if(o)o.endsWith(".jsonl")?i.dest=`${o.slice(0,-6)}/dest`:i.dest=`${o}_dest_${r}`;else if(s)i.dest=`${s}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(e){var t,i,r,o;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=S7(this.apiClient,e);return a=re("batchPredictionJobs",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>Px(d))}else{let c=_2(this.apiClient,e);return a=re("{model}:batchGenerateContent",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>Jg(d))}}async createEmbeddingsInternal(e){var t,i;let r,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=I7(this.apiClient,e);return o=re("{model}:asyncBatchEmbedContent",a._url),s=a._query,delete a._url,delete a._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),r.then(l=>Jg(l))}}async get(e){var t,i,r,o;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=B7(this.apiClient,e);return a=re("batchPredictionJobs/{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>Px(d))}else{let c=V7(this.apiClient,e);return a=re("batches/{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>Jg(d))}}async cancel(e){var t,i,r,o;let s="",a={};if(this.apiClient.isVertexAI()){let l=w7(this.apiClient,e);s=re("batchPredictionJobs/{name}:cancel",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{let l=_7(this.apiClient,e);s=re("batches/{name}:cancel",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var t,i,r,o;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=j7(e);return a=re("batchPredictionJobs",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{let h=p;return h.sdkHttpResponse={headers:d.headers},h})),s.then(d=>{let p=Y7(d),h=new a0;return Object.assign(h,p),h})}else{let c=z7(e);return a=re("batches",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(p=>{let h=p;return h.sdkHttpResponse={headers:d.headers},h})),s.then(d=>{let p=K7(d),h=new a0;return Object.assign(h,p),h})}}async delete(e){var t,i,r,o;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=A7(this.apiClient,e);return a=re("batchPredictionJobs/{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{let h=p;return h.sdkHttpResponse={headers:d.headers},h})),s.then(d=>M7(d))}else{let c=D7(this.apiClient,e);return a=re("batches/{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(p=>{let h=p;return h.sdkHttpResponse={headers:d.headers},h})),s.then(d=>k7(d))}}};function Z7(n){let e={},t=u(n,["data"]);if(t!=null&&f(e,["data"],t),u(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let i=u(n,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function w2(n){let e={},t=u(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(o=>wW(o))),f(e,["parts"],r)}let i=u(n,["role"]);return i!=null&&f(e,["role"],i),e}function eW(n,e){let t={},i=u(n,["ttl"]);e!==void 0&&i!=null&&f(e,["ttl"],i);let r=u(n,["expireTime"]);e!==void 0&&r!=null&&f(e,["expireTime"],r);let o=u(n,["displayName"]);e!==void 0&&o!=null&&f(e,["displayName"],o);let s=u(n,["contents"]);if(e!==void 0&&s!=null){let d=Ui(s);Array.isArray(d)&&(d=d.map(p=>w2(p))),f(e,["contents"],d)}let a=u(n,["systemInstruction"]);e!==void 0&&a!=null&&f(e,["systemInstruction"],w2(vn(a)));let l=u(n,["tools"]);if(e!==void 0&&l!=null){let d=l;Array.isArray(d)&&(d=d.map(p=>CW(p))),f(e,["tools"],d)}let c=u(n,["toolConfig"]);if(e!==void 0&&c!=null&&f(e,["toolConfig"],c),u(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function tW(n,e){let t={},i=u(n,["ttl"]);e!==void 0&&i!=null&&f(e,["ttl"],i);let r=u(n,["expireTime"]);e!==void 0&&r!=null&&f(e,["expireTime"],r);let o=u(n,["displayName"]);e!==void 0&&o!=null&&f(e,["displayName"],o);let s=u(n,["contents"]);if(e!==void 0&&s!=null){let p=Ui(s);Array.isArray(p)&&(p=p.map(h=>h)),f(e,["contents"],p)}let a=u(n,["systemInstruction"]);e!==void 0&&a!=null&&f(e,["systemInstruction"],vn(a));let l=u(n,["tools"]);if(e!==void 0&&l!=null){let p=l;Array.isArray(p)&&(p=p.map(h=>EW(h))),f(e,["tools"],p)}let c=u(n,["toolConfig"]);e!==void 0&&c!=null&&f(e,["toolConfig"],c);let d=u(n,["kmsKeyName"]);return e!==void 0&&d!=null&&f(e,["encryption_spec","kmsKeyName"],d),t}function nW(n,e){let t={},i=u(e,["model"]);i!=null&&f(t,["model"],O2(n,i));let r=u(e,["config"]);return r!=null&&eW(r,t),t}function iW(n,e){let t={},i=u(e,["model"]);i!=null&&f(t,["model"],O2(n,i));let r=u(e,["config"]);return r!=null&&tW(r,t),t}function rW(n,e){let t={},i=u(e,["name"]);return i!=null&&f(t,["_url","name"],go(n,i)),t}function oW(n,e){let t={},i=u(e,["name"]);return i!=null&&f(t,["_url","name"],go(n,i)),t}function sW(n){let e={},t=u(n,["sdkHttpResponse"]);return t!=null&&f(e,["sdkHttpResponse"],t),e}function aW(n){let e={},t=u(n,["sdkHttpResponse"]);return t!=null&&f(e,["sdkHttpResponse"],t),e}function lW(n){let e={};if(u(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let t=u(n,["fileUri"]);t!=null&&f(e,["fileUri"],t);let i=u(n,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function cW(n){let e={};if(u(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");let t=u(n,["description"]);t!=null&&f(e,["description"],t);let i=u(n,["name"]);i!=null&&f(e,["name"],i);let r=u(n,["parameters"]);r!=null&&f(e,["parameters"],r);let o=u(n,["parametersJsonSchema"]);o!=null&&f(e,["parametersJsonSchema"],o);let s=u(n,["response"]);s!=null&&f(e,["response"],s);let a=u(n,["responseJsonSchema"]);return a!=null&&f(e,["responseJsonSchema"],a),e}function uW(n,e){let t={},i=u(e,["name"]);return i!=null&&f(t,["_url","name"],go(n,i)),t}function dW(n,e){let t={},i=u(e,["name"]);return i!=null&&f(t,["_url","name"],go(n,i)),t}function fW(n){let e={};if(u(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");let t=u(n,["enableWidget"]);return t!=null&&f(e,["enableWidget"],t),e}function pW(n){let e={};if(u(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");let t=u(n,["timeRangeFilter"]);return t!=null&&f(e,["timeRangeFilter"],t),e}function hW(n,e){let t={},i=u(n,["pageSize"]);e!==void 0&&i!=null&&f(e,["_query","pageSize"],i);let r=u(n,["pageToken"]);return e!==void 0&&r!=null&&f(e,["_query","pageToken"],r),t}function mW(n,e){let t={},i=u(n,["pageSize"]);e!==void 0&&i!=null&&f(e,["_query","pageSize"],i);let r=u(n,["pageToken"]);return e!==void 0&&r!=null&&f(e,["_query","pageToken"],r),t}function gW(n){let e={},t=u(n,["config"]);return t!=null&&hW(t,e),e}function yW(n){let e={},t=u(n,["config"]);return t!=null&&mW(t,e),e}function vW(n){let e={},t=u(n,["sdkHttpResponse"]);t!=null&&f(e,["sdkHttpResponse"],t);let i=u(n,["nextPageToken"]);i!=null&&f(e,["nextPageToken"],i);let r=u(n,["cachedContents"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>s)),f(e,["cachedContents"],o)}return e}function _W(n){let e={},t=u(n,["sdkHttpResponse"]);t!=null&&f(e,["sdkHttpResponse"],t);let i=u(n,["nextPageToken"]);i!=null&&f(e,["nextPageToken"],i);let r=u(n,["cachedContents"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>s)),f(e,["cachedContents"],o)}return e}function wW(n){let e={},t=u(n,["functionCall"]);t!=null&&f(e,["functionCall"],t);let i=u(n,["codeExecutionResult"]);i!=null&&f(e,["codeExecutionResult"],i);let r=u(n,["executableCode"]);r!=null&&f(e,["executableCode"],r);let o=u(n,["fileData"]);o!=null&&f(e,["fileData"],lW(o));let s=u(n,["functionResponse"]);s!=null&&f(e,["functionResponse"],s);let a=u(n,["inlineData"]);a!=null&&f(e,["inlineData"],Z7(a));let l=u(n,["text"]);l!=null&&f(e,["text"],l);let c=u(n,["thought"]);c!=null&&f(e,["thought"],c);let d=u(n,["thoughtSignature"]);d!=null&&f(e,["thoughtSignature"],d);let p=u(n,["videoMetadata"]);return p!=null&&f(e,["videoMetadata"],p),e}function CW(n){let e={},t=u(n,["functionDeclarations"]);if(t!=null){let d=t;Array.isArray(d)&&(d=d.map(p=>p)),f(e,["functionDeclarations"],d)}if(u(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let i=u(n,["googleSearchRetrieval"]);i!=null&&f(e,["googleSearchRetrieval"],i);let r=u(n,["computerUse"]);r!=null&&f(e,["computerUse"],r);let o=u(n,["fileSearch"]);o!=null&&f(e,["fileSearch"],o);let s=u(n,["codeExecution"]);if(s!=null&&f(e,["codeExecution"],s),u(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");let a=u(n,["googleMaps"]);a!=null&&f(e,["googleMaps"],fW(a));let l=u(n,["googleSearch"]);l!=null&&f(e,["googleSearch"],pW(l));let c=u(n,["urlContext"]);return c!=null&&f(e,["urlContext"],c),e}function EW(n){let e={},t=u(n,["functionDeclarations"]);if(t!=null){let p=t;Array.isArray(p)&&(p=p.map(h=>cW(h))),f(e,["functionDeclarations"],p)}let i=u(n,["retrieval"]);i!=null&&f(e,["retrieval"],i);let r=u(n,["googleSearchRetrieval"]);r!=null&&f(e,["googleSearchRetrieval"],r);let o=u(n,["computerUse"]);if(o!=null&&f(e,["computerUse"],o),u(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");let s=u(n,["codeExecution"]);s!=null&&f(e,["codeExecution"],s);let a=u(n,["enterpriseWebSearch"]);a!=null&&f(e,["enterpriseWebSearch"],a);let l=u(n,["googleMaps"]);l!=null&&f(e,["googleMaps"],l);let c=u(n,["googleSearch"]);c!=null&&f(e,["googleSearch"],c);let d=u(n,["urlContext"]);return d!=null&&f(e,["urlContext"],d),e}function xW(n,e){let t={},i=u(n,["ttl"]);e!==void 0&&i!=null&&f(e,["ttl"],i);let r=u(n,["expireTime"]);return e!==void 0&&r!=null&&f(e,["expireTime"],r),t}function bW(n,e){let t={},i=u(n,["ttl"]);e!==void 0&&i!=null&&f(e,["ttl"],i);let r=u(n,["expireTime"]);return e!==void 0&&r!=null&&f(e,["expireTime"],r),t}function SW(n,e){let t={},i=u(e,["name"]);i!=null&&f(t,["_url","name"],go(n,i));let r=u(e,["config"]);return r!=null&&xW(r,t),t}function TW(n,e){let t={},i=u(e,["name"]);i!=null&&f(t,["_url","name"],go(n,i));let r=u(e,["config"]);return r!=null&&bW(r,t),t}var Fx=class extends rr{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new mo(ls.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(t),t)}async create(e){var t,i,r,o;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=iW(this.apiClient,e);return a=re("cachedContents",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>d)}else{let c=nW(this.apiClient,e);return a=re("cachedContents",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>d)}}async get(e){var t,i,r,o;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=dW(this.apiClient,e);return a=re("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>d)}else{let c=uW(this.apiClient,e);return a=re("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>d)}}async delete(e){var t,i,r,o;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=oW(this.apiClient,e);return a=re("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{let h=p;return h.sdkHttpResponse={headers:d.headers},h})),s.then(d=>{let p=aW(d),h=new o0;return Object.assign(h,p),h})}else{let c=rW(this.apiClient,e);return a=re("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(p=>{let h=p;return h.sdkHttpResponse={headers:d.headers},h})),s.then(d=>{let p=sW(d),h=new o0;return Object.assign(h,p),h})}}async update(e){var t,i,r,o;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=TW(this.apiClient,e);return a=re("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>d)}else{let c=SW(this.apiClient,e);return a=re("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>d)}}async listInternal(e){var t,i,r,o;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=yW(e);return a=re("cachedContents",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{let h=p;return h.sdkHttpResponse={headers:d.headers},h})),s.then(d=>{let p=_W(d),h=new s0;return Object.assign(h,p),h})}else{let c=gW(e);return a=re("cachedContents",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(p=>{let h=p;return h.sdkHttpResponse={headers:d.headers},h})),s.then(d=>{let p=vW(d),h=new s0;return Object.assign(h,p),h})}}};function C2(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ut(n){return this instanceof ut?(this.v=n,this):new ut(n)}function Ec(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),r,o=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),r[Symbol.asyncIterator]=function(){return this},r;function s(y){return function(E){return Promise.resolve(E).then(y,p)}}function a(y,E){i[y]&&(r[y]=function(A){return new Promise(function(R,k){o.push([y,A,R,k])>1||l(y,A)})},E&&(r[y]=E(r[y])))}function l(y,E){try{c(i[y](E))}catch(A){h(o[0][3],A)}}function c(y){y.value instanceof ut?Promise.resolve(y.value.v).then(d,p):h(o[0][2],y)}function d(y){l("next",y)}function p(y){l("throw",y)}function h(y,E){y(E),o.shift(),o.length&&l(o[0][0],o[0][1])}}function Hf(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof C2=="function"?C2(n):n[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(o){t[o]=n[o]&&function(s){return new Promise(function(a,l){s=n[o](s),r(a,l,s.done,s.value)})}}function r(o,s,a,l){Promise.resolve(l).then(function(c){o({value:c,done:a})},s)}}function IW(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;let t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:J2(t)}function J2(n){if(n.parts===void 0||n.parts.length===0)return!1;for(let e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function DW(n){if(n.length!==0){for(let e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function E2(n){if(n===void 0||n.length===0)return[];let e=[],t=n.length,i=0;for(;i<t;)if(n[i].role==="user")e.push(n[i]),i++;else{let r=[],o=!0;for(;i<t&&n[i].role==="model";)r.push(n[i]),o&&!J2(n[i])&&(o=!1),i++;o?e.push(...r):e.pop()}return e}var Lx=class{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new Ox(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}},Ox=class{constructor(e,t,i,r={},o=[]){this.apiClient=e,this.modelsModule=t,this.model=i,this.config=r,this.history=o,this.sendPromise=Promise.resolve(),DW(o)}async sendMessage(e){var t;await this.sendPromise;let i=vn(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var o,s,a;let l=await r,c=(s=(o=l.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content,d=l.automaticFunctionCallingHistory,p=this.getHistory(!0).length,h=[];d!=null&&(h=(a=d.slice(p))!==null&&a!==void 0?a:[]);let y=c?[c]:[];this.recordHistory(i,y,h)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var t;await this.sendPromise;let i=vn(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});let o=await r;return this.processStreamResponse(o,i)}getHistory(e=!1){let t=e?E2(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){var i,r;return Ec(this,arguments,function*(){var s,a,l,c;let d=[];try{for(var p=!0,h=Hf(e),y;y=yield ut(h.next()),s=y.done,!s;p=!0){c=y.value,p=!1;let E=c;if(IW(E)){let A=(r=(i=E.candidates)===null||i===void 0?void 0:i[0])===null||r===void 0?void 0:r.content;A!==void 0&&d.push(A)}yield yield ut(E)}}catch(E){a={error:E}}finally{try{!p&&!s&&(l=h.return)&&(yield ut(l.call(h)))}finally{if(a)throw a.error}}this.recordHistory(t,d)})}recordHistory(e,t,i){let r=[];t.length>0&&t.every(o=>o.role!==void 0)?r=t:r.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...E2(i)):this.history.push(e),this.history.push(...r)}};var c0=class n extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,n.prototype)}};function AW(n){let e={},t=u(n,["file"]);return t!=null&&f(e,["file"],t),e}function kW(n){let e={},t=u(n,["sdkHttpResponse"]);return t!=null&&f(e,["sdkHttpResponse"],t),e}function MW(n){let e={},t=u(n,["name"]);return t!=null&&f(e,["_url","file"],q2(t)),e}function NW(n){let e={},t=u(n,["sdkHttpResponse"]);return t!=null&&f(e,["sdkHttpResponse"],t),e}function PW(n){let e={},t=u(n,["name"]);return t!=null&&f(e,["_url","file"],q2(t)),e}function RW(n,e){let t={},i=u(n,["pageSize"]);e!==void 0&&i!=null&&f(e,["_query","pageSize"],i);let r=u(n,["pageToken"]);return e!==void 0&&r!=null&&f(e,["_query","pageToken"],r),t}function FW(n){let e={},t=u(n,["config"]);return t!=null&&RW(t,e),e}function LW(n){let e={},t=u(n,["sdkHttpResponse"]);t!=null&&f(e,["sdkHttpResponse"],t);let i=u(n,["nextPageToken"]);i!=null&&f(e,["nextPageToken"],i);let r=u(n,["files"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>s)),f(e,["files"],o)}return e}var Vx=class extends rr{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new mo(ls.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>t)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,i;let r,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=FW(e);return o=re("files",a._url),s=a._query,delete a._url,delete a._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json().then(c=>{let d=c;return d.sdkHttpResponse={headers:l.headers},d})),r.then(l=>{let c=LW(l),d=new Tx;return Object.assign(d,c),d})}}async createInternal(e){var t,i;let r,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=AW(e);return o=re("upload/v1beta/files",a._url),s=a._query,delete a._url,delete a._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),r.then(l=>{let c=kW(l),d=new Ix;return Object.assign(d,c),d})}}async get(e){var t,i;let r,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=PW(e);return o=re("files/{file}",a._url),s=a._query,delete a._url,delete a._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),r.then(l=>l)}}async delete(e){var t,i;let r,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=MW(e);return o=re("files/{file}",a._url),s=a._query,delete a._url,delete a._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json().then(c=>{let d=c;return d.sdkHttpResponse={headers:l.headers},d})),r.then(l=>{let c=NW(l),d=new Dx;return Object.assign(d,c),d})}}};function Qg(n){let e={},t=u(n,["data"]);if(t!=null&&f(e,["data"],t),u(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let i=u(n,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function OW(n){let e={},t=u(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(o=>XW(o))),f(e,["parts"],r)}let i=u(n,["role"]);return i!=null&&f(e,["role"],i),e}function VW(n){let e={};if(u(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let t=u(n,["fileUri"]);t!=null&&f(e,["fileUri"],t);let i=u(n,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function BW(n){let e={};if(u(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");let t=u(n,["description"]);t!=null&&f(e,["description"],t);let i=u(n,["name"]);i!=null&&f(e,["name"],i);let r=u(n,["parameters"]);r!=null&&f(e,["parameters"],r);let o=u(n,["parametersJsonSchema"]);o!=null&&f(e,["parametersJsonSchema"],o);let s=u(n,["response"]);s!=null&&f(e,["response"],s);let a=u(n,["responseJsonSchema"]);return a!=null&&f(e,["responseJsonSchema"],a),e}function UW(n){let e={},t=u(n,["modelSelectionConfig"]);t!=null&&f(e,["modelConfig"],t);let i=u(n,["responseJsonSchema"]);i!=null&&f(e,["responseJsonSchema"],i);let r=u(n,["audioTimestamp"]);r!=null&&f(e,["audioTimestamp"],r);let o=u(n,["candidateCount"]);o!=null&&f(e,["candidateCount"],o);let s=u(n,["enableAffectiveDialog"]);s!=null&&f(e,["enableAffectiveDialog"],s);let a=u(n,["frequencyPenalty"]);a!=null&&f(e,["frequencyPenalty"],a);let l=u(n,["logprobs"]);l!=null&&f(e,["logprobs"],l);let c=u(n,["maxOutputTokens"]);c!=null&&f(e,["maxOutputTokens"],c);let d=u(n,["mediaResolution"]);d!=null&&f(e,["mediaResolution"],d);let p=u(n,["presencePenalty"]);p!=null&&f(e,["presencePenalty"],p);let h=u(n,["responseLogprobs"]);h!=null&&f(e,["responseLogprobs"],h);let y=u(n,["responseMimeType"]);y!=null&&f(e,["responseMimeType"],y);let E=u(n,["responseModalities"]);E!=null&&f(e,["responseModalities"],E);let A=u(n,["responseSchema"]);A!=null&&f(e,["responseSchema"],A);let R=u(n,["routingConfig"]);R!=null&&f(e,["routingConfig"],R);let k=u(n,["seed"]);k!=null&&f(e,["seed"],k);let H=u(n,["speechConfig"]);H!=null&&f(e,["speechConfig"],Q2(H));let K=u(n,["stopSequences"]);K!=null&&f(e,["stopSequences"],K);let z=u(n,["temperature"]);z!=null&&f(e,["temperature"],z);let oe=u(n,["thinkingConfig"]);oe!=null&&f(e,["thinkingConfig"],oe);let pe=u(n,["topK"]);pe!=null&&f(e,["topK"],pe);let Ne=u(n,["topP"]);if(Ne!=null&&f(e,["topP"],Ne),u(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function $W(n){let e={};if(u(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");let t=u(n,["enableWidget"]);return t!=null&&f(e,["enableWidget"],t),e}function HW(n){let e={};if(u(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");let t=u(n,["timeRangeFilter"]);return t!=null&&f(e,["timeRangeFilter"],t),e}function qW(n,e){let t={},i=u(n,["generationConfig"]);e!==void 0&&i!=null&&f(e,["setup","generationConfig"],i);let r=u(n,["responseModalities"]);e!==void 0&&r!=null&&f(e,["setup","generationConfig","responseModalities"],r);let o=u(n,["temperature"]);e!==void 0&&o!=null&&f(e,["setup","generationConfig","temperature"],o);let s=u(n,["topP"]);e!==void 0&&s!=null&&f(e,["setup","generationConfig","topP"],s);let a=u(n,["topK"]);e!==void 0&&a!=null&&f(e,["setup","generationConfig","topK"],a);let l=u(n,["maxOutputTokens"]);e!==void 0&&l!=null&&f(e,["setup","generationConfig","maxOutputTokens"],l);let c=u(n,["mediaResolution"]);e!==void 0&&c!=null&&f(e,["setup","generationConfig","mediaResolution"],c);let d=u(n,["seed"]);e!==void 0&&d!=null&&f(e,["setup","generationConfig","seed"],d);let p=u(n,["speechConfig"]);e!==void 0&&p!=null&&f(e,["setup","generationConfig","speechConfig"],ub(p));let h=u(n,["thinkingConfig"]);e!==void 0&&h!=null&&f(e,["setup","generationConfig","thinkingConfig"],h);let y=u(n,["enableAffectiveDialog"]);e!==void 0&&y!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],y);let E=u(n,["systemInstruction"]);e!==void 0&&E!=null&&f(e,["setup","systemInstruction"],OW(vn(E)));let A=u(n,["tools"]);if(e!==void 0&&A!=null){let pe=Sc(A);Array.isArray(pe)&&(pe=pe.map(Ne=>ez(bc(Ne)))),f(e,["setup","tools"],pe)}let R=u(n,["sessionResumption"]);e!==void 0&&R!=null&&f(e,["setup","sessionResumption"],ZW(R));let k=u(n,["inputAudioTranscription"]);e!==void 0&&k!=null&&f(e,["setup","inputAudioTranscription"],k);let H=u(n,["outputAudioTranscription"]);e!==void 0&&H!=null&&f(e,["setup","outputAudioTranscription"],H);let K=u(n,["realtimeInputConfig"]);e!==void 0&&K!=null&&f(e,["setup","realtimeInputConfig"],K);let z=u(n,["contextWindowCompression"]);e!==void 0&&z!=null&&f(e,["setup","contextWindowCompression"],z);let oe=u(n,["proactivity"]);return e!==void 0&&oe!=null&&f(e,["setup","proactivity"],oe),t}function GW(n,e){let t={},i=u(n,["generationConfig"]);e!==void 0&&i!=null&&f(e,["setup","generationConfig"],UW(i));let r=u(n,["responseModalities"]);e!==void 0&&r!=null&&f(e,["setup","generationConfig","responseModalities"],r);let o=u(n,["temperature"]);e!==void 0&&o!=null&&f(e,["setup","generationConfig","temperature"],o);let s=u(n,["topP"]);e!==void 0&&s!=null&&f(e,["setup","generationConfig","topP"],s);let a=u(n,["topK"]);e!==void 0&&a!=null&&f(e,["setup","generationConfig","topK"],a);let l=u(n,["maxOutputTokens"]);e!==void 0&&l!=null&&f(e,["setup","generationConfig","maxOutputTokens"],l);let c=u(n,["mediaResolution"]);e!==void 0&&c!=null&&f(e,["setup","generationConfig","mediaResolution"],c);let d=u(n,["seed"]);e!==void 0&&d!=null&&f(e,["setup","generationConfig","seed"],d);let p=u(n,["speechConfig"]);e!==void 0&&p!=null&&f(e,["setup","generationConfig","speechConfig"],Q2(ub(p)));let h=u(n,["thinkingConfig"]);e!==void 0&&h!=null&&f(e,["setup","generationConfig","thinkingConfig"],h);let y=u(n,["enableAffectiveDialog"]);e!==void 0&&y!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],y);let E=u(n,["systemInstruction"]);e!==void 0&&E!=null&&f(e,["setup","systemInstruction"],vn(E));let A=u(n,["tools"]);if(e!==void 0&&A!=null){let pe=Sc(A);Array.isArray(pe)&&(pe=pe.map(Ne=>tz(bc(Ne)))),f(e,["setup","tools"],pe)}let R=u(n,["sessionResumption"]);e!==void 0&&R!=null&&f(e,["setup","sessionResumption"],R);let k=u(n,["inputAudioTranscription"]);e!==void 0&&k!=null&&f(e,["setup","inputAudioTranscription"],k);let H=u(n,["outputAudioTranscription"]);e!==void 0&&H!=null&&f(e,["setup","outputAudioTranscription"],H);let K=u(n,["realtimeInputConfig"]);e!==void 0&&K!=null&&f(e,["setup","realtimeInputConfig"],K);let z=u(n,["contextWindowCompression"]);e!==void 0&&z!=null&&f(e,["setup","contextWindowCompression"],z);let oe=u(n,["proactivity"]);return e!==void 0&&oe!=null&&f(e,["setup","proactivity"],oe),t}function WW(n,e){let t={},i=u(e,["model"]);i!=null&&f(t,["setup","model"],We(n,i));let r=u(e,["config"]);return r!=null&&f(t,["config"],qW(r,t)),t}function zW(n,e){let t={},i=u(e,["model"]);i!=null&&f(t,["setup","model"],We(n,i));let r=u(e,["config"]);return r!=null&&f(t,["config"],GW(r,t)),t}function jW(n){let e={},t=u(n,["musicGenerationConfig"]);return t!=null&&f(e,["musicGenerationConfig"],t),e}function KW(n){let e={},t=u(n,["weightedPrompts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>r)),f(e,["weightedPrompts"],i)}return e}function YW(n){let e={},t=u(n,["media"]);if(t!=null){let c=V2(t);Array.isArray(c)&&(c=c.map(d=>Qg(d))),f(e,["mediaChunks"],c)}let i=u(n,["audio"]);i!=null&&f(e,["audio"],Qg(U2(i)));let r=u(n,["audioStreamEnd"]);r!=null&&f(e,["audioStreamEnd"],r);let o=u(n,["video"]);o!=null&&f(e,["video"],Qg(B2(o)));let s=u(n,["text"]);s!=null&&f(e,["text"],s);let a=u(n,["activityStart"]);a!=null&&f(e,["activityStart"],a);let l=u(n,["activityEnd"]);return l!=null&&f(e,["activityEnd"],l),e}function JW(n){let e={},t=u(n,["media"]);if(t!=null){let c=V2(t);Array.isArray(c)&&(c=c.map(d=>d)),f(e,["mediaChunks"],c)}let i=u(n,["audio"]);i!=null&&f(e,["audio"],U2(i));let r=u(n,["audioStreamEnd"]);r!=null&&f(e,["audioStreamEnd"],r);let o=u(n,["video"]);o!=null&&f(e,["video"],B2(o));let s=u(n,["text"]);s!=null&&f(e,["text"],s);let a=u(n,["activityStart"]);a!=null&&f(e,["activityStart"],a);let l=u(n,["activityEnd"]);return l!=null&&f(e,["activityEnd"],l),e}function QW(n){let e={},t=u(n,["setupComplete"]);t!=null&&f(e,["setupComplete"],t);let i=u(n,["serverContent"]);i!=null&&f(e,["serverContent"],i);let r=u(n,["toolCall"]);r!=null&&f(e,["toolCall"],r);let o=u(n,["toolCallCancellation"]);o!=null&&f(e,["toolCallCancellation"],o);let s=u(n,["usageMetadata"]);s!=null&&f(e,["usageMetadata"],nz(s));let a=u(n,["goAway"]);a!=null&&f(e,["goAway"],a);let l=u(n,["sessionResumptionUpdate"]);return l!=null&&f(e,["sessionResumptionUpdate"],l),e}function XW(n){let e={},t=u(n,["functionCall"]);t!=null&&f(e,["functionCall"],t);let i=u(n,["codeExecutionResult"]);i!=null&&f(e,["codeExecutionResult"],i);let r=u(n,["executableCode"]);r!=null&&f(e,["executableCode"],r);let o=u(n,["fileData"]);o!=null&&f(e,["fileData"],VW(o));let s=u(n,["functionResponse"]);s!=null&&f(e,["functionResponse"],s);let a=u(n,["inlineData"]);a!=null&&f(e,["inlineData"],Qg(a));let l=u(n,["text"]);l!=null&&f(e,["text"],l);let c=u(n,["thought"]);c!=null&&f(e,["thought"],c);let d=u(n,["thoughtSignature"]);d!=null&&f(e,["thoughtSignature"],d);let p=u(n,["videoMetadata"]);return p!=null&&f(e,["videoMetadata"],p),e}function ZW(n){let e={},t=u(n,["handle"]);if(t!=null&&f(e,["handle"],t),u(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Q2(n){let e={},t=u(n,["languageCode"]);t!=null&&f(e,["languageCode"],t);let i=u(n,["voiceConfig"]);if(i!=null&&f(e,["voiceConfig"],i),u(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function ez(n){let e={},t=u(n,["functionDeclarations"]);if(t!=null){let d=t;Array.isArray(d)&&(d=d.map(p=>p)),f(e,["functionDeclarations"],d)}if(u(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let i=u(n,["googleSearchRetrieval"]);i!=null&&f(e,["googleSearchRetrieval"],i);let r=u(n,["computerUse"]);r!=null&&f(e,["computerUse"],r);let o=u(n,["fileSearch"]);o!=null&&f(e,["fileSearch"],o);let s=u(n,["codeExecution"]);if(s!=null&&f(e,["codeExecution"],s),u(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");let a=u(n,["googleMaps"]);a!=null&&f(e,["googleMaps"],$W(a));let l=u(n,["googleSearch"]);l!=null&&f(e,["googleSearch"],HW(l));let c=u(n,["urlContext"]);return c!=null&&f(e,["urlContext"],c),e}function tz(n){let e={},t=u(n,["functionDeclarations"]);if(t!=null){let p=t;Array.isArray(p)&&(p=p.map(h=>BW(h))),f(e,["functionDeclarations"],p)}let i=u(n,["retrieval"]);i!=null&&f(e,["retrieval"],i);let r=u(n,["googleSearchRetrieval"]);r!=null&&f(e,["googleSearchRetrieval"],r);let o=u(n,["computerUse"]);if(o!=null&&f(e,["computerUse"],o),u(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");let s=u(n,["codeExecution"]);s!=null&&f(e,["codeExecution"],s);let a=u(n,["enterpriseWebSearch"]);a!=null&&f(e,["enterpriseWebSearch"],a);let l=u(n,["googleMaps"]);l!=null&&f(e,["googleMaps"],l);let c=u(n,["googleSearch"]);c!=null&&f(e,["googleSearch"],c);let d=u(n,["urlContext"]);return d!=null&&f(e,["urlContext"],d),e}function nz(n){let e={},t=u(n,["promptTokenCount"]);t!=null&&f(e,["promptTokenCount"],t);let i=u(n,["cachedContentTokenCount"]);i!=null&&f(e,["cachedContentTokenCount"],i);let r=u(n,["candidatesTokenCount"]);r!=null&&f(e,["responseTokenCount"],r);let o=u(n,["toolUsePromptTokenCount"]);o!=null&&f(e,["toolUsePromptTokenCount"],o);let s=u(n,["thoughtsTokenCount"]);s!=null&&f(e,["thoughtsTokenCount"],s);let a=u(n,["totalTokenCount"]);a!=null&&f(e,["totalTokenCount"],a);let l=u(n,["promptTokensDetails"]);if(l!=null){let y=l;Array.isArray(y)&&(y=y.map(E=>E)),f(e,["promptTokensDetails"],y)}let c=u(n,["cacheTokensDetails"]);if(c!=null){let y=c;Array.isArray(y)&&(y=y.map(E=>E)),f(e,["cacheTokensDetails"],y)}let d=u(n,["candidatesTokensDetails"]);if(d!=null){let y=d;Array.isArray(y)&&(y=y.map(E=>E)),f(e,["responseTokensDetails"],y)}let p=u(n,["toolUsePromptTokensDetails"]);if(p!=null){let y=p;Array.isArray(y)&&(y=y.map(E=>E)),f(e,["toolUsePromptTokensDetails"],y)}let h=u(n,["trafficType"]);return h!=null&&f(e,["trafficType"],h),e}function iz(n){let e={},t=u(n,["data"]);if(t!=null&&f(e,["data"],t),u(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let i=u(n,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function rz(n){let e={},t=u(n,["content"]);t!=null&&f(e,["content"],t);let i=u(n,["citationMetadata"]);i!=null&&f(e,["citationMetadata"],oz(i));let r=u(n,["tokenCount"]);r!=null&&f(e,["tokenCount"],r);let o=u(n,["finishReason"]);o!=null&&f(e,["finishReason"],o);let s=u(n,["avgLogprobs"]);s!=null&&f(e,["avgLogprobs"],s);let a=u(n,["groundingMetadata"]);a!=null&&f(e,["groundingMetadata"],a);let l=u(n,["index"]);l!=null&&f(e,["index"],l);let c=u(n,["logprobsResult"]);c!=null&&f(e,["logprobsResult"],c);let d=u(n,["safetyRatings"]);if(d!=null){let h=d;Array.isArray(h)&&(h=h.map(y=>y)),f(e,["safetyRatings"],h)}let p=u(n,["urlContextMetadata"]);return p!=null&&f(e,["urlContextMetadata"],p),e}function oz(n){let e={},t=u(n,["citationSources"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>r)),f(e,["citations"],i)}return e}function sz(n,e){let t={},i=u(e,["model"]);i!=null&&f(t,["_url","model"],We(n,i));let r=u(e,["contents"]);if(r!=null){let o=Ui(r);Array.isArray(o)&&(o=o.map(s=>s)),f(t,["contents"],o)}return t}function az(n){let e={},t=u(n,["sdkHttpResponse"]);t!=null&&f(e,["sdkHttpResponse"],t);let i=u(n,["tokensInfo"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>o)),f(e,["tokensInfo"],r)}return e}function lz(n){let e={},t=u(n,["values"]);t!=null&&f(e,["values"],t);let i=u(n,["statistics"]);return i!=null&&f(e,["statistics"],cz(i)),e}function cz(n){let e={},t=u(n,["truncated"]);t!=null&&f(e,["truncated"],t);let i=u(n,["token_count"]);return i!=null&&f(e,["tokenCount"],i),e}function d0(n){let e={},t=u(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(o=>hj(o))),f(e,["parts"],r)}let i=u(n,["role"]);return i!=null&&f(e,["role"],i),e}function uz(n){let e={},t=u(n,["controlType"]);t!=null&&f(e,["controlType"],t);let i=u(n,["enableControlImageComputation"]);return i!=null&&f(e,["computeControl"],i),e}function dz(n){let e={};if(u(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(u(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(u(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function fz(n,e){let t={},i=u(n,["systemInstruction"]);e!==void 0&&i!=null&&f(e,["systemInstruction"],vn(i));let r=u(n,["tools"]);if(e!==void 0&&r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>nN(a))),f(e,["tools"],s)}let o=u(n,["generationConfig"]);return e!==void 0&&o!=null&&f(e,["generationConfig"],tj(o)),t}function pz(n,e){let t={},i=u(e,["model"]);i!=null&&f(t,["_url","model"],We(n,i));let r=u(e,["contents"]);if(r!=null){let s=Ui(r);Array.isArray(s)&&(s=s.map(a=>d0(a))),f(t,["contents"],s)}let o=u(e,["config"]);return o!=null&&dz(o),t}function hz(n,e){let t={},i=u(e,["model"]);i!=null&&f(t,["_url","model"],We(n,i));let r=u(e,["contents"]);if(r!=null){let s=Ui(r);Array.isArray(s)&&(s=s.map(a=>a)),f(t,["contents"],s)}let o=u(e,["config"]);return o!=null&&fz(o,t),t}function mz(n){let e={},t=u(n,["sdkHttpResponse"]);t!=null&&f(e,["sdkHttpResponse"],t);let i=u(n,["totalTokens"]);i!=null&&f(e,["totalTokens"],i);let r=u(n,["cachedContentTokenCount"]);return r!=null&&f(e,["cachedContentTokenCount"],r),e}function gz(n){let e={},t=u(n,["sdkHttpResponse"]);t!=null&&f(e,["sdkHttpResponse"],t);let i=u(n,["totalTokens"]);return i!=null&&f(e,["totalTokens"],i),e}function yz(n,e){let t={},i=u(e,["model"]);return i!=null&&f(t,["_url","name"],We(n,i)),t}function vz(n,e){let t={},i=u(e,["model"]);return i!=null&&f(t,["_url","name"],We(n,i)),t}function _z(n){let e={},t=u(n,["sdkHttpResponse"]);return t!=null&&f(e,["sdkHttpResponse"],t),e}function wz(n){let e={},t=u(n,["sdkHttpResponse"]);return t!=null&&f(e,["sdkHttpResponse"],t),e}function Cz(n,e){let t={},i=u(n,["outputGcsUri"]);e!==void 0&&i!=null&&f(e,["parameters","storageUri"],i);let r=u(n,["negativePrompt"]);e!==void 0&&r!=null&&f(e,["parameters","negativePrompt"],r);let o=u(n,["numberOfImages"]);e!==void 0&&o!=null&&f(e,["parameters","sampleCount"],o);let s=u(n,["aspectRatio"]);e!==void 0&&s!=null&&f(e,["parameters","aspectRatio"],s);let a=u(n,["guidanceScale"]);e!==void 0&&a!=null&&f(e,["parameters","guidanceScale"],a);let l=u(n,["seed"]);e!==void 0&&l!=null&&f(e,["parameters","seed"],l);let c=u(n,["safetyFilterLevel"]);e!==void 0&&c!=null&&f(e,["parameters","safetySetting"],c);let d=u(n,["personGeneration"]);e!==void 0&&d!=null&&f(e,["parameters","personGeneration"],d);let p=u(n,["includeSafetyAttributes"]);e!==void 0&&p!=null&&f(e,["parameters","includeSafetyAttributes"],p);let h=u(n,["includeRaiReason"]);e!==void 0&&h!=null&&f(e,["parameters","includeRaiReason"],h);let y=u(n,["language"]);e!==void 0&&y!=null&&f(e,["parameters","language"],y);let E=u(n,["outputMimeType"]);e!==void 0&&E!=null&&f(e,["parameters","outputOptions","mimeType"],E);let A=u(n,["outputCompressionQuality"]);e!==void 0&&A!=null&&f(e,["parameters","outputOptions","compressionQuality"],A);let R=u(n,["addWatermark"]);e!==void 0&&R!=null&&f(e,["parameters","addWatermark"],R);let k=u(n,["labels"]);e!==void 0&&k!=null&&f(e,["labels"],k);let H=u(n,["editMode"]);e!==void 0&&H!=null&&f(e,["parameters","editMode"],H);let K=u(n,["baseSteps"]);return e!==void 0&&K!=null&&f(e,["parameters","editConfig","baseSteps"],K),t}function Ez(n,e){let t={},i=u(e,["model"]);i!=null&&f(t,["_url","model"],We(n,i));let r=u(e,["prompt"]);r!=null&&f(t,["instances[0]","prompt"],r);let o=u(e,["referenceImages"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(l=>wj(l))),f(t,["instances[0]","referenceImages"],a)}let s=u(e,["config"]);return s!=null&&Cz(s,t),t}function xz(n){let e={},t=u(n,["sdkHttpResponse"]);t!=null&&f(e,["sdkHttpResponse"],t);let i=u(n,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>f0(o))),f(e,["generatedImages"],r)}return e}function bz(n,e){let t={},i=u(n,["taskType"]);e!==void 0&&i!=null&&f(e,["requests[]","taskType"],i);let r=u(n,["title"]);e!==void 0&&r!=null&&f(e,["requests[]","title"],r);let o=u(n,["outputDimensionality"]);if(e!==void 0&&o!=null&&f(e,["requests[]","outputDimensionality"],o),u(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(u(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function Sz(n,e){let t={},i=u(n,["taskType"]);e!==void 0&&i!=null&&f(e,["instances[]","task_type"],i);let r=u(n,["title"]);e!==void 0&&r!=null&&f(e,["instances[]","title"],r);let o=u(n,["outputDimensionality"]);e!==void 0&&o!=null&&f(e,["parameters","outputDimensionality"],o);let s=u(n,["mimeType"]);e!==void 0&&s!=null&&f(e,["instances[]","mimeType"],s);let a=u(n,["autoTruncate"]);return e!==void 0&&a!=null&&f(e,["parameters","autoTruncate"],a),t}function Tz(n,e){let t={},i=u(e,["model"]);i!=null&&f(t,["_url","model"],We(n,i));let r=u(e,["contents"]);if(r!=null){let a=ab(n,r);Array.isArray(a)&&(a=a.map(l=>l)),f(t,["requests[]","content"],a)}let o=u(e,["config"]);o!=null&&bz(o,t);let s=u(e,["model"]);return s!==void 0&&f(t,["requests[]","model"],We(n,s)),t}function Iz(n,e){let t={},i=u(e,["model"]);i!=null&&f(t,["_url","model"],We(n,i));let r=u(e,["contents"]);if(r!=null){let s=ab(n,r);Array.isArray(s)&&(s=s.map(a=>a)),f(t,["instances[]","content"],s)}let o=u(e,["config"]);return o!=null&&Sz(o,t),t}function Dz(n){let e={},t=u(n,["sdkHttpResponse"]);t!=null&&f(e,["sdkHttpResponse"],t);let i=u(n,["embeddings"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),f(e,["embeddings"],o)}let r=u(n,["metadata"]);return r!=null&&f(e,["metadata"],r),e}function Az(n){let e={},t=u(n,["sdkHttpResponse"]);t!=null&&f(e,["sdkHttpResponse"],t);let i=u(n,["predictions[]","embeddings"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>lz(s))),f(e,["embeddings"],o)}let r=u(n,["metadata"]);return r!=null&&f(e,["metadata"],r),e}function kz(n){let e={},t=u(n,["endpoint"]);t!=null&&f(e,["name"],t);let i=u(n,["deployedModelId"]);return i!=null&&f(e,["deployedModelId"],i),e}function Mz(n){let e={};if(u(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let t=u(n,["fileUri"]);t!=null&&f(e,["fileUri"],t);let i=u(n,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function Nz(n){let e={};if(u(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");let t=u(n,["description"]);t!=null&&f(e,["description"],t);let i=u(n,["name"]);i!=null&&f(e,["name"],i);let r=u(n,["parameters"]);r!=null&&f(e,["parameters"],r);let o=u(n,["parametersJsonSchema"]);o!=null&&f(e,["parametersJsonSchema"],o);let s=u(n,["response"]);s!=null&&f(e,["response"],s);let a=u(n,["responseJsonSchema"]);return a!=null&&f(e,["responseJsonSchema"],a),e}function Pz(n,e,t){let i={},r=u(e,["systemInstruction"]);t!==void 0&&r!=null&&f(t,["systemInstruction"],d0(vn(r)));let o=u(e,["temperature"]);o!=null&&f(i,["temperature"],o);let s=u(e,["topP"]);s!=null&&f(i,["topP"],s);let a=u(e,["topK"]);a!=null&&f(i,["topK"],a);let l=u(e,["candidateCount"]);l!=null&&f(i,["candidateCount"],l);let c=u(e,["maxOutputTokens"]);c!=null&&f(i,["maxOutputTokens"],c);let d=u(e,["stopSequences"]);d!=null&&f(i,["stopSequences"],d);let p=u(e,["responseLogprobs"]);p!=null&&f(i,["responseLogprobs"],p);let h=u(e,["logprobs"]);h!=null&&f(i,["logprobs"],h);let y=u(e,["presencePenalty"]);y!=null&&f(i,["presencePenalty"],y);let E=u(e,["frequencyPenalty"]);E!=null&&f(i,["frequencyPenalty"],E);let A=u(e,["seed"]);A!=null&&f(i,["seed"],A);let R=u(e,["responseMimeType"]);R!=null&&f(i,["responseMimeType"],R);let k=u(e,["responseSchema"]);k!=null&&f(i,["responseSchema"],lb(k));let H=u(e,["responseJsonSchema"]);if(H!=null&&f(i,["responseJsonSchema"],H),u(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(u(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");let K=u(e,["safetySettings"]);if(t!==void 0&&K!=null){let st=K;Array.isArray(st)&&(st=st.map(jn=>Cj(jn))),f(t,["safetySettings"],st)}let z=u(e,["tools"]);if(t!==void 0&&z!=null){let st=Sc(z);Array.isArray(st)&&(st=st.map(jn=>Ij(bc(jn)))),f(t,["tools"],st)}let oe=u(e,["toolConfig"]);if(t!==void 0&&oe!=null&&f(t,["toolConfig"],oe),u(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");let pe=u(e,["cachedContent"]);t!==void 0&&pe!=null&&f(t,["cachedContent"],go(n,pe));let Ne=u(e,["responseModalities"]);Ne!=null&&f(i,["responseModalities"],Ne);let kt=u(e,["mediaResolution"]);kt!=null&&f(i,["mediaResolution"],kt);let be=u(e,["speechConfig"]);if(be!=null&&f(i,["speechConfig"],cb(be)),u(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");let ze=u(e,["thinkingConfig"]);ze!=null&&f(i,["thinkingConfig"],ze);let bt=u(e,["imageConfig"]);return bt!=null&&f(i,["imageConfig"],bt),i}function Rz(n,e,t){let i={},r=u(e,["systemInstruction"]);t!==void 0&&r!=null&&f(t,["systemInstruction"],vn(r));let o=u(e,["temperature"]);o!=null&&f(i,["temperature"],o);let s=u(e,["topP"]);s!=null&&f(i,["topP"],s);let a=u(e,["topK"]);a!=null&&f(i,["topK"],a);let l=u(e,["candidateCount"]);l!=null&&f(i,["candidateCount"],l);let c=u(e,["maxOutputTokens"]);c!=null&&f(i,["maxOutputTokens"],c);let d=u(e,["stopSequences"]);d!=null&&f(i,["stopSequences"],d);let p=u(e,["responseLogprobs"]);p!=null&&f(i,["responseLogprobs"],p);let h=u(e,["logprobs"]);h!=null&&f(i,["logprobs"],h);let y=u(e,["presencePenalty"]);y!=null&&f(i,["presencePenalty"],y);let E=u(e,["frequencyPenalty"]);E!=null&&f(i,["frequencyPenalty"],E);let A=u(e,["seed"]);A!=null&&f(i,["seed"],A);let R=u(e,["responseMimeType"]);R!=null&&f(i,["responseMimeType"],R);let k=u(e,["responseSchema"]);k!=null&&f(i,["responseSchema"],lb(k));let H=u(e,["responseJsonSchema"]);H!=null&&f(i,["responseJsonSchema"],H);let K=u(e,["routingConfig"]);K!=null&&f(i,["routingConfig"],K);let z=u(e,["modelSelectionConfig"]);z!=null&&f(i,["modelConfig"],z);let oe=u(e,["safetySettings"]);if(t!==void 0&&oe!=null){let $i=oe;Array.isArray($i)&&($i=$i.map(Cu=>Cu)),f(t,["safetySettings"],$i)}let pe=u(e,["tools"]);if(t!==void 0&&pe!=null){let $i=Sc(pe);Array.isArray($i)&&($i=$i.map(Cu=>nN(bc(Cu)))),f(t,["tools"],$i)}let Ne=u(e,["toolConfig"]);t!==void 0&&Ne!=null&&f(t,["toolConfig"],Ne);let kt=u(e,["labels"]);t!==void 0&&kt!=null&&f(t,["labels"],kt);let be=u(e,["cachedContent"]);t!==void 0&&be!=null&&f(t,["cachedContent"],go(n,be));let ze=u(e,["responseModalities"]);ze!=null&&f(i,["responseModalities"],ze);let bt=u(e,["mediaResolution"]);bt!=null&&f(i,["mediaResolution"],bt);let st=u(e,["speechConfig"]);st!=null&&f(i,["speechConfig"],tN(cb(st)));let jn=u(e,["audioTimestamp"]);jn!=null&&f(i,["audioTimestamp"],jn);let ds=u(e,["thinkingConfig"]);ds!=null&&f(i,["thinkingConfig"],ds);let Qf=u(e,["imageConfig"]);return Qf!=null&&f(i,["imageConfig"],Qf),i}function x2(n,e){let t={},i=u(e,["model"]);i!=null&&f(t,["_url","model"],We(n,i));let r=u(e,["contents"]);if(r!=null){let s=Ui(r);Array.isArray(s)&&(s=s.map(a=>d0(a))),f(t,["contents"],s)}let o=u(e,["config"]);return o!=null&&f(t,["generationConfig"],Pz(n,o,t)),t}function b2(n,e){let t={},i=u(e,["model"]);i!=null&&f(t,["_url","model"],We(n,i));let r=u(e,["contents"]);if(r!=null){let s=Ui(r);Array.isArray(s)&&(s=s.map(a=>a)),f(t,["contents"],s)}let o=u(e,["config"]);return o!=null&&f(t,["generationConfig"],Rz(n,o,t)),t}function S2(n){let e={},t=u(n,["sdkHttpResponse"]);t!=null&&f(e,["sdkHttpResponse"],t);let i=u(n,["candidates"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>rz(c))),f(e,["candidates"],l)}let r=u(n,["modelVersion"]);r!=null&&f(e,["modelVersion"],r);let o=u(n,["promptFeedback"]);o!=null&&f(e,["promptFeedback"],o);let s=u(n,["responseId"]);s!=null&&f(e,["responseId"],s);let a=u(n,["usageMetadata"]);return a!=null&&f(e,["usageMetadata"],a),e}function T2(n){let e={},t=u(n,["sdkHttpResponse"]);t!=null&&f(e,["sdkHttpResponse"],t);let i=u(n,["candidates"]);if(i!=null){let c=i;Array.isArray(c)&&(c=c.map(d=>d)),f(e,["candidates"],c)}let r=u(n,["createTime"]);r!=null&&f(e,["createTime"],r);let o=u(n,["modelVersion"]);o!=null&&f(e,["modelVersion"],o);let s=u(n,["promptFeedback"]);s!=null&&f(e,["promptFeedback"],s);let a=u(n,["responseId"]);a!=null&&f(e,["responseId"],a);let l=u(n,["usageMetadata"]);return l!=null&&f(e,["usageMetadata"],l),e}function Fz(n,e){let t={};if(u(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(u(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");let i=u(n,["numberOfImages"]);e!==void 0&&i!=null&&f(e,["parameters","sampleCount"],i);let r=u(n,["aspectRatio"]);e!==void 0&&r!=null&&f(e,["parameters","aspectRatio"],r);let o=u(n,["guidanceScale"]);if(e!==void 0&&o!=null&&f(e,["parameters","guidanceScale"],o),u(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");let s=u(n,["safetyFilterLevel"]);e!==void 0&&s!=null&&f(e,["parameters","safetySetting"],s);let a=u(n,["personGeneration"]);e!==void 0&&a!=null&&f(e,["parameters","personGeneration"],a);let l=u(n,["includeSafetyAttributes"]);e!==void 0&&l!=null&&f(e,["parameters","includeSafetyAttributes"],l);let c=u(n,["includeRaiReason"]);e!==void 0&&c!=null&&f(e,["parameters","includeRaiReason"],c);let d=u(n,["language"]);e!==void 0&&d!=null&&f(e,["parameters","language"],d);let p=u(n,["outputMimeType"]);e!==void 0&&p!=null&&f(e,["parameters","outputOptions","mimeType"],p);let h=u(n,["outputCompressionQuality"]);if(e!==void 0&&h!=null&&f(e,["parameters","outputOptions","compressionQuality"],h),u(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(u(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");let y=u(n,["imageSize"]);if(e!==void 0&&y!=null&&f(e,["parameters","sampleImageSize"],y),u(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return t}function Lz(n,e){let t={},i=u(n,["outputGcsUri"]);e!==void 0&&i!=null&&f(e,["parameters","storageUri"],i);let r=u(n,["negativePrompt"]);e!==void 0&&r!=null&&f(e,["parameters","negativePrompt"],r);let o=u(n,["numberOfImages"]);e!==void 0&&o!=null&&f(e,["parameters","sampleCount"],o);let s=u(n,["aspectRatio"]);e!==void 0&&s!=null&&f(e,["parameters","aspectRatio"],s);let a=u(n,["guidanceScale"]);e!==void 0&&a!=null&&f(e,["parameters","guidanceScale"],a);let l=u(n,["seed"]);e!==void 0&&l!=null&&f(e,["parameters","seed"],l);let c=u(n,["safetyFilterLevel"]);e!==void 0&&c!=null&&f(e,["parameters","safetySetting"],c);let d=u(n,["personGeneration"]);e!==void 0&&d!=null&&f(e,["parameters","personGeneration"],d);let p=u(n,["includeSafetyAttributes"]);e!==void 0&&p!=null&&f(e,["parameters","includeSafetyAttributes"],p);let h=u(n,["includeRaiReason"]);e!==void 0&&h!=null&&f(e,["parameters","includeRaiReason"],h);let y=u(n,["language"]);e!==void 0&&y!=null&&f(e,["parameters","language"],y);let E=u(n,["outputMimeType"]);e!==void 0&&E!=null&&f(e,["parameters","outputOptions","mimeType"],E);let A=u(n,["outputCompressionQuality"]);e!==void 0&&A!=null&&f(e,["parameters","outputOptions","compressionQuality"],A);let R=u(n,["addWatermark"]);e!==void 0&&R!=null&&f(e,["parameters","addWatermark"],R);let k=u(n,["labels"]);e!==void 0&&k!=null&&f(e,["labels"],k);let H=u(n,["imageSize"]);e!==void 0&&H!=null&&f(e,["parameters","sampleImageSize"],H);let K=u(n,["enhancePrompt"]);return e!==void 0&&K!=null&&f(e,["parameters","enhancePrompt"],K),t}function Oz(n,e){let t={},i=u(e,["model"]);i!=null&&f(t,["_url","model"],We(n,i));let r=u(e,["prompt"]);r!=null&&f(t,["instances[0]","prompt"],r);let o=u(e,["config"]);return o!=null&&Fz(o,t),t}function Vz(n,e){let t={},i=u(e,["model"]);i!=null&&f(t,["_url","model"],We(n,i));let r=u(e,["prompt"]);r!=null&&f(t,["instances[0]","prompt"],r);let o=u(e,["config"]);return o!=null&&Lz(o,t),t}function Bz(n){let e={},t=u(n,["sdkHttpResponse"]);t!=null&&f(e,["sdkHttpResponse"],t);let i=u(n,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>Qz(s))),f(e,["generatedImages"],o)}let r=u(n,["positivePromptSafetyAttributes"]);return r!=null&&f(e,["positivePromptSafetyAttributes"],Z2(r)),e}function Uz(n){let e={},t=u(n,["sdkHttpResponse"]);t!=null&&f(e,["sdkHttpResponse"],t);let i=u(n,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>f0(s))),f(e,["generatedImages"],o)}let r=u(n,["positivePromptSafetyAttributes"]);return r!=null&&f(e,["positivePromptSafetyAttributes"],eN(r)),e}function $z(n,e){let t={},i=u(n,["numberOfVideos"]);if(e!==void 0&&i!=null&&f(e,["parameters","sampleCount"],i),u(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(u(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");let r=u(n,["durationSeconds"]);if(e!==void 0&&r!=null&&f(e,["parameters","durationSeconds"],r),u(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");let o=u(n,["aspectRatio"]);e!==void 0&&o!=null&&f(e,["parameters","aspectRatio"],o);let s=u(n,["resolution"]);e!==void 0&&s!=null&&f(e,["parameters","resolution"],s);let a=u(n,["personGeneration"]);if(e!==void 0&&a!=null&&f(e,["parameters","personGeneration"],a),u(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");let l=u(n,["negativePrompt"]);e!==void 0&&l!=null&&f(e,["parameters","negativePrompt"],l);let c=u(n,["enhancePrompt"]);if(e!==void 0&&c!=null&&f(e,["parameters","enhancePrompt"],c),u(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");let d=u(n,["lastFrame"]);e!==void 0&&d!=null&&f(e,["instances[0]","lastFrame"],p0(d));let p=u(n,["referenceImages"]);if(e!==void 0&&p!=null){let h=p;Array.isArray(h)&&(h=h.map(y=>Uj(y))),f(e,["instances[0]","referenceImages"],h)}if(u(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(u(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return t}function Hz(n,e){let t={},i=u(n,["numberOfVideos"]);e!==void 0&&i!=null&&f(e,["parameters","sampleCount"],i);let r=u(n,["outputGcsUri"]);e!==void 0&&r!=null&&f(e,["parameters","storageUri"],r);let o=u(n,["fps"]);e!==void 0&&o!=null&&f(e,["parameters","fps"],o);let s=u(n,["durationSeconds"]);e!==void 0&&s!=null&&f(e,["parameters","durationSeconds"],s);let a=u(n,["seed"]);e!==void 0&&a!=null&&f(e,["parameters","seed"],a);let l=u(n,["aspectRatio"]);e!==void 0&&l!=null&&f(e,["parameters","aspectRatio"],l);let c=u(n,["resolution"]);e!==void 0&&c!=null&&f(e,["parameters","resolution"],c);let d=u(n,["personGeneration"]);e!==void 0&&d!=null&&f(e,["parameters","personGeneration"],d);let p=u(n,["pubsubTopic"]);e!==void 0&&p!=null&&f(e,["parameters","pubsubTopic"],p);let h=u(n,["negativePrompt"]);e!==void 0&&h!=null&&f(e,["parameters","negativePrompt"],h);let y=u(n,["enhancePrompt"]);e!==void 0&&y!=null&&f(e,["parameters","enhancePrompt"],y);let E=u(n,["generateAudio"]);e!==void 0&&E!=null&&f(e,["parameters","generateAudio"],E);let A=u(n,["lastFrame"]);e!==void 0&&A!=null&&f(e,["instances[0]","lastFrame"],or(A));let R=u(n,["referenceImages"]);if(e!==void 0&&R!=null){let K=R;Array.isArray(K)&&(K=K.map(z=>$j(z))),f(e,["instances[0]","referenceImages"],K)}let k=u(n,["mask"]);e!==void 0&&k!=null&&f(e,["instances[0]","mask"],Bj(k));let H=u(n,["compressionQuality"]);return e!==void 0&&H!=null&&f(e,["parameters","compressionQuality"],H),t}function qz(n){let e={},t=u(n,["name"]);t!=null&&f(e,["name"],t);let i=u(n,["metadata"]);i!=null&&f(e,["metadata"],i);let r=u(n,["done"]);r!=null&&f(e,["done"],r);let o=u(n,["error"]);o!=null&&f(e,["error"],o);let s=u(n,["response","generateVideoResponse"]);return s!=null&&f(e,["response"],jz(s)),e}function Gz(n){let e={},t=u(n,["name"]);t!=null&&f(e,["name"],t);let i=u(n,["metadata"]);i!=null&&f(e,["metadata"],i);let r=u(n,["done"]);r!=null&&f(e,["done"],r);let o=u(n,["error"]);o!=null&&f(e,["error"],o);let s=u(n,["response"]);return s!=null&&f(e,["response"],Kz(s)),e}function Wz(n,e){let t={},i=u(e,["model"]);i!=null&&f(t,["_url","model"],We(n,i));let r=u(e,["prompt"]);r!=null&&f(t,["instances[0]","prompt"],r);let o=u(e,["image"]);o!=null&&f(t,["instances[0]","image"],p0(o));let s=u(e,["video"]);s!=null&&f(t,["instances[0]","video"],iN(s));let a=u(e,["source"]);a!=null&&Yz(a,t);let l=u(e,["config"]);return l!=null&&$z(l,t),t}function zz(n,e){let t={},i=u(e,["model"]);i!=null&&f(t,["_url","model"],We(n,i));let r=u(e,["prompt"]);r!=null&&f(t,["instances[0]","prompt"],r);let o=u(e,["image"]);o!=null&&f(t,["instances[0]","image"],or(o));let s=u(e,["video"]);s!=null&&f(t,["instances[0]","video"],rN(s));let a=u(e,["source"]);a!=null&&Jz(a,t);let l=u(e,["config"]);return l!=null&&Hz(l,t),t}function jz(n){let e={},t=u(n,["generatedSamples"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(s=>Zz(s))),f(e,["generatedVideos"],o)}let i=u(n,["raiMediaFilteredCount"]);i!=null&&f(e,["raiMediaFilteredCount"],i);let r=u(n,["raiMediaFilteredReasons"]);return r!=null&&f(e,["raiMediaFilteredReasons"],r),e}function Kz(n){let e={},t=u(n,["videos"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(s=>ej(s))),f(e,["generatedVideos"],o)}let i=u(n,["raiMediaFilteredCount"]);i!=null&&f(e,["raiMediaFilteredCount"],i);let r=u(n,["raiMediaFilteredReasons"]);return r!=null&&f(e,["raiMediaFilteredReasons"],r),e}function Yz(n,e){let t={},i=u(n,["prompt"]);e!==void 0&&i!=null&&f(e,["instances[0]","prompt"],i);let r=u(n,["image"]);e!==void 0&&r!=null&&f(e,["instances[0]","image"],p0(r));let o=u(n,["video"]);return e!==void 0&&o!=null&&f(e,["instances[0]","video"],iN(o)),t}function Jz(n,e){let t={},i=u(n,["prompt"]);e!==void 0&&i!=null&&f(e,["instances[0]","prompt"],i);let r=u(n,["image"]);e!==void 0&&r!=null&&f(e,["instances[0]","image"],or(r));let o=u(n,["video"]);return e!==void 0&&o!=null&&f(e,["instances[0]","video"],rN(o)),t}function Qz(n){let e={},t=u(n,["_self"]);t!=null&&f(e,["image"],sj(t));let i=u(n,["raiFilteredReason"]);i!=null&&f(e,["raiFilteredReason"],i);let r=u(n,["_self"]);return r!=null&&f(e,["safetyAttributes"],Z2(r)),e}function f0(n){let e={},t=u(n,["_self"]);t!=null&&f(e,["image"],X2(t));let i=u(n,["raiFilteredReason"]);i!=null&&f(e,["raiFilteredReason"],i);let r=u(n,["_self"]);r!=null&&f(e,["safetyAttributes"],eN(r));let o=u(n,["prompt"]);return o!=null&&f(e,["enhancedPrompt"],o),e}function Xz(n){let e={},t=u(n,["_self"]);t!=null&&f(e,["mask"],X2(t));let i=u(n,["labels"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>o)),f(e,["labels"],r)}return e}function Zz(n){let e={},t=u(n,["video"]);return t!=null&&f(e,["video"],Oj(t)),e}function ej(n){let e={},t=u(n,["_self"]);return t!=null&&f(e,["video"],Vj(t)),e}function tj(n){let e={},t=u(n,["modelSelectionConfig"]);t!=null&&f(e,["modelConfig"],t);let i=u(n,["responseJsonSchema"]);i!=null&&f(e,["responseJsonSchema"],i);let r=u(n,["audioTimestamp"]);r!=null&&f(e,["audioTimestamp"],r);let o=u(n,["candidateCount"]);o!=null&&f(e,["candidateCount"],o);let s=u(n,["enableAffectiveDialog"]);s!=null&&f(e,["enableAffectiveDialog"],s);let a=u(n,["frequencyPenalty"]);a!=null&&f(e,["frequencyPenalty"],a);let l=u(n,["logprobs"]);l!=null&&f(e,["logprobs"],l);let c=u(n,["maxOutputTokens"]);c!=null&&f(e,["maxOutputTokens"],c);let d=u(n,["mediaResolution"]);d!=null&&f(e,["mediaResolution"],d);let p=u(n,["presencePenalty"]);p!=null&&f(e,["presencePenalty"],p);let h=u(n,["responseLogprobs"]);h!=null&&f(e,["responseLogprobs"],h);let y=u(n,["responseMimeType"]);y!=null&&f(e,["responseMimeType"],y);let E=u(n,["responseModalities"]);E!=null&&f(e,["responseModalities"],E);let A=u(n,["responseSchema"]);A!=null&&f(e,["responseSchema"],A);let R=u(n,["routingConfig"]);R!=null&&f(e,["routingConfig"],R);let k=u(n,["seed"]);k!=null&&f(e,["seed"],k);let H=u(n,["speechConfig"]);H!=null&&f(e,["speechConfig"],tN(H));let K=u(n,["stopSequences"]);K!=null&&f(e,["stopSequences"],K);let z=u(n,["temperature"]);z!=null&&f(e,["temperature"],z);let oe=u(n,["thinkingConfig"]);oe!=null&&f(e,["thinkingConfig"],oe);let pe=u(n,["topK"]);pe!=null&&f(e,["topK"],pe);let Ne=u(n,["topP"]);if(Ne!=null&&f(e,["topP"],Ne),u(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function nj(n,e){let t={},i=u(e,["model"]);return i!=null&&f(t,["_url","name"],We(n,i)),t}function ij(n,e){let t={},i=u(e,["model"]);return i!=null&&f(t,["_url","name"],We(n,i)),t}function rj(n){let e={};if(u(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");let t=u(n,["enableWidget"]);return t!=null&&f(e,["enableWidget"],t),e}function oj(n){let e={};if(u(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");let t=u(n,["timeRangeFilter"]);return t!=null&&f(e,["timeRangeFilter"],t),e}function sj(n){let e={},t=u(n,["bytesBase64Encoded"]);t!=null&&f(e,["imageBytes"],as(t));let i=u(n,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function X2(n){let e={},t=u(n,["gcsUri"]);t!=null&&f(e,["gcsUri"],t);let i=u(n,["bytesBase64Encoded"]);i!=null&&f(e,["imageBytes"],as(i));let r=u(n,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function p0(n){let e={};if(u(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");let t=u(n,["imageBytes"]);t!=null&&f(e,["bytesBase64Encoded"],as(t));let i=u(n,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function or(n){let e={},t=u(n,["gcsUri"]);t!=null&&f(e,["gcsUri"],t);let i=u(n,["imageBytes"]);i!=null&&f(e,["bytesBase64Encoded"],as(i));let r=u(n,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function aj(n,e,t){let i={},r=u(e,["pageSize"]);t!==void 0&&r!=null&&f(t,["_query","pageSize"],r);let o=u(e,["pageToken"]);t!==void 0&&o!=null&&f(t,["_query","pageToken"],o);let s=u(e,["filter"]);t!==void 0&&s!=null&&f(t,["_query","filter"],s);let a=u(e,["queryBase"]);return t!==void 0&&a!=null&&f(t,["_url","models_url"],G2(n,a)),i}function lj(n,e,t){let i={},r=u(e,["pageSize"]);t!==void 0&&r!=null&&f(t,["_query","pageSize"],r);let o=u(e,["pageToken"]);t!==void 0&&o!=null&&f(t,["_query","pageToken"],o);let s=u(e,["filter"]);t!==void 0&&s!=null&&f(t,["_query","filter"],s);let a=u(e,["queryBase"]);return t!==void 0&&a!=null&&f(t,["_url","models_url"],G2(n,a)),i}function cj(n,e){let t={},i=u(e,["config"]);return i!=null&&aj(n,i,t),t}function uj(n,e){let t={},i=u(e,["config"]);return i!=null&&lj(n,i,t),t}function dj(n){let e={},t=u(n,["sdkHttpResponse"]);t!=null&&f(e,["sdkHttpResponse"],t);let i=u(n,["nextPageToken"]);i!=null&&f(e,["nextPageToken"],i);let r=u(n,["_self"]);if(r!=null){let o=W2(r);Array.isArray(o)&&(o=o.map(s=>Bx(s))),f(e,["models"],o)}return e}function fj(n){let e={},t=u(n,["sdkHttpResponse"]);t!=null&&f(e,["sdkHttpResponse"],t);let i=u(n,["nextPageToken"]);i!=null&&f(e,["nextPageToken"],i);let r=u(n,["_self"]);if(r!=null){let o=W2(r);Array.isArray(o)&&(o=o.map(s=>Ux(s))),f(e,["models"],o)}return e}function pj(n){let e={},t=u(n,["maskMode"]);t!=null&&f(e,["maskMode"],t);let i=u(n,["segmentationClasses"]);i!=null&&f(e,["maskClasses"],i);let r=u(n,["maskDilation"]);return r!=null&&f(e,["dilation"],r),e}function Bx(n){let e={},t=u(n,["name"]);t!=null&&f(e,["name"],t);let i=u(n,["displayName"]);i!=null&&f(e,["displayName"],i);let r=u(n,["description"]);r!=null&&f(e,["description"],r);let o=u(n,["version"]);o!=null&&f(e,["version"],o);let s=u(n,["_self"]);s!=null&&f(e,["tunedModelInfo"],Dj(s));let a=u(n,["inputTokenLimit"]);a!=null&&f(e,["inputTokenLimit"],a);let l=u(n,["outputTokenLimit"]);l!=null&&f(e,["outputTokenLimit"],l);let c=u(n,["supportedGenerationMethods"]);c!=null&&f(e,["supportedActions"],c);let d=u(n,["temperature"]);d!=null&&f(e,["temperature"],d);let p=u(n,["maxTemperature"]);p!=null&&f(e,["maxTemperature"],p);let h=u(n,["topP"]);h!=null&&f(e,["topP"],h);let y=u(n,["topK"]);y!=null&&f(e,["topK"],y);let E=u(n,["thinking"]);return E!=null&&f(e,["thinking"],E),e}function Ux(n){let e={},t=u(n,["name"]);t!=null&&f(e,["name"],t);let i=u(n,["displayName"]);i!=null&&f(e,["displayName"],i);let r=u(n,["description"]);r!=null&&f(e,["description"],r);let o=u(n,["versionId"]);o!=null&&f(e,["version"],o);let s=u(n,["deployedModels"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(h=>kz(h))),f(e,["endpoints"],p)}let a=u(n,["labels"]);a!=null&&f(e,["labels"],a);let l=u(n,["_self"]);l!=null&&f(e,["tunedModelInfo"],Aj(l));let c=u(n,["defaultCheckpointId"]);c!=null&&f(e,["defaultCheckpointId"],c);let d=u(n,["checkpoints"]);if(d!=null){let p=d;Array.isArray(p)&&(p=p.map(h=>h)),f(e,["checkpoints"],p)}return e}function hj(n){let e={},t=u(n,["functionCall"]);t!=null&&f(e,["functionCall"],t);let i=u(n,["codeExecutionResult"]);i!=null&&f(e,["codeExecutionResult"],i);let r=u(n,["executableCode"]);r!=null&&f(e,["executableCode"],r);let o=u(n,["fileData"]);o!=null&&f(e,["fileData"],Mz(o));let s=u(n,["functionResponse"]);s!=null&&f(e,["functionResponse"],s);let a=u(n,["inlineData"]);a!=null&&f(e,["inlineData"],iz(a));let l=u(n,["text"]);l!=null&&f(e,["text"],l);let c=u(n,["thought"]);c!=null&&f(e,["thought"],c);let d=u(n,["thoughtSignature"]);d!=null&&f(e,["thoughtSignature"],d);let p=u(n,["videoMetadata"]);return p!=null&&f(e,["videoMetadata"],p),e}function mj(n){let e={},t=u(n,["productImage"]);return t!=null&&f(e,["image"],or(t)),e}function gj(n,e){let t={},i=u(n,["numberOfImages"]);e!==void 0&&i!=null&&f(e,["parameters","sampleCount"],i);let r=u(n,["baseSteps"]);e!==void 0&&r!=null&&f(e,["parameters","baseSteps"],r);let o=u(n,["outputGcsUri"]);e!==void 0&&o!=null&&f(e,["parameters","storageUri"],o);let s=u(n,["seed"]);e!==void 0&&s!=null&&f(e,["parameters","seed"],s);let a=u(n,["safetyFilterLevel"]);e!==void 0&&a!=null&&f(e,["parameters","safetySetting"],a);let l=u(n,["personGeneration"]);e!==void 0&&l!=null&&f(e,["parameters","personGeneration"],l);let c=u(n,["addWatermark"]);e!==void 0&&c!=null&&f(e,["parameters","addWatermark"],c);let d=u(n,["outputMimeType"]);e!==void 0&&d!=null&&f(e,["parameters","outputOptions","mimeType"],d);let p=u(n,["outputCompressionQuality"]);e!==void 0&&p!=null&&f(e,["parameters","outputOptions","compressionQuality"],p);let h=u(n,["enhancePrompt"]);e!==void 0&&h!=null&&f(e,["parameters","enhancePrompt"],h);let y=u(n,["labels"]);return e!==void 0&&y!=null&&f(e,["labels"],y),t}function yj(n,e){let t={},i=u(e,["model"]);i!=null&&f(t,["_url","model"],We(n,i));let r=u(e,["source"]);r!=null&&_j(r,t);let o=u(e,["config"]);return o!=null&&gj(o,t),t}function vj(n){let e={},t=u(n,["predictions"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>f0(r))),f(e,["generatedImages"],i)}return e}function _j(n,e){let t={},i=u(n,["prompt"]);e!==void 0&&i!=null&&f(e,["instances[0]","prompt"],i);let r=u(n,["personImage"]);e!==void 0&&r!=null&&f(e,["instances[0]","personImage","image"],or(r));let o=u(n,["productImages"]);if(e!==void 0&&o!=null){let s=o;Array.isArray(s)&&(s=s.map(a=>mj(a))),f(e,["instances[0]","productImages"],s)}return t}function wj(n){let e={},t=u(n,["referenceImage"]);t!=null&&f(e,["referenceImage"],or(t));let i=u(n,["referenceId"]);i!=null&&f(e,["referenceId"],i);let r=u(n,["referenceType"]);r!=null&&f(e,["referenceType"],r);let o=u(n,["maskImageConfig"]);o!=null&&f(e,["maskImageConfig"],pj(o));let s=u(n,["controlImageConfig"]);s!=null&&f(e,["controlImageConfig"],uz(s));let a=u(n,["styleImageConfig"]);a!=null&&f(e,["styleImageConfig"],a);let l=u(n,["subjectImageConfig"]);return l!=null&&f(e,["subjectImageConfig"],l),e}function Z2(n){let e={},t=u(n,["safetyAttributes","categories"]);t!=null&&f(e,["categories"],t);let i=u(n,["safetyAttributes","scores"]);i!=null&&f(e,["scores"],i);let r=u(n,["contentType"]);return r!=null&&f(e,["contentType"],r),e}function eN(n){let e={},t=u(n,["safetyAttributes","categories"]);t!=null&&f(e,["categories"],t);let i=u(n,["safetyAttributes","scores"]);i!=null&&f(e,["scores"],i);let r=u(n,["contentType"]);return r!=null&&f(e,["contentType"],r),e}function Cj(n){let e={},t=u(n,["category"]);if(t!=null&&f(e,["category"],t),u(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");let i=u(n,["threshold"]);return i!=null&&f(e,["threshold"],i),e}function Ej(n){let e={},t=u(n,["image"]);return t!=null&&f(e,["image"],or(t)),e}function xj(n,e){let t={},i=u(n,["mode"]);e!==void 0&&i!=null&&f(e,["parameters","mode"],i);let r=u(n,["maxPredictions"]);e!==void 0&&r!=null&&f(e,["parameters","maxPredictions"],r);let o=u(n,["confidenceThreshold"]);e!==void 0&&o!=null&&f(e,["parameters","confidenceThreshold"],o);let s=u(n,["maskDilation"]);e!==void 0&&s!=null&&f(e,["parameters","maskDilation"],s);let a=u(n,["binaryColorThreshold"]);e!==void 0&&a!=null&&f(e,["parameters","binaryColorThreshold"],a);let l=u(n,["labels"]);return e!==void 0&&l!=null&&f(e,["labels"],l),t}function bj(n,e){let t={},i=u(e,["model"]);i!=null&&f(t,["_url","model"],We(n,i));let r=u(e,["source"]);r!=null&&Tj(r,t);let o=u(e,["config"]);return o!=null&&xj(o,t),t}function Sj(n){let e={},t=u(n,["predictions"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>Xz(r))),f(e,["generatedMasks"],i)}return e}function Tj(n,e){let t={},i=u(n,["prompt"]);e!==void 0&&i!=null&&f(e,["instances[0]","prompt"],i);let r=u(n,["image"]);e!==void 0&&r!=null&&f(e,["instances[0]","image"],or(r));let o=u(n,["scribbleImage"]);return e!==void 0&&o!=null&&f(e,["instances[0]","scribble"],Ej(o)),t}function tN(n){let e={},t=u(n,["languageCode"]);t!=null&&f(e,["languageCode"],t);let i=u(n,["voiceConfig"]);if(i!=null&&f(e,["voiceConfig"],i),u(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function Ij(n){let e={},t=u(n,["functionDeclarations"]);if(t!=null){let d=t;Array.isArray(d)&&(d=d.map(p=>p)),f(e,["functionDeclarations"],d)}if(u(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let i=u(n,["googleSearchRetrieval"]);i!=null&&f(e,["googleSearchRetrieval"],i);let r=u(n,["computerUse"]);r!=null&&f(e,["computerUse"],r);let o=u(n,["fileSearch"]);o!=null&&f(e,["fileSearch"],o);let s=u(n,["codeExecution"]);if(s!=null&&f(e,["codeExecution"],s),u(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");let a=u(n,["googleMaps"]);a!=null&&f(e,["googleMaps"],rj(a));let l=u(n,["googleSearch"]);l!=null&&f(e,["googleSearch"],oj(l));let c=u(n,["urlContext"]);return c!=null&&f(e,["urlContext"],c),e}function nN(n){let e={},t=u(n,["functionDeclarations"]);if(t!=null){let p=t;Array.isArray(p)&&(p=p.map(h=>Nz(h))),f(e,["functionDeclarations"],p)}let i=u(n,["retrieval"]);i!=null&&f(e,["retrieval"],i);let r=u(n,["googleSearchRetrieval"]);r!=null&&f(e,["googleSearchRetrieval"],r);let o=u(n,["computerUse"]);if(o!=null&&f(e,["computerUse"],o),u(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");let s=u(n,["codeExecution"]);s!=null&&f(e,["codeExecution"],s);let a=u(n,["enterpriseWebSearch"]);a!=null&&f(e,["enterpriseWebSearch"],a);let l=u(n,["googleMaps"]);l!=null&&f(e,["googleMaps"],l);let c=u(n,["googleSearch"]);c!=null&&f(e,["googleSearch"],c);let d=u(n,["urlContext"]);return d!=null&&f(e,["urlContext"],d),e}function Dj(n){let e={},t=u(n,["baseModel"]);t!=null&&f(e,["baseModel"],t);let i=u(n,["createTime"]);i!=null&&f(e,["createTime"],i);let r=u(n,["updateTime"]);return r!=null&&f(e,["updateTime"],r),e}function Aj(n){let e={},t=u(n,["labels","google-vertex-llm-tuning-base-model-id"]);t!=null&&f(e,["baseModel"],t);let i=u(n,["createTime"]);i!=null&&f(e,["createTime"],i);let r=u(n,["updateTime"]);return r!=null&&f(e,["updateTime"],r),e}function kj(n,e){let t={},i=u(n,["displayName"]);e!==void 0&&i!=null&&f(e,["displayName"],i);let r=u(n,["description"]);e!==void 0&&r!=null&&f(e,["description"],r);let o=u(n,["defaultCheckpointId"]);return e!==void 0&&o!=null&&f(e,["defaultCheckpointId"],o),t}function Mj(n,e){let t={},i=u(n,["displayName"]);e!==void 0&&i!=null&&f(e,["displayName"],i);let r=u(n,["description"]);e!==void 0&&r!=null&&f(e,["description"],r);let o=u(n,["defaultCheckpointId"]);return e!==void 0&&o!=null&&f(e,["defaultCheckpointId"],o),t}function Nj(n,e){let t={},i=u(e,["model"]);i!=null&&f(t,["_url","name"],We(n,i));let r=u(e,["config"]);return r!=null&&kj(r,t),t}function Pj(n,e){let t={},i=u(e,["model"]);i!=null&&f(t,["_url","model"],We(n,i));let r=u(e,["config"]);return r!=null&&Mj(r,t),t}function Rj(n,e){let t={},i=u(n,["outputGcsUri"]);e!==void 0&&i!=null&&f(e,["parameters","storageUri"],i);let r=u(n,["safetyFilterLevel"]);e!==void 0&&r!=null&&f(e,["parameters","safetySetting"],r);let o=u(n,["personGeneration"]);e!==void 0&&o!=null&&f(e,["parameters","personGeneration"],o);let s=u(n,["includeRaiReason"]);e!==void 0&&s!=null&&f(e,["parameters","includeRaiReason"],s);let a=u(n,["outputMimeType"]);e!==void 0&&a!=null&&f(e,["parameters","outputOptions","mimeType"],a);let l=u(n,["outputCompressionQuality"]);e!==void 0&&l!=null&&f(e,["parameters","outputOptions","compressionQuality"],l);let c=u(n,["enhanceInputImage"]);e!==void 0&&c!=null&&f(e,["parameters","upscaleConfig","enhanceInputImage"],c);let d=u(n,["imagePreservationFactor"]);e!==void 0&&d!=null&&f(e,["parameters","upscaleConfig","imagePreservationFactor"],d);let p=u(n,["labels"]);e!==void 0&&p!=null&&f(e,["labels"],p);let h=u(n,["numberOfImages"]);e!==void 0&&h!=null&&f(e,["parameters","sampleCount"],h);let y=u(n,["mode"]);return e!==void 0&&y!=null&&f(e,["parameters","mode"],y),t}function Fj(n,e){let t={},i=u(e,["model"]);i!=null&&f(t,["_url","model"],We(n,i));let r=u(e,["image"]);r!=null&&f(t,["instances[0]","image"],or(r));let o=u(e,["upscaleFactor"]);o!=null&&f(t,["parameters","upscaleConfig","upscaleFactor"],o);let s=u(e,["config"]);return s!=null&&Rj(s,t),t}function Lj(n){let e={},t=u(n,["sdkHttpResponse"]);t!=null&&f(e,["sdkHttpResponse"],t);let i=u(n,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>f0(o))),f(e,["generatedImages"],r)}return e}function Oj(n){let e={},t=u(n,["uri"]);t!=null&&f(e,["uri"],t);let i=u(n,["encodedVideo"]);i!=null&&f(e,["videoBytes"],as(i));let r=u(n,["encoding"]);return r!=null&&f(e,["mimeType"],r),e}function Vj(n){let e={},t=u(n,["gcsUri"]);t!=null&&f(e,["uri"],t);let i=u(n,["bytesBase64Encoded"]);i!=null&&f(e,["videoBytes"],as(i));let r=u(n,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function Bj(n){let e={},t=u(n,["image"]);t!=null&&f(e,["_self"],or(t));let i=u(n,["maskMode"]);return i!=null&&f(e,["maskMode"],i),e}function Uj(n){let e={},t=u(n,["image"]);t!=null&&f(e,["image"],p0(t));let i=u(n,["referenceType"]);return i!=null&&f(e,["referenceType"],i),e}function $j(n){let e={},t=u(n,["image"]);t!=null&&f(e,["image"],or(t));let i=u(n,["referenceType"]);return i!=null&&f(e,["referenceType"],i),e}function iN(n){let e={},t=u(n,["uri"]);t!=null&&f(e,["uri"],t);let i=u(n,["videoBytes"]);i!=null&&f(e,["encodedVideo"],as(i));let r=u(n,["mimeType"]);return r!=null&&f(e,["encoding"],r),e}function rN(n){let e={},t=u(n,["uri"]);t!=null&&f(e,["gcsUri"],t);let i=u(n,["videoBytes"]);i!=null&&f(e,["bytesBase64Encoded"],as(i));let r=u(n,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}var Hj="Content-Type",qj="X-Server-Timeout",Gj="User-Agent",$x="x-goog-api-client",Wj="1.29.1",zj=`google-genai-sdk/${Wj}`,jj="v1beta1",Kj="v1beta",I2=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/,Hx=class{constructor(e){var t,i;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});let r={};this.clientOptions.vertexai?(r.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:jj,r.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(r.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:Kj,r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");let i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){let e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,i){let r=[this.getRequestUrlInternal(t)];return i&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));let i=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,t,i);if(e.queryParams)for(let[s,a]of Object.entries(e.queryParams))r.searchParams.append(s,String(a));let o={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else o.body=e.body;return o=await this.includeExtraHttpOptionsToRequestInit(o,t,r.toString(),e.abortSignal),this.unaryApiCall(r,o,e.httpMethod)}patchHttpOptions(e,t){let i=JSON.parse(JSON.stringify(e));for(let[r,o]of Object.entries(t))typeof o=="object"?i[r]=Object.assign(Object.assign({},i[r]),o):o!==void 0&&(i[r]=o);return i}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));let i=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,t,i);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let o={};return o.body=e.body,o=await this.includeExtraHttpOptionsToRequestInit(o,t,r.toString(),e.abortSignal),this.streamApiCall(r,o,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,i,r){if(t&&t.timeout||r){let o=new AbortController,s=o.signal;if(t.timeout&&t?.timeout>0){let a=setTimeout(()=>o.abort(),t.timeout);a&&typeof a.unref=="function"&&a.unref()}r&&r.addEventListener("abort",()=>{o.abort()}),e.signal=s}return t&&t.extraBody!==null&&Yj(e,t.extraBody),e.headers=await this.getHeadersInternal(t,i),e}async unaryApiCall(e,t,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:i})).then(async r=>(await D2(r),new qf(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,t,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:i})).then(async r=>(await D2(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){var t;return Ec(this,arguments,function*(){let r=(t=e?.body)===null||t===void 0?void 0:t.getReader(),o=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let s="";for(;;){let{done:a,value:l}=yield ut(r.read());if(a){if(s.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}let c=o.decode(l,{stream:!0});try{let p=JSON.parse(c);if("error"in p){let h=JSON.parse(JSON.stringify(p.error)),y=h.status,E=h.code,A=`got status: ${y}. ${JSON.stringify(p)}`;if(E>=400&&E<600)throw new c0({message:A,status:E})}}catch(p){if(p.name==="ApiError")throw p}s+=c;let d=s.match(I2);for(;d;){let p=d[1];try{let h=new Response(p,{headers:e?.headers,status:e?.status,statusText:e?.statusText});yield yield ut(new qf(h)),s=s.slice(d[0].length),d=s.match(I2)}catch(h){throw new Error(`exception parsing stream chunk ${p}. ${h}`)}}}}finally{r.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){let e={},t=zj+" "+this.clientOptions.userAgentExtra;return e[Gj]=t,e[$x]=t,e[Hj]="application/json",e}async getHeadersInternal(e,t){let i=new Headers;if(e&&e.headers){for(let[r,o]of Object.entries(e.headers))i.append(r,o);e.timeout&&e.timeout>0&&i.append(qj,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(i,t),i}getFileName(e){var t;let i="";return typeof e=="string"&&(i=e.replace(/[/\\]+$/,""),i=(t=i.split(/[/\\]/).pop())!==null&&t!==void 0?t:""),i}async uploadFile(e,t){var i;let r={};t!=null&&(r.mimeType=t.mimeType,r.name=t.name,r.displayName=t.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);let o=this.clientOptions.uploader,s=await o.stat(e);r.sizeBytes=String(s.size);let a=(i=t?.mimeType)!==null&&i!==void 0?i:s.type;if(a===void 0||a==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=a;let l={file:r},c=this.getFileName(e),d=re("upload/v1beta/files",l._url),p=await this.fetchUploadUrl(d,r.sizeBytes,r.mimeType,c,l,t?.httpOptions);return o.upload(e,p,this)}async uploadFileToFileSearchStore(e,t,i){var r;let o=this.clientOptions.uploader,s=await o.stat(t),a=String(s.size),l=(r=i?.mimeType)!==null&&r!==void 0?r:s.type;if(l===void 0||l==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");let c=`upload/v1beta/${e}:uploadToFileSearchStore`,d=this.getFileName(t),p={};i?.customMetadata&&(p.customMetadata=i.customMetadata),i?.chunkingConfig&&(p.chunkingConfig=i.chunkingConfig);let h=await this.fetchUploadUrl(c,a,l,d,p,i?.httpOptions);return o.uploadToFileSearchStore(t,h,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t,i,r,o,s){var a;let l={};s?l=s:l={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t}`,"X-Goog-Upload-Header-Content-Type":`${i}`},r?{"X-Goog-Upload-File-Name":r}:{})};let c=await this.request({path:e,body:JSON.stringify(o),httpMethod:"POST",httpOptions:l});if(!c||!c?.headers)throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");let d=(a=c?.headers)===null||a===void 0?void 0:a["x-goog-upload-url"];if(d===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return d}};async function D2(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){let t=n.status,i;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await n.json():i={error:{message:await n.text(),code:n.status,status:n.statusText}};let r=JSON.stringify(i);throw t>=400&&t<600?new c0({message:r,status:t}):new Error(r)}}function Yj(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{let o=JSON.parse(n.body);if(typeof o=="object"&&o!==null&&!Array.isArray(o))t=o;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(o,s){let a=Object.assign({},o);for(let l in s)if(Object.prototype.hasOwnProperty.call(s,l)){let c=s[l],d=a[l];c&&typeof c=="object"&&!Array.isArray(c)&&d&&typeof d=="object"&&!Array.isArray(d)?a[l]=i(d,c):(d&&c&&typeof d!=typeof c&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${l}". Original type: ${typeof d}, New type: ${typeof c}. Overwriting.`),a[l]=c)}return a}let r=i(t,e);n.body=JSON.stringify(r)}var Jj="mcp_used/unknown",Qj=!1;function oN(n){for(let e of n)if(Xj(e)||typeof e=="object"&&"inputSchema"in e)return!0;return Qj}function sN(n){var e;let t=(e=n[$x])!==null&&e!==void 0?e:"";n[$x]=(t+` ${Jj}`).trimStart()}function Xj(n){return n!==null&&typeof n=="object"&&n instanceof qx}function Zj(n,e=100){return Ec(this,arguments,function*(){let i,r=0;for(;r<e;){let o=yield ut(n.listTools({cursor:i}));for(let s of o.tools)yield yield ut(s),r++;if(!o.nextCursor)break;i=o.nextCursor}})}var qx=class n{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new n(e,t)}async initialize(){var e,t,i,r;if(this.mcpTools.length>0)return;let o={},s=[];for(let d of this.mcpClients)try{for(var a=!0,l=(t=void 0,Hf(Zj(d))),c;c=await l.next(),e=c.done,!e;a=!0){r=c.value,a=!1;let p=r;s.push(p);let h=p.name;if(o[h])throw new Error(`Duplicate function name ${h} found in MCP tools. Please ensure function names are unique.`);o[h]=d}}catch(p){t={error:p}}finally{try{!a&&!e&&(i=l.return)&&await i.call(l)}finally{if(t)throw t.error}}this.mcpTools=s,this.functionNameToMcpClient=o}async tool(){return await this.initialize(),u7(this.mcpTools,this.config)}async callTool(e){await this.initialize();let t=[];for(let i of e)if(i.name in this.functionNameToMcpClient){let r=this.functionNameToMcpClient[i.name],o;this.config.timeout&&(o={timeout:this.config.timeout});let s=await r.callTool({name:i.name,arguments:i.args},void 0,o);t.push({functionResponse:{name:i.name,response:s.isError?{error:s}:s}})}return t}};async function eK(n,e,t){let i=new kx,r;t.data instanceof Blob?r=JSON.parse(await t.data.text()):r=JSON.parse(t.data),Object.assign(i,r),e(i)}var Gx=class{constructor(e,t,i){this.apiClient=e,this.auth=t,this.webSocketFactory=i}async connect(e){var t,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");let r=this.apiClient.getWebsocketBaseUrl(),o=this.apiClient.getApiVersion(),s=nK(this.apiClient.getDefaultHeaders()),a=this.apiClient.getApiKey(),l=`${r}/ws/google.ai.generativelanguage.${o}.GenerativeService.BidiGenerateMusic?key=${a}`,c=()=>{},d=new Promise(K=>{c=K}),p=e.callbacks,h=function(){c({})},y=this.apiClient,E={onopen:h,onmessage:K=>{eK(y,p.onmessage,K)},onerror:(t=p?.onerror)!==null&&t!==void 0?t:function(K){},onclose:(i=p?.onclose)!==null&&i!==void 0?i:function(K){}},A=this.webSocketFactory.create(l,tK(s),E);A.connect(),await d;let H={setup:{model:We(this.apiClient,e.model)}};return A.send(JSON.stringify(H)),new Wx(A,this.apiClient)}},Wx=class{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");let t=KW(e);this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});let t=jW(e);this.conn.send(JSON.stringify(t))}sendPlaybackControl(e){let t={playbackControl:e};this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl($f.PLAY)}pause(){this.sendPlaybackControl($f.PAUSE)}stop(){this.sendPlaybackControl($f.STOP)}resetContext(){this.sendPlaybackControl($f.RESET_CONTEXT)}close(){this.conn.close()}};function tK(n){let e={};return n.forEach((t,i)=>{e[i]=t}),e}function nK(n){let e=new Headers;for(let[t,i]of Object.entries(n))e.append(t,i);return e}var iK="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function rK(n,e,t){let i=new Ax,r;t.data instanceof Blob?r=await t.data.text():t.data instanceof ArrayBuffer?r=new TextDecoder().decode(t.data):r=t.data;let o=JSON.parse(r);if(n.isVertexAI()){let s=QW(o);Object.assign(i,s)}else Object.assign(i,o);e(i)}var zx=class{constructor(e,t,i){this.apiClient=e,this.auth=t,this.webSocketFactory=i,this.music=new Gx(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,i,r,o,s,a;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");let l=this.apiClient.getWebsocketBaseUrl(),c=this.apiClient.getApiVersion(),d,p=this.apiClient.getHeaders();e.config&&e.config.tools&&oN(e.config.tools)&&sN(p);let h=aK(p);if(this.apiClient.isVertexAI())d=`${l}/ws/google.cloud.aiplatform.${c}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(h,d);else{let be=this.apiClient.getApiKey(),ze="BidiGenerateContent",bt="key";be?.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),c!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),ze="BidiGenerateContentConstrained",bt="access_token"),d=`${l}/ws/google.ai.generativelanguage.${c}.GenerativeService.${ze}?${bt}=${be}`}let y=()=>{},E=new Promise(be=>{y=be}),A=e.callbacks,R=function(){var be;(be=A?.onopen)===null||be===void 0||be.call(A),y({})},k=this.apiClient,H={onopen:R,onmessage:be=>{rK(k,A.onmessage,be)},onerror:(t=A?.onerror)!==null&&t!==void 0?t:function(be){},onclose:(i=A?.onclose)!==null&&i!==void 0?i:function(be){}},K=this.webSocketFactory.create(d,sK(h),H);K.connect(),await E;let z=We(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&z.startsWith("publishers/")){let be=this.apiClient.getProject(),ze=this.apiClient.getLocation();z=`projects/${be}/locations/${ze}/`+z}let oe={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[gx.AUDIO]}:e.config.responseModalities=[gx.AUDIO]),!((o=e.config)===null||o===void 0)&&o.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");let pe=(a=(s=e.config)===null||s===void 0?void 0:s.tools)!==null&&a!==void 0?a:[],Ne=[];for(let be of pe)if(this.isCallableTool(be)){let ze=be;Ne.push(await ze.tool())}else Ne.push(be);Ne.length>0&&(e.config.tools=Ne);let kt={model:z,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?oe=zW(this.apiClient,kt):oe=WW(this.apiClient,kt),delete oe.config,K.send(JSON.stringify(oe)),new jx(K,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}},oK={turnComplete:!0},jx=class{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let i=[];try{i=Ui(t.turns),e.isVertexAI()||(i=i.map(r=>d0(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:i,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let i=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?i=t.functionResponses:i=[t.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(let o of i){if(typeof o!="object"||o===null||!("name"in o)||!("response"in o))throw new Error(`Could not parse function response, type '${typeof o}'.`);if(!e.isVertexAI()&&!("id"in o))throw new Error(iK)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},oK),e);let t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:JW(e)}:t={realtimeInput:YW(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");let t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}};function sK(n){let e={};return n.forEach((t,i)=>{e[i]=t}),e}function aK(n){let e=new Headers;for(let[t,i]of Object.entries(n))e.append(t,i);return e}var A2=10;function k2(n){var e,t,i;if(!((e=n?.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(let s of(t=n?.tools)!==null&&t!==void 0?t:[])if(xc(s)){r=!0;break}if(!r)return!0;let o=(i=n?.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return o&&(o<0||!Number.isInteger(o))||o==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",o),!0):!1}function xc(n){return"callTool"in n&&typeof n.callTool=="function"}function lK(n){var e,t,i;return(i=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(r=>xc(r)))!==null&&i!==void 0?i:!1}function M2(n){var e;let t=[];return!((e=n?.config)===null||e===void 0)&&e.tools&&n.config.tools.forEach((i,r)=>{if(xc(i))return;let o=i;o.functionDeclarations&&o.functionDeclarations.length>0&&t.push(r)}),t}function N2(n){var e;return!(!((e=n?.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}var Kx=class extends rr{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var i,r,o,s,a;let l=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!lK(t)||k2(t.config))return await this.generateContentInternal(l);let c=M2(t);if(c.length>0){let A=c.map(R=>`tools[${R}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${A}.`)}let d,p,h=Ui(l.contents),y=(o=(r=(i=l.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&o!==void 0?o:A2,E=0;for(;E<y&&(d=await this.generateContentInternal(l),!(!d.functionCalls||d.functionCalls.length===0));){let A=d.candidates[0].content,R=[];for(let k of(a=(s=t.config)===null||s===void 0?void 0:s.tools)!==null&&a!==void 0?a:[])if(xc(k)){let K=await k.callTool(d.functionCalls);R.push(...K)}E++,p={role:"user",parts:R},l.contents=Ui(l.contents),l.contents.push(A),l.contents.push(p),N2(l.config)&&(h.push(A),h.push(p))}return N2(l.config)&&(d.automaticFunctionCallingHistory=h),d},this.generateContentStream=async t=>{if(this.maybeMoveToResponseJsonSchem(t),k2(t.config)){let r=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(r)}let i=M2(t);if(i.length>0){let r=i.map(o=>`tools[${o}]`).join(", ");throw new Error(`Incompatible tools found at ${r}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(i=>{var r;let o,s=[];if(i?.generatedImages)for(let l of i.generatedImages)l&&l?.safetyAttributes&&((r=l?.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?o=l?.safetyAttributes:s.push(l);let a;return o?a={generatedImages:s,positivePromptSafetyAttributes:o,sdkHttpResponse:i.sdkHttpResponse}:a={generatedImages:s,sdkHttpResponse:i.sdkHttpResponse},a}),this.list=async t=>{var i;let s={config:Object.assign(Object.assign({},{queryBase:!0}),t?.config)};if(this.apiClient.isVertexAI()&&!s.config.queryBase){if(!((i=s.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");s.config.filter="labels.tune-type:*"}return new mo(ls.PAGED_ITEM_MODELS,a=>this.listInternal(a),await this.listInternal(s),s)},this.editImage=async t=>{let i={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(i.referenceImages=t.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async t=>{let i={numberOfImages:1,mode:"upscale"};t.config&&(i=Object.assign(Object.assign({},i),t.config));let r={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:i};return await this.upscaleImageInternal(r)},this.generateVideos=async t=>{var i,r,o,s,a,l;if((t.prompt||t.image||t.video)&&t.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((i=t.video)===null||i===void 0)&&i.uri&&(!((r=t.video)===null||r===void 0)&&r.videoBytes)?t.video={uri:t.video.uri,mimeType:t.video.mimeType}:!((s=(o=t.source)===null||o===void 0?void 0:o.video)===null||s===void 0)&&s.uri&&(!((l=(a=t.source)===null||a===void 0?void 0:a.video)===null||l===void 0)&&l.videoBytes)&&(t.source.video={uri:t.source.video.uri,mimeType:t.source.video.mimeType})),await this.generateVideosInternal(t)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,i,r;let o=(t=e.config)===null||t===void 0?void 0:t.tools;if(!o)return e;let s=await Promise.all(o.map(async l=>xc(l)?await l.tool():l)),a={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:s})};if(a.config.tools=s,e.config&&e.config.tools&&oN(e.config.tools)){let l=(r=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&r!==void 0?r:{},c=Object.assign({},l);Object.keys(c).length===0&&(c=this.apiClient.getDefaultHeaders()),sN(c),a.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:c})}return a}async initAfcToolsMap(e){var t,i,r;let o=new Map;for(let s of(i=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&i!==void 0?i:[])if(xc(s)){let a=s,l=await a.tool();for(let c of(r=l.functionDeclarations)!==null&&r!==void 0?r:[]){if(!c.name)throw new Error("Function declaration name is required.");if(o.has(c.name))throw new Error(`Duplicate tool declaration name: ${c.name}`);o.set(c.name,a)}}return o}async processAfcStream(e){var t,i,r;let o=(r=(i=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&r!==void 0?r:A2,s=!1,a=0,l=await this.initAfcToolsMap(e);return(function(c,d,p){var h,y;return Ec(this,arguments,function*(){for(var E,A,R,k;a<o;){s&&(a++,s=!1);let oe=yield ut(c.processParamsMaybeAddMcpUsage(p)),pe=yield ut(c.generateContentStreamInternal(oe)),Ne=[],kt=[];try{for(var H=!0,K=(A=void 0,Hf(pe)),z;z=yield ut(K.next()),E=z.done,!E;H=!0){k=z.value,H=!1;let be=k;if(yield yield ut(be),be.candidates&&(!((h=be.candidates[0])===null||h===void 0)&&h.content)){kt.push(be.candidates[0].content);for(let ze of(y=be.candidates[0].content.parts)!==null&&y!==void 0?y:[])if(a<o&&ze.functionCall){if(!ze.functionCall.name)throw new Error("Function call name was not returned by the model.");if(d.has(ze.functionCall.name)){let bt=yield ut(d.get(ze.functionCall.name).callTool([ze.functionCall]));Ne.push(...bt)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${d.keys()}, mising tool: ${ze.functionCall.name}`)}}}}catch(be){A={error:be}}finally{try{!H&&!E&&(R=K.return)&&(yield ut(R.call(K)))}finally{if(A)throw A.error}}if(Ne.length>0){s=!0;let be=new Na;be.candidates=[{content:{role:"user",parts:Ne}}],yield yield ut(be);let ze=[];ze.push(...kt),ze.push({role:"user",parts:Ne});let bt=Ui(p.contents).concat(ze);p.contents=bt}else break}})})(this,l,e)}async generateContentInternal(e){var t,i,r,o;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=b2(this.apiClient,e);return a=re("{model}:generateContent",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{let h=p;return h.sdkHttpResponse={headers:d.headers},h})),s.then(d=>{let p=T2(d),h=new Na;return Object.assign(h,p),h})}else{let c=x2(this.apiClient,e);return a=re("{model}:generateContent",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(p=>{let h=p;return h.sdkHttpResponse={headers:d.headers},h})),s.then(d=>{let p=S2(d),h=new Na;return Object.assign(h,p),h})}}async generateContentStreamInternal(e){var t,i,r,o;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=b2(this.apiClient,e);return a=re("{model}:streamGenerateContent?alt=sse",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.requestStream({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),s.then(function(p){return Ec(this,arguments,function*(){var h,y,E,A;try{for(var R=!0,k=Hf(p),H;H=yield ut(k.next()),h=H.done,!h;R=!0){A=H.value,R=!1;let K=A,z=T2(yield ut(K.json()));z.sdkHttpResponse={headers:K.headers};let oe=new Na;Object.assign(oe,z),yield yield ut(oe)}}catch(K){y={error:K}}finally{try{!R&&!h&&(E=k.return)&&(yield ut(E.call(k)))}finally{if(y)throw y.error}}})})}else{let c=x2(this.apiClient,e);return a=re("{model}:streamGenerateContent?alt=sse",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.requestStream({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),s.then(function(p){return Ec(this,arguments,function*(){var h,y,E,A;try{for(var R=!0,k=Hf(p),H;H=yield ut(k.next()),h=H.done,!h;R=!0){A=H.value,R=!1;let K=A,z=S2(yield ut(K.json()));z.sdkHttpResponse={headers:K.headers};let oe=new Na;Object.assign(oe,z),yield yield ut(oe)}}catch(K){y={error:K}}finally{try{!R&&!h&&(E=k.return)&&(yield ut(E.call(k)))}finally{if(y)throw y.error}}})})}}async embedContent(e){var t,i,r,o;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=Iz(this.apiClient,e);return a=re("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{let h=p;return h.sdkHttpResponse={headers:d.headers},h})),s.then(d=>{let p=Az(d),h=new Xg;return Object.assign(h,p),h})}else{let c=Tz(this.apiClient,e);return a=re("{model}:batchEmbedContents",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(p=>{let h=p;return h.sdkHttpResponse={headers:d.headers},h})),s.then(d=>{let p=Dz(d),h=new Xg;return Object.assign(h,p),h})}}async generateImagesInternal(e){var t,i,r,o;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=Vz(this.apiClient,e);return a=re("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{let h=p;return h.sdkHttpResponse={headers:d.headers},h})),s.then(d=>{let p=Uz(d),h=new Zg;return Object.assign(h,p),h})}else{let c=Oz(this.apiClient,e);return a=re("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(p=>{let h=p;return h.sdkHttpResponse={headers:d.headers},h})),s.then(d=>{let p=Bz(d),h=new Zg;return Object.assign(h,p),h})}}async editImageInternal(e){var t,i;let r,o="",s={};if(this.apiClient.isVertexAI()){let a=Ez(this.apiClient,e);return o=re("{model}:predict",a._url),s=a._query,delete a._url,delete a._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json().then(c=>{let d=c;return d.sdkHttpResponse={headers:l.headers},d})),r.then(l=>{let c=xz(l),d=new yx;return Object.assign(d,c),d})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,i;let r,o="",s={};if(this.apiClient.isVertexAI()){let a=Fj(this.apiClient,e);return o=re("{model}:predict",a._url),s=a._query,delete a._url,delete a._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json().then(c=>{let d=c;return d.sdkHttpResponse={headers:l.headers},d})),r.then(l=>{let c=Lj(l),d=new vx;return Object.assign(d,c),d})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,i;let r,o="",s={};if(this.apiClient.isVertexAI()){let a=yj(this.apiClient,e);return o=re("{model}:predict",a._url),s=a._query,delete a._url,delete a._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),r.then(l=>{let c=vj(l),d=new _x;return Object.assign(d,c),d})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,i;let r,o="",s={};if(this.apiClient.isVertexAI()){let a=bj(this.apiClient,e);return o=re("{model}:predict",a._url),s=a._query,delete a._url,delete a._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),r.then(l=>{let c=Sj(l),d=new wx;return Object.assign(d,c),d})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,i,r,o;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=ij(this.apiClient,e);return a=re("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>Ux(d))}else{let c=nj(this.apiClient,e);return a=re("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>Bx(d))}}async listInternal(e){var t,i,r,o;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=uj(this.apiClient,e);return a=re("{models_url}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{let h=p;return h.sdkHttpResponse={headers:d.headers},h})),s.then(d=>{let p=fj(d),h=new e0;return Object.assign(h,p),h})}else{let c=cj(this.apiClient,e);return a=re("{models_url}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(p=>{let h=p;return h.sdkHttpResponse={headers:d.headers},h})),s.then(d=>{let p=dj(d),h=new e0;return Object.assign(h,p),h})}}async update(e){var t,i,r,o;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=Pj(this.apiClient,e);return a=re("{model}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>Ux(d))}else{let c=Nj(this.apiClient,e);return a=re("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>Bx(d))}}async delete(e){var t,i,r,o;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=vz(this.apiClient,e);return a=re("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{let h=p;return h.sdkHttpResponse={headers:d.headers},h})),s.then(d=>{let p=wz(d),h=new t0;return Object.assign(h,p),h})}else{let c=yz(this.apiClient,e);return a=re("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(p=>{let h=p;return h.sdkHttpResponse={headers:d.headers},h})),s.then(d=>{let p=_z(d),h=new t0;return Object.assign(h,p),h})}}async countTokens(e){var t,i,r,o;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=hz(this.apiClient,e);return a=re("{model}:countTokens",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{let h=p;return h.sdkHttpResponse={headers:d.headers},h})),s.then(d=>{let p=gz(d),h=new n0;return Object.assign(h,p),h})}else{let c=pz(this.apiClient,e);return a=re("{model}:countTokens",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(p=>{let h=p;return h.sdkHttpResponse={headers:d.headers},h})),s.then(d=>{let p=mz(d),h=new n0;return Object.assign(h,p),h})}}async computeTokens(e){var t,i;let r,o="",s={};if(this.apiClient.isVertexAI()){let a=sz(this.apiClient,e);return o=re("{model}:computeTokens",a._url),s=a._query,delete a._url,delete a._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json().then(c=>{let d=c;return d.sdkHttpResponse={headers:l.headers},d})),r.then(l=>{let c=az(l),d=new Cx;return Object.assign(d,c),d})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,i,r,o;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=zz(this.apiClient,e);return a=re("{model}:predictLongRunning",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>{let p=Gz(d),h=new i0;return Object.assign(h,p),h})}else{let c=Wz(this.apiClient,e);return a=re("{model}:predictLongRunning",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>{let p=qz(d),h=new i0;return Object.assign(h,p),h})}}};var Yx=class extends rr{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){let t=e.operation,i=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){let r=t.name.split("/operations/")[0],o;i&&"httpOptions"in i&&(o=i.httpOptions);let s=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:r,config:{httpOptions:o}});return t._fromAPIResponse({apiResponse:s,_isVertexAI:!0})}else{let r=await this.getVideosOperationInternal({operationName:t.name,config:i});return t._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async get(e){let t=e.operation,i=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){let r=t.name.split("/operations/")[0],o;i&&"httpOptions"in i&&(o=i.httpOptions);let s=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:r,config:{httpOptions:o}});return t._fromAPIResponse({apiResponse:s,_isVertexAI:!0})}else{let r=await this.getVideosOperationInternal({operationName:t.name,config:i});return t._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async getVideosOperationInternal(e){var t,i,r,o;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=Q9(e);return a=re("{operationName}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s}else{let c=J9(e);return a=re("{operationName}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s}}async fetchPredictVideosOperationInternal(e){var t,i;let r,o="",s={};if(this.apiClient.isVertexAI()){let a=q9(e);return o=re("{resourceName}:fetchPredictOperation",a._url),s=a._query,delete a._url,delete a._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}};function cK(n){let e={},t=u(n,["data"]);if(t!=null&&f(e,["data"],t),u(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let i=u(n,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function uK(n){let e={},t=u(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(o=>vK(o))),f(e,["parts"],r)}let i=u(n,["role"]);return i!=null&&f(e,["role"],i),e}function dK(n,e,t){let i={},r=u(e,["expireTime"]);t!==void 0&&r!=null&&f(t,["expireTime"],r);let o=u(e,["newSessionExpireTime"]);t!==void 0&&o!=null&&f(t,["newSessionExpireTime"],o);let s=u(e,["uses"]);t!==void 0&&s!=null&&f(t,["uses"],s);let a=u(e,["liveConnectConstraints"]);t!==void 0&&a!=null&&f(t,["bidiGenerateContentSetup"],yK(n,a));let l=u(e,["lockAdditionalFields"]);return t!==void 0&&l!=null&&f(t,["fieldMask"],l),i}function fK(n,e){let t={},i=u(e,["config"]);return i!=null&&f(t,["config"],dK(n,i,t)),t}function pK(n){let e={};if(u(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let t=u(n,["fileUri"]);t!=null&&f(e,["fileUri"],t);let i=u(n,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function hK(n){let e={};if(u(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");let t=u(n,["enableWidget"]);return t!=null&&f(e,["enableWidget"],t),e}function mK(n){let e={};if(u(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");let t=u(n,["timeRangeFilter"]);return t!=null&&f(e,["timeRangeFilter"],t),e}function gK(n,e){let t={},i=u(n,["generationConfig"]);e!==void 0&&i!=null&&f(e,["setup","generationConfig"],i);let r=u(n,["responseModalities"]);e!==void 0&&r!=null&&f(e,["setup","generationConfig","responseModalities"],r);let o=u(n,["temperature"]);e!==void 0&&o!=null&&f(e,["setup","generationConfig","temperature"],o);let s=u(n,["topP"]);e!==void 0&&s!=null&&f(e,["setup","generationConfig","topP"],s);let a=u(n,["topK"]);e!==void 0&&a!=null&&f(e,["setup","generationConfig","topK"],a);let l=u(n,["maxOutputTokens"]);e!==void 0&&l!=null&&f(e,["setup","generationConfig","maxOutputTokens"],l);let c=u(n,["mediaResolution"]);e!==void 0&&c!=null&&f(e,["setup","generationConfig","mediaResolution"],c);let d=u(n,["seed"]);e!==void 0&&d!=null&&f(e,["setup","generationConfig","seed"],d);let p=u(n,["speechConfig"]);e!==void 0&&p!=null&&f(e,["setup","generationConfig","speechConfig"],ub(p));let h=u(n,["thinkingConfig"]);e!==void 0&&h!=null&&f(e,["setup","generationConfig","thinkingConfig"],h);let y=u(n,["enableAffectiveDialog"]);e!==void 0&&y!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],y);let E=u(n,["systemInstruction"]);e!==void 0&&E!=null&&f(e,["setup","systemInstruction"],uK(vn(E)));let A=u(n,["tools"]);if(e!==void 0&&A!=null){let pe=Sc(A);Array.isArray(pe)&&(pe=pe.map(Ne=>wK(bc(Ne)))),f(e,["setup","tools"],pe)}let R=u(n,["sessionResumption"]);e!==void 0&&R!=null&&f(e,["setup","sessionResumption"],_K(R));let k=u(n,["inputAudioTranscription"]);e!==void 0&&k!=null&&f(e,["setup","inputAudioTranscription"],k);let H=u(n,["outputAudioTranscription"]);e!==void 0&&H!=null&&f(e,["setup","outputAudioTranscription"],H);let K=u(n,["realtimeInputConfig"]);e!==void 0&&K!=null&&f(e,["setup","realtimeInputConfig"],K);let z=u(n,["contextWindowCompression"]);e!==void 0&&z!=null&&f(e,["setup","contextWindowCompression"],z);let oe=u(n,["proactivity"]);return e!==void 0&&oe!=null&&f(e,["setup","proactivity"],oe),t}function yK(n,e){let t={},i=u(e,["model"]);i!=null&&f(t,["setup","model"],We(n,i));let r=u(e,["config"]);return r!=null&&f(t,["config"],gK(r,t)),t}function vK(n){let e={},t=u(n,["functionCall"]);t!=null&&f(e,["functionCall"],t);let i=u(n,["codeExecutionResult"]);i!=null&&f(e,["codeExecutionResult"],i);let r=u(n,["executableCode"]);r!=null&&f(e,["executableCode"],r);let o=u(n,["fileData"]);o!=null&&f(e,["fileData"],pK(o));let s=u(n,["functionResponse"]);s!=null&&f(e,["functionResponse"],s);let a=u(n,["inlineData"]);a!=null&&f(e,["inlineData"],cK(a));let l=u(n,["text"]);l!=null&&f(e,["text"],l);let c=u(n,["thought"]);c!=null&&f(e,["thought"],c);let d=u(n,["thoughtSignature"]);d!=null&&f(e,["thoughtSignature"],d);let p=u(n,["videoMetadata"]);return p!=null&&f(e,["videoMetadata"],p),e}function _K(n){let e={},t=u(n,["handle"]);if(t!=null&&f(e,["handle"],t),u(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function wK(n){let e={},t=u(n,["functionDeclarations"]);if(t!=null){let d=t;Array.isArray(d)&&(d=d.map(p=>p)),f(e,["functionDeclarations"],d)}if(u(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let i=u(n,["googleSearchRetrieval"]);i!=null&&f(e,["googleSearchRetrieval"],i);let r=u(n,["computerUse"]);r!=null&&f(e,["computerUse"],r);let o=u(n,["fileSearch"]);o!=null&&f(e,["fileSearch"],o);let s=u(n,["codeExecution"]);if(s!=null&&f(e,["codeExecution"],s),u(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");let a=u(n,["googleMaps"]);a!=null&&f(e,["googleMaps"],hK(a));let l=u(n,["googleSearch"]);l!=null&&f(e,["googleSearch"],mK(l));let c=u(n,["urlContext"]);return c!=null&&f(e,["urlContext"],c),e}function CK(n){let e=[];for(let t in n)if(Object.prototype.hasOwnProperty.call(n,t)){let i=n[t];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){let r=Object.keys(i).map(o=>`${t}.${o}`);e.push(...r)}else e.push(t)}return e.join(",")}function EK(n,e){let t=null,i=n.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){let o=i.setup;typeof o=="object"&&o!==null?(n.bidiGenerateContentSetup=o,t=o):delete n.bidiGenerateContentSetup}else i!==void 0&&delete n.bidiGenerateContentSetup;let r=n.fieldMask;if(t){let o=CK(t);if(Array.isArray(e?.lockAdditionalFields)&&e?.lockAdditionalFields.length===0)o?n.fieldMask=o:delete n.fieldMask;else if(e?.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){let s=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"],a=[];r.length>0&&(a=r.map(c=>s.includes(c)?`generationConfig.${c}`:c));let l=[];o&&l.push(o),a.length>0&&l.push(...a),l.length>0?n.fieldMask=l.join(","):delete n.fieldMask}else delete n.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?n.fieldMask=r.join(","):delete n.fieldMask;return n}var Jx=class extends rr{constructor(e){super(),this.apiClient=e}async create(e){var t,i;let r,o="",s={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{let a=fK(this.apiClient,e);o=re("auth_tokens",a._url),s=a._query,delete a.config,delete a._url,delete a._query;let l=EK(a,e.config);return r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),r.then(c=>c)}}};function xK(n,e){let t={},i=u(n,["displayName"]);return e!==void 0&&i!=null&&f(e,["displayName"],i),t}function bK(n){let e={},t=u(n,["config"]);return t!=null&&xK(t,e),e}function SK(n,e){let t={},i=u(n,["force"]);return e!==void 0&&i!=null&&f(e,["_query","force"],i),t}function TK(n){let e={},t=u(n,["name"]);t!=null&&f(e,["_url","name"],t);let i=u(n,["config"]);return i!=null&&SK(i,e),e}function IK(n){let e={},t=u(n,["name"]);return t!=null&&f(e,["_url","name"],t),e}function DK(n,e){let t={},i=u(n,["customMetadata"]);if(e!==void 0&&i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),f(e,["customMetadata"],o)}let r=u(n,["chunkingConfig"]);return e!==void 0&&r!=null&&f(e,["chunkingConfig"],r),t}function AK(n){let e={},t=u(n,["name"]);t!=null&&f(e,["name"],t);let i=u(n,["metadata"]);i!=null&&f(e,["metadata"],i);let r=u(n,["done"]);r!=null&&f(e,["done"],r);let o=u(n,["error"]);o!=null&&f(e,["error"],o);let s=u(n,["response"]);return s!=null&&f(e,["response"],MK(s)),e}function kK(n){let e={},t=u(n,["fileSearchStoreName"]);t!=null&&f(e,["_url","file_search_store_name"],t);let i=u(n,["fileName"]);i!=null&&f(e,["fileName"],i);let r=u(n,["config"]);return r!=null&&DK(r,e),e}function MK(n){let e={},t=u(n,["sdkHttpResponse"]);t!=null&&f(e,["sdkHttpResponse"],t);let i=u(n,["parent"]);i!=null&&f(e,["parent"],i);let r=u(n,["documentName"]);return r!=null&&f(e,["documentName"],r),e}function NK(n,e){let t={},i=u(n,["pageSize"]);e!==void 0&&i!=null&&f(e,["_query","pageSize"],i);let r=u(n,["pageToken"]);return e!==void 0&&r!=null&&f(e,["_query","pageToken"],r),t}function PK(n){let e={},t=u(n,["config"]);return t!=null&&NK(t,e),e}function RK(n){let e={},t=u(n,["sdkHttpResponse"]);t!=null&&f(e,["sdkHttpResponse"],t);let i=u(n,["nextPageToken"]);i!=null&&f(e,["nextPageToken"],i);let r=u(n,["fileSearchStores"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>s)),f(e,["fileSearchStores"],o)}return e}function FK(n,e){let t={},i=u(n,["mimeType"]);e!==void 0&&i!=null&&f(e,["mimeType"],i);let r=u(n,["displayName"]);e!==void 0&&r!=null&&f(e,["displayName"],r);let o=u(n,["customMetadata"]);if(e!==void 0&&o!=null){let a=o;Array.isArray(a)&&(a=a.map(l=>l)),f(e,["customMetadata"],a)}let s=u(n,["chunkingConfig"]);return e!==void 0&&s!=null&&f(e,["chunkingConfig"],s),t}function LK(n){let e={},t=u(n,["fileSearchStoreName"]);t!=null&&f(e,["_url","file_search_store_name"],t);let i=u(n,["config"]);return i!=null&&FK(i,e),e}function OK(n){let e={},t=u(n,["sdkHttpResponse"]);return t!=null&&f(e,["sdkHttpResponse"],t),e}function VK(n,e){let t={},i=u(n,["force"]);return e!==void 0&&i!=null&&f(e,["_query","force"],i),t}function BK(n){let e={},t=u(n,["name"]);t!=null&&f(e,["_url","name"],t);let i=u(n,["config"]);return i!=null&&VK(i,e),e}function UK(n){let e={},t=u(n,["name"]);return t!=null&&f(e,["_url","name"],t),e}function $K(n,e){let t={},i=u(n,["pageSize"]);e!==void 0&&i!=null&&f(e,["_query","pageSize"],i);let r=u(n,["pageToken"]);return e!==void 0&&r!=null&&f(e,["_query","pageToken"],r),t}function HK(n){let e={},t=u(n,["parent"]);t!=null&&f(e,["_url","parent"],t);let i=u(n,["config"]);return i!=null&&$K(i,e),e}function qK(n){let e={},t=u(n,["sdkHttpResponse"]);t!=null&&f(e,["sdkHttpResponse"],t);let i=u(n,["nextPageToken"]);i!=null&&f(e,["nextPageToken"],i);let r=u(n,["documents"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>s)),f(e,["documents"],o)}return e}var Qx=class extends rr{constructor(e){super(),this.apiClient=e,this.list=async t=>new mo(ls.PAGED_ITEM_DOCUMENTS,i=>this.listInternal({parent:t.parent,config:i.config}),await this.listInternal(t),t)}async get(e){var t,i;let r,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=UK(e);return o=re("{name}",a._url),s=a._query,delete a._url,delete a._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),r.then(l=>l)}}async delete(e){var t,i;let r="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let s=BK(e);r=re("{name}",s._url),o=s._query,delete s._url,delete s._query,await this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var t,i;let r,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=HK(e);return o=re("{parent}/documents",a._url),s=a._query,delete a._url,delete a._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),r.then(l=>{let c=qK(l),d=new Ex;return Object.assign(d,c),d})}}};var Xx=class extends rr{constructor(e,t=new Qx(e)){super(),this.apiClient=e,this.documents=t,this.list=async(i={})=>new mo(ls.PAGED_ITEM_FILE_SEARCH_STORES,r=>this.listInternal(r),await this.listInternal(i),i)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var t,i;let r,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=bK(e);return o=re("fileSearchStores",a._url),s=a._query,delete a._url,delete a._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),r.then(l=>l)}}async get(e){var t,i;let r,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=IK(e);return o=re("{name}",a._url),s=a._query,delete a._url,delete a._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),r.then(l=>l)}}async delete(e){var t,i;let r="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let s=TK(e);r=re("{name}",s._url),o=s._query,delete s._url,delete s._query,await this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var t,i;let r,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=PK(e);return o=re("fileSearchStores",a._url),s=a._query,delete a._url,delete a._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),r.then(l=>{let c=RK(l),d=new xx;return Object.assign(d,c),d})}}async uploadToFileSearchStoreInternal(e){var t,i;let r,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=LK(e);return o=re("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",a._url),s=a._query,delete a._url,delete a._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),r.then(l=>{let c=OK(l),d=new bx;return Object.assign(d,c),d})}}async importFile(e){var t,i;let r,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=kK(e);return o=re("{file_search_store_name}:importFile",a._url),s=a._query,delete a._url,delete a._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),r.then(l=>{let c=AK(l),d=new Sx;return Object.assign(d,c),d})}}};function GK(n,e){let t={},i=u(n,["name"]);return i!=null&&f(t,["_url","name"],i),t}function WK(n,e){let t={},i=u(n,["name"]);return i!=null&&f(t,["_url","name"],i),t}function zK(n,e,t){let i={};if(u(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");let r=u(n,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&f(e,["displayName"],r),u(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");let o=u(n,["epochCount"]);e!==void 0&&o!=null&&f(e,["tuningTask","hyperparameters","epochCount"],o);let s=u(n,["learningRateMultiplier"]);if(s!=null&&f(i,["tuningTask","hyperparameters","learningRateMultiplier"],s),u(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(u(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(u(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");let a=u(n,["batchSize"]);e!==void 0&&a!=null&&f(e,["tuningTask","hyperparameters","batchSize"],a);let l=u(n,["learningRate"]);if(e!==void 0&&l!=null&&f(e,["tuningTask","hyperparameters","learningRate"],l),u(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(u(n,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return i}function jK(n,e,t){let i={},r=u(t,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){let y=u(n,["validationDataset"]);e!==void 0&&y!=null&&f(e,["supervisedTuningSpec"],P2(y))}else if(r==="PREFERENCE_TUNING"){let y=u(n,["validationDataset"]);e!==void 0&&y!=null&&f(e,["preferenceOptimizationSpec"],P2(y))}let o=u(n,["tunedModelDisplayName"]);e!==void 0&&o!=null&&f(e,["tunedModelDisplayName"],o);let s=u(n,["description"]);e!==void 0&&s!=null&&f(e,["description"],s);let a=u(t,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){let y=u(n,["epochCount"]);e!==void 0&&y!=null&&f(e,["supervisedTuningSpec","hyperParameters","epochCount"],y)}else if(a==="PREFERENCE_TUNING"){let y=u(n,["epochCount"]);e!==void 0&&y!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],y)}let l=u(t,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){let y=u(n,["learningRateMultiplier"]);e!==void 0&&y!=null&&f(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],y)}else if(l==="PREFERENCE_TUNING"){let y=u(n,["learningRateMultiplier"]);e!==void 0&&y!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],y)}let c=u(t,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){let y=u(n,["exportLastCheckpointOnly"]);e!==void 0&&y!=null&&f(e,["supervisedTuningSpec","exportLastCheckpointOnly"],y)}else if(c==="PREFERENCE_TUNING"){let y=u(n,["exportLastCheckpointOnly"]);e!==void 0&&y!=null&&f(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],y)}let d=u(t,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){let y=u(n,["adapterSize"]);e!==void 0&&y!=null&&f(e,["supervisedTuningSpec","hyperParameters","adapterSize"],y)}else if(d==="PREFERENCE_TUNING"){let y=u(n,["adapterSize"]);e!==void 0&&y!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],y)}if(u(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(u(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");let p=u(n,["labels"]);e!==void 0&&p!=null&&f(e,["labels"],p);let h=u(n,["beta"]);return e!==void 0&&h!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","beta"],h),i}function KK(n,e){let t={},i=u(n,["baseModel"]);i!=null&&f(t,["baseModel"],i);let r=u(n,["preTunedModel"]);r!=null&&f(t,["preTunedModel"],r);let o=u(n,["trainingDataset"]);o!=null&&oY(o);let s=u(n,["config"]);return s!=null&&zK(s,t),t}function YK(n,e){let t={},i=u(n,["baseModel"]);i!=null&&f(t,["baseModel"],i);let r=u(n,["preTunedModel"]);r!=null&&f(t,["preTunedModel"],r);let o=u(n,["trainingDataset"]);o!=null&&sY(o,t,e);let s=u(n,["config"]);return s!=null&&jK(s,t,e),t}function JK(n,e){let t={},i=u(n,["name"]);return i!=null&&f(t,["_url","name"],i),t}function QK(n,e){let t={},i=u(n,["name"]);return i!=null&&f(t,["_url","name"],i),t}function XK(n,e,t){let i={},r=u(n,["pageSize"]);e!==void 0&&r!=null&&f(e,["_query","pageSize"],r);let o=u(n,["pageToken"]);e!==void 0&&o!=null&&f(e,["_query","pageToken"],o);let s=u(n,["filter"]);return e!==void 0&&s!=null&&f(e,["_query","filter"],s),i}function ZK(n,e,t){let i={},r=u(n,["pageSize"]);e!==void 0&&r!=null&&f(e,["_query","pageSize"],r);let o=u(n,["pageToken"]);e!==void 0&&o!=null&&f(e,["_query","pageToken"],o);let s=u(n,["filter"]);return e!==void 0&&s!=null&&f(e,["_query","filter"],s),i}function eY(n,e){let t={},i=u(n,["config"]);return i!=null&&XK(i,t),t}function tY(n,e){let t={},i=u(n,["config"]);return i!=null&&ZK(i,t),t}function nY(n,e){let t={},i=u(n,["sdkHttpResponse"]);i!=null&&f(t,["sdkHttpResponse"],i);let r=u(n,["nextPageToken"]);r!=null&&f(t,["nextPageToken"],r);let o=u(n,["tunedModels"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(a=>aN(a))),f(t,["tuningJobs"],s)}return t}function iY(n,e){let t={},i=u(n,["sdkHttpResponse"]);i!=null&&f(t,["sdkHttpResponse"],i);let r=u(n,["nextPageToken"]);r!=null&&f(t,["nextPageToken"],r);let o=u(n,["tuningJobs"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(a=>Zx(a))),f(t,["tuningJobs"],s)}return t}function rY(n,e){let t={},i=u(n,["name"]);i!=null&&f(t,["model"],i);let r=u(n,["name"]);return r!=null&&f(t,["endpoint"],r),t}function oY(n,e){let t={};if(u(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(u(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");let i=u(n,["examples"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>o)),f(t,["examples","examples"],r)}return t}function sY(n,e,t){let i={},r=u(t,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){let s=u(n,["gcsUri"]);e!==void 0&&s!=null&&f(e,["supervisedTuningSpec","trainingDatasetUri"],s)}else if(r==="PREFERENCE_TUNING"){let s=u(n,["gcsUri"]);e!==void 0&&s!=null&&f(e,["preferenceOptimizationSpec","trainingDatasetUri"],s)}let o=u(t,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){let s=u(n,["vertexDatasetResource"]);e!==void 0&&s!=null&&f(e,["supervisedTuningSpec","trainingDatasetUri"],s)}else if(o==="PREFERENCE_TUNING"){let s=u(n,["vertexDatasetResource"]);e!==void 0&&s!=null&&f(e,["preferenceOptimizationSpec","trainingDatasetUri"],s)}if(u(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function aN(n,e){let t={},i=u(n,["sdkHttpResponse"]);i!=null&&f(t,["sdkHttpResponse"],i);let r=u(n,["name"]);r!=null&&f(t,["name"],r);let o=u(n,["state"]);o!=null&&f(t,["state"],H2(o));let s=u(n,["createTime"]);s!=null&&f(t,["createTime"],s);let a=u(n,["tuningTask","startTime"]);a!=null&&f(t,["startTime"],a);let l=u(n,["tuningTask","completeTime"]);l!=null&&f(t,["endTime"],l);let c=u(n,["updateTime"]);c!=null&&f(t,["updateTime"],c);let d=u(n,["description"]);d!=null&&f(t,["description"],d);let p=u(n,["baseModel"]);p!=null&&f(t,["baseModel"],p);let h=u(n,["_self"]);return h!=null&&f(t,["tunedModel"],rY(h)),t}function Zx(n,e){let t={},i=u(n,["sdkHttpResponse"]);i!=null&&f(t,["sdkHttpResponse"],i);let r=u(n,["name"]);r!=null&&f(t,["name"],r);let o=u(n,["state"]);o!=null&&f(t,["state"],H2(o));let s=u(n,["createTime"]);s!=null&&f(t,["createTime"],s);let a=u(n,["startTime"]);a!=null&&f(t,["startTime"],a);let l=u(n,["endTime"]);l!=null&&f(t,["endTime"],l);let c=u(n,["updateTime"]);c!=null&&f(t,["updateTime"],c);let d=u(n,["error"]);d!=null&&f(t,["error"],d);let p=u(n,["description"]);p!=null&&f(t,["description"],p);let h=u(n,["baseModel"]);h!=null&&f(t,["baseModel"],h);let y=u(n,["tunedModel"]);y!=null&&f(t,["tunedModel"],y);let E=u(n,["preTunedModel"]);E!=null&&f(t,["preTunedModel"],E);let A=u(n,["supervisedTuningSpec"]);A!=null&&f(t,["supervisedTuningSpec"],A);let R=u(n,["preferenceOptimizationSpec"]);R!=null&&f(t,["preferenceOptimizationSpec"],R);let k=u(n,["tuningDataStats"]);k!=null&&f(t,["tuningDataStats"],k);let H=u(n,["encryptionSpec"]);H!=null&&f(t,["encryptionSpec"],H);let K=u(n,["partnerModelTuningSpec"]);K!=null&&f(t,["partnerModelTuningSpec"],K);let z=u(n,["customBaseModel"]);z!=null&&f(t,["customBaseModel"],z);let oe=u(n,["experiment"]);oe!=null&&f(t,["experiment"],oe);let pe=u(n,["labels"]);pe!=null&&f(t,["labels"],pe);let Ne=u(n,["outputUri"]);Ne!=null&&f(t,["outputUri"],Ne);let kt=u(n,["pipelineJob"]);kt!=null&&f(t,["pipelineJob"],kt);let be=u(n,["serviceAccount"]);be!=null&&f(t,["serviceAccount"],be);let ze=u(n,["tunedModelDisplayName"]);ze!=null&&f(t,["tunedModelDisplayName"],ze);let bt=u(n,["veoTuningSpec"]);return bt!=null&&f(t,["veoTuningSpec"],bt),t}function aY(n,e){let t={},i=u(n,["sdkHttpResponse"]);i!=null&&f(t,["sdkHttpResponse"],i);let r=u(n,["name"]);r!=null&&f(t,["name"],r);let o=u(n,["metadata"]);o!=null&&f(t,["metadata"],o);let s=u(n,["done"]);s!=null&&f(t,["done"],s);let a=u(n,["error"]);return a!=null&&f(t,["error"],a),t}function P2(n,e){let t={},i=u(n,["gcsUri"]);i!=null&&f(t,["validationDatasetUri"],i);let r=u(n,["vertexDatasetResource"]);return r!=null&&f(t,["validationDatasetUri"],r),t}var eb=class extends rr{constructor(e){super(),this.apiClient=e,this.get=async t=>await this.getInternal(t),this.list=async(t={})=>new mo(ls.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(t),t),this.tune=async t=>{var i;if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){let r={tunedModelName:t.baseModel};!((i=t.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(r.checkpointId=t.config.preTunedModelCheckpointId);let o=Object.assign(Object.assign({},t),{preTunedModel:r});return o.baseModel=void 0,await this.tuneInternal(o)}else{let r=Object.assign({},t);return await this.tuneInternal(r)}else{let r=Object.assign({},t),o=await this.tuneMldevInternal(r),s="";return o.metadata!==void 0&&o.metadata.tunedModel!==void 0?s=o.metadata.tunedModel:o.name!==void 0&&o.name.includes("/operations/")&&(s=o.name.split("/operations/")[0]),{name:s,state:L2.JOB_STATE_QUEUED}}}}async getInternal(e){var t,i,r,o;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=QK(e);return a=re("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{let h=p;return h.sdkHttpResponse={headers:d.headers},h})),s.then(d=>Zx(d))}else{let c=JK(e);return a=re("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(p=>{let h=p;return h.sdkHttpResponse={headers:d.headers},h})),s.then(d=>aN(d))}}async listInternal(e){var t,i,r,o;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=tY(e);return a=re("tuningJobs",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{let h=p;return h.sdkHttpResponse={headers:d.headers},h})),s.then(d=>{let p=iY(d),h=new r0;return Object.assign(h,p),h})}else{let c=eY(e);return a=re("tunedModels",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(p=>{let h=p;return h.sdkHttpResponse={headers:d.headers},h})),s.then(d=>{let p=nY(d),h=new r0;return Object.assign(h,p),h})}}async cancel(e){var t,i,r,o;let s="",a={};if(this.apiClient.isVertexAI()){let l=WK(e);s=re("{name}:cancel",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{let l=GK(e);s=re("{name}:cancel",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async tuneInternal(e){var t,i;let r,o="",s={};if(this.apiClient.isVertexAI()){let a=YK(e,e);return o=re("tuningJobs",a._url),s=a._query,delete a._url,delete a._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json().then(c=>{let d=c;return d.sdkHttpResponse={headers:l.headers},d})),r.then(l=>Zx(l))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,i;let r,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=KK(e);return o=re("tunedModels",a._url),s=a._query,delete a._url,delete a._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json().then(c=>{let d=c;return d.sdkHttpResponse={headers:l.headers},d})),r.then(l=>aY(l))}}};var tb=class{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}},lY=1024*1024*8,cY=3,uY=1e3,dY=2,u0="x-goog-upload-status";async function fY(n,e,t){var i;let r=await lN(n,e,t),o=await r?.json();if(((i=r?.headers)===null||i===void 0?void 0:i[u0])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return o.file}async function pY(n,e,t){var i;let r=await lN(n,e,t),o=await r?.json();if(((i=r?.headers)===null||i===void 0?void 0:i[u0])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");let s=F2(o),a=new Mx;return Object.assign(a,s),a}async function lN(n,e,t){var i,r;let o=0,s=0,a=new qf(new Response),l="upload";for(o=n.size;s<o;){let c=Math.min(lY,o-s),d=n.slice(s,s+c);s+c>=o&&(l+=", finalize");let p=0,h=uY;for(;p<cY&&(a=await t.request({path:"",body:d,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":l,"X-Goog-Upload-Offset":String(s),"Content-Length":String(c)}}}),!(!((i=a?.headers)===null||i===void 0)&&i[u0]));)p++,await mY(h),h=h*dY;if(s+=c,((r=a?.headers)===null||r===void 0?void 0:r[u0])!=="active")break;if(o<=s)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return a}async function hY(n){return{size:n.size,type:n.type}}function mY(n){return new Promise(e=>setTimeout(e,n))}var nb=class{async upload(e,t,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await fY(e,t,i)}async uploadToFileSearchStore(e,t,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await pY(e,t,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await hY(e)}};var ib=class{create(e,t,i){return new rb(e,t,i)}},rb=class{constructor(e,t,i){this.url=e,this.headers=t,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}};var R2="x-goog-api-key",ob=class{constructor(e){this.apiKey=e}async addAuthHeaders(e,t){if(e.get(R2)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(R2,this.apiKey)}}};var gY="gl-node/",Vr=class{constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;let i=$9(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion;let r=new ob(this.apiKey);this.apiClient=new Hx({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:gY+"web",uploader:new nb,downloader:new tb}),this.models=new Kx(this.apiClient),this.live=new zx(this.apiClient,r,new ib),this.batches=new Rx(this.apiClient),this.chats=new Lx(this.models,this.apiClient),this.caches=new Fx(this.apiClient),this.files=new Vx(this.apiClient),this.operations=new Yx(this.apiClient),this.authTokens=new Jx(this.apiClient),this.tunings=new eb(this.apiClient),this.fileSearchStores=new Xx(this.apiClient)}};var db="enc_v1::",cN="banana-os-gemini-api-key",uN="banana-os-openweather-api-key",dN="banana-os-openai-api-key",Ra=class Ra{constructor(){this.cryptoService=F(vc);this.apiKey=I(null);this.openAiApiKey=I(null);this.openWeatherApiKey=I(null);typeof localStorage<"u"&&this.loadInitialKeys()}async loadInitialKeys(){await this.loadKey(cN,this.apiKey),await this.loadKey(dN,this.openAiApiKey),await this.loadKey(uN,this.openWeatherApiKey)}async loadKey(e,t){let i=localStorage.getItem(e);if(i)if(i.startsWith(db)){let r=i.substring(db.length);try{let o=await this.cryptoService.decrypt(r);t.set(o)}catch{t.set(null),localStorage.removeItem(e)}}else t.set(i),await this.setKey(i,t,e)}async setKey(e,t,i){let r=e.trim();if(r){t.set(r);let o=await this.cryptoService.encrypt(r);localStorage.setItem(i,`${db}${o}`)}else t.set(null),localStorage.removeItem(i)}async setApiKey(e){await this.setKey(e,this.apiKey,cN)}async setOpenAiApiKey(e){await this.setKey(e,this.openAiApiKey,dN)}async setOpenWeatherApiKey(e){await this.setKey(e,this.openWeatherApiKey,uN)}};Ra.\u0275fac=function(t){return new(t||Ra)},Ra.\u0275prov=de({token:Ra,factory:Ra.\u0275fac,providedIn:"root"});var zn=Ra;var Fa=class Fa{constructor(){this.http=F(Lr)}getPublicIp(){return this.http.get("https://api.ipify.org?format=json").pipe(Ft(e=>e.ip))}getGeolocation(){return this.http.get("http://ip-api.com/json/")}};Fa.\u0275fac=function(t){return new(t||Fa)},Fa.\u0275prov=de({token:Fa,factory:Fa.\u0275fac,providedIn:"root"});var Ic=Fa;var yY=["input"],vY=["output"];function _Y(n,e){if(n&1&&(x(0,"span",5),g(1),b(),x(2,"span",7),g(3),b()),n&2){let t=C().$implicit,i=C();w(),V(i.prompt()),w(2),V(t.html)}}function wY(n,e){n&1&&(x(0,"span",8),W(1,"i",10),g(2,"Thinking..."),b())}function CY(n,e){if(n&1&&W(0,"span",9),n&2){let t=C(2).$implicit;Fe("innerHTML",t.html,pa)}}function EY(n,e){if(n&1&&U(0,wY,3,0,"span",8)(1,CY,1,1,"span",9),n&2){let t=C().$implicit;$(t.isThinking?0:1)}}function xY(n,e){if(n&1&&(x(0,"div"),U(1,_Y,4,2)(2,EY,2,1),b()),n&2){let t=e.$implicit;w(),$(t.type==="command"?1:2)}}var Dc=class Dc{constructor(){this.lines=I([{type:"response",html:"Welcome to Banana OS Terminal. Type 'help' for commands."}]);this.notificationService=F(vt);this.osInteraction=F(dt);this.apiKeyService=F(zn);this.fsService=F(Bi);this.ipService=F(Ic);this.destroyRef=F(ht);this.ai=null;this.startTime=Date.now();this.cwd=I("/");this.history=[];this.historyIndex=-1;this.prompt=le(()=>`user@banana:${this.cwd()==="/"?"~":this.cwd().split("/").pop()}$`);this.fortunes=["You will be hungry again in one hour.","The fortune you seek is in another cookie.","A conclusion is simply the place where you got tired of thinking.","He who laughs last is laughing at you.","If you think nobody cares, try missing a couple of payments.","An alien of some sort will be appearing to you shortly."];Ae(()=>{let e=this.apiKeyService.apiKey();e?this.ai=new Vr({apiKey:e}):this.ai=null}),this.osInteraction.inAppActionRequest.pipe(Or(this.destroyRef)).subscribe(e=>{e.appId==="terminal"&&e.action==="executeTerminalCommand"&&this.runCommand(e.payload.command)})}ngOnInit(){this.startTime=Date.now()}handleKeydown(e){let t=e.target;if(e.key==="ArrowUp"){if(e.preventDefault(),this.history.length===0)return;this.historyIndex===-1?this.historyIndex=this.history.length-1:this.historyIndex>0&&this.historyIndex--,t.value=this.history[this.historyIndex]}else e.key==="ArrowDown"&&(e.preventDefault(),this.historyIndex===-1||this.historyIndex>=this.history.length-1?(this.historyIndex=this.history.length,t.value=""):(this.historyIndex++,t.value=this.history[this.historyIndex]))}async processCommand(e){let t=e.target,i=t.value;i&&((this.history.length===0||this.history[this.history.length-1]!==i)&&this.history.push(i),this.historyIndex=this.history.length,t.value="",await this.runCommand(i))}parsePipesAndRedirection(e){let t=null,i=e;if(e.includes(">")){let o=e.split(">");i=o[0].trim(),t=o.slice(1).join(">").trim()}return{commands:i.split("|").map(o=>o.trim()),redirectTo:t}}async runCommand(e){if(this.lines.update(s=>[...s,{type:"command",html:this.escapeHtml(e)}]),this.scrollToBottom(),e.trim().toLowerCase().startsWith("ai ")){let s=e.trim().substring(3);await this.runAiCommand(s),this.scrollToBottom();return}let{commands:t,redirectTo:i}=this.parsePipesAndRedirection(e),r="",o="";for(let s=0;s<t.length;s++){let[a,...l]=t[s].trim().split(" ");if(a.toLowerCase()==="clear"){this.lines.set([]);return}o=await this.executeSingleCommand(a,l,r),r=o}if(i){let s=this.resolvePath(i);if(!this.fsService.writeFile(s,this.stripHtml(o))){let l=this.fsService.getNode(s),c=`Could not write to ${i}.`;l?.type==="directory"?c=`${i} is a directory.`:this.fsService.getDirectory(s.substring(0,s.lastIndexOf("/")))||(c="Directory does not exist."),this.lines.update(d=>[...d,{type:"response",html:`<span class="text-red-400">${c}</span>`}])}}else o&&this.lines.update(s=>[...s,{type:"response",html:o}]);this.scrollToBottom()}async runAiCommand(e){if(!this.ai){let t="AI is not configured. Go to Settings > API Keys to add your Gemini API key.";this.notificationService.show({appId:"terminal",title:"Terminal",body:t,type:"error"}),this.lines.update(i=>[...i,{type:"response",html:`<span class="text-red-400">Error: ${t}</span>`}]);return}if(!e){this.lines.update(t=>[...t,{type:"response",html:'Please provide a prompt for the AI. Usage: ai "your question"'}]);return}this.lines.update(t=>[...t,{type:"response",html:"",isThinking:!0}]),this.scrollToBottom();try{let t=await this.ai.models.generateContentStream({model:"gemini-2.5-flash",contents:e}),i=!0;for await(let r of t){let o=r.text;this.lines.update(s=>{let a=[...s],l=a[a.length-1];return l&&(i&&l.isThinking?(l.html=this.escapeHtml(o),delete l.isThinking,i=!1):l.html+=this.escapeHtml(o)),a}),this.scrollToBottom()}}catch(t){console.error(t);let i="Error: Could not get a response from the AI.";this.notificationService.show({appId:"terminal",title:"Terminal",body:i,type:"error"}),this.lines.update(r=>{let o=[...r],s=o[o.length-1];return s?.isThinking?(s.html=`<span class="text-red-400">${i}</span>`,delete s.isThinking):o.push({type:"response",html:`<span class="text-red-400">${i}</span>`}),o})}}scrollToBottom(){setTimeout(()=>{this.outputEl&&(this.outputEl.nativeElement.scrollTop=this.outputEl.nativeElement.scrollHeight)})}resolvePath(e){if(!e||e===".")return this.cwd();if(e.startsWith("/"))return this.fsService.normalizePath(e);let t=this.cwd().split("/").filter(r=>r),i=e.split("/").filter(r=>r);for(let r of i)r===".."?t.pop():r!=="."&&t.push(r);return"/"+t.join("/")}async executeSingleCommand(e,t,i){switch(e.toLowerCase()){case"help":return"Available commands: help, clear, date, echo, neofetch, ai, pwd, ls, cd, cat, mkdir, touch, rm, mv, cp, open, history, uname, whoami, uptime, grep, wc, ping, ipconfig, cowsay, fortune";case"date":return new Date().toString();case"echo":return this.escapeHtml(t.join(" "));case"neofetch":return`<pre class="whitespace-pre">
\u{1F34C} Banana OS v1.0
-----------------
OS: Banana OS (Angular)
Kernel: Web Browser
Resolution: ${window.innerWidth}x${window.innerHeight}
Theme: Dark
</pre>`;case"pwd":return this.cwd();case"cd":let r=this.resolvePath(t[0]||"/");return this.fsService.getDirectory(r)?(this.cwd.set(r),""):`<span class="text-red-400">cd: no such file or directory: ${t[0]}</span>`;case"ls":let s=this.resolvePath(t[0]||this.cwd()),a=this.fsService.getDirectory(s);if(a){let Bt=Object.values(a.children);return Bt.length===0?"":Bt.map(An=>An.type==="directory"?`<span class="text-blue-400">${An.name}</span>`:`<span>${An.name}</span>`).join(`
`)}else return`<span class="text-red-400">ls: cannot access '${t[0]||"."}': No such file or directory</span>`;case"cat":if(!t[0])return"usage: cat [file]";let l=this.resolvePath(t[0]),c=this.fsService.readFile(l);return c!==null?`<pre class="whitespace-pre-wrap">${this.escapeHtml(c)}</pre>`:this.fsService.getNode(l)?.type==="directory"?`<span class="text-red-400">cat: ${t[0]}: Is a directory</span>`:`<span class="text-red-400">cat: ${t[0]}: No such file or directory</span>`;case"mkdir":if(!t[0])return"usage: mkdir [directory_name]";let d=this.resolvePath(t[0]),p=d.substring(0,d.lastIndexOf("/"))||"/",h=d.substring(d.lastIndexOf("/")+1);return this.fsService.createDirectory(p,h)?"":`<span class="text-red-400">mkdir: cannot create directory \u2018${t[0]}\u2019: File exists</span>`;case"touch":if(!t[0])return"usage: touch [file_name]";let y=this.resolvePath(t[0]),E=y.substring(0,y.lastIndexOf("/"))||"/",A=y.substring(y.lastIndexOf("/")+1);return this.fsService.createFile(E,A)?"":`<span class="text-red-400">touch: cannot create file \u2018${t[0]}\u2019: File exists</span>`;case"rm":if(!t[0])return"usage: rm [file_or_directory]";let R=this.resolvePath(t[0]);return this.fsService.deleteNode(R)?"":`<span class="text-red-400">rm: cannot remove '${t[0]}': No such file or directory</span>`;case"mv":if(t.length<2)return"usage: mv [source] [destination]";let k=this.resolvePath(t[0]),H=this.resolvePath(t[1]);return this.fsService.moveNode(k,H)?"":`<span class="text-red-400">mv: failed to move '${t[0]}' to '${t[1]}'</span>`;case"cp":if(t.length<2)return"usage: cp [source] [destination]";let K=this.resolvePath(t[0]),z=this.resolvePath(t[1]);return this.fsService.copyNode(K,z)?"":`<span class="text-red-400">cp: failed to copy '${t[0]}' to '${t[1]}'</span>`;case"open":if(!t[0])return"usage: open [app_id | file_path]";let oe=this.resolvePath(t[0]),pe=this.fsService.getNode(oe);if(pe)if(pe.type==="directory")this.osInteraction.openAppRequest.next({appId:"file-explorer",data:{path:pe.path}});else{let Bt=pe.name.split(".").pop()?.toLowerCase(),An=null;switch(Bt){case"txt":case"md":case"js":case"ts":case"json":case"html":case"css":An="text-editor";break;case"jpg":case"jpeg":case"png":case"gif":An="photo-viewer";break}if(An)this.osInteraction.openAppRequest.next({appId:An,data:{filePath:pe.path}});else return`<span class="text-red-400">open: File type ".${Bt}" is not supported.</span>`}else this.osInteraction.openAppRequest.next({appId:t[0]});return"";case"history":return this.history.map((Bt,An)=>`${An+1}  ${this.escapeHtml(Bt)}`).join(`
`);case"uname":return"BananaOS (Web)";case"whoami":return"user";case"uptime":let Ne=Math.floor((Date.now()-this.startTime)/1e3),kt=Math.floor(Ne/86400),be=Math.floor(Ne%86400/3600),ze=Math.floor(Ne%3600/60);return`up ${kt} day(s), ${be} hour(s), ${ze} minute(s)`;case"grep":if(!t[0])return"usage: grep [pattern] [file?]";let bt=t[0],st=i;if(!i&&t[1]){let Bt=this.resolvePath(t[1]);st=this.fsService.readFile(Bt)||""}if(!st)return"";let jn=new RegExp(bt,"g");return st.split(`
`).filter(Bt=>Bt.match(jn)).map(Bt=>this.escapeHtml(Bt).replace(jn,'<span class="bg-yellow-400 text-black">$&</span>')).join(`
`);case"wc":let ds=i||(t[0]?this.fsService.readFile(this.resolvePath(t[0])):null);if(ds===null)return`wc: ${t[0]}: No such file or directory`;let Qf=ds.split(`
`).length,$i=ds.trim().split(/\s+/).filter(Boolean).length,Cu=ds.length;return`${Qf} ${$i} ${Cu}`;case"ping":let QN=t[0]||"localhost",Sb="";for(let Bt=0;Bt<4;Bt++){await new Promise(gy=>setTimeout(gy,500));let An=Math.floor(Math.random()*30)+1;Sb+=`Reply from ${this.escapeHtml(QN)}: time=${An}ms
`}return Sb;case"ipconfig":try{return`Public IP Address: ${await new Promise((An,gy)=>this.ipService.getPublicIp().subscribe({next:An,error:gy}))}`}catch{return"Could not retrieve IP address."}case"cowsay":let XN=t.join(" ")||i||"Moo!";return this.cowsay(XN);case"fortune":return this.fortunes[Math.floor(Math.random()*this.fortunes.length)];default:return`<span class="text-red-400">Command not found: ${this.escapeHtml(e)}</span>`}}cowsay(e){return`<pre class="whitespace-pre">${this.createSpeechBubble(e)}
        \\   ^__^
         \\  (oo)\\_______
            (__)\\       )\\/\\
                ||----w |
                ||     ||
    </pre>`}createSpeechBubble(e,t=40){let i=this.wordWrap(e,t),r=" "+"_".repeat(i[0].length+2)+` 
`,o=" "+"-".repeat(i[0].length+2)+` 
`,s="";if(i.length===1)s=`< ${i[0]} >
`;else{s+=`/ ${i[0].padEnd(t)} \\
`;for(let a=1;a<i.length-1;a++)s+=`| ${i[a].padEnd(t)} |
`;s+=`\\ ${i[i.length-1].padEnd(t)} /
`}return r+s+o}wordWrap(e,t){let i=[],r="",o=e.split(" ");for(let a of o)(r+" "+a).length>t?(i.push(r),r=a):r+=(r?" ":"")+a;i.push(r);let s=Math.max(...i.map(a=>a.length));return i.map(a=>a.padEnd(s))}escapeHtml(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}stripHtml(e){return new DOMParser().parseFromString(e,"text/html").body.textContent||""}focusInput(){this.inputEl?.nativeElement.focus()}};Dc.\u0275fac=function(t){return new(t||Dc)},Dc.\u0275cmp=ee({type:Dc,selectors:[["app-terminal"]],viewQuery:function(t,i){if(t&1&&(pn(yY,5),pn(vY,5)),t&2){let r;hn(r=mn())&&(i.inputEl=r.first),hn(r=mn())&&(i.outputEl=r.first)}},decls:10,vars:1,consts:[["output",""],["input",""],[1,"h-full","bg-black","text-white","font-mono","text-sm","p-2","flex","flex-col",3,"click"],[1,"flex-grow","overflow-y-auto"],[1,"flex-shrink-0","flex","items-center"],[1,"text-yellow-400"],["type","text","autofocus","",1,"bg-transparent","border-none","text-green-400","flex-1","ml-2","focus:outline-none",3,"keydown","keydown.enter"],[1,"ml-2"],[1,"text-gray-400"],[1,"text-green-400",3,"innerHTML"],[1,"fas","fa-spinner","fa-spin","mr-2"]],template:function(t,i){if(t&1){let r=B();x(0,"div",2),G("click",function(){return S(r),T(i.focusInput())}),x(1,"div",3,0),Q(3,xY,3,1,"div",null,Ve),b(),x(5,"div",4)(6,"span",5),g(7),b(),x(8,"input",6,1),G("keydown",function(s){return S(r),T(i.handleKeydown(s))})("keydown.enter",function(s){return S(r),T(i.processCommand(s))}),b()()()}t&2&&(w(3),X(i.lines()),w(4),V(i.prompt()))},dependencies:[te],encapsulation:2,changeDetection:0});var h0=Dc;var CN=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,i){this._renderer=t,this._elementRef=i}setProperty(t,i){this._renderer.setProperty(this._elementRef.nativeElement,t,i)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(i){return new(i||n)(He(Ri),He(Bn))};static \u0275dir=Et({type:n})}return n})(),x0=(()=>{class n extends CN{static \u0275fac=(()=>{let t;return function(r){return(t||(t=Zo(n)))(r||n)}})();static \u0275dir=Et({type:n,features:[Un]})}return n})(),Jf=new ye("");var bY={provide:Jf,useExisting:li(()=>_t),multi:!0};function SY(){let n=co()?co().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var TY=new ye(""),_t=(()=>{class n extends CN{_compositionMode;_composing=!1;constructor(t,i,r){super(t,i),this._compositionMode=r,this._compositionMode==null&&(this._compositionMode=!SY())}writeValue(t){let i=t??"";this.setProperty("value",i)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(i){return new(i||n)(He(Ri),He(Bn),He(TY,8))};static \u0275dir=Et({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,r){i&1&&N("input",function(s){return r._handleInput(s.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(s){return r._compositionEnd(s.target.value)})},standalone:!1,features:[Pr([bY]),Un]})}return n})();var b0=new ye(""),EN=new ye("");function IY(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function DY(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}function fN(n){return null}function xN(n){return n!=null}function bN(n){return cc(n)?Gd(n):n}function SN(n){let e={};return n.forEach(t=>{e=t!=null?P(P({},e),t):e}),Object.keys(e).length===0?null:e}function TN(n,e){return e.map(t=>t(n))}function AY(n){return!n.validate}function IN(n){return n.map(e=>AY(e)?e:t=>e.validate(t))}function kY(n){if(!n)return null;let e=n.filter(xN);return e.length==0?null:function(t){return SN(TN(t,e))}}function hb(n){return n!=null?kY(IN(n)):null}function MY(n){if(!n)return null;let e=n.filter(xN);return e.length==0?null:function(t){let i=TN(t,e).map(bN);return Y_(i).pipe(Ft(SN))}}function mb(n){return n!=null?MY(IN(n)):null}function pN(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function NY(n){return n._rawValidators}function PY(n){return n._rawAsyncValidators}function fb(n){return n?Array.isArray(n)?n:[n]:[]}function g0(n,e){return Array.isArray(n)?n.includes(e):n===e}function hN(n,e){let t=fb(e);return fb(n).forEach(r=>{g0(t,r)||t.push(r)}),t}function mN(n,e){return fb(e).filter(t=>!g0(n,t))}var y0=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=hb(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=mb(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},Mc=class extends y0{name;get formDirective(){return null}get path(){return null}},Yf=class extends y0{_parent=null;name=null;valueAccessor=null},v0=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},RY={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},C0e=Z(P({},RY),{"[class.ng-submitted]":"isSubmitted"}),Dt=(()=>{class n extends v0{constructor(t){super(t)}static \u0275fac=function(i){return new(i||n)(He(Yf,2))};static \u0275dir=Et({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,r){i&2&&Y("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},standalone:!1,features:[Un]})}return n})(),DN=(()=>{class n extends v0{constructor(t){super(t)}static \u0275fac=function(i){return new(i||n)(He(Mc,10))};static \u0275dir=Et({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,r){i&2&&Y("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},standalone:!1,features:[Un]})}return n})();var Gf="VALID",m0="INVALID",Ac="PENDING",Wf="DISABLED",cs=class{},_0=class extends cs{value;source;constructor(e,t){super(),this.value=e,this.source=t}},jf=class extends cs{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},Kf=class extends cs{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},kc=class extends cs{status;source;constructor(e,t){super(),this.status=e,this.source=t}},pb=class extends cs{source;constructor(e){super(),this.source=e}},w0=class extends cs{source;constructor(e){super(),this.source=e}};function AN(n){return(S0(n)?n.validators:n)||null}function FY(n){return Array.isArray(n)?hb(n):n||null}function kN(n,e){return(S0(e)?e.asyncValidators:n)||null}function LY(n){return Array.isArray(n)?mb(n):n||null}function S0(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function OY(n,e,t){let i=n.controls;if(!(e?Object.keys(i):i).length)throw new ae(1e3,"");if(!i[t])throw new ae(1001,"")}function VY(n,e,t){n._forEachChild((i,r)=>{if(t[r]===void 0)throw new ae(1002,"")})}var C0=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Rr(this.statusReactive)}set status(e){Rr(()=>this.statusReactive.set(e))}_status=le(()=>this.statusReactive());statusReactive=I(void 0);get valid(){return this.status===Gf}get invalid(){return this.status===m0}get pending(){return this.status==Ac}get disabled(){return this.status===Wf}get enabled(){return this.status!==Wf}errors;get pristine(){return Rr(this.pristineReactive)}set pristine(e){Rr(()=>this.pristineReactive.set(e))}_pristine=le(()=>this.pristineReactive());pristineReactive=I(!0);get dirty(){return!this.pristine}get touched(){return Rr(this.touchedReactive)}set touched(e){Rr(()=>this.touchedReactive.set(e))}_touched=le(()=>this.touchedReactive());touchedReactive=I(!1);get untouched(){return!this.touched}_events=new nn;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(hN(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(hN(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(mN(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(mN(e,this._rawAsyncValidators))}hasValidator(e){return g0(this._rawValidators,e)}hasAsyncValidator(e){return g0(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(Z(P({},e),{sourceControl:i})),t&&e.emitEvent!==!1&&this._events.next(new Kf(!0,i))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let i=e.sourceControl??this;this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:i})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,i),t&&e.emitEvent!==!1&&this._events.next(new Kf(!1,i))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(Z(P({},e),{sourceControl:i})),t&&e.emitEvent!==!1&&this._events.next(new jf(!1,i))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let i=e.sourceControl??this;this._forEachChild(r=>{r.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,i),t&&e.emitEvent!==!1&&this._events.next(new jf(!0,i))}markAsPending(e={}){this.status=Ac;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new kc(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(Z(P({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Wf,this.errors=null,this._forEachChild(r=>{r.disable(Z(P({},e),{onlySelf:!0}))}),this._updateValue();let i=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new _0(this.value,i)),this._events.next(new kc(this.status,i)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Z(P({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Gf,this._forEachChild(i=>{i.enable(Z(P({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Z(P({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let i=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Gf||this.status===Ac)&&this._runAsyncValidator(i,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new _0(this.value,t)),this._events.next(new kc(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(Z(P({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Wf:Gf}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=Ac,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1,shouldHaveEmitted:e!==!1};let i=bN(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(r=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(r,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((i,r)=>i&&i._find(r),this)}getError(e,t){let i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,i){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||i)&&this._events.next(new kc(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,i)}_initObservables(){this.valueChanges=new Vn,this.statusChanges=new Vn}_calculateStatus(){return this._allControlsDisabled()?Wf:this.errors?m0:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ac)?Ac:this._anyControlsHaveStatus(m0)?m0:Gf}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let i=!this._anyControlsDirty(),r=this.pristine!==i;this.pristine=i,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),r&&this._events.next(new jf(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new Kf(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){S0(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=FY(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=LY(this._rawAsyncValidators)}},E0=class extends C0{constructor(e,t,i){super(AN(t),kN(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,i={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){VY(this,!0,e),Object.keys(e).forEach(i=>{OY(this,!0,i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(i=>{let r=this.controls[i];r&&r.patchValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((i,r)=>{i.reset(e?e[r]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t),t?.emitEvent!==!1&&this._events.next(new w0(this))}getRawValue(){return this._reduceChildren({},(e,t,i)=>(e[i]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,i)=>i._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let i=this.controls[t];i&&e(i,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,i]of Object.entries(this.controls))if(this.contains(t)&&e(i))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,i,r)=>((i.enabled||this.disabled)&&(t[r]=i.value),t))}_reduceChildren(e,t){let i=e;return this._forEachChild((r,o)=>{i=t(i,r,o)}),i}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var gb=new ye("",{providedIn:"root",factory:()=>yb}),yb="always";function BY(n,e){return[...e.path,n]}function MN(n,e,t=yb){NN(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),$Y(n,e),qY(n,e),HY(n,e),UY(n,e)}function gN(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function UY(n,e){if(e.valueAccessor.setDisabledState){let t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function NN(n,e){let t=NY(n);e.validator!==null?n.setValidators(pN(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let i=PY(n);e.asyncValidator!==null?n.setAsyncValidators(pN(i,e.asyncValidator)):typeof i=="function"&&n.setAsyncValidators([i]);let r=()=>n.updateValueAndValidity();gN(e._rawValidators,r),gN(e._rawAsyncValidators,r)}function $Y(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&PN(n,e)})}function HY(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&PN(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function PN(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function qY(n,e){let t=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function GY(n,e){n==null,NN(n,e)}function WY(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function zY(n){return Object.getPrototypeOf(n.constructor)===x0}function jY(n,e){n._syncPendingControls(),e.forEach(t=>{let i=t.control;i.updateOn==="submit"&&i._pendingChange&&(t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function KY(n,e){if(!e)return null;Array.isArray(e);let t,i,r;return e.forEach(o=>{o.constructor===_t?t=o:zY(o)?i=o:r=o}),r||i||t||null}var YY={provide:Mc,useExisting:li(()=>vb)},zf=Promise.resolve(),vb=(()=>{class n extends Mc{callSetDisabledState;get submitted(){return Rr(this.submittedReactive)}_submitted=le(()=>this.submittedReactive());submittedReactive=I(!1);_directives=new Set;form;ngSubmit=new Vn;options;constructor(t,i,r){super(),this.callSetDisabledState=r,this.form=new E0({},hb(t),mb(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){zf.then(()=>{let i=this._findContainer(t.path);t.control=i.registerControl(t.name,t.control),MN(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){zf.then(()=>{let i=this._findContainer(t.path);i&&i.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){zf.then(()=>{let i=this._findContainer(t.path),r=new E0({});GY(r,t),i.registerControl(t.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){zf.then(()=>{let i=this._findContainer(t.path);i&&i.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,i){zf.then(()=>{this.form.get(t.path).setValue(i)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),jY(this.form,this._directives),this.ngSubmit.emit(t),this.form._events.next(new pb(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static \u0275fac=function(i){return new(i||n)(He(b0,10),He(EN,10),He(gb,8))};static \u0275dir=Et({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,r){i&1&&N("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Pr([YY]),Un]})}return n})();function yN(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function vN(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var JY=class extends C0{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,i){super(AN(t),kN(i,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),S0(t)&&(t.nonNullable||t.initialValueIsDefault)&&(vN(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1,t?.emitEvent!==!1&&this._events.next(new w0(this))}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){yN(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){yN(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){vN(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var QY={provide:Yf,useExisting:li(()=>xt)},_N=Promise.resolve(),xt=(()=>{class n extends Yf{_changeDetectorRef;callSetDisabledState;control=new JY;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new Vn;constructor(t,i,r,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=KY(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let i=t.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),WY(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){MN(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){_N.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let i=t.isDisabled.currentValue,r=i!==0&&lM(i);_N.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?BY(t,this._parent):[t]}static \u0275fac=function(i){return new(i||n)(He(Mc,9),He(b0,10),He(EN,10),He(Jf,10),He(Mg,8),He(gb,8))};static \u0275dir=Et({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[Pr([QY]),Un,sc]})}return n})();var RN=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275dir=Et({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})(),XY={provide:Jf,useExisting:li(()=>_b),multi:!0},_b=(()=>{class n extends x0{writeValue(t){let i=t??"";this.setProperty("value",i)}registerOnChange(t){this.onChange=i=>{t(i==""?null:parseFloat(i))}}static \u0275fac=(()=>{let t;return function(r){return(t||(t=Zo(n)))(r||n)}})();static \u0275dir=Et({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(i,r){i&1&&N("input",function(s){return r.onChange(s.target.value)})("blur",function(){return r.onTouched()})},standalone:!1,features:[Pr([XY]),Un]})}return n})();var ZY={provide:Jf,useExisting:li(()=>us),multi:!0};function FN(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function eJ(n){return n.split(":")[0]}var us=(()=>{class n extends x0{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;appRefInjector=F(ts).injector;destroyRef=F(ht);cdr=F(Mg);_queuedWrite=!1;_writeValueAfterRender(){this._queuedWrite||this.appRefInjector.destroyed||(this._queuedWrite=!0,mE({write:()=>{this.destroyRef.destroyed||(this._queuedWrite=!1,this.writeValue(this.value))}},{injector:this.appRefInjector}))}writeValue(t){this.cdr.markForCheck(),this.value=t;let i=this._getOptionId(t),r=FN(i,t);this.setProperty("value",r)}registerOnChange(t){this.onChange=i=>{this.value=this._getOptionValue(i),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i),t))return i;return null}_getOptionValue(t){let i=eJ(t);return this._optionMap.has(i)?this._optionMap.get(i):t}static \u0275fac=(()=>{let t;return function(r){return(t||(t=Zo(n)))(r||n)}})();static \u0275dir=Et({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(i,r){i&1&&N("change",function(s){return r.onChange(s.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Pr([ZY]),Un]})}return n})(),Nc=(()=>{class n{_element;_renderer;_select;id;constructor(t,i,r){this._element=t,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(FN(this.id,t)),this._select._writeValueAfterRender())}set value(t){this._setElementValue(t),this._select&&this._select._writeValueAfterRender()}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select._writeValueAfterRender())}static \u0275fac=function(i){return new(i||n)(He(Bn),He(Ri),He(us,9))};static \u0275dir=Et({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),tJ={provide:Jf,useExisting:li(()=>LN),multi:!0};function wN(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function nJ(n){return n.split(":")[0]}var LN=(()=>{class n extends x0{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let i;if(Array.isArray(t)){let r=t.map(o=>this._getOptionId(o));i=(o,s)=>{o._setSelected(r.indexOf(s.toString())>-1)}}else i=(r,o)=>{r._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(t){this.onChange=i=>{let r=[],o=i.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let l=s[a],c=this._getOptionValue(l.value);r.push(c)}}else{let s=i.options;for(let a=0;a<s.length;a++){let l=s[a];if(l.selected){let c=this._getOptionValue(l.value);r.push(c)}}}this.value=r,t(r)}}_registerOption(t){let i=(this._idCounter++).toString();return this._optionMap.set(i,t),i}_getOptionId(t){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i)._value,t))return i;return null}_getOptionValue(t){let i=nJ(t);return this._optionMap.has(i)?this._optionMap.get(i)._value:t}static \u0275fac=(()=>{let t;return function(r){return(t||(t=Zo(n)))(r||n)}})();static \u0275dir=Et({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(i,r){i&1&&N("change",function(s){return r.onChange(s.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Pr([tJ]),Un]})}return n})(),Pc=(()=>{class n{_element;_renderer;_select;id;_value;constructor(t,i,r){this._element=t,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(wN(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(wN(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(i){return new(i||n)(He(Bn),He(Ri),He(LN,9))};static \u0275dir=Et({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();function ON(n){return typeof n=="number"?n:parseFloat(n)}var VN=(()=>{class n{_validator=fN;_onChange;_enabled;ngOnChanges(t){if(this.inputName in t){let i=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):fN,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static \u0275fac=function(i){return new(i||n)};static \u0275dir=Et({type:n,features:[sc]})}return n})(),iJ={provide:b0,useExisting:li(()=>wb),multi:!0},wb=(()=>{class n extends VN{max;inputName="max";normalizeInput=t=>ON(t);createValidator=t=>DY(t);static \u0275fac=(()=>{let t;return function(r){return(t||(t=Zo(n)))(r||n)}})();static \u0275dir=Et({type:n,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(i,r){i&2&&Fi("max",r._enabled?r.max:null)},inputs:{max:"max"},standalone:!1,features:[Pr([iJ]),Un]})}return n})(),rJ={provide:b0,useExisting:li(()=>Cb),multi:!0},Cb=(()=>{class n extends VN{min;inputName="min";normalizeInput=t=>ON(t);createValidator=t=>IY(t);static \u0275fac=(()=>{let t;return function(r){return(t||(t=Zo(n)))(r||n)}})();static \u0275dir=Et({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(i,r){i&2&&Fi("min",r._enabled?r.min:null)},inputs:{min:"min"},standalone:!1,features:[Pr([rJ]),Un]})}return n})();var oJ=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=so({type:n});static \u0275inj=Cr({})}return n})();var At=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:gb,useValue:t.callSetDisabledState??yb}]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=so({type:n});static \u0275inj=Cr({imports:[oJ]})}return n})();var BN=(n,e)=>e.id,sJ=(n,e)=>e.value;function aJ(n,e){if(n&1){let t=B();m(0,"h3",20),g(1,"System"),v(),m(2,"div",21)(3,"div",22)(4,"h4",23),g(5,"Device Information"),v(),m(6,"div",24)(7,"div",25)(8,"span",26),g(9,"OS Version:"),v(),m(10,"span"),g(11,"Banana OS 1.0"),v()(),m(12,"div",25)(13,"span",26),g(14,"Device Model:"),v(),m(15,"span",27),g(16),v()(),m(17,"div",25)(18,"span",26),g(19,"Public IP Address:"),v(),m(20,"span",27),g(21),v()(),m(22,"div",25)(23,"span",26),g(24,"MAC Address:"),v(),m(25,"span",27),g(26),v()()()(),m(27,"div",22)(28,"h4",23),g(29,"Reset Options"),v(),m(30,"p",28),g(31,"Reset personalization settings (wallpaper, theme, sound, etc.) to their default values. Your apps and files will not be affected."),v(),m(32,"button",29),N("click",function(){S(t);let r=C();return T(r.requestResetAccount())}),g(33," Reset Personalization Settings "),v()(),m(34,"div",30)(35,"h4",31),g(36,"System Action"),v(),m(37,"div")(38,"p",28),g(39,"Perform a factory reset. This will close all windows, uninstall non-core apps, and reset all settings. "),m(40,"span",32),g(41,"This action is irreversible."),v()(),m(42,"button",33),N("click",function(){S(t);let r=C();return T(r.requestFactoryReset())}),g(43," Factory Reset "),v()()()()}if(n&2){let t=C();w(16),V(t.deviceModel()),w(5),V(t.ipAddress()),w(5),V(t.macAddress())}}function lJ(n,e){if(n&1){let t=B();m(0,"button",49),N("click",function(){let r=S(t).$implicit,o=C(2);return T(o.settingsService.setAccentColor(r))}),v()}if(n&2){let t=e.$implicit,i=C(2);Be("background-color","var(--accent-color-"+t+")"),Y("ring-2",i.settingsService.accentColor()===t)}}function cJ(n,e){if(n&1){let t=B();m(0,"div",50),N("click",function(){let r=S(t).$implicit,o=C(2);return T(o.settingsService.setWallpaper(r.id))}),m(1,"div",51)(2,"span",52),g(3),v()()()}if(n&2){let t=e.$implicit,i=C(2);ga(t.id),Y("ring-2",i.settingsService.wallpaper()===t.id),w(3),V(t.name)}}function uJ(n,e){if(n&1&&O(0,"img",41),n&2){let t=C(2);J("src",t.customWallpaperPreview(),Qe)}}function dJ(n,e){n&1&&(m(0,"div",42),O(1,"i",53),v())}function fJ(n,e){if(n&1){let t=B();m(0,"button",54),N("click",function(){S(t);let r=C(2);return T(r.setCustomWallpaper())}),g(1," Apply "),v()}}function pJ(n,e){if(n&1){let t=B();m(0,"h3",20),g(1,"Personalization"),v(),m(2,"div",34)(3,"h4",23),g(4,"Accent Color"),v(),m(5,"div",35),Q(6,lJ,1,4,"button",36,Ot),v()(),m(8,"div",34)(9,"h4",23),g(10,"Wallpaper"),v(),m(11,"div",37),Q(12,cJ,4,5,"div",38,BN),v()(),m(14,"div",39)(15,"h4",23),g(16,"Custom Wallpaper"),v(),m(17,"div",40),U(18,uJ,1,1,"img",41)(19,dJ,2,0,"div",42),m(20,"div",43)(21,"p",28),g(22,"Upload an image to use as your desktop background."),v(),m(23,"input",44,0),N("change",function(r){S(t);let o=C();return T(o.onWallpaperFileSelected(r))}),v(),m(25,"div",45)(26,"button",46),N("click",function(){S(t);let r=Hn(24);return T(r.click())}),O(27,"i",47),g(28,"Choose Image "),v(),U(29,fJ,2,0,"button",48),v()()()()}if(n&2){let t=C();w(6),X(t.accentColors),w(6),X(t.wallpapers),w(6),$(t.customWallpaperPreview()?18:19),w(11),$(t.customWallpaperPreview()?29:-1)}}function hJ(n,e){if(n&1){let t=B();m(0,"h3",20),g(1,"Notifications"),v(),m(2,"div",22)(3,"div",55)(4,"div")(5,"h4",56),g(6,"Do Not Disturb"),v(),m(7,"p",57),g(8,"Temporarily disable all notifications."),v()(),m(9,"label",58)(10,"input",59),N("change",function(r){S(t);let o=C();return T(o.systemPreferences.dndEnabled.set(r.target.checked))}),v(),O(11,"div",60),v()()()}if(n&2){let t=C();w(10),J("checked",t.systemPreferences.dndEnabled())}}function mJ(n,e){if(n&1){let t=B();m(0,"h3",20),g(1,"Sound"),v(),m(2,"div",21)(3,"div",22)(4,"h4",23),g(5,"Master Volume"),v(),m(6,"div",61),O(7,"i",62),m(8,"input",63),N("input",function(r){S(t);let o=C();return T(o.systemPreferences.masterVolume.set(+r.target.value))}),v(),O(9,"i",64),m(10,"span",65),g(11),v()()(),m(12,"div",22)(13,"div",55)(14,"div")(15,"h4",56),g(16,"System Sounds"),v(),m(17,"p",57),g(18,"Enable sounds for notifications, alerts, etc."),v()(),m(19,"label",58)(20,"input",59),N("change",function(r){S(t);let o=C();return T(o.systemPreferences.systemSoundsEnabled.set(r.target.checked))}),v(),O(21,"div",60),v()()()()}if(n&2){let t=C();w(8),J("value",t.systemPreferences.masterVolume()),w(3),V(t.systemPreferences.masterVolume()),w(9),J("checked",t.systemPreferences.systemSoundsEnabled())}}function gJ(n,e){if(n&1&&(m(0,"option",67),g(1),v()),n&2){let t=e.$implicit;J("value",t.id),w(),V(t.name)}}function yJ(n,e){if(n&1){let t=B();m(0,"h3",20),g(1,"Language & Region"),v(),m(2,"div",21)(3,"div",22)(4,"h4",23),g(5,"Display Language"),v(),m(6,"p",28),g(7,"Choose the language for Banana OS."),v(),m(8,"select",66),N("ngModelChange",function(r){S(t);let o=C();return T(o.systemPreferences.language.set(r))}),Q(9,gJ,2,2,"option",67,BN),v(),m(11,"p",68),g(12,"Note: Language change is a simulated feature."),v()(),m(13,"div",22)(14,"h4",23),g(15,"Time Format"),v(),m(16,"div",69)(17,"label",70)(18,"input",71),N("change",function(){S(t);let r=C();return T(r.systemPreferences.timeFormat.set("12h"))}),v(),m(19,"span"),g(20,"12-hour clock"),v()(),m(21,"label",70)(22,"input",72),N("change",function(){S(t);let r=C();return T(r.systemPreferences.timeFormat.set("24h"))}),v(),m(23,"span"),g(24,"24-hour clock"),v()()()()()}if(n&2){let t=C();w(8),J("ngModel",t.systemPreferences.language()),w(),X(t.languages),w(9),J("checked",t.systemPreferences.timeFormat()==="12h"),w(4),J("checked",t.systemPreferences.timeFormat()==="24h")}}function vJ(n,e){if(n&1){let t=B();m(0,"h3",20),g(1,"Input Devices"),v(),m(2,"div",21)(3,"div",22)(4,"h4",23),g(5,"Mouse Speed"),v(),m(6,"div",61)(7,"span",26),g(8,"Slow"),v(),m(9,"input",73),N("input",function(r){S(t);let o=C();return T(o.systemPreferences.mouseSpeed.set(+r.target.value))}),v(),m(10,"span",26),g(11,"Fast"),v()()(),m(12,"div",22)(13,"h4",23),g(14,"Scrolling Speed"),v(),m(15,"div",61)(16,"span",26),g(17,"Slow"),v(),m(18,"input",73),N("input",function(r){S(t);let o=C();return T(o.systemPreferences.scrollSpeed.set(+r.target.value))}),v(),m(19,"span",26),g(20,"Fast"),v()()(),m(21,"div",22)(22,"h4",23),g(23,"Primary Mouse Button"),v(),m(24,"div",69)(25,"label",70)(26,"input",74),N("change",function(){S(t);let r=C();return T(r.systemPreferences.primaryMouseButton.set("left"))}),v(),m(27,"span"),g(28,"Left"),v()(),m(29,"label",70)(30,"input",75),N("change",function(){S(t);let r=C();return T(r.systemPreferences.primaryMouseButton.set("right"))}),v(),m(31,"span"),g(32,"Right"),v()()()()()}if(n&2){let t=C();w(9),J("value",t.systemPreferences.mouseSpeed()),w(9),J("value",t.systemPreferences.scrollSpeed()),w(8),J("checked",t.systemPreferences.primaryMouseButton()==="left"),w(4),J("checked",t.systemPreferences.primaryMouseButton()==="right")}}function _J(n,e){if(n&1){let t=B();m(0,"h3",20),g(1,"Power"),v(),m(2,"div",22)(3,"h4",23),g(4,"Power Mode"),v(),m(5,"div",76)(6,"button",77),N("click",function(){S(t);let r=C();return T(r.systemPreferences.powerMode.set("power-saving"))}),O(7,"i",78),m(8,"span",79),g(9,"Power Saving"),v(),m(10,"p",80),g(11,"Reduces performance to save energy."),v()(),m(12,"button",77),N("click",function(){S(t);let r=C();return T(r.systemPreferences.powerMode.set("balanced"))}),O(13,"i",81),m(14,"span",79),g(15,"Balanced"),v(),m(16,"p",80),g(17,"Automatically balances performance and energy."),v()(),m(18,"button",77),N("click",function(){S(t);let r=C();return T(r.systemPreferences.powerMode.set("performance"))}),O(19,"i",82),m(20,"span",79),g(21,"Performance"),v(),m(22,"p",80),g(23,"Favors performance. May use more energy."),v()()()()}if(n&2){let t=C();w(6),Y("bg-blue-900/50",t.systemPreferences.powerMode()==="power-saving")("border-blue-500",t.systemPreferences.powerMode()==="power-saving")("bg-gray-700/50",t.systemPreferences.powerMode()!=="power-saving")("border-transparent",t.systemPreferences.powerMode()!=="power-saving"),w(6),Y("bg-blue-900/50",t.systemPreferences.powerMode()==="balanced")("border-blue-500",t.systemPreferences.powerMode()==="balanced")("bg-gray-700/50",t.systemPreferences.powerMode()!=="balanced")("border-transparent",t.systemPreferences.powerMode()!=="balanced"),w(6),Y("bg-blue-900/50",t.systemPreferences.powerMode()==="performance")("border-blue-500",t.systemPreferences.powerMode()==="performance")("bg-gray-700/50",t.systemPreferences.powerMode()!=="performance")("border-transparent",t.systemPreferences.powerMode()!=="performance")}}function wJ(n,e){if(n&1){let t=B();m(0,"p",85),g(1,"Your OS is protected by a password."),v(),m(2,"div",86)(3,"div")(4,"label",87),g(5,"Change Password"),v(),m(6,"div",88)(7,"input",89),N("ngModelChange",function(r){S(t);let o=C(2);return T(o.currentPassword.set(r))}),v(),m(8,"button",90),N("click",function(){S(t);let r=C(2);return T(r.toggleCurrentPasswordVisibility())}),O(9,"i",91),v()(),m(10,"div",88)(11,"input",92),N("ngModelChange",function(r){S(t);let o=C(2);return T(o.newPassword.set(r))}),v(),m(12,"button",90),N("click",function(){S(t);let r=C(2);return T(r.toggleNewPasswordVisibility())}),O(13,"i",91),v()(),m(14,"div",88)(15,"input",93),N("ngModelChange",function(r){S(t);let o=C(2);return T(o.confirmPassword.set(r))}),v(),m(16,"button",90),N("click",function(){S(t);let r=C(2);return T(r.toggleConfirmPasswordVisibility())}),O(17,"i",91),v()(),m(18,"button",94),N("click",function(){S(t);let r=C(2);return T(r.changePassword())}),g(19,"Change Password"),v()(),m(20,"div",95)(21,"p",28),g(22,"Or, you can remove password protection entirely."),v(),m(23,"button",96),N("click",function(){S(t);let r=C(2);return T(r.removePassword())}),g(24,"Remove Password"),v()()()}if(n&2){let t=C(2);w(7),J("type",t.isCurrentPasswordVisible()?"text":"password")("ngModel",t.currentPassword()),w(2),Y("fa-eye",!t.isCurrentPasswordVisible())("fa-eye-slash",t.isCurrentPasswordVisible()),w(2),J("type",t.isNewPasswordVisible()?"text":"password")("ngModel",t.newPassword()),w(2),Y("fa-eye",!t.isNewPasswordVisible())("fa-eye-slash",t.isNewPasswordVisible()),w(2),J("type",t.isConfirmPasswordVisible()?"text":"password")("ngModel",t.confirmPassword()),w(2),Y("fa-eye",!t.isConfirmPasswordVisible())("fa-eye-slash",t.isConfirmPasswordVisible())}}function CJ(n,e){if(n&1){let t=B();m(0,"p",85),g(1,"Set a password to protect your OS and enable screen lock."),v(),m(2,"div",86)(3,"div",97)(4,"input",92),N("ngModelChange",function(r){S(t);let o=C(2);return T(o.newPassword.set(r))}),v(),m(5,"button",90),N("click",function(){S(t);let r=C(2);return T(r.toggleNewPasswordVisibility())}),O(6,"i",91),v()(),m(7,"div",97)(8,"input",98),N("ngModelChange",function(r){S(t);let o=C(2);return T(o.confirmPassword.set(r))}),v(),m(9,"button",90),N("click",function(){S(t);let r=C(2);return T(r.toggleConfirmPasswordVisibility())}),O(10,"i",91),v()(),m(11,"button",94),N("click",function(){S(t);let r=C(2);return T(r.setPassword())}),g(12,"Set Password"),v()()}if(n&2){let t=C(2);w(4),J("type",t.isNewPasswordVisible()?"text":"password")("ngModel",t.newPassword()),w(2),Y("fa-eye",!t.isNewPasswordVisible())("fa-eye-slash",t.isNewPasswordVisible()),w(2),J("type",t.isConfirmPasswordVisible()?"text":"password")("ngModel",t.confirmPassword()),w(2),Y("fa-eye",!t.isConfirmPasswordVisible())("fa-eye-slash",t.isConfirmPasswordVisible())}}function EJ(n,e){if(n&1&&(m(0,"option",67),g(1),v()),n&2){let t=e.$implicit;J("value",t.value),w(),V(t.label)}}function xJ(n,e){n&1&&(m(0,"p",68),g(1,"A password must be set to enable screen lock."),v())}function bJ(n,e){if(n&1){let t=B();m(0,"h3",20),g(1,"Security"),v(),m(2,"div",21)(3,"div",22)(4,"h4",23),g(5,"Password"),v(),U(6,wJ,25,18)(7,CJ,13,12),v(),m(8,"div",22)(9,"h4",23),g(10,"Screen Lock"),v(),m(11,"p",28),g(12,"Automatically lock the screen after a period of inactivity."),v(),m(13,"select",83),N("ngModelChange",function(r){S(t);let o=C();return T(o.systemPreferences.screenLockTimeout.set(+r))}),Q(14,EJ,2,2,"option",67,sJ),v(),U(16,xJ,2,0,"p",68),m(17,"button",84),N("click",function(){S(t);let r=C();return T(r.lockNow())}),g(18," Lock Now "),v()(),m(19,"div",30)(20,"h4",31),g(21,"Clear Data"),v(),m(22,"p",28),g(23,"Permanently delete all application data, settings, and API keys from your browser. "),m(24,"span",32),g(25,"This is equivalent to a factory reset and will restart the OS."),v()(),m(26,"button",33),N("click",function(){S(t);let r=C();return T(r.requestClearData())}),g(27," Clear All Application Data "),v()()()}if(n&2){let t=C();w(6),$(t.isPasswordSet()?6:7),w(7),J("disabled",!t.isPasswordSet())("ngModel",t.systemPreferences.screenLockTimeout()),w(),X(t.lockTimeouts),w(2),$(t.isPasswordSet()?-1:16),w(),J("disabled",!t.isPasswordSet())}}function SJ(n,e){if(n&1&&(m(0,"span",106),g(1),v()),n&2){let t=C(2);w(),me("Key is set (",t.maskedGeminiApiKey(),")")}}function TJ(n,e){n&1&&(m(0,"span",107),g(1,"Not configured"),v())}function IJ(n,e){if(n&1&&(m(0,"span",106),g(1),v()),n&2){let t=C(2);w(),me("Key is set (",t.maskedOpenAiApiKey(),")")}}function DJ(n,e){n&1&&(m(0,"span",107),g(1,"Not configured"),v())}function AJ(n,e){if(n&1&&(m(0,"span",106),g(1),v()),n&2){let t=C(2);w(),me("Key is set (",t.maskedOpenWeatherApiKey(),")")}}function kJ(n,e){n&1&&(m(0,"span",107),g(1,"Not configured"),v())}function MJ(n,e){if(n&1){let t=B();m(0,"h3",20),g(1,"API Keys"),v(),m(2,"div",21)(3,"div",22)(4,"h4",23),g(5,"Google Gemini API"),v(),m(6,"p",85),g(7,"Provide your Google Gemini API key to enable AI features. Get a free key from "),m(8,"a",99),g(9,"Google AI Studio"),v(),g(10,"."),v(),m(11,"div",100)(12,"div",101)(13,"input",102),N("input",function(r){S(t);let o=C();return T(o.geminiApiKey.set(r.target.value))}),v(),m(14,"button",90),N("click",function(){S(t);let r=C();return T(r.isGeminiKeyVisible.set(!r.isGeminiKeyVisible()))}),O(15,"i",91),v()(),m(16,"button",103),N("click",function(){S(t);let r=C();return T(r.saveGeminiApiKey())}),O(17,"i",104),g(18,"Save"),v()(),m(19,"div",105)(20,"span"),g(21,"Status: "),v(),U(22,SJ,2,1,"span",106)(23,TJ,2,0,"span",107),v()(),m(24,"div",22)(25,"h4",23),g(26,"OpenAI API"),v(),m(27,"p",85),g(28,"Provide your OpenAI API key to use models like GPT-4. Get a key from the "),m(29,"a",108),g(30,"OpenAI Platform"),v(),g(31,"."),v(),m(32,"div",100)(33,"div",101)(34,"input",109),N("input",function(r){S(t);let o=C();return T(o.openAiApiKey.set(r.target.value))}),v(),m(35,"button",90),N("click",function(){S(t);let r=C();return T(r.isOpenAiKeyVisible.set(!r.isOpenAiKeyVisible()))}),O(36,"i",91),v()(),m(37,"button",103),N("click",function(){S(t);let r=C();return T(r.saveOpenAiApiKey())}),O(38,"i",104),g(39,"Save"),v()(),m(40,"div",105)(41,"span"),g(42,"Status: "),v(),U(43,IJ,2,1,"span",106)(44,DJ,2,0,"span",107),v()(),m(45,"div",22)(46,"h4",23),g(47,"OpenWeatherMap API"),v(),m(48,"p",85),g(49,"Provide your OpenWeatherMap API key to enable the Weather app. Get a free key from "),m(50,"a",110),g(51,"OpenWeatherMap"),v(),g(52,"."),v(),m(53,"div",100)(54,"div",101)(55,"input",111),N("input",function(r){S(t);let o=C();return T(o.openWeatherApiKey.set(r.target.value))}),v(),m(56,"button",90),N("click",function(){S(t);let r=C();return T(r.isOpenWeatherKeyVisible.set(!r.isOpenWeatherKeyVisible()))}),O(57,"i",91),v()(),m(58,"button",103),N("click",function(){S(t);let r=C();return T(r.saveOpenWeatherApiKey())}),O(59,"i",104),g(60,"Save"),v()(),m(61,"div",105)(62,"span"),g(63,"Status: "),v(),U(64,AJ,2,1,"span",106)(65,kJ,2,0,"span",107),v()()()}if(n&2){let t=C();w(13),J("type",t.isGeminiKeyVisible()?"text":"password")("value",t.geminiApiKey()),w(2),Y("fa-eye",!t.isGeminiKeyVisible())("fa-eye-slash",t.isGeminiKeyVisible()),w(7),$(t.apiKeyService.apiKey()?22:23),w(12),J("type",t.isOpenAiKeyVisible()?"text":"password")("value",t.openAiApiKey()),w(2),Y("fa-eye",!t.isOpenAiKeyVisible())("fa-eye-slash",t.isOpenAiKeyVisible()),w(7),$(t.apiKeyService.openAiApiKey()?43:44),w(12),J("type",t.isOpenWeatherKeyVisible()?"text":"password")("value",t.openWeatherApiKey()),w(2),Y("fa-eye",!t.isOpenWeatherKeyVisible())("fa-eye-slash",t.isOpenWeatherKeyVisible()),w(7),$(t.apiKeyService.openWeatherApiKey()?64:65)}}function NJ(n,e){n&1&&(m(0,"p",115),g(1),Ue(2,"date"),v()),n&2&&(w(),me("Last exported: ",et(2,1,e,"medium")))}function PJ(n,e){if(n&1){let t=B();m(0,"h3",20),g(1,"Data Management"),v(),m(2,"div",112)(3,"h4",23),g(4,"Export Encrypted Settings"),v(),m(5,"p",85),g(6,"Save your personalization settings to a file. Set a password to encrypt it."),v(),m(7,"div",69)(8,"input",113),N("input",function(r){S(t);let o=C();return T(o.exportPassword.set(r.target.value))}),v(),m(9,"button",103),N("click",function(){S(t);let r=C();return T(r.exportSettings())}),O(10,"i",114),g(11,"Export "),v()(),U(12,NJ,3,4,"p",115),v(),m(13,"div",22)(14,"h4",23),g(15,"Import Encrypted Settings"),v(),m(16,"p",85),g(17,"Load your personalization settings from a file. You will need the password used for encryption."),v(),m(18,"div",86)(19,"div")(20,"label",116),g(21,"Settings File"),v(),m(22,"input",117),N("change",function(r){S(t);let o=C();return T(o.handleFileSelect(r))}),v()(),m(23,"div")(24,"label",118),g(25,"Decryption Password"),v(),m(26,"input",119),N("input",function(r){S(t);let o=C();return T(o.importPassword.set(r.target.value))}),v()(),m(27,"button",120),N("click",function(){S(t);let r=C();return T(r.importSettings())}),O(28,"i",47),g(29,"Import & Apply "),v()()()}if(n&2){let t,i=C();w(8),J("value",i.exportPassword()),w(4),$((t=i.lastExportTime())?12:-1,t),w(14),J("value",i.importPassword())}}function RJ(n,e){if(n&1&&(m(0,"div",18),O(1,"i",121),m(2,"h3",122),g(3,"Banana OS"),v(),m(4,"p",26),g(5),v(),m(6,"p",123),g(7,"A fully functional web-based desktop environment simulator built with Angular."),v(),m(8,"div",124)(9,"p"),g(10),v(),m(11,"p",125),g(12,"Created with passion by a world-class AI engineer."),v()()()),n&2){let t=C();w(5),me("Version 1.0 (Build ",t.year,")"),w(5),me("\xA9 ",t.year," Banana OS Project. All rights reserved.")}}function FJ(n,e){if(n&1){let t=B();m(0,"div",19)(1,"div",126)(2,"h3",127),g(3,"Confirm Factory Reset"),v(),m(4,"p",128),g(5,"Are you sure you want to proceed? All custom settings and installed apps will be permanently deleted."),v(),m(6,"div",129)(7,"button",130),N("click",function(){S(t);let r=C();return T(r.cancelFactoryReset())}),g(8,"Cancel"),v(),m(9,"button",131),N("click",function(){S(t);let r=C();return T(r.confirmFactoryReset())}),g(10,"Confirm Reset"),v()()()()}}function LJ(n,e){if(n&1){let t=B();m(0,"div",19)(1,"div",126)(2,"h3",127),g(3,"Confirm Reset"),v(),m(4,"p",128),g(5,"Are you sure? This will reset all personalization settings (like wallpaper, sounds, etc.) to their defaults."),v(),m(6,"div",129)(7,"button",130),N("click",function(){S(t);let r=C();return T(r.cancelResetAccount())}),g(8,"Cancel"),v(),m(9,"button",132),N("click",function(){S(t);let r=C();return T(r.confirmResetAccount())}),g(10,"Confirm Reset"),v()()()()}}function OJ(n,e){if(n&1){let t=B();m(0,"div",19)(1,"div",126)(2,"h3",133),g(3,"Confirm Clear All Data"),v(),m(4,"p",128),g(5,"This is a highly destructive action and will remove ALL data for Banana OS from this browser, including API keys, installed apps, and settings. The OS will restart."),v(),m(6,"div",129)(7,"button",130),N("click",function(){S(t);let r=C();return T(r.cancelClearData())}),g(8,"Cancel"),v(),m(9,"button",131),N("click",function(){S(t);let r=C();return T(r.confirmClearData())}),g(10,"Yes, Clear Everything"),v()()()()}}var Rc=class Rc{constructor(){this.settingsService=F(rs);this.notificationService=F(vt);this.apiKeyService=F(zn);this.osInteraction=F(dt);this.systemPreferences=F(ss);this.authService=F(_c);this.lockScreenService=F(wc);this.ipService=F(Ic);this.activeTab=I("security");this.isPasswordSet=this.authService.isPasswordSet;this.wallpapers=[{id:"wallpaper-default",name:"Default"},{id:"wallpaper-aurora",name:"Aurora"},{id:"wallpaper-sunset",name:"Sunset"},{id:"wallpaper-galaxy",name:"Galaxy"}];this.accentColors=["blue","green","red","purple","yellow","pink"];this.exportPassword=I("");this.importPassword=I("");this.importFile=I(null);this.lastExportTime=I(null);this.customWallpaperPreview=I(null);this.geminiApiKey=I(this.apiKeyService.apiKey()||"");this.isGeminiKeyVisible=I(!1);this.maskedGeminiApiKey=le(()=>this.maskKey(this.apiKeyService.apiKey()));this.openAiApiKey=I(this.apiKeyService.openAiApiKey()||"");this.isOpenAiKeyVisible=I(!1);this.maskedOpenAiApiKey=le(()=>this.maskKey(this.apiKeyService.openAiApiKey()));this.openWeatherApiKey=I(this.apiKeyService.openWeatherApiKey()||"");this.isOpenWeatherKeyVisible=I(!1);this.maskedOpenWeatherApiKey=le(()=>this.maskKey(this.apiKeyService.openWeatherApiKey()));this.ipAddress=I("Loading...");this.macAddress=I("N/A");this.deviceModel=I("N/A");this.year=new Date().getFullYear();this.isFactoryResetConfirmOpen=I(!1);this.isResetAccountConfirmOpen=I(!1);this.isClearDataConfirmOpen=I(!1);this.lockTimeouts=[{value:1,label:"1 Minute"},{value:5,label:"5 Minutes"},{value:15,label:"15 Minutes"},{value:30,label:"30 Minutes"},{value:0,label:"Never"}];this.languages=[{id:"en-US",name:"English (US)"},{id:"bn-BD",name:"\u09AC\u09BE\u0982\u09B2\u09BE (Bengali)"},{id:"es-ES",name:"Espa\xF1ol (Spanish)"},{id:"fr-FR",name:"Fran\xE7ais (French)"},{id:"de-DE",name:"Deutsch (German)"},{id:"zh-CN",name:"\u4E2D\u6587 (Chinese)"},{id:"hi-IN",name:"\u0939\u093F\u0928\u094D\u0926\u0940 (Hindi)"}];this.currentPassword=I("");this.newPassword=I("");this.confirmPassword=I("");this.isCurrentPasswordVisible=I(!1);this.isNewPasswordVisible=I(!1);this.isConfirmPasswordVisible=I(!1)}ngOnInit(){this.ipService.getPublicIp().subscribe({next:t=>this.ipAddress.set(t),error:()=>this.ipAddress.set("Unavailable")}),this.macAddress.set(this.generateMacAddress()),this.deviceModel.set(this.getDeviceModel());let e=localStorage.getItem("banana-os-last-export-time");e&&this.lastExportTime.set(parseInt(e,10))}getDeviceModel(){let e=navigator.userAgent;return/(tablet|ipad|playbook|silk)|(android(?!.*mobi))/i.test(e)?"Tablet":/Mobile|iP(hone|od)|Android|BlackBerry|IEMobile|Kindle|Silk-Accelerated|(hpw|web)OS|Opera M(obi|ini)/.test(e)?"Mobile Phone":"Desktop Computer"}generateMacAddress(){return"00:1A:2B:"+Array(3).fill(0).map(()=>Math.floor(Math.random()*256).toString(16).padStart(2,"0").toUpperCase()).join(":")}maskKey(e){return e?`${e.substring(0,4)}...${e.substring(e.length-4)}`:""}handleFileSelect(e){let i=e.currentTarget.files;i&&i.length>0&&this.importFile.set(i[0])}async exportSettings(){let e=this.exportPassword();if(!e){this.showNotification("error","Please set a password for encryption.");return}try{let t=crypto.getRandomValues(new Uint8Array(16)),i=crypto.getRandomValues(new Uint8Array(12)),r=await this.getKey(e,t),o={wallpaper:this.settingsService.wallpaper(),accentColor:this.settingsService.accentColor()},s=new TextEncoder().encode(JSON.stringify(o)),a=await crypto.subtle.encrypt({name:"AES-GCM",iv:i},r,s),l={salt:this.arrayBufferToBase64(t),iv:this.arrayBufferToBase64(i),ciphertext:this.arrayBufferToBase64(a)},c=new Blob([JSON.stringify(l,null,2)],{type:"application/json"}),d=URL.createObjectURL(c),p=document.createElement("a");p.href=d,p.download="banana-os-settings.json",document.body.appendChild(p),p.click(),document.body.removeChild(p),URL.revokeObjectURL(d);let h=Date.now();localStorage.setItem("banana-os-last-export-time",h.toString()),this.lastExportTime.set(h),this.showNotification("success","Settings exported successfully."),this.exportPassword.set("")}catch(t){console.error("Export error:",t),this.showNotification("error","Failed to encrypt and export settings.")}}importSettings(){let e=this.importFile(),t=this.importPassword();if(!e){this.showNotification("error","Please select a file to import.");return}if(!t){this.showNotification("error","Please enter the password for decryption.");return}let i=new FileReader;i.onload=async r=>{try{let o=r.target?.result,s=JSON.parse(o);if(!s.salt||!s.iv||!s.ciphertext)throw new Error("Invalid file format.");let a=this.base64ToArrayBuffer(s.salt),l=this.base64ToArrayBuffer(s.iv),c=this.base64ToArrayBuffer(s.ciphertext),d=await this.getKey(t,new Uint8Array(a)),p=await crypto.subtle.decrypt({name:"AES-GCM",iv:l},d,c),h=new TextDecoder().decode(p),y=JSON.parse(h);if(y&&y.wallpaper&&y.accentColor)if((this.wallpapers.some(E=>E.id===y.wallpaper)||y.wallpaper.startsWith("data:image"))&&this.accentColors.includes(y.accentColor)){this.settingsService.setWallpaper(y.wallpaper),this.settingsService.setAccentColor(y.accentColor),this.showNotification("success","Settings imported successfully!"),this.importPassword.set(""),this.importFile.set(null);let E=document.getElementById("import-file-input");E&&(E.value="")}else this.showNotification("error","Imported settings data is invalid.");else this.showNotification("error","Invalid or corrupted settings file.")}catch(o){console.error("Import error:",o),this.showNotification("error","Failed to decrypt. Check password or file integrity.")}},i.onerror=()=>{this.showNotification("error","Error reading the selected file.")},i.readAsText(e)}showNotification(e,t){this.notificationService.show({appId:"settings",title:"Settings",body:t,type:e})}onWallpaperFileSelected(e){let t=e.target;if(t.files&&t.files[0]){let i=t.files[0],r=new FileReader;r.onload=o=>this.customWallpaperPreview.set(o.target?.result),r.readAsDataURL(i)}}setCustomWallpaper(){let e=this.customWallpaperPreview();e&&(this.settingsService.setWallpaper(e),this.showNotification("success","Wallpaper updated!"))}async saveGeminiApiKey(){await this.apiKeyService.setApiKey(this.geminiApiKey()),this.showNotification(this.geminiApiKey()?"success":"info","Gemini API key "+(this.geminiApiKey()?"saved.":"removed."))}async saveOpenAiApiKey(){await this.apiKeyService.setOpenAiApiKey(this.openAiApiKey()),this.showNotification(this.openAiApiKey()?"success":"info","OpenAI API key "+(this.openAiApiKey()?"saved.":"removed."))}async saveOpenWeatherApiKey(){await this.apiKeyService.setOpenWeatherApiKey(this.openWeatherApiKey()),this.showNotification(this.openWeatherApiKey()?"success":"info","OpenWeatherMap API key "+(this.openWeatherApiKey()?"saved.":"removed."))}getKey(e,t){let i=new TextEncoder;return crypto.subtle.importKey("raw",i.encode(e),"PBKDF2",!1,["deriveKey"]).then(r=>crypto.subtle.deriveKey({name:"PBKDF2",salt:t,iterations:1e5,hash:"SHA-256"},r,{name:"AES-GCM",length:256},!0,["encrypt","decrypt"]))}arrayBufferToBase64(e){let t="",i=new Uint8Array(e),r=i.byteLength;for(let o=0;o<r;o++)t+=String.fromCharCode(i[o]);return btoa(t)}base64ToArrayBuffer(e){let t=atob(e),i=t.length,r=new Uint8Array(i);for(let o=0;o<i;o++)r[o]=t.charCodeAt(o);return r.buffer}requestFactoryReset(){this.isFactoryResetConfirmOpen.set(!0)}cancelFactoryReset(){this.isFactoryResetConfirmOpen.set(!1)}confirmFactoryReset(){this.osInteraction.factoryResetRequest.next(),this.isFactoryResetConfirmOpen.set(!1),this.showNotification("warning","Factory reset initiated.")}requestResetAccount(){this.isResetAccountConfirmOpen.set(!0)}cancelResetAccount(){this.isResetAccountConfirmOpen.set(!1)}confirmResetAccount(){this.settingsService.resetToDefaults(),this.systemPreferences.resetAllToDefaults(),this.isResetAccountConfirmOpen.set(!1),this.showNotification("success","Personalization settings have been reset.")}requestClearData(){this.isClearDataConfirmOpen.set(!0)}cancelClearData(){this.isClearDataConfirmOpen.set(!1)}confirmClearData(){let e=["banana-os-crypto-key"],t=[];for(let i=0;i<localStorage.length;i++){let r=localStorage.key(i);r&&!e.includes(r)&&t.push(r)}t.forEach(i=>localStorage.removeItem(i)),this.isClearDataConfirmOpen.set(!1),this.showNotification("warning","All application data cleared. Restarting OS..."),setTimeout(()=>window.location.reload(),1500)}toggleCurrentPasswordVisibility(){this.isCurrentPasswordVisible.update(e=>!e)}toggleNewPasswordVisibility(){this.isNewPasswordVisible.update(e=>!e)}toggleConfirmPasswordVisibility(){this.isConfirmPasswordVisible.update(e=>!e)}async setPassword(){if(!this.newPassword()){this.showNotification("error","New password cannot be empty.");return}if(this.newPassword()!==this.confirmPassword()){this.showNotification("error","Passwords do not match.");return}await this.authService.setPassword(this.newPassword()),this.showNotification("success","Password has been set."),this.clearPasswordFields()}async changePassword(){if(!await this.authService.verifyPassword(this.currentPassword())){this.showNotification("error","Current password is incorrect.");return}if(!this.newPassword()){this.showNotification("error","New password cannot be empty.");return}if(this.newPassword()!==this.confirmPassword()){this.showNotification("error","New passwords do not match.");return}await this.authService.setPassword(this.newPassword()),this.showNotification("success","Password has been changed."),this.clearPasswordFields()}async removePassword(){if(!await this.authService.verifyPassword(this.currentPassword())){this.showNotification("error","Password is incorrect.");return}this.authService.removePassword(),this.showNotification("success","Password has been removed."),this.clearPasswordFields()}clearPasswordFields(){this.currentPassword.set(""),this.newPassword.set(""),this.confirmPassword.set("")}lockNow(){this.lockScreenService.lockNow()}};Rc.\u0275fac=function(t){return new(t||Rc)},Rc.\u0275cmp=ee({type:Rc,selectors:[["app-settings"]],decls:75,vars:26,consts:[["fileInput",""],[1,"h-full","flex","bg-gray-900/80","backdrop-blur-sm","text-gray-200"],[1,"w-52","bg-gray-900/50","p-2","flex-shrink-0","overflow-y-auto"],[1,"text-lg","font-bold","p-2","mb-2"],[1,"space-y-1"],[1,"w-full","text-left","p-2","rounded","hover:bg-gray-700","transition-colors","flex","items-center","gap-3",3,"click"],[1,"fas","fa-desktop","w-4","text-center"],[1,"fas","fa-palette","w-4","text-center"],[1,"fas","fa-bell","w-4","text-center"],[1,"fas","fa-volume-up","w-4","text-center"],[1,"fas","fa-language","w-4","text-center"],[1,"fas","fa-mouse-pointer","w-4","text-center"],[1,"fas","fa-bolt","w-4","text-center"],[1,"fas","fa-shield-alt","w-4","text-center"],[1,"fas","fa-key","w-4","text-center"],[1,"fas","fa-database","w-4","text-center"],[1,"fas","fa-info-circle","w-4","text-center"],[1,"flex-1","p-6","overflow-y-auto","relative"],[1,"flex","flex-col","items-center","justify-center","h-full","text-center"],[1,"absolute","inset-0","bg-black/60","backdrop-blur-sm","flex","items-center","justify-center","z-50"],[1,"text-2xl","font-bold","mb-6"],[1,"space-y-6"],[1,"p-4","bg-gray-800/50","rounded-lg"],[1,"text-lg","font-semibold","mb-3"],[1,"space-y-2","text-sm"],[1,"flex","justify-between"],[1,"text-gray-400"],[1,"font-mono"],[1,"text-sm","text-gray-400","mb-2"],[1,"bg-yellow-600","hover:bg-yellow-500","text-white","font-semibold","px-4","py-2","rounded-md","transition-opacity",3,"click"],[1,"p-4","bg-red-900/30","border","border-red-500/50","rounded-lg"],[1,"text-lg","font-semibold","mb-3","text-red-300"],[1,"font-bold"],[1,"bg-red-600","hover:bg-red-500","text-white","font-semibold","px-4","py-2","rounded-md","transition-opacity",3,"click"],[1,"mb-8"],[1,"flex","flex-wrap","gap-3"],[1,"w-10","h-10","rounded-full","ring-offset-2","ring-offset-gray-800","transition-all",3,"ring-2","background-color"],[1,"grid","grid-cols-2","md:grid-cols-3","gap-4"],[1,"aspect-video","rounded-md","cursor-pointer","ring-offset-2","ring-offset-gray-800","accent-ring-focus","overflow-hidden",3,"ring-2","class"],[1,"pt-6","border-t","border-gray-700"],[1,"bg-gray-800/50","p-4","rounded-lg","flex","items-start","gap-4"],["alt","Wallpaper Preview",1,"w-32","h-20","object-cover","rounded",3,"src"],[1,"w-32","h-20","bg-gray-700","rounded","flex","items-center","justify-center"],[1,"flex-1"],["type","file","accept","image/*",1,"hidden",3,"change"],[1,"flex","gap-2"],[1,"bg-gray-600","hover:bg-gray-500","text-white","font-semibold","px-4","py-2","rounded-md","transition-opacity","text-sm",3,"click"],[1,"fas","fa-upload","mr-2"],[1,"accent-bg","text-white","font-semibold","px-4","py-2","rounded-md","hover:opacity-90","transition-opacity","text-sm"],[1,"w-10","h-10","rounded-full","ring-offset-2","ring-offset-gray-800","transition-all",3,"click"],[1,"aspect-video","rounded-md","cursor-pointer","ring-offset-2","ring-offset-gray-800","accent-ring-focus","overflow-hidden",3,"click"],[1,"h-full","w-full","flex","items-end","p-2","bg-black/20"],[1,"text-white","font-semibold","text-sm"],[1,"fas","fa-image","text-3xl","text-gray-500"],[1,"accent-bg","text-white","font-semibold","px-4","py-2","rounded-md","hover:opacity-90","transition-opacity","text-sm",3,"click"],[1,"flex","items-center","justify-between"],[1,"text-lg","font-semibold"],[1,"text-sm","text-gray-400"],[1,"relative","inline-flex","items-center","cursor-pointer"],["type","checkbox",1,"sr-only","peer",3,"change","checked"],[1,"w-11","h-6","bg-gray-600","rounded-full","peer","peer-focus:ring-2","accent-ring-focus","peer-checked:after:translate-x-full","peer-checked:after:border-white","after:content-['']","after:absolute","after:top-0.5","after:left-[2px]","after:bg-white","after:border-gray-300","after:border","after:rounded-full","after:h-5","after:w-5","after:transition-all","peer-checked:accent-bg"],[1,"flex","items-center","gap-4"],[1,"fas","fa-volume-down","text-gray-400"],["type","range","min","0","max","100",1,"w-full","h-2","bg-gray-700","rounded-lg","appearance-none","cursor-pointer","accent-bg",3,"input","value"],[1,"fas","fa-volume-up","text-gray-400"],[1,"font-mono","w-8","text-right"],[1,"w-full","bg-gray-700","border","border-gray-600","rounded-md","px-3","py-2","focus:outline-none","focus:ring-2","accent-ring-focus",3,"ngModelChange","ngModel"],[3,"value"],[1,"text-xs","text-yellow-400","mt-2"],[1,"flex","gap-4"],[1,"flex","items-center","gap-2","cursor-pointer"],["type","radio","name","time-format","value","12h",1,"accent-bg",3,"change","checked"],["type","radio","name","time-format","value","24h",1,"accent-bg",3,"change","checked"],["type","range","min","1","max","100",1,"w-full","h-2","bg-gray-700","rounded-lg","appearance-none","cursor-pointer","accent-bg",3,"input","value"],["type","radio","name","mouse-button","value","left",1,"accent-bg",3,"change","checked"],["type","radio","name","mouse-button","value","right",1,"accent-bg",3,"change","checked"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-4"],[1,"p-4","rounded-lg","text-center","border-2","hover:border-gray-500","transition-all","flex","flex-col","items-center",3,"click"],[1,"fas","fa-leaf","text-2xl","mb-2"],[1,"font-semibold"],[1,"text-xs","text-gray-400","mt-1"],[1,"fas","fa-balance-scale","text-2xl","mb-2"],[1,"fas","fa-rocket","text-2xl","mb-2"],[1,"w-full","md:w-1/2","bg-gray-700","border","border-gray-600","rounded-md","px-3","py-2","focus:outline-none","focus:ring-2","accent-ring-focus","disabled:opacity-50","disabled:cursor-not-allowed",3,"ngModelChange","disabled","ngModel"],[1,"mt-4","bg-gray-600","hover:bg-gray-500","text-white","font-semibold","px-4","py-2","rounded-md","transition-opacity","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],[1,"text-sm","text-gray-400","mb-4"],[1,"space-y-4"],[1,"block","text-sm","font-medium","text-gray-300","mb-1"],[1,"relative","mb-2"],["placeholder","Current Password",1,"w-full","bg-gray-700","border","border-gray-600","rounded-md","px-3","py-2","focus:outline-none","focus:ring-2","accent-ring-focus","pr-10",3,"ngModelChange","type","ngModel"],[1,"absolute","inset-y-0","right-0","px-3","text-gray-400","hover:text-white",3,"click"],[1,"fas"],["placeholder","New Password",1,"w-full","bg-gray-700","border","border-gray-600","rounded-md","px-3","py-2","focus:outline-none","focus:ring-2","accent-ring-focus","pr-10",3,"ngModelChange","type","ngModel"],["placeholder","Confirm New Password",1,"w-full","bg-gray-700","border","border-gray-600","rounded-md","px-3","py-2","focus:outline-none","focus:ring-2","accent-ring-focus","pr-10",3,"ngModelChange","type","ngModel"],[1,"w-full","accent-bg","text-white","font-semibold","px-4","py-2","rounded-md","hover:opacity-90","transition-opacity",3,"click"],[1,"pt-4","border-t","border-gray-700"],[1,"w-full","bg-red-600","hover:bg-red-500","text-white","font-semibold","px-4","py-2","rounded-md","transition-opacity",3,"click"],[1,"relative"],["placeholder","Confirm Password",1,"w-full","bg-gray-700","border","border-gray-600","rounded-md","px-3","py-2","focus:outline-none","focus:ring-2","accent-ring-focus","pr-10",3,"ngModelChange","type","ngModel"],["href","https://aistudio.google.com/app/apikey","target","_blank",1,"text-blue-400","hover:underline"],[1,"flex","gap-2","mb-2"],[1,"relative","flex-grow"],["placeholder","Enter your Gemini API key...",1,"w-full","bg-gray-700","border","border-gray-600","rounded-md","px-3","py-2","focus:outline-none","focus:ring-2","accent-ring-focus","pr-10",3,"input","type","value"],[1,"accent-bg","text-white","font-semibold","px-4","py-2","rounded-md","hover:opacity-90","transition-opacity",3,"click"],[1,"fas","fa-save","mr-2"],[1,"text-xs","text-gray-500"],[1,"text-green-400"],[1,"text-yellow-400"],["href","https://platform.openai.com/api-keys","target","_blank",1,"text-blue-400","hover:underline"],["placeholder","Enter your OpenAI API key...",1,"w-full","bg-gray-700","border","border-gray-600","rounded-md","px-3","py-2","focus:outline-none","focus:ring-2","accent-ring-focus","pr-10",3,"input","type","value"],["href","https://home.openweathermap.org/api_keys","target","_blank",1,"text-blue-400","hover:underline"],["placeholder","Enter your OpenWeatherMap API key...",1,"w-full","bg-gray-700","border","border-gray-600","rounded-md","px-3","py-2","focus:outline-none","focus:ring-2","accent-ring-focus","pr-10",3,"input","type","value"],[1,"mb-8","p-4","bg-gray-800/50","rounded-lg"],["type","password","placeholder","Enter password...",1,"flex-1","bg-gray-700","border","border-gray-600","rounded-md","px-3","py-2","focus:outline-none","focus:ring-2","accent-ring-focus",3,"input","value"],[1,"fas","fa-download","mr-2"],[1,"text-xs","text-gray-500","mt-2"],["for","import-file-input",1,"block","text-sm","font-medium","text-gray-300","mb-1"],["id","import-file-input","type","file","accept",".json",1,"w-full","text-sm","text-gray-400","file:mr-4","file:py-2","file:px-4","file:rounded-md","file:border-0","file:text-sm","file:font-semibold","file:accent-bg","file:text-white","hover:file:opacity-90",3,"change"],["for","import-password",1,"block","text-sm","font-medium","text-gray-300","mb-1"],["id","import-password","type","password","placeholder","Enter password...",1,"w-full","bg-gray-700","border","border-gray-600","rounded-md","px-3","py-2","focus:outline-none","focus:ring-2","accent-ring-focus",3,"input","value"],[1,"accent-bg","text-white","font-semibold","px-4","py-2","rounded-md","hover:opacity-90","transition-opacity","w-full",3,"click"],[1,"fas","fa-lemon","text-7xl","accent-text","mb-4"],[1,"text-3xl","font-bold","mb-2"],[1,"mt-4","max-w-md"],[1,"mt-8","text-xs","text-gray-500"],[1,"mt-2"],[1,"bg-gray-800","rounded-lg","shadow-2xl","p-6","w-96","border","border-gray-700"],[1,"text-xl","font-bold","mb-2"],[1,"text-gray-400","mb-6"],[1,"flex","justify-end","gap-4"],[1,"px-4","py-2","bg-gray-600","hover:bg-gray-500","rounded-md",3,"click"],[1,"px-4","py-2","bg-red-600","hover:bg-red-500","rounded-md",3,"click"],[1,"px-4","py-2","bg-yellow-600","hover:bg-yellow-500","rounded-md",3,"click"],[1,"text-xl","font-bold","mb-2","text-red-400"]],template:function(t,i){if(t&1&&(m(0,"div",1)(1,"div",2)(2,"h2",3),g(3,"Settings"),v(),m(4,"ul",4)(5,"li")(6,"button",5),N("click",function(){return i.activeTab.set("system")}),O(7,"i",6),m(8,"span"),g(9,"System"),v()()(),m(10,"li")(11,"button",5),N("click",function(){return i.activeTab.set("personalization")}),O(12,"i",7),m(13,"span"),g(14,"Personalization"),v()()(),m(15,"li")(16,"button",5),N("click",function(){return i.activeTab.set("notifications")}),O(17,"i",8),m(18,"span"),g(19,"Notifications"),v()()(),m(20,"li")(21,"button",5),N("click",function(){return i.activeTab.set("sound")}),O(22,"i",9),m(23,"span"),g(24,"Sound"),v()()(),m(25,"li")(26,"button",5),N("click",function(){return i.activeTab.set("language")}),O(27,"i",10),m(28,"span"),g(29,"Language & Region"),v()()(),m(30,"li")(31,"button",5),N("click",function(){return i.activeTab.set("input")}),O(32,"i",11),m(33,"span"),g(34,"Input Devices"),v()()(),m(35,"li")(36,"button",5),N("click",function(){return i.activeTab.set("power")}),O(37,"i",12),m(38,"span"),g(39,"Power"),v()()(),m(40,"li")(41,"button",5),N("click",function(){return i.activeTab.set("security")}),O(42,"i",13),m(43,"span"),g(44,"Security"),v()()(),m(45,"li")(46,"button",5),N("click",function(){return i.activeTab.set("api-keys")}),O(47,"i",14),m(48,"span"),g(49,"API Keys"),v()()(),m(50,"li")(51,"button",5),N("click",function(){return i.activeTab.set("data")}),O(52,"i",15),m(53,"span"),g(54,"Data Management"),v()()(),m(55,"li")(56,"button",5),N("click",function(){return i.activeTab.set("about")}),O(57,"i",16),m(58,"span"),g(59,"About"),v()()()()(),m(60,"div",17),U(61,aJ,44,3)(62,pJ,30,2)(63,hJ,12,1)(64,mJ,22,3)(65,yJ,25,3)(66,vJ,33,4)(67,_J,24,24)(68,bJ,28,5)(69,MJ,66,21)(70,PJ,30,3)(71,RJ,13,2,"div",18),U(72,FJ,11,0,"div",19),U(73,LJ,11,0,"div",19),U(74,OJ,11,0,"div",19),v()()),t&2){let r;w(6),Y("bg-gray-700",i.activeTab()==="system"),w(5),Y("bg-gray-700",i.activeTab()==="personalization"),w(5),Y("bg-gray-700",i.activeTab()==="notifications"),w(5),Y("bg-gray-700",i.activeTab()==="sound"),w(5),Y("bg-gray-700",i.activeTab()==="language"),w(5),Y("bg-gray-700",i.activeTab()==="input"),w(5),Y("bg-gray-700",i.activeTab()==="power"),w(5),Y("bg-gray-700",i.activeTab()==="security"),w(5),Y("bg-gray-700",i.activeTab()==="api-keys"),w(5),Y("bg-gray-700",i.activeTab()==="data"),w(5),Y("bg-gray-700",i.activeTab()==="about"),w(5),$((r=i.activeTab())==="system"?61:r==="personalization"?62:r==="notifications"?63:r==="sound"?64:r==="language"?65:r==="input"?66:r==="power"?67:r==="security"?68:r==="api-keys"?69:r==="data"?70:r==="about"?71:-1),w(11),$(i.isFactoryResetConfirmOpen()?72:-1),w(),$(i.isResetAccountConfirmOpen()?73:-1),w(),$(i.isClearDataConfirmOpen()?74:-1)}},dependencies:[te,At,Nc,Pc,_t,us,Dt,xt,sn],encapsulation:2,changeDetection:0});var T0=Rc;var Fc=class Fc{constructor(){this.elementRef=F(Bn);this.context=F(yn,{optional:!0});this.browserScript=`
function initBrowser(windowElement, initialUrl) {
    console.log('Enhanced Browser Initialized');
    
    let iframe = windowElement.querySelector('#browser-iframe');
    let urlInput = windowElement.querySelector('#url-input');
    
    let backBtn = windowElement.querySelector('#browser-back');
    let forwardBtn = windowElement.querySelector('#browser-forward');
    let reloadBtn = windowElement.querySelector('#browser-reload');
    let goBtn = windowElement.querySelector('#browser-go');
    
    let homeBtn, bookmarkBtn, historyBtn, downloadBtn, menuBtn, newTabBtn, closeTabBtn, tabsContainer, progressBar, statusDiv;

    let tabs = [];
    let currentTabIndex = 0;
    let bookmarks = JSON.parse(localStorage.getItem('browser-bookmarks') || '[]');
    let history = JSON.parse(localStorage.getItem('browser-history') || '[]');
    let downloads = JSON.parse(localStorage.getItem('browser-downloads') || '[]');
    
    initBrowserUI();
    createNewTab(initialUrl || 'https://www.google.com', 'Google');

    if (backBtn) backBtn.addEventListener('click', goBack);
    if (forwardBtn) forwardBtn.addEventListener('click', goForward);
    if (reloadBtn) reloadBtn.addEventListener('click', reload);
    if (goBtn) goBtn.addEventListener('click', navigate);
    if (urlInput) {
        urlInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') navigate();
        });
    }

    function initBrowserUI() {
        const browserControls = windowElement.querySelector('#browser-controls');
        
        if (browserControls) {
            const enhancedControlsHTML = \`
                <div class="flex items-center space-x-1">
                    <button id="browser-home" class="p-2 hover:bg-gray-600 rounded" title="Home"><i class="fas fa-home"></i></button>
                    <button id="browser-bookmark" class="p-2 hover:bg-gray-600 rounded" title="Bookmark"><i class="far fa-bookmark"></i></button>
                    <button id="browser-history" class="p-2 hover:bg-gray-600 rounded" title="History"><i class="fas fa-history"></i></button>
                    <button id="browser-download" class="p-2 hover:bg-gray-600 rounded" title="Downloads"><i class="fas fa-download"></i></button>
                    <button id="browser-menu" class="p-2 hover:bg-gray-600 rounded" title="Menu"><i class="fas fa-ellipsis-v"></i></button>
                </div>
            \`;
            browserControls.insertAdjacentHTML('beforeend', enhancedControlsHTML);
            
            homeBtn = windowElement.querySelector('#browser-home');
            bookmarkBtn = windowElement.querySelector('#browser-bookmark');
            historyBtn = windowElement.querySelector('#browser-history');
            downloadBtn = windowElement.querySelector('#browser-download');
            menuBtn = windowElement.querySelector('#browser-menu');
            
            if (homeBtn) homeBtn.addEventListener('click', goHome);
            if (bookmarkBtn) bookmarkBtn.addEventListener('click', toggleBookmark);
            if (historyBtn) historyBtn.addEventListener('click', showHistory);
            if (downloadBtn) downloadBtn.addEventListener('click', showDownloads);
            if (menuBtn) menuBtn.addEventListener('click', showBrowserMenu);
        }
        
        const contentArea = windowElement.querySelector('.browser-content-area');
        if (contentArea) {
            const tabsHTML = \`
                <div class="flex items-center bg-gray-900 px-2 py-1 border-b border-gray-700">
                    <div id="browser-tabs" class="flex-1 flex overflow-x-auto"></div>
                    <button id="browser-new-tab" class="p-1 ml-1 hover:bg-gray-700 rounded" title="New Tab"><i class="fas fa-plus"></i></button>
                </div>
                <div id="browser-progress" class="h-1 bg-blue-500 w-0 transition-all duration-300"></div>
                <div id="browser-status" class="text-xs px-2 py-1 bg-gray-800 hidden"></div>
            \`;
            contentArea.insertAdjacentHTML('beforebegin', tabsHTML);
            
            tabsContainer = windowElement.querySelector('#browser-tabs');
            progressBar = windowElement.querySelector('#browser-progress');
            statusDiv = windowElement.querySelector('#browser-status');
            newTabBtn = windowElement.querySelector('#browser-new-tab');
            
            if (newTabBtn) newTabBtn.addEventListener('click', () => createNewTab('https://www.google.com', 'New Tab'));
        }
    }

    function createNewTab(url, title = 'New Tab') {
        if (!tabsContainer) return null;
        const tabId = 'tab-' + Date.now();
        const tab = { id: tabId, url: url, title: title, favicon: '\u{1F310}', history: [], historyIndex: -1 };
        tabs.push(tab);
        currentTabIndex = tabs.length - 1;

        const tabElement = document.createElement('div');
        tabElement.className = 'flex items-center bg-gray-700 px-3 py-1 mx-1 rounded-t cursor-pointer border-b-2 border-transparent';
        tabElement.innerHTML = \`
            <span class="favicon mr-2">\${tab.favicon}</span>
            <span class="title text-sm truncate max-w-24">\${tab.title}</span>
            <button class="tab-close ml-2 hover:bg-gray-600 rounded-full w-4 h-4 flex items-center justify-center text-xs"><i class="fas fa-times"></i></button>
        \`;
        tabElement.querySelector('.tab-close').addEventListener('click', (e) => { e.stopPropagation(); closeTab(tabId); });
        tabElement.addEventListener('click', () => switchTab(tabId));
        
        tabsContainer.appendChild(tabElement);
        updateTabDisplay();
        loadUrl(url);
        return tabId;
    }

    function switchTab(tabId) {
        const tabIndex = tabs.findIndex(t => t.id === tabId);
        if (tabIndex !== -1) {
            currentTabIndex = tabIndex;
            updateTabDisplay();
            loadUrl(tabs[currentTabIndex].url);
        }
    }

    function closeTab(tabId) {
        if (tabs.length <= 1) { 
            createNewTab('https://www.google.com');
            const oldTab = tabs.find(t => t.id === tabId);
            const oldTabIndex = tabs.indexOf(oldTab);
            if(oldTabIndex > -1) {
              tabs.splice(oldTabIndex, 1);
              if (tabsContainer.children[oldTabIndex]) tabsContainer.children[oldTabIndex].remove();
            }
            return;
        }
        const tabIndex = tabs.findIndex(t => t.id === tabId);
        if (tabIndex !== -1) {
            tabs.splice(tabIndex, 1);
            if (tabsContainer.children[tabIndex]) tabsContainer.children[tabIndex].remove();
            if (currentTabIndex >= tabIndex) currentTabIndex = Math.max(0, currentTabIndex - 1);
            updateTabDisplay();
            if (tabs[currentTabIndex]) loadUrl(tabs[currentTabIndex].url);
        }
    }

    function updateTabDisplay() {
        if (!tabsContainer) return;
        const tabElements = Array.from(tabsContainer.children);
        tabElements.forEach((tabEl, index) => {
            if (index === currentTabIndex) {
                tabEl.classList.add('bg-gray-800', 'border-blue-500');
                tabEl.classList.remove('bg-gray-700', 'border-transparent');
            } else {
                tabEl.classList.add('bg-gray-700', 'border-transparent');
                tabEl.classList.remove('bg-gray-800', 'border-blue-500');
            }
        });
        updateNavigationButtons();
    }

    function loadUrl(url) {
        if (!url || !iframe) return;
        let finalUrl = url;
        if (!url.startsWith('http://') && !url.startsWith('https://')) {
            finalUrl = url.includes('.') && !url.includes(' ') ? 'https://' + url : 'https://www.google.com/search?q=' + encodeURIComponent(url);
        }
        
        if (finalUrl.startsWith('https://www.google.com')) {
            finalUrl += (finalUrl.includes('?') ? '&' : '?') + 'igu=1';
        }

        if (progressBar) progressBar.style.width = '30%';
        if (statusDiv) { statusDiv.textContent = 'Loading...'; statusDiv.classList.remove('hidden'); }

        const currentTab = tabs[currentTabIndex];
        if (currentTab) {
            if (currentTab.history[currentTab.historyIndex] !== finalUrl) {
                currentTab.history = currentTab.history.slice(0, currentTab.historyIndex + 1);
                currentTab.history.push(finalUrl);
                currentTab.historyIndex = currentTab.history.length - 1;
                addToHistory(finalUrl, 'Visited page');
            }
            currentTab.url = finalUrl;
            if (urlInput) urlInput.value = finalUrl;
            iframe.src = finalUrl;
            updateNavigationButtons();
            updateSecurityIcon(finalUrl);
        }
    }

    function navigate() { if (urlInput) loadUrl(urlInput.value.trim()); }
    function goBack() {
        const tab = tabs[currentTabIndex];
        if (tab && tab.historyIndex > 0) {
            tab.historyIndex--;
            loadUrl(tab.history[tab.historyIndex]);
        }
    }
    function goForward() {
        const tab = tabs[currentTabIndex];
        if (tab && tab.historyIndex < tab.history.length - 1) {
            tab.historyIndex++;
            loadUrl(tab.history[tab.historyIndex]);
        }
    }
    function reload() { if (iframe) iframe.src = iframe.src; }
    function goHome() { loadUrl('https://www.google.com'); }

    function toggleBookmark() {
        const tab = tabs[currentTabIndex];
        if (!tab) return;
        const index = bookmarks.findIndex(bm => bm.url === tab.url);
        if (index !== -1) {
            bookmarks.splice(index, 1);
            if (bookmarkBtn) bookmarkBtn.innerHTML = '<i class="far fa-bookmark"></i>';
            showNotification('Bookmark removed');
        } else {
            bookmarks.push({ url: tab.url, title: tab.title, favicon: '\u2B50', date: new Date().toISOString() });
            if (bookmarkBtn) bookmarkBtn.innerHTML = '<i class="fas fa-bookmark"></i>';
            showNotification('Bookmark added');
        }
        localStorage.setItem('browser-bookmarks', JSON.stringify(bookmarks));
    }
    
    function addToHistory(url, action) {
        history.unshift({ url, title: getDomainFromUrl(url), action, timestamp: new Date().toISOString() });
        if (history.length > 100) history.length = 100;
        localStorage.setItem('browser-history', JSON.stringify(history));
    }
    function getDomainFromUrl(url) { try { return new URL(url).hostname.replace('www.', ''); } catch { return url; } }
    
    function showHistory() {
        const historyHTML = \`<div class="absolute top-12 right-2 w-80 bg-gray-800 border border-gray-700 rounded-lg shadow-xl z-50"><div class="p-3 border-b border-gray-700"><h3 class="font-bold flex justify-between items-center"><span>History</span><button onclick="clearHistory()" class="text-xs text-red-400 hover:text-red-300">Clear All</button></h3></div><div class="max-h-64 overflow-y-auto">\${history.length > 0 ? history.slice(0, 15).map(item => \`<div class="p-2 hover:bg-gray-700 cursor-pointer flex items-center border-b border-gray-700" onclick="loadHistoryUrl('\${item.url}')"><span class="mr-2">\u{1F552}</span><div class="flex-1 min-w-0"><div class="text-sm truncate">\${item.title}</div><div class="text-xs text-gray-400">\${new Date(item.timestamp).toLocaleString()}</div></div></div>\`).join('') : '<div class="p-4 text-center text-gray-400"><i class="fas fa-history text-2xl mb-2"></i><p>No browsing history</p></div>'}</div></div>\`;
        showPopup(historyHTML, historyBtn);
    }
    function clearHistory() { history = []; localStorage.setItem('browser-history', JSON.stringify(history)); showNotification('History cleared'); const p = windowElement.querySelector('.browser-popup'); if (p) p.remove(); showHistory(); }
    
    function showDownloads() {
        const downloadsHTML = \`<div class="absolute top-12 right-2 w-80 bg-gray-800 border border-gray-700 rounded-lg shadow-xl z-50"><div class="p-3 border-b border-gray-700"><h3 class="font-bold flex justify-between items-center"><span>Downloads</span><button onclick="clearDownloads()" class="text-xs text-red-400 hover:text-red-300">Clear All</button></h3></div><div class="max-h-64 overflow-y-auto">\${downloads.length > 0 ? downloads.slice(0, 10).map(d => \`<div class="p-2 hover:bg-gray-700 flex items-center border-b border-gray-700"><span class="mr-2">\u{1F4E5}</span><div class="flex-1 min-w-0"><div class="text-sm truncate">\${d.name}</div><div class="text-xs text-gray-400">\${d.status} \u2022 \${new Date(d.timestamp).toLocaleString()}</div></div>\${d.status === 'Completed' ? '<i class="fas fa-check text-green-400 ml-2"></i>' : '<i class="fas fa-sync-alt text-yellow-400 ml-2"></i>'}</div>\`).join('') : '<div class="p-4 text-center text-gray-400"><i class="fas fa-download text-2xl mb-2"></i><p>No downloads yet</p></div>'}</div><div class="p-2 border-t border-gray-700"><button onclick="startDemoDownload()" class="w-full text-center text-blue-400 hover:text-blue-300 text-sm"><i class="fas fa-plus mr-1"></i> Demo Download</button></div></div>\`;
        showPopup(downloadsHTML, downloadBtn);
    }
    function startDemoDownload() { downloads.unshift({ name: 'demo-file-' + Date.now() + '.txt', size: '1.2 MB', status: 'Completed', timestamp: new Date().toISOString() }); localStorage.setItem('browser-downloads', JSON.stringify(downloads)); showNotification('Demo download completed'); const p = windowElement.querySelector('.browser-popup'); if (p) p.remove(); showDownloads(); }
    function clearDownloads() { downloads = []; localStorage.setItem('browser-downloads', JSON.stringify(downloads)); showNotification('Downloads cleared'); const p = windowElement.querySelector('.browser-popup'); if (p) p.remove(); showDownloads(); }
    
    function showBrowserMenu() {
        const menuHTML = \`<div class="absolute top-12 right-2 w-48 bg-gray-800 border border-gray-700 rounded-lg shadow-xl z-50"><div class="py-1"><button class="w-full text-left px-4 py-2 hover:bg-gray-700 flex items-center" onclick="showBrowserSettings()"><i class="fas fa-cog mr-2"></i><span>Settings</span></button><button class="w-full text-left px-4 py-2 hover:bg-gray-700 flex items-center" onclick="showBookmarksManager()"><i class="fas fa-bookmark mr-2"></i><span>Bookmarks</span></button><button class="w-full text-left px-4 py-2 hover:bg-gray-700 flex items-center" onclick="showDownloads()"><i class="fas fa-download mr-2"></i><span>Downloads</span></button><button class="w-full text-left px-4 py-2 hover:bg-gray-700 flex items-center" onclick="showHistory()"><i class="fas fa-history mr-2"></i><span>History</span></button><div class="border-t border-gray-700 my-1"></div><button class="w-full text-left px-4 py-2 hover:bg-gray-700 flex items-center" onclick="showBrowserInfo()"><i class="fas fa-info-circle mr-2"></i><span>About</span></button><button class="w-full text-left px-4 py-2 hover:bg-gray-700 flex items-center" onclick="clearBrowserData()"><i class="fas fa-trash mr-2 text-red-400"></i><span class="text-red-400">Clear Data</span></button></div></div>\`;
        showPopup(menuHTML, menuBtn);
    }
    
    function showBrowserSettings() { showPopup('<div class="absolute top-12 right-2 w-80 bg-gray-800 border border-gray-700 rounded-lg shadow-xl z-50"><div class="p-3 border-b border-gray-700"><h3 class="font-bold">Settings</h3></div><div class="p-4 space-y-4"><div><label class="flex items-center"><input type="checkbox" checked class="mr-2">Safe Browsing</label></div><div><label class="flex items-center"><input type="checkbox" checked class="mr-2">JavaScript Enabled</label></div><div><label class="block text-sm mb-1">Search Engine</label><select class="w-full bg-gray-700 p-2 rounded"><option>Google</option><option>Bing</option></select></div></div></div>', menuBtn); }
    function showBookmarksManager() { const bmHTML = \`<div class="absolute top-12 right-2 w-80 bg-gray-800 border border-gray-700 rounded-lg shadow-xl z-50"><div class="p-3 border-b border-gray-700"><h3 class="font-bold flex justify-between items-center"><span>Bookmarks</span><button onclick="addDemoBookmark()" class="text-xs text-blue-400">Add Demo</button></h3></div><div class="max-h-64 overflow-y-auto">\${bookmarks.length > 0 ? bookmarks.map(bm => \`<div class="p-2 hover:bg-gray-700 cursor-pointer flex items-center" onclick="loadBookmarkUrl('\${bm.url}')"><span class="mr-2">\${bm.favicon}</span><div class="flex-1 min-w-0"><div class="text-sm truncate">\${bm.title}</div></div><button onclick="event.stopPropagation(); removeBookmark('\${bm.url}')" class="text-red-400 ml-2 p-1"><i class="fas fa-times"></i></button></div>\`).join('') : '<div class="p-4 text-center text-gray-400"><p>No bookmarks</p></div>'}</div></div>\`; showPopup(bmHTML, menuBtn); }
    function addDemoBookmark() { bookmarks.push({ url: 'https://github.com', title: 'GitHub', favicon: '\u{1F419}', date: new Date().toISOString() }); localStorage.setItem('browser-bookmarks', JSON.stringify(bookmarks)); showNotification('Demo bookmark added'); const p = windowElement.querySelector('.browser-popup'); if (p) p.remove(); showBookmarksManager(); }
    function removeBookmark(url) { bookmarks = bookmarks.filter(bm => bm.url !== url); localStorage.setItem('browser-bookmarks', JSON.stringify(bookmarks)); showNotification('Bookmark removed'); const p = windowElement.querySelector('.browser-popup'); if (p) p.remove(); showBookmarksManager(); }
    function showBrowserInfo() { showPopup('<div class="absolute top-12 right-2 w-80 bg-gray-800 border border-gray-700 rounded-lg shadow-xl z-50"><div class="p-3 border-b"><h3 class="font-bold">About Browser</h3></div><div class="p-4 space-y-2"><p>Version: \u{1F34C}Banana Browser 1.0</p><p>Engine: WebKit/Chromium</p></div></div>', menuBtn); }
    function clearBrowserData() { if (confirm('Clear all browser data?')) { history = []; downloads = []; bookmarks = []; localStorage.removeItem('browser-history'); localStorage.removeItem('browser-downloads'); localStorage.removeItem('browser-bookmarks'); showNotification('All browser data cleared'); } }

    function showPopup(content, anchorElement) {
        const existing = windowElement.querySelector('.browser-popup');
        if (existing) existing.remove();
        const popup = document.createElement('div');
        popup.className = 'browser-popup';
        popup.innerHTML = content;
        windowElement.appendChild(popup);
        const closePopup = (e) => {
            if (!popup.contains(e.target) && !anchorElement.contains(e.target)) {
                popup.remove();
                document.removeEventListener('click', closePopup);
            }
        };
        setTimeout(() => document.addEventListener('click', closePopup), 100);
    }

    function showNotification(message) {
        const notification = document.createElement('div');
        notification.className = 'absolute bottom-4 right-4 bg-gray-800 text-white px-4 py-2 rounded-lg shadow-lg z-50';
        notification.textContent = message;
        windowElement.appendChild(notification);
        setTimeout(() => notification.remove(), 2000);
    }

    function updateNavigationButtons() {
        const tab = tabs[currentTabIndex];
        if (backBtn && tab) backBtn.disabled = !(tab.historyIndex > 0);
        if (forwardBtn && tab) forwardBtn.disabled = !(tab.historyIndex < tab.history.length - 1);
    }
    
    function updateSecurityIcon(url) {
        const securityIconEl = windowElement.querySelector('#browser-security-icon i');
        if (!securityIconEl) return;
        try {
            const urlObj = new URL(url);
            if (urlObj.protocol === 'https:') {
                securityIconEl.className = 'fas fa-lock text-green-400';
            } else {
                securityIconEl.className = 'fas fa-lock-open text-yellow-400';
            }
        } catch (e) {
            securityIconEl.className = 'fas fa-globe text-gray-400';
        }
    }

    if (iframe) {
        iframe.addEventListener('load', () => {
            if (progressBar) { progressBar.style.width = '100%'; setTimeout(() => { progressBar.style.width = '0'; if (statusDiv) statusDiv.classList.add('hidden'); }, 500); }
            try {
                const title = iframe.contentDocument?.title || getDomainFromUrl(iframe.src) || 'Untitled';
                if (tabs[currentTabIndex]) { tabs[currentTabIndex].title = title; updateTabTitles(); }
                updateSecurityIcon(iframe.src);
            } catch (e) { /* Cross-origin */ if (tabs[currentTabIndex]) { tabs[currentTabIndex].title = getDomainFromUrl(iframe.src); updateTabTitles(); } updateSecurityIcon(iframe.src); }
        });
        iframe.addEventListener('error', () => {
            if(progressBar) progressBar.style.width = '0';
            if(statusDiv) { statusDiv.textContent = 'Failed to load page'; statusDiv.classList.remove('hidden'); }
        });
    }

    function updateTabTitles() {
        if (!tabsContainer) return;
        const tabElements = Array.from(tabsContainer.children);
        tabElements.forEach((tabEl, index) => {
            const titleEl = tabEl.querySelector('.title');
            if (titleEl && tabs[index]) titleEl.textContent = tabs[index].title;
        });
    }

    window.clearHistory = clearHistory;
    window.clearDownloads = clearDownloads;
    window.startDemoDownload = startDemoDownload;
    window.showBrowserSettings = showBrowserSettings;
    window.showBookmarksManager = showBookmarksManager;
    window.showDownloads = showDownloads;
    window.showHistory = showHistory;
    window.showBrowserInfo = showBrowserInfo;
    window.clearBrowserData = clearBrowserData;
    window.addDemoBookmark = addDemoBookmark;
    window.removeBookmark = removeBookmark;
    window.loadHistoryUrl = (url) => loadUrl(url);
    window.loadBookmarkUrl = (url) => loadUrl(url);
}
if (typeof window.initBrowser !== 'function') {
  window.initBrowser = initBrowser;
}
  `}ngAfterViewInit(){if(!document.getElementById("browser-logic-script")){let t=document.createElement("script");t.id="browser-logic-script",t.textContent=this.browserScript,document.body.appendChild(t)}let e=this.elementRef.nativeElement;if(window.initBrowser&&!e.hasAttribute("data-browser-initialized")){let t=this.context?.url;window.initBrowser(e,t),e.setAttribute("data-browser-initialized","true")}}};Fc.\u0275fac=function(t){return new(t||Fc)},Fc.\u0275cmp=ee({type:Fc,selectors:[["app-browser"]],decls:16,vars:0,consts:[[1,"h-full","flex","flex-col","bg-gray-800","text-gray-200"],["id","browser-controls",1,"flex-shrink-0","p-2","bg-gray-800","flex","items-center","gap-2","border-b","border-gray-700/50"],["id","browser-back","title","Back",1,"p-2","hover:bg-gray-600","rounded","disabled:opacity-50"],[1,"fas","fa-arrow-left"],["id","browser-forward","title","Forward",1,"p-2","hover:bg-gray-600","rounded","disabled:opacity-50"],[1,"fas","fa-arrow-right"],["id","browser-reload","title","Reload",1,"p-2","hover:bg-gray-600","rounded"],[1,"fas","fa-redo"],[1,"flex-1","relative","bg-gray-900","rounded-full","focus-within:bg-gray-700","focus-within:ring-2","accent-border","transition-all","duration-200","flex","items-center"],["id","browser-security-icon",1,"px-3","text-gray-400"],[1,"fas","fa-globe"],["type","text","id","url-input","title","Address Bar","placeholder","Search or type a web address",1,"w-full","bg-transparent","py-1.5","pr-3","focus:outline-none"],["id","browser-go","title","Go",1,"p-2","hover:bg-gray-600","rounded"],[1,"flex-1","bg-white","relative","browser-content-area"],["id","browser-iframe","title","Web Content",1,"w-full","h-full","border-0"]],template:function(t,i){t&1&&(x(0,"div",0)(1,"div",1)(2,"button",2),W(3,"i",3),b(),x(4,"button",4),W(5,"i",5),b(),x(6,"button",6),W(7,"i",7),b(),x(8,"div",8)(9,"span",9),W(10,"i",10),b(),W(11,"input",11),b(),x(12,"button",12),W(13,"i",5),b()(),x(14,"div",13),W(15,"iframe",14),b()())},dependencies:[te],encapsulation:2,changeDetection:0});var I0=Fc;var Lc=class Lc{constructor(){this.display=I("0");this.currentVal="0";this.operator=null;this.firstOperand=null;this.waitingForSecondOperand=!1}onKeyPress(e){/\d/.test(e)?this.inputDigit(e):e==="."?this.inputDecimal():e==="+"||e==="-"||e==="*"||e==="/"?this.setOperator(e):e==="="?this.calculate():e==="AC"?this.clear():e==="%"?this.inputPercent():e==="+/-"&&this.toggleSign()}inputDigit(e){this.waitingForSecondOperand?(this.currentVal=e,this.waitingForSecondOperand=!1):this.currentVal=this.currentVal==="0"?e:this.currentVal+e,this.display.set(this.currentVal)}inputDecimal(){this.currentVal.includes(".")||(this.currentVal+="."),this.display.set(this.currentVal)}setOperator(e){this.firstOperand===null?this.firstOperand=parseFloat(this.currentVal):this.operator&&this.calculate(),this.operator=e,this.waitingForSecondOperand=!0}calculate(){if(this.operator&&this.firstOperand!==null){let e=parseFloat(this.currentVal),t=0;this.operator==="+"?t=this.firstOperand+e:this.operator==="-"?t=this.firstOperand-e:this.operator==="*"?t=this.firstOperand*e:this.operator==="/"&&(t=this.firstOperand/e),this.currentVal=String(t),this.display.set(this.currentVal),this.firstOperand=t,this.operator=null,this.waitingForSecondOperand=!1}}clear(){this.currentVal="0",this.firstOperand=null,this.operator=null,this.waitingForSecondOperand=!1,this.display.set("0")}inputPercent(){this.currentVal=String(parseFloat(this.currentVal)/100),this.display.set(this.currentVal)}toggleSign(){this.currentVal=String(parseFloat(this.currentVal)*-1),this.display.set(this.currentVal)}};Lc.\u0275fac=function(t){return new(t||Lc)},Lc.\u0275cmp=ee({type:Lc,selectors:[["app-calculator"]],decls:42,vars:1,consts:[[1,"h-full","bg-gray-800","flex","flex-col","p-2","gap-2"],[1,"text-right","text-white","text-5xl","font-light","p-4","bg-gray-900/50","rounded-lg","mb-2","overflow-x-auto"],[1,"grid","grid-cols-4","gap-2","flex-1"],[1,"calc-btn","bg-gray-500","hover:bg-gray-400",3,"click"],[1,"calc-btn-op",3,"click"],[1,"calc-btn",3,"click"],[1,"calc-btn","col-span-2",3,"click"]],template:function(t,i){t&1&&(x(0,"div",0)(1,"div",1),g(2),b(),x(3,"div",2)(4,"button",3),G("click",function(){return i.onKeyPress("AC")}),g(5,"AC"),b(),x(6,"button",3),G("click",function(){return i.onKeyPress("+/-")}),g(7,"+/-"),b(),x(8,"button",3),G("click",function(){return i.onKeyPress("%")}),g(9,"%"),b(),x(10,"button",4),G("click",function(){return i.onKeyPress("/")}),g(11,"/"),b(),x(12,"button",5),G("click",function(){return i.onKeyPress("7")}),g(13,"7"),b(),x(14,"button",5),G("click",function(){return i.onKeyPress("8")}),g(15,"8"),b(),x(16,"button",5),G("click",function(){return i.onKeyPress("9")}),g(17,"9"),b(),x(18,"button",4),G("click",function(){return i.onKeyPress("*")}),g(19,"x"),b(),x(20,"button",5),G("click",function(){return i.onKeyPress("4")}),g(21,"4"),b(),x(22,"button",5),G("click",function(){return i.onKeyPress("5")}),g(23,"5"),b(),x(24,"button",5),G("click",function(){return i.onKeyPress("6")}),g(25,"6"),b(),x(26,"button",4),G("click",function(){return i.onKeyPress("-")}),g(27,"-"),b(),x(28,"button",5),G("click",function(){return i.onKeyPress("1")}),g(29,"1"),b(),x(30,"button",5),G("click",function(){return i.onKeyPress("2")}),g(31,"2"),b(),x(32,"button",5),G("click",function(){return i.onKeyPress("3")}),g(33,"3"),b(),x(34,"button",4),G("click",function(){return i.onKeyPress("+")}),g(35,"+"),b(),x(36,"button",6),G("click",function(){return i.onKeyPress("0")}),g(37,"0"),b(),x(38,"button",5),G("click",function(){return i.onKeyPress(".")}),g(39,"."),b(),x(40,"button",4),G("click",function(){return i.onKeyPress("=")}),g(41,"="),b()()()),t&2&&(w(2),me(" ",i.display()," "))},dependencies:[te],styles:["@tailwind base;@tailwind components;@tailwind utilities;@layer components{.calc-btn[_ngcontent-%COMP%]{@apply bg-gray-600 hover:bg-gray-500 text-white text-2xl rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-gray-400;}.calc-btn-op[_ngcontent-%COMP%]{@apply accent-bg text-white text-2xl rounded-lg transition-colors focus:outline-none focus:ring-2 accent-ring-focus;}}"],changeDetection:0});var D0=Lc;var La=class La{constructor(){this.http=F(Lr);this.apiKeyService=F(zn);this.apiKey=I(null);this.apiUrl="https://api.openweathermap.org/data/2.5/weather";Ae(()=>{this.apiKey.set(this.apiKeyService.openWeatherApiKey())})}getWeatherByCity(e){let t=this.apiKey();return t?this.http.get(`${this.apiUrl}?q=${e}&appid=${t}&units=metric`):mm(()=>new Error("OpenWeatherMap API key not configured."))}getWeatherByCoords(e,t){let i=this.apiKey();return i?this.http.get(`${this.apiUrl}?lat=${e}&lon=${t}&appid=${i}&units=metric`):mm(()=>new Error("OpenWeatherMap API key not configured."))}};La.\u0275fac=function(t){return new(t||La)},La.\u0275prov=de({token:La,factory:La.\u0275fac,providedIn:"root"});var A0=La;function VJ(n,e){n&1&&(x(0,"div",7),W(1,"i",9),x(2,"p"),g(3,"Loading Weather..."),b()())}function BJ(n,e){if(n&1&&(x(0,"div",8),W(1,"i",10),x(2,"p"),g(3),b()()),n&2){let t=C();w(3),V(t.error())}}function UJ(n,e){if(n&1&&(x(0,"div",7)(1,"h1",11),g(2),b(),x(3,"p",12),g(4),b(),x(5,"div",13),W(6,"img",14),x(7,"p",15),g(8),Ue(9,"number"),b()(),x(10,"div",16)(11,"p"),g(12),Ue(13,"number"),b(),x(14,"p"),g(15),b()()()),n&2){let t=C();w(2),V(t.weather().name),w(2),V(t.weather().weather[0].description),w(2),Fe("src","https://openweathermap.org/img/wn/"+t.weather().weather[0].icon+"@2x.png",Qe),w(2),me("",et(9,6,t.weather().main.temp,"1.0-0"),"\xB0C"),w(4),me("Feels like: ",et(13,9,t.weather().main.feels_like,"1.0-0"),"\xB0"),w(3),me("Humidity: ",t.weather().main.humidity,"%")}}var Oc=class Oc{constructor(){this.weatherService=F(A0);this.weather=I(null);this.loading=I(!0);this.error=I(null)}ngOnInit(){this.getWeatherForCity("New York")}getWeatherForCity(e){e&&(this.loading.set(!0),this.error.set(null),this.weatherService.getWeatherByCity(e).subscribe({next:t=>{this.weather.set(t),this.loading.set(!1)},error:()=>{this.error.set("Could not fetch weather for that city."),this.loading.set(!1)}}))}useCurrentLocation(){navigator.geolocation?(this.loading.set(!0),this.error.set(null),navigator.geolocation.getCurrentPosition(e=>{let{latitude:t,longitude:i}=e.coords;this.weatherService.getWeatherByCoords(t,i).subscribe({next:r=>{this.weather.set(r),this.loading.set(!1)},error:()=>{this.error.set("Could not fetch weather for your location."),this.loading.set(!1)}})},()=>{this.error.set("Geolocation access denied."),this.loading.set(!1)})):this.error.set("Geolocation is not supported by your browser.")}onSearch(e){let t=e.target.value;this.getWeatherForCity(t)}};Oc.\u0275fac=function(t){return new(t||Oc)},Oc.\u0275cmp=ee({type:Oc,selectors:[["app-weather"]],decls:10,vars:3,consts:[[1,"h-full","bg-cover","bg-center","p-6","flex","flex-col","text-white","relative"],[1,"absolute","inset-0","bg-black/50"],[1,"relative","z-10","flex-shrink-0","mb-4","flex","gap-2"],["type","text","placeholder","Search city...",1,"flex-1","bg-white/20","backdrop-blur-md","rounded-lg","p-2","focus:outline-none","focus:ring-2","accent-ring-focus",3,"change"],[1,"w-10","h-10","bg-white/20","backdrop-blur-md","rounded-lg","hover:bg-white/30","transition-colors",3,"click"],[1,"fas","fa-location-arrow"],[1,"relative","z-10","flex-1","flex","items-center","justify-center"],[1,"text-center"],[1,"text-center","bg-red-500/50","p-4","rounded-lg"],[1,"fas","fa-spinner","fa-spin","text-4xl"],[1,"fas","fa-exclamation-triangle","text-4xl","mb-2"],[1,"text-4xl","md:text-6xl","font-bold"],[1,"text-xl","md:text-2xl","capitalize"],[1,"flex","items-center","justify-center","my-4"],["alt","weather icon",1,"w-20","h-20",3,"src"],[1,"text-6xl","md:text-8xl","font-thin"],[1,"flex","justify-center","gap-4","md:gap-8","text-lg"]],template:function(t,i){t&1&&(x(0,"div",0),W(1,"div",1),x(2,"div",2)(3,"input",3),G("change",function(o){return i.onSearch(o)}),b(),x(4,"button",4),G("click",function(){return i.useCurrentLocation()}),W(5,"i",5),b()(),x(6,"div",6),U(7,VJ,4,0,"div",7)(8,BJ,4,1,"div",8)(9,UJ,16,12,"div",7),b()()),t&2&&(Be("background-image",i.weather()?"url(https://source.unsplash.com/600x400/?"+i.weather().weather[0].main+")":"url(https://source.unsplash.com/600x400/?weather)"),w(7),$(i.loading()?7:i.error()?8:i.weather()?9:-1))},dependencies:[te,fo],encapsulation:2,changeDetection:0});var k0=Oc;var $J=["video"],HJ=["canvas"];function qJ(n,e){if(n&1){let t=B();x(0,"div",3),W(1,"i",4),x(2,"p"),g(3),b(),x(4,"button",5),G("click",function(){S(t);let r=C();return T(r.startCamera())}),g(5," Try Again "),b()()}if(n&2){let t=C();w(3),V(t.error())}}function GJ(n,e){if(n&1){let t=B();x(0,"div",8),W(1,"img",10),x(2,"div",11)(3,"button",12),G("click",function(){S(t);let r=C(2);return T(r.retake())}),g(4," Retake "),b(),x(5,"button",13),G("click",function(){S(t);let r=C(2);return T(r.save())}),g(6," Save "),b()()()}if(n&2){let t=C(2);w(),Fe("src",t.photoPreview(),Qe)}}function WJ(n,e){if(n&1){let t=B();x(0,"div",9)(1,"button",14),G("click",function(){S(t);let r=C(2);return T(r.capture())}),b()()}}function zJ(n,e){if(n&1&&(W(0,"video",6,0)(2,"canvas",7,1),U(4,GJ,7,1,"div",8)(5,WJ,2,0,"div",9)),n&2){let t=C();Y("hidden",t.photoPreview()),w(4),$(t.photoPreview()?4:5)}}var Vc=class Vc{constructor(){this.notificationService=F(vt);this.error=I(null);this.stream=null;this.photoPreview=I(null)}ngAfterViewInit(){this.startCamera()}async startCamera(){try{this.stream&&this.stream.getTracks().forEach(e=>e.stop()),this.stream=await navigator.mediaDevices.getUserMedia({video:!0,audio:!1}),this.videoElement.nativeElement.srcObject=this.stream,this.videoElement.nativeElement.play(),this.error.set(null)}catch(e){console.error("Camera error:",e),this.error.set("Could not access camera. Please grant permission.")}}capture(){let e=this.videoElement.nativeElement,t=this.canvasElement.nativeElement;t.width=e.videoWidth,t.height=e.videoHeight;let i=t.getContext("2d");if(i){i.drawImage(e,0,0,t.width,t.height);let r=t.toDataURL("image/png");this.photoPreview.set(r)}}retake(){this.photoPreview.set(null)}save(){let e=this.photoPreview();if(e){let t=document.createElement("a");t.href=e,t.download=`banana-os-capture-${Date.now()}.png`,t.click(),this.notificationService.show({appId:"camera",title:"Camera",body:"Photo saved successfully!",type:"success"}),this.retake()}}ngOnDestroy(){this.stream&&this.stream.getTracks().forEach(e=>e.stop())}};Vc.\u0275fac=function(t){return new(t||Vc)},Vc.\u0275cmp=ee({type:Vc,selectors:[["app-camera"]],viewQuery:function(t,i){if(t&1&&(pn($J,5),pn(HJ,5)),t&2){let r;hn(r=mn())&&(i.videoElement=r.first),hn(r=mn())&&(i.canvasElement=r.first)}},decls:3,vars:1,consts:[["video",""],["canvas",""],[1,"h-full","w-full","bg-black","flex","flex-col","items-center","justify-center","text-white","relative"],[1,"text-center","p-4"],[1,"fas","fa-exclamation-triangle","text-red-500","text-4xl","mb-4"],[1,"mt-4","px-4","py-2","bg-blue-600","rounded-lg","hover:bg-blue-500",3,"click"],[1,"h-full","w-full","object-cover"],[1,"hidden"],[1,"absolute","inset-0","bg-black","flex","flex-col","items-center","justify-center"],[1,"absolute","bottom-4"],[1,"max-h-[80%]","max-w-full",3,"src"],[1,"absolute","bottom-4","flex","gap-4"],[1,"w-16","h-16","rounded-full","bg-white/20","backdrop-blur-sm","flex","items-center","justify-center","text-xl",3,"click"],[1,"w-16","h-16","rounded-full","bg-blue-600","flex","items-center","justify-center","text-xl",3,"click"],[1,"w-20","h-20","rounded-full","border-4","border-white","bg-white/30","backdrop-blur-sm","flex","items-center","justify-center",3,"click"]],template:function(t,i){t&1&&(x(0,"div",2),U(1,qJ,6,1,"div",3)(2,zJ,6,3),b()),t&2&&(w(),$(i.error()?1:2))},dependencies:[te],encapsulation:2,changeDetection:0});var M0=Vc;var jJ=["fileUploadInput"],KJ=["modalInputField"],Eb=(n,e)=>e.path;function YJ(n,e){n&1&&O(0,"i",34)}function JJ(n,e){if(n&1){let t=B();m(0,"span",33),N("click",function(){let r=S(t).$implicit,o=C();return T(o.navigateTo(r.path))}),g(1),v(),U(2,YJ,1,0,"i",34)}if(n&2){let t=e.$implicit,i=e.$index,r=e.$count;w(),V(t.name),w(),$(i!==r-1?2:-1)}}function QJ(n,e){if(n&1){let t=B();m(0,"div",38),N("click",function(r){let o=S(t).$implicit,s=C(3);return r.stopPropagation(),T(s.selectNode(o))})("dblclick",function(){let r=S(t).$implicit,o=C(3);return T(o.handleDoubleClick(r))})("contextmenu",function(r){let o=S(t).$implicit,s=C(3);return T(s.onNodeContextMenu(r,o))}),O(1,"i",39),m(2,"span",40),g(3),v()()}if(n&2){let t,i,r=e.$implicit,o=C(3);Y("bg-blue-500/30",((t=o.selectedNode())==null?null:t.path)===r.path)("hover:bg-gray-700/50",((i=o.selectedNode())==null?null:i.path)!==r.path),w(),J("ngClass",o.getIconForNode(r)),w(2),V(r.name)}}function XJ(n,e){if(n&1&&(m(0,"div",35),Q(1,QJ,4,6,"div",37,Eb),v()),n&2){let t=C(2);w(),X(t.displayContents())}}function ZJ(n,e){if(n&1){let t=B();m(0,"div",46),N("click",function(r){let o=S(t).$implicit,s=C(3);return r.stopPropagation(),T(s.selectNode(o))})("dblclick",function(){let r=S(t).$implicit,o=C(3);return T(o.handleDoubleClick(r))})("contextmenu",function(r){let o=S(t).$implicit,s=C(3);return T(s.onNodeContextMenu(r,o))}),O(1,"i",47),m(2,"span",48),g(3),v(),m(4,"span",49),g(5),Ue(6,"date"),v(),m(7,"span",50),g(8),v(),m(9,"span",51),g(10),v()()}if(n&2){let t,i,r=e.$implicit,o=C(3);Y("bg-blue-500/30",((t=o.selectedNode())==null?null:t.path)===r.path)("hover:bg-gray-700/50",((i=o.selectedNode())==null?null:i.path)!==r.path),w(),J("ngClass",o.getIconForNode(r)),w(2),V(r.name),w(2),V(et(6,9,r.modifiedDate,"short")),w(3),V(o.getFileType(r)),w(2),V(r.type==="file"?o.formatBytes(r.size):"--")}}function eQ(n,e){if(n&1&&(m(0,"div",36)(1,"div",41)(2,"span",42),O(3,"i",43),v(),m(4,"span"),g(5,"Name"),v(),m(6,"span"),g(7,"Date Modified"),v(),m(8,"span"),g(9,"Type"),v(),m(10,"span",44),g(11,"Size"),v()(),Q(12,ZJ,11,12,"div",45,Eb),v()),n&2){let t=C(2);w(12),X(t.displayContents())}}function tQ(n,e){if(n&1&&U(0,XJ,3,0,"div",35)(1,eQ,14,0,"div",36),n&2){let t=C();$(t.viewMode()==="grid"?0:1)}}function nQ(n,e){n&1&&(m(0,"div",28)(1,"p"),g(2,"This folder is empty."),v()())}function iQ(n,e){if(n&1){let t=B();m(0,"button",56),N("click",function(){S(t);let r=C(2);return T(r.contextMenuOpen())}),O(1,"i",57),g(2," Open "),v(),O(3,"div",55),m(4,"button",58),N("click",function(){S(t);let r=C(2);return T(r.cutSelectedNode())}),O(5,"i",59),g(6," Cut "),v(),m(7,"button",58),N("click",function(){S(t);let r=C(2);return T(r.copySelectedNode())}),O(8,"i",60),g(9," Copy "),v()}}function rQ(n,e){if(n&1){let t=B();m(0,"button",58),N("click",function(){S(t);let r=C(2);return T(r.requestRename())}),O(1,"i",61),g(2," Rename "),v(),m(3,"button",62),N("click",function(){S(t);let r=C(2);return T(r.requestDelete())}),O(4,"i",63),g(5," Delete "),v()}}function oQ(n,e){if(n&1){let t=B();m(0,"button",58),N("click",function(){S(t);let r=C(2);return T(r.requestNewFolder())}),O(1,"i",64),g(2," New Folder "),v(),m(3,"button",58),N("click",function(){S(t);let r=C(2);return T(r.requestNewFile())}),O(4,"i",65),g(5," New File "),v()}}function sQ(n,e){if(n&1){let t=B();m(0,"div",52),N("click",function(r){return S(t),T(r.stopPropagation())}),U(1,iQ,10,0),m(2,"button",53),N("click",function(){S(t);let r=C();return T(r.paste())}),O(3,"i",54),g(4," Paste "),v(),O(5,"div",55),U(6,rQ,6,0)(7,oQ,6,0),v()}if(n&2){let t,i,r=C();Be("left",r.contextMenu().x,"px")("top",r.contextMenu().y,"px"),w(),$((t=r.contextMenu().node)?1:-1,t),w(),J("disabled",!r.clipboard()),w(4),$((i=r.contextMenu().node)?6:7,i)}}function aQ(n,e){n&1&&(m(0,"h3",68),g(1,"Create New File"),v())}function lQ(n,e){n&1&&(m(0,"h3",68),g(1,"Create New Folder"),v())}function cQ(n,e){if(n&1&&(m(0,"h3",68),g(1),v()),n&2){let t=C();w(),me('Rename "',t.node==null?null:t.node.name,'"')}}function uQ(n,e){if(n&1&&(m(0,"h3",74),g(1,"Confirm Deletion"),v(),m(2,"p",75),g(3),v()),n&2){let t=C();w(3),me('Are you sure you want to delete "',t.node==null?null:t.node.name,'"? This action cannot be undone.')}}function dQ(n,e){if(n&1){let t=B();m(0,"input",76,1),N("input",function(r){S(t);let o=C(2);return T(o.modalInput.set(r.target.value))})("keydown.enter",function(){S(t);let r=C(2);return T(r.confirmModalAction())}),v()}if(n&2){let t=C(2);J("value",t.modalInput())}}function fQ(n,e){if(n&1){let t=B();m(0,"button",77),N("click",function(){S(t);let r=C(2);return T(r.confirmModalAction())}),g(1,"Delete"),v()}}function pQ(n,e){if(n&1){let t=B();m(0,"button",78),N("click",function(){S(t);let r=C(2);return T(r.confirmModalAction())}),g(1,"Confirm"),v()}}function hQ(n,e){if(n&1){let t=B();m(0,"div",66),N("click",function(){S(t);let r=C();return T(r.closeModal())}),m(1,"div",67),N("click",function(r){return S(t),T(r.stopPropagation())}),U(2,aQ,2,0,"h3",68)(3,lQ,2,0,"h3",68)(4,cQ,2,1,"h3",68)(5,uQ,4,1),U(6,dQ,2,1,"input",69),m(7,"div",70)(8,"button",71),N("click",function(){S(t);let r=C();return T(r.closeModal())}),g(9,"Cancel"),v(),U(10,fQ,2,0,"button",72)(11,pQ,2,0,"button",73),v()()()}if(n&2){let t,i=e;w(2),$((t=i.type)==="newFile"?2:t==="newFolder"?3:t==="rename"?4:t==="delete"?5:-1),w(4),$(i.type!=="delete"?6:-1),w(4),$(i.type==="delete"?10:11)}}var Bc=class Bc{constructor(){this.fsService=F(Bi);this.osInteraction=F(dt);this.notificationService=F(vt);this.destroyRef=F(ht);this.context=F(yn,{optional:!0});this.currentPath=I("/");this.contents=I([]);this.selectedNode=I(null);this.viewMode=I("grid");this.sortBy=I("name");this.sortDirection=I("asc");this.searchTerm=I("");this.contextMenu=I({visible:!1,x:0,y:0,node:null});this.modalState=I(null);this.modalInput=I("");this.clipboard=I(null);this.breadcrumbs=le(()=>{let e=this.currentPath();return(e==="/"?["Home"]:["Home",...e.substring(1).split("/")]).map((i,r)=>({name:i,path:r===0?"/":"/"+e.substring(1).split("/").slice(0,r).join("/")}))});this.displayContents=le(()=>{let e=this.contents(),t=this.searchTerm().toLowerCase(),i=this.sortBy(),r=this.sortDirection();return[...t?e.filter(s=>s.name.toLowerCase().includes(t)):e].sort((s,a)=>{if(s.type==="directory"&&a.type!=="directory")return-1;if(s.type!=="directory"&&a.type==="directory")return 1;let l=0;switch(i){case"name":l=s.name.localeCompare(a.name);break;case"size":l=s.size-a.size;break;case"date":l=a.modifiedDate-s.modifiedDate;break;case"type":let c=s.type==="file"?s.name.split(".").pop()?.toLowerCase()??"":"",d=a.type==="file"?a.name.split(".").pop()?.toLowerCase()??"":"";l=c.localeCompare(d);break}return r==="asc"?l:-l})});this.statusBarText=le(()=>{let e=this.displayContents().length,t=this.selectedNode();if(t){let i=t.size>0?this.formatBytes(t.size):"";return`1 item selected ${i?` | ${i}`:""}`}return`${e} items`});Ae(()=>{let e=this.currentPath(),t=this.fsService.getDirectory(e);t&&this.contents.set(Object.values(t.children))}),Ae(()=>{this.modalState()&&this.modalInputField&&setTimeout(()=>this.modalInputField.nativeElement.focus(),50)}),this.osInteraction.inAppActionRequest.pipe(Or(this.destroyRef)).subscribe(e=>{if(e.appId==="file-explorer"&&e.action==="createFile"){let{parentPath:t,fileName:i,content:r}=e.payload;this.fsService.createFile(t,i,r||"")?this.notificationService.show({appId:"file-explorer",title:"Copilot Action",body:`File "${i}" created in ${t}.`,type:"success"}):this.notificationService.show({appId:"file-explorer",title:"Copilot Action",body:`Failed to create file "${i}". It may already exist.`,type:"error"})}})}onDocumentClick(e){e.target.closest(".context-menu-item")||this.contextMenu.update(t=>Z(P({},t),{visible:!1}))}onDeleteKey(e){this.selectedNode()&&(e.preventDefault(),this.requestDelete())}onEscapeKey(){this.modalState()&&this.closeModal(),this.contextMenu().visible&&this.closeContextMenu(),this.selectedNode()&&this.deselect()}ngOnInit(){let e=this.context?.path;e&&this.fsService.getDirectory(e)&&this.currentPath.set(e)}selectNode(e){this.selectedNode.set(e)}deselect(){this.selectedNode.set(null)}navigateTo(e){this.fsService.getDirectory(e)&&(this.currentPath.set(e),this.selectedNode.set(null))}goUp(){let e=this.currentPath();if(e==="/")return;let t=e.substring(0,e.lastIndexOf("/"))||"/";this.navigateTo(t)}handleDoubleClick(e){if(this.selectedNode.set(null),e.type==="directory")this.navigateTo(e.path);else{let t=e.name.split(".").pop()?.toLowerCase(),i=null;switch(t){case"txt":case"md":case"js":case"ts":case"json":case"html":case"css":i="text-editor";break;case"jpg":case"jpeg":case"png":case"gif":i="photo-viewer";break}i?this.osInteraction.openAppRequest.next({appId:i,data:{filePath:e.path}}):this.notificationService.show({appId:"file-explorer",title:"File Explorer",body:`File type ".${t}" is not supported.`,type:"warning"})}}onNodeContextMenu(e,t){e.preventDefault(),e.stopPropagation(),this.selectNode(t),this.contextMenu.set({visible:!0,x:e.clientX,y:e.clientY,node:t})}onBackgroundContextMenu(e){e.preventDefault(),e.stopPropagation(),this.deselect(),this.contextMenu.set({visible:!0,x:e.clientX,y:e.clientY,node:null})}closeContextMenu(){this.contextMenu.update(e=>Z(P({},e),{visible:!1}))}contextMenuOpen(){let e=this.contextMenu().node;e&&this.handleDoubleClick(e),this.closeContextMenu()}getIconForNode(e){if(e.type==="directory")return"fas fa-folder text-yellow-400";switch(e.name.split(".").pop()?.toLowerCase()){case"txt":case"md":return"fas fa-file-alt text-gray-300";case"jpg":case"jpeg":case"png":case"gif":return"fas fa-file-image text-blue-400";case"js":case"ts":case"json":case"html":case"css":return"fas fa-file-code text-green-400";case"pdf":return"fas fa-file-pdf text-red-500";case"sys":case"bin":return"fas fa-cogs text-gray-500";default:return"fas fa-file text-gray-400"}}requestNewFolder(){this.modalInput.set("New Folder"),this.modalState.set({type:"newFolder"}),this.closeContextMenu()}requestNewFile(){this.modalInput.set("new-file.txt"),this.modalState.set({type:"newFile"}),this.closeContextMenu()}requestRename(){let e=this.selectedNode();e&&(this.modalInput.set(e.name),this.modalState.set({type:"rename",node:e}),this.closeContextMenu())}requestDelete(){let e=this.selectedNode();e&&(this.modalState.set({type:"delete",node:e}),this.closeContextMenu())}closeModal(){this.modalState.set(null),this.modalInput.set("")}confirmModalAction(){let e=this.modalState();if(!e)return;let t=this.modalInput().trim(),i=!1,r="";switch(e.type){case"newFile":if(!t){r="File name cannot be empty.";break}i=this.fsService.createFile(this.currentPath(),t,""),r=i?`File "${t}" created.`:"Failed to create file. It may already exist.";break;case"newFolder":if(!t){r="Folder name cannot be empty.";break}i=this.fsService.createDirectory(this.currentPath(),t),r=i?`Folder "${t}" created.`:"Failed to create folder. It may already exist.";break;case"rename":if(!t){r="Name cannot be empty.";break}e.node&&t!==e.node.name&&(i=this.fsService.renameNode(e.node.path,t),r=i?"Item renamed.":"Failed to rename. Name might already exist.");break;case"delete":e.node&&(i=this.fsService.deleteNode(e.node.path),r=i?"Item deleted.":"Failed to delete item.");break}r&&this.notificationService.show({appId:"file-explorer",title:"File Explorer",body:r,type:i?"success":"error"}),i&&this.selectedNode.set(null),this.closeModal()}cutSelectedNode(){let e=this.selectedNode();e&&this.clipboard.set({node:e,action:"cut"}),this.closeContextMenu()}copySelectedNode(){let e=this.selectedNode();e&&this.clipboard.set({node:e,action:"copy"}),this.closeContextMenu()}paste(){let e=this.clipboard();e&&(e.action==="cut"?this.fsService.moveNode(e.node.path,this.currentPath())?(this.notificationService.show({appId:"file-explorer",title:"File Explorer",body:"Item moved.",type:"success"}),this.clipboard.set(null)):this.notificationService.show({appId:"file-explorer",title:"File Explorer",body:"Could not move item here.",type:"error"}):this.fsService.copyNode(e.node.path,this.currentPath())?this.notificationService.show({appId:"file-explorer",title:"File Explorer",body:"Item copied.",type:"success"}):this.notificationService.show({appId:"file-explorer",title:"File Explorer",body:"Could not copy item here.",type:"error"}),this.closeContextMenu())}triggerUpload(){this.fileUploadInput.nativeElement.click()}handleFileUpload(e){let t=e.target;if(!t.files||t.files.length===0)return;let i=t.files[0],r=new FileReader;r.onload=o=>{let s=o.target?.result;this.fsService.createFile(this.currentPath(),i.name,s)?this.notificationService.show({appId:"file-explorer",title:"File Explorer",body:`File "${i.name}" uploaded.`,type:"success"}):this.notificationService.show({appId:"file-explorer",title:"File Explorer",body:"Upload failed. File may already exist.",type:"error"})},r.onerror=()=>{this.notificationService.show({appId:"file-explorer",title:"File Explorer",body:`Error reading file "${i.name}".`,type:"error"})},i.type.startsWith("image/")?r.readAsDataURL(i):r.readAsText(i),t.value=""}toggleSortDirection(){this.sortDirection.update(e=>e==="asc"?"desc":"asc")}cycleSortBy(){let e=["name","size","date","type"],i=(e.indexOf(this.sortBy())+1)%e.length;this.sortBy.set(e[i])}formatBytes(e,t=2){if(e===0)return"0 Bytes";let i=1024,r=t<0?0:t,o=["Bytes","KB","MB","GB","TB"],s=Math.floor(Math.log(e)/Math.log(i));return parseFloat((e/Math.pow(i,s)).toFixed(r))+" "+o[s]}getFileType(e){return e.type==="directory"?"Folder":e.name.split(".").pop()?.toUpperCase()+" File"||"File"}};Bc.\u0275fac=function(t){return new(t||Bc)},Bc.\u0275cmp=ee({type:Bc,selectors:[["app-file-explorer"]],viewQuery:function(t,i){if(t&1&&(pn(jJ,5),pn(KJ,5)),t&2){let r;hn(r=mn())&&(i.fileUploadInput=r.first),hn(r=mn())&&(i.modalInputField=r.first)}},hostBindings:function(t,i){t&1&&N("click",function(o){return i.onDocumentClick(o)},sE)("keydown.delete",function(o){return i.onDeleteKey(o)})("keydown.escape",function(o){return i.onEscapeKey(o)})},decls:42,vars:15,consts:[["fileUploadInput",""],["modalInputField",""],[1,"h-full","flex","flex-col","bg-gray-800","text-gray-200","font-sans",3,"contextmenu"],[1,"flex-shrink-0","p-2","bg-gray-900/30","flex","items-center","justify-between","gap-2","border-b","border-gray-700/50","flex-wrap"],[1,"flex","items-center","gap-1"],["title","Go Up",1,"toolbar-btn",3,"click","disabled"],[1,"fas","fa-arrow-up"],[1,"flex","items-center","text-sm","bg-gray-900/50","px-2","py-1.5","rounded-md","h-9"],[1,"flex","items-center","gap-1","bg-gray-900/50","px-1","py-1","rounded-md","h-9"],["title","New File",1,"toolbar-btn","text-xs","px-2",3,"click"],[1,"fas","fa-file-plus","mr-1"],["title","New Folder",1,"toolbar-btn","text-xs","px-2",3,"click"],[1,"fas","fa-folder-plus","mr-1"],["title","Upload File",1,"toolbar-btn","text-xs","px-2",3,"click"],[1,"fas","fa-upload","mr-1"],[1,"w-px","h-6","bg-gray-700","mx-1"],[1,"relative"],[1,"fas","fa-search","text-gray-400","absolute","left-3","top-1/2","-translate-y-1/2","pointer-events-none"],["type","text","placeholder","Search...",1,"bg-gray-700","rounded-md","py-1.5","pl-9","pr-3","h-9","w-32","focus:w-48","transition-all","focus:outline-none","focus:ring-2","accent-ring-focus",3,"input","value"],["title","Sort by",1,"toolbar-btn","capitalize","w-20",3,"click"],[1,"fas","fa-sort-amount-down","mr-2"],["title","Sort Direction",1,"toolbar-btn",3,"click"],[1,"fas"],["title","List View",1,"toolbar-btn",3,"click"],[1,"fas","fa-list"],["title","Grid View",1,"toolbar-btn",3,"click"],[1,"fas","fa-th-large"],[1,"flex-1","overflow-auto",3,"click","contextmenu"],[1,"h-full","flex","items-center","justify-center","text-gray-500"],[1,"flex-shrink-0","px-4","py-1","bg-gray-900/50","text-xs","text-gray-400","border-t","border-gray-700/50"],[1,"fixed","z-50","bg-gray-800","border","border-gray-600","rounded-md","shadow-lg","text-sm","w-48","py-1","animate-fade-in-fast",3,"left","top"],["type","file",1,"hidden",3,"change"],[1,"absolute","inset-0","bg-black/60","backdrop-blur-sm","flex","items-center","justify-center","z-50"],[1,"px-2","hover:bg-gray-700","rounded-md","cursor-pointer",3,"click"],[1,"fas","fa-chevron-right","text-xs","text-gray-500","mx-1"],[1,"p-4","grid","grid-cols-3","sm:grid-cols-4","md:grid-cols-6","lg:grid-cols-8","gap-4"],[1,"text-sm"],[1,"flex","flex-col","items-center","p-2","rounded-lg","cursor-pointer","transition-colors","select-none","text-center",3,"bg-blue-500/30","hover:bg-gray-700/50"],[1,"flex","flex-col","items-center","p-2","rounded-lg","cursor-pointer","transition-colors","select-none","text-center",3,"click","dblclick","contextmenu"],[1,"text-4xl","mb-2",3,"ngClass"],[1,"text-xs","break-all"],[1,"sticky","top-0","z-10","grid","grid-cols-[40px_1fr_140px_100px_100px]","gap-4","px-4","py-2","bg-gray-900/50","font-semibold","border-b","border-gray-700/50"],[1,"text-center"],[1,"fas","fa-hashtag"],[1,"text-right"],[1,"grid","grid-cols-[40px_1fr_140px_100px_100px]","gap-4","items-center","px-4","h-12","border-b","border-gray-700/30","cursor-pointer",3,"bg-blue-500/30","hover:bg-gray-700/50"],[1,"grid","grid-cols-[40px_1fr_140px_100px_100px]","gap-4","items-center","px-4","h-12","border-b","border-gray-700/30","cursor-pointer",3,"click","dblclick","contextmenu"],[1,"text-lg","text-center",3,"ngClass"],[1,"truncate","text-left"],[1,"text-gray-400","text-xs"],[1,"text-gray-400","truncate"],[1,"text-right","text-gray-400"],[1,"fixed","z-50","bg-gray-800","border","border-gray-600","rounded-md","shadow-lg","text-sm","w-48","py-1","animate-fade-in-fast",3,"click"],[1,"context-menu-item","disabled:opacity-50",3,"click","disabled"],[1,"fas","fa-paste","w-6"],[1,"h-px","bg-gray-700","my-1"],[1,"context-menu-item","font-bold",3,"click"],[1,"fas","fa-folder-open","w-6"],[1,"context-menu-item",3,"click"],[1,"fas","fa-cut","w-6"],[1,"fas","fa-copy","w-6"],[1,"fas","fa-pencil-alt","w-6"],[1,"context-menu-item","text-red-400","hover:bg-red-500/20",3,"click"],[1,"fas","fa-trash-alt","w-6"],[1,"fas","fa-folder-plus","w-6"],[1,"fas","fa-file-plus","w-6"],[1,"absolute","inset-0","bg-black/60","backdrop-blur-sm","flex","items-center","justify-center","z-50",3,"click"],[1,"bg-gray-800","rounded-lg","shadow-2xl","p-6","w-96","border","border-gray-700","animate-fade-in",3,"click"],[1,"text-xl","font-bold","mb-4"],["type","text",1,"w-full","bg-gray-700","border","border-gray-600","rounded-md","px-3","py-2","focus:outline-none","focus:ring-2","accent-ring-focus","mb-6",3,"value"],[1,"flex","justify-end","gap-4"],[1,"px-4","py-2","bg-gray-600","hover:bg-gray-500","rounded-md",3,"click"],[1,"px-4","py-2","bg-red-600","hover:bg-red-500","rounded-md"],[1,"px-4","py-2","accent-bg","hover:opacity-90","rounded-md"],[1,"text-xl","font-bold","mb-2","text-red-400"],[1,"text-gray-400","mb-6"],["type","text",1,"w-full","bg-gray-700","border","border-gray-600","rounded-md","px-3","py-2","focus:outline-none","focus:ring-2","accent-ring-focus","mb-6",3,"input","keydown.enter","value"],[1,"px-4","py-2","bg-red-600","hover:bg-red-500","rounded-md",3,"click"],[1,"px-4","py-2","accent-bg","hover:opacity-90","rounded-md",3,"click"]],template:function(t,i){if(t&1){let r=B();m(0,"div",2),N("contextmenu",function(s){return S(r),T(s.preventDefault())}),m(1,"div",3)(2,"div",4)(3,"button",5),N("click",function(){return S(r),T(i.goUp())}),O(4,"i",6),v(),m(5,"div",7),Q(6,JJ,3,2,null,null,Eb),v()(),m(8,"div",4)(9,"div",8)(10,"button",9),N("click",function(){return S(r),T(i.requestNewFile())}),O(11,"i",10),g(12," New File"),v(),m(13,"button",11),N("click",function(){return S(r),T(i.requestNewFolder())}),O(14,"i",12),g(15," New Folder"),v(),m(16,"button",13),N("click",function(){return S(r),T(i.triggerUpload())}),O(17,"i",14),g(18," Upload"),v()(),O(19,"div",15),m(20,"div",16),O(21,"i",17),m(22,"input",18),N("input",function(s){return S(r),T(i.searchTerm.set(s.target.value))}),v()(),m(23,"button",19),N("click",function(){return S(r),T(i.cycleSortBy())}),O(24,"i",20),g(25),v(),m(26,"button",21),N("click",function(){return S(r),T(i.toggleSortDirection())}),O(27,"i",22),v(),O(28,"div",15),m(29,"button",23),N("click",function(){return S(r),T(i.viewMode.set("list"))}),O(30,"i",24),v(),m(31,"button",25),N("click",function(){return S(r),T(i.viewMode.set("grid"))}),O(32,"i",26),v()()(),m(33,"div",27),N("click",function(){return S(r),T(i.deselect())})("contextmenu",function(s){return S(r),T(i.onBackgroundContextMenu(s))}),U(34,tQ,2,1)(35,nQ,3,0,"div",28),v(),m(36,"footer",29),g(37),v(),U(38,sQ,8,7,"div",30),m(39,"input",31,0),N("change",function(s){return S(r),T(i.handleFileUpload(s))}),v(),U(41,hQ,12,3,"div",32),v()}if(t&2){let r;w(3),J("disabled",i.currentPath()==="/"),w(3),X(i.breadcrumbs()),w(16),J("value",i.searchTerm()),w(3),me("",i.sortBy()," "),w(2),Y("fa-arrow-down",i.sortDirection()==="asc")("fa-arrow-up",i.sortDirection()==="desc"),w(2),Y("active",i.viewMode()==="list"),w(2),Y("active",i.viewMode()==="grid"),w(3),$(i.displayContents().length>0?34:35),w(3),me(" ",i.statusBarText()," "),w(),$(i.contextMenu().visible?38:-1),w(3),$((r=i.modalState())?41:-1,r)}},dependencies:[te,Vt,sn],styles:[".toolbar-btn[_ngcontent-%COMP%]{@apply h-9 px-3 flex items-center justify-center rounded-md hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors;}.toolbar-btn.active[_ngcontent-%COMP%]{@apply bg-blue-600 text-white;}.context-menu-item[_ngcontent-%COMP%]{@apply w-full text-left px-3 py-1.5 flex items-center gap-2 hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed;}@keyframes _ngcontent-%COMP%_fade-in-fast{0%{opacity:0;transform:scale(.95)}to{opacity:1;transform:scale(1)}}.animate-fade-in-fast[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fade-in-fast .1s ease-out}@keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0}to{opacity:1}}.animate-fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fade-in .15s ease-out}"],changeDetection:0});var N0=Bc;var Uc=class Uc{constructor(){this.context=F(yn,{optional:!0});this.fs=F(Bi);this.osInteraction=F(dt);this.notificationService=F(vt);this.filePath=I(null);this.content=I("");this.wordCount=le(()=>this.content().trim().split(/\s+/).filter(Boolean).length);this.charCount=le(()=>this.content().length)}ngOnInit(){let e=this.context?.filePath;if(e){this.filePath.set(e);let t=this.fs.readFile(e);t!==null&&this.content.set(t);let i=this.context?.windowId;if(i){let r=e.split("/").pop();this.osInteraction.updateWindowTitle.next({windowId:i,newTitle:`${r} - Text Editor`})}}}saveFile(){let e=this.filePath();e&&(this.fs.writeFile(e,this.content())?this.notificationService.show({appId:"text-editor",title:"Text Editor",body:"File saved successfully.",type:"success"}):this.notificationService.show({appId:"text-editor",title:"Text Editor",body:"Error saving file.",type:"error"}))}};Uc.\u0275fac=function(t){return new(t||Uc)},Uc.\u0275cmp=ee({type:Uc,selectors:[["app-text-editor"]],decls:13,vars:4,consts:[[1,"h-full","flex","flex-col","bg-gray-800","text-gray-200"],[1,"flex-shrink-0","p-2","bg-gray-700","flex","items-center","justify-between","gap-4"],[1,"flex","items-center","gap-4"],[1,"flex","items-center","gap-2","hover:bg-gray-600","p-2","rounded","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],[1,"fas","fa-save"],["placeholder","Start typing...",1,"flex-1","bg-gray-900","text-gray-200","p-4","font-mono","focus:outline-none","resize-none",3,"ngModelChange","ngModel"],[1,"flex-shrink-0","px-4","py-1","bg-gray-700","text-xs","text-gray-400","flex","items-center","justify-end","gap-4"]],template:function(t,i){t&1&&(m(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),N("click",function(){return i.saveFile()}),O(4,"i",4),m(5,"span"),g(6,"Save"),v()()()(),m(7,"textarea",5),N("ngModelChange",function(o){return i.content.set(o)}),v(),m(8,"div",6)(9,"span"),g(10),v(),m(11,"span"),g(12),v()()()),t&2&&(w(3),J("disabled",!i.filePath()),w(4),J("ngModel",i.content()),w(3),me("Words: ",i.wordCount()),w(2),me("Characters: ",i.charCount()))},dependencies:[te,At,_t,Dt,xt],encapsulation:2,changeDetection:0});var P0=Uc;function mQ(n,e){if(n&1){let t=B();W(0,"img",11),x(1,"div",12)(2,"button",13),G("click",function(){S(t);let r=C();return T(r.rotate(-90))}),W(3,"i",14),b(),x(4,"button",15),G("click",function(){S(t);let r=C();return T(r.rotate(90))}),W(5,"i",16),b(),W(6,"div",17),x(7,"button",18),G("click",function(){S(t);let r=C();return T(r.flip("x"))}),W(8,"i",19),b(),x(9,"button",20),G("click",function(){S(t);let r=C();return T(r.flip("y"))}),W(10,"i",21),b(),W(11,"div",17),x(12,"div",22)(13,"button",23),G("click",function(){S(t);let r=C();return T(r.applyFilter("grayscale"))}),g(14,"B&W"),b(),x(15,"button",24),G("click",function(){S(t);let r=C();return T(r.applyFilter("sepia"))}),g(16,"Sepia"),b(),x(17,"button",25),G("click",function(){S(t);let r=C();return T(r.applyFilter("invert"))}),g(18,"Invert"),b()(),W(19,"div",17),x(20,"button",26),G("click",function(){S(t);let r=C();return T(r.resetEdits())}),W(21,"i",27),b()()}if(n&2){let t=C();Be("transform",t.imageStyle().transform)("filter",t.imageStyle().filter),Fe("src",e,Qe)("alt",t.fileName()),w(13),Y("accent-bg",t.filter()==="grayscale"),w(2),Y("accent-bg",t.filter()==="sepia"),w(2),Y("accent-bg",t.filter()==="invert")}}function gQ(n,e){n&1&&(x(0,"div",9),W(1,"i",28),x(2,"p"),g(3),b()()),n&2&&(w(3),V(e))}function yQ(n,e){if(n&1){let t=B();x(0,"div",10),W(1,"i",29),x(2,"p",30),g(3,"No image loaded."),b(),x(4,"button",31),G("click",function(){S(t),C();let r=Hn(6);return T(r.click())}),W(5,"i",32),g(6,"Open Image "),b()()}}var $c=class $c{constructor(){this.context=F(yn,{optional:!0});this.fs=F(Bi);this.osInteraction=F(dt);this.imageSrc=I(null);this.error=I(null);this.fileName=I("Photo Viewer");this.rotation=I(0);this.scale=I({x:1,y:1});this.filter=I("none");this.imageStyle=le(()=>{let e=`rotate(${this.rotation()}deg) scaleX(${this.scale().x}) scaleY(${this.scale().y})`,t=this.filter()!=="none"?`${this.filter()}(1)`:"none";return{transform:e,filter:t}})}ngOnInit(){let e=this.context?.filePath;e?this.openFileFromPath(e):(this.imageSrc.set(null),this.fileName.set("Photo Viewer"))}openFileFromPath(e){let t=this.fs.readFile(e);if(t!==null){this.imageSrc.set(t);let i=e.split("/").pop()||"Photo";this.fileName.set(i),this.updateWindowTitle(i),this.resetEdits()}else this.error.set("Could not load image file.")}updateWindowTitle(e){let t=this.context?.windowId;t&&this.osInteraction.updateWindowTitle.next({windowId:t,newTitle:e})}openLocalFile(e){let t=e.target;if(t.files&&t.files[0]){let i=t.files[0];if(!i.type.startsWith("image/")){this.error.set("Selected file is not an image.");return}let r=new FileReader;r.onload=o=>{this.imageSrc.set(o.target?.result),this.fileName.set(i.name),this.updateWindowTitle(i.name),this.error.set(null),this.resetEdits()},r.onerror=()=>{this.error.set("Failed to read the selected file.")},r.readAsDataURL(i)}}rotate(e){this.rotation.update(t=>t+e)}flip(e){this.scale.update(t=>Z(P({},t),{[e]:t[e]*-1}))}applyFilter(e){this.filter.set(e)}resetEdits(){this.rotation.set(0),this.scale.set({x:1,y:1}),this.filter.set("none")}};$c.\u0275fac=function(t){return new(t||$c)},$c.\u0275cmp=ee({type:$c,selectors:[["app-photo-viewer"]],decls:13,vars:2,consts:[["fileInput",""],[1,"h-full","flex","flex-col","bg-gray-900","text-white"],[1,"flex-shrink-0","p-2","bg-gray-800/50","backdrop-blur-sm","flex","items-center","justify-between","gap-4","z-10"],[1,"font-semibold","px-2","truncate"],[1,"flex","items-center","gap-2"],["type","file","accept","image/*",1,"hidden",3,"change"],["title","Open Image",1,"w-10","h-10","hover:bg-gray-700","rounded-full",3,"click"],[1,"fas","fa-folder-open"],[1,"flex-1","flex","items-center","justify-center","p-4","relative","overflow-auto"],[1,"text-center","text-red-400"],[1,"text-center","text-gray-500","flex","flex-col","items-center","justify-center"],[1,"max-h-full","max-w-full","object-contain","rounded-lg","transition-all","duration-300",3,"src","alt"],[1,"absolute","bottom-4","left-1/2","-translate-x-1/2","bg-gray-900/70","backdrop-blur-sm","p-2","rounded-lg","flex","items-center","gap-2","shadow-lg"],["title","Rotate Left",1,"w-10","h-10","hover:bg-gray-700","rounded-full",3,"click"],[1,"fas","fa-rotate-left"],["title","Rotate Right",1,"w-10","h-10","hover:bg-gray-700","rounded-full",3,"click"],[1,"fas","fa-rotate-right"],[1,"w-px","h-6","bg-gray-600"],["title","Flip Horizontal",1,"w-10","h-10","hover:bg-gray-700","rounded-full",3,"click"],[1,"fas","fa-arrows-left-right"],["title","Flip Vertical",1,"w-10","h-10","hover:bg-gray-700","rounded-full",3,"click"],[1,"fas","fa-arrows-up-down"],[1,"flex","items-center","gap-1"],["title","Grayscale",1,"px-3","py-1.5","text-xs","rounded-md","hover:bg-gray-700",3,"click"],["title","Sepia",1,"px-3","py-1.5","text-xs","rounded-md","hover:bg-gray-700",3,"click"],["title","Invert",1,"px-3","py-1.5","text-xs","rounded-md","hover:bg-gray-700",3,"click"],["title","Reset Edits",1,"w-10","h-10","hover:bg-gray-700","rounded-full","text-red-400",3,"click"],[1,"fas","fa-trash-arrow-up"],[1,"fas","fa-exclamation-triangle","text-4xl","mb-2"],[1,"fas","fa-image","text-6xl","mb-4"],[1,"mb-4"],[1,"accent-bg","text-white","font-semibold","px-4","py-2","rounded-md","hover:opacity-90","transition-opacity","text-sm",3,"click"],[1,"fas","fa-folder-open","mr-2"]],template:function(t,i){if(t&1){let r=B();x(0,"div",1)(1,"div",2)(2,"h3",3),g(3),b(),x(4,"div",4)(5,"input",5,0),G("change",function(s){return S(r),T(i.openLocalFile(s))}),b(),x(7,"button",6),G("click",function(){S(r);let s=Hn(6);return T(s.click())}),W(8,"i",7),b()()(),x(9,"div",8),U(10,mQ,22,12)(11,gQ,4,1,"div",9)(12,yQ,7,0,"div",10),b()()}if(t&2){let r;w(3),V(i.fileName()),w(7),$((r=i.imageSrc())?10:(r=i.error())?11:12,r)}},dependencies:[te],encapsulation:2,changeDetection:0});var R0=$c;var vQ=(n,e)=>e[0],_Q=(n,e)=>e.id;function wQ(n,e){if(n&1&&O(0,"div",15),n&2){let t=C().$implicit;Be("background-image","url("+t.icon+")")}}function CQ(n,e){if(n&1&&O(0,"i",9),n&2){let t=C().$implicit;J("ngClass",t.icon)}}function EQ(n,e){n&1&&(m(0,"button",14),O(1,"i",16),g(2,"Installed "),v())}function xQ(n,e){if(n&1){let t=B();m(0,"button",19),N("click",function(){S(t);let r=C(2).$implicit,o=C(2);return T(o.uninstall(r))}),g(1," Uninstall "),v()}}function bQ(n,e){if(n&1){let t=B();m(0,"button",20),N("click",function(){S(t);let r=C(2).$implicit,o=C(2);return T(o.install(r))}),g(1," Install "),v()}}function SQ(n,e){if(n&1&&U(0,xQ,2,0,"button",17)(1,bQ,2,0,"button",18),n&2){let t=C().$implicit,i=C(2);$(i.appManagementService.isAppInstalled(t.id)?0:1)}}function TQ(n,e){if(n&1&&(m(0,"div",7),U(1,wQ,1,2,"div",8)(2,CQ,1,1,"i",9),m(3,"div",10)(4,"h3",11),g(5),v(),m(6,"p",12),g(7),v()(),m(8,"div",13),U(9,EQ,3,0,"button",14)(10,SQ,2,1),v()()),n&2){let t=e.$implicit;w(),$(t.icon.startsWith("data:image")?1:2),w(4),V(t.title),w(2),V(t.description),w(2),$(t.isCore?9:10)}}function IQ(n,e){if(n&1&&(m(0,"section")(1,"h3",5),g(2),v(),m(3,"div",6),Q(4,TQ,11,4,"div",7,_Q),v()()),n&2){let t=e.$implicit;w(2),V(t[0]),w(2),X(t[1])}}var Hc=class Hc{constructor(){this.appManagementService=F(Vi);this.notificationService=F(vt);this.allApps=this.appManagementService.allApps;this.categorizedApps=le(()=>{let e={};for(let i of this.allApps()){let r=i.category||"Other";e[r]||(e[r]=[]),e[r].push(i)}let t=["System","Productivity","Creative","Utilities","Games","Social","Other"];return Object.entries(e).sort(([i],[r])=>{let o=t.indexOf(i),s=t.indexOf(r);return o===-1?1:s===-1?-1:o-s})})}install(e){this.appManagementService.installApp(e.id),this.notificationService.show({appId:"store",title:"App Store",body:`${e.title} installed successfully.`,type:"success"})}uninstall(e){this.appManagementService.uninstallApp(e.id),this.notificationService.show({appId:"store",title:"App Store",body:`${e.title} has been uninstalled.`,type:"info"})}};Hc.\u0275fac=function(t){return new(t||Hc)},Hc.\u0275cmp=ee({type:Hc,selectors:[["app-store"]],decls:9,vars:0,consts:[[1,"h-full","bg-gray-900/80","backdrop-blur-sm","text-gray-200","overflow-y-auto"],[1,"p-6"],[1,"text-3xl","font-bold","mb-2"],[1,"text-gray-400","mb-8"],[1,"px-6","pb-6","space-y-8"],[1,"text-xl","font-semibold","mb-4","text-white/90","border-b-2","border-gray-700","pb-2"],[1,"grid","grid-cols-2","sm:grid-cols-3","md:grid-cols-4","lg:grid-cols-5","gap-6"],[1,"bg-gray-800/60","p-4","rounded-lg","flex","flex-col","items-center","text-center","transition-all","duration-300","hover:bg-gray-700/80","hover:-translate-y-1"],[1,"w-12","h-12","mb-4","bg-contain","bg-no-repeat","bg-center",3,"background-image"],[1,"text-5xl","mb-4",3,"ngClass"],[1,"flex","flex-col","flex-grow","w-full"],[1,"font-bold","text-base","mb-1"],[1,"text-xs","text-gray-400","flex-grow","mb-4","h-10"],[1,"w-full"],[1,"w-full","bg-gray-600","text-white","font-semibold","px-4","py-2","rounded-md","text-sm","cursor-not-allowed","opacity-70"],[1,"w-12","h-12","mb-4","bg-contain","bg-no-repeat","bg-center"],[1,"fas","fa-check","mr-2"],[1,"w-full","bg-red-600","hover:bg-red-500","text-white","font-semibold","px-4","py-2","rounded-md","text-sm","transition-colors"],[1,"w-full","accent-bg","hover:opacity-90","text-white","font-semibold","px-4","py-2","rounded-md","text-sm","transition-colors"],[1,"w-full","bg-red-600","hover:bg-red-500","text-white","font-semibold","px-4","py-2","rounded-md","text-sm","transition-colors",3,"click"],[1,"w-full","accent-bg","hover:opacity-90","text-white","font-semibold","px-4","py-2","rounded-md","text-sm","transition-colors",3,"click"]],template:function(t,i){t&1&&(m(0,"div",0)(1,"div",1)(2,"h2",2),g(3,"App Store"),v(),m(4,"p",3),g(5,"Discover apps and games for Banana OS."),v()(),m(6,"div",4),Q(7,IQ,6,1,"section",null,vQ),v()()),t&2&&(w(7),X(i.categorizedApps()))},dependencies:[te,Vt],encapsulation:2,changeDetection:0});var F0=Hc;var qc=class qc{};qc.\u0275fac=function(t){return new(t||qc)},qc.\u0275cmp=ee({type:qc,selectors:[["app-placeholder"]],decls:6,vars:0,consts:[[1,"h-full","w-full","flex","flex-col","items-center","justify-center","bg-gray-800","text-gray-400","p-8","text-center"],[1,"fas","fa-tools","text-6xl","mb-4"],[1,"text-2xl","font-bold","text-white","mb-2"]],template:function(t,i){t&1&&(x(0,"div",0),W(1,"i",1),x(2,"h2",2),g(3,"Under Construction"),b(),x(4,"p"),g(5,"This application is coming soon to Banana OS!"),b()())},encapsulation:2,changeDetection:0});var L0=qc;var DQ=(n,e)=>e.id;function AQ(n,e){if(n&1){let t=B();m(0,"div",10),N("click",function(){let r=S(t).$implicit,o=C();return T(o.selectNote(r))}),m(1,"h3",11),g(2),v(),m(3,"p",12),g(4),Ue(5,"date"),v()()}if(n&2){let t=e.$implicit,i=C();Y("bg-gray-700/50",i.selectedNoteId()===t.id)("accent-border",i.selectedNoteId()===t.id)("border-transparent",i.selectedNoteId()!==t.id)("hover:bg-gray-700/30",i.selectedNoteId()!==t.id),w(2),V(t.title),w(2),V(et(5,10,t.lastModified,"short"))}}function kQ(n,e){if(n&1){let t=B();m(0,"div",13)(1,"button",14),N("click",function(){S(t);let r=C();return T(r.deleteSelectedNote())}),O(2,"i",15),v()(),m(3,"textarea",16),N("ngModelChange",function(r){S(t);let o=C();return T(o.selectedNoteContent.set(r))}),v()}if(n&2){let t=C();w(3),J("ngModel",t.selectedNoteContent())}}function MQ(n,e){n&1&&(m(0,"div",9)(1,"div",17),O(2,"i",18),m(3,"p"),g(4,"Select a note or create a new one."),v()()())}var UN="banana-os-notes",Gc=class Gc{constructor(){this.notes=I([]);this.selectedNoteId=I(null);this.selectedNoteContent=I("");this.osInteraction=F(dt);this.destroyRef=F(ht);this.loadNotes(),Ae(()=>{let e=this.selectedNoteContent(),t=this.selectedNoteId();t!==null&&this.updateNoteContent(t,e)},{allowSignalWrites:!0}),this.osInteraction.inAppActionRequest.pipe(Or(this.destroyRef)).subscribe(e=>{e.appId==="prod-notes"&&e.action==="createNote"&&this.createNewNote(e.payload.title,e.payload.content)})}loadNotes(){let e=localStorage.getItem(UN);e&&this.notes.set(JSON.parse(e)),this.notes().length>0&&this.selectNote(this.notes()[0])}saveNotes(){localStorage.setItem(UN,JSON.stringify(this.notes()))}selectNote(e){this.selectedNoteId.set(e.id),this.selectedNoteContent.set(e.content)}createNewNote(e="New Note",t=""){let i={id:Date.now(),title:e,content:t,lastModified:Date.now()};this.notes.update(r=>[i,...r].sort((o,s)=>s.lastModified-o.lastModified)),this.selectNote(i),this.saveNotes()}deleteSelectedNote(){let e=this.selectedNoteId();if(e===null)return;this.notes.update(i=>i.filter(r=>r.id!==e));let t=this.notes();t.length>0?this.selectNote(t[0]):(this.selectedNoteId.set(null),this.selectedNoteContent.set("")),this.saveNotes()}updateNoteContent(e,t){let i=!1;this.notes.update(r=>{let o=r.findIndex(s=>s.id===e);if(o>-1){let s=r[o];if(s.content!==t){s.content=t,s.lastModified=Date.now();let a=t.trim().split(`
`)[0];s.title=a.substring(0,30)||"New Note",i=!0}}return[...r]}),i&&(this.notes.update(r=>[...r].sort((o,s)=>s.lastModified-o.lastModified)),this.saveNotes())}};Gc.\u0275fac=function(t){return new(t||Gc)},Gc.\u0275cmp=ee({type:Gc,selectors:[["app-notes"]],decls:13,vars:1,consts:[[1,"h-full","flex","bg-gray-800","text-gray-200"],[1,"w-64","bg-gray-900/50","flex-shrink-0","flex","flex-col"],[1,"p-2","flex-shrink-0","border-b","border-gray-700/50","flex","items-center","justify-between"],[1,"text-lg","font-bold"],["title","New Note",1,"w-8","h-8","flex","items-center","justify-center","hover:bg-gray-700","rounded-md",3,"click"],[1,"fas","fa-plus"],[1,"flex-1","overflow-y-auto"],[1,"p-3","cursor-pointer","border-l-4",3,"bg-gray-700/50","accent-border","border-transparent","hover:bg-gray-700/30"],[1,"flex-1","flex","flex-col"],[1,"h-full","flex","items-center","justify-center","text-gray-500"],[1,"p-3","cursor-pointer","border-l-4",3,"click"],[1,"font-semibold","truncate"],[1,"text-xs","text-gray-400"],[1,"p-2","flex-shrink-0","border-b","border-gray-700/50","flex","items-center","justify-end"],["title","Delete Note",1,"w-8","h-8","flex","items-center","justify-center","hover:bg-red-500/50","rounded-md","text-red-400","hover:text-red-300",3,"click"],[1,"fas","fa-trash"],["placeholder","Start writing your note...",1,"flex-1","bg-gray-800","text-gray-200","p-4","font-sans","text-base","focus:outline-none","resize-none",3,"ngModelChange","ngModel"],[1,"text-center"],[1,"fas","fa-sticky-note","text-5xl","mb-4"]],template:function(t,i){t&1&&(m(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),g(4,"Notes"),v(),m(5,"button",4),N("click",function(){return i.createNewNote()}),O(6,"i",5),v()(),m(7,"div",6),Q(8,AQ,6,13,"div",7,DQ),v()(),m(10,"div",8),U(11,kQ,4,1)(12,MQ,5,0,"div",9),v()()),t&2&&(w(8),X(i.notes()),w(3),$(i.selectedNoteId()!==null?11:12))},dependencies:[te,At,_t,Dt,xt,sn],encapsulation:2,changeDetection:0});var O0=Gc;var NQ=(n,e)=>e.id;function PQ(n,e){if(n&1&&(Yo(),O(0,"line",2)),n&2){let t=e.$implicit;Fi("x1",t.x1)("y1",t.y1)("x2",t.x2)("y2",t.y2)}}function RQ(n,e){if(n&1&&(Yo(),m(0,"foreignObject",3),Jl(),m(1,"div",4),O(2,"i",5),m(3,"span",6),g(4),v()()()),n&2){let t=e.$implicit;Fi("x",t.x-50)("y",t.y-30),w(),J("ngClass","node-"+t.type),w(),J("ngClass",t.icon),w(2),V(t.label)}}var FQ={terminal:"/System/bin/terminal",settings:"/System/apps/settings.app",browser:"/System/apps/browser.app",calculator:"/System/apps/calculator.app",weather:"/System/apps/weather.app",camera:"/System/drivers/camera.sys","file-explorer":"/System/apps/explorer.app",store:"/System/apps/store.app",paint:"/System/apps/paint.app",notes:"/System/apps/notes.app","system-monitor":"/System/apps/sysmon.app",calendar:"/System/apps/calendar.app",clock:"/System/apps/clock.app",kanban:"/System/apps/kanban.app",maps:"/System/apps/maps.app","pdf-reader":"/System/apps/pdfreader.app",translator:"/System/apps/translator.app","banana-copilot":"/System/core/copilot.service","music-player":"/System/apps/music.app","markdown-editor":"/System/apps/markdown.app",podcasts:"/System/apps/podcasts.app",chess:"/System/games/chess.app",solitaire:"/System/games/solitaire.app",minesweeper:"/System/games/minesweeper.app",sudoku:"/System/games/sudoku.app","puzzle-blocks":"/System/games/blocks.app",2048:"/System/games/2048.app","word-finder":"/System/games/wordfinder.app","recipe-book":"/System/apps/recipes.app",stocks:"/System/apps/stocks.app","fitness-tracker":"/System/apps/fitness.app","ebook-reader":"/System/apps/ebook.app","news-feed":"/System/apps/news.app"},Wc=class Wc{constructor(){this.desktopStateService=F(os);this.viewWidth=800;this.viewHeight=500;this.systemGraph=le(()=>{let e=this.desktopStateService.openWindows(),t=[],i=[],r={id:"system-kernel",label:"Banana OS Kernel",icon:"fas fa-microchip",type:"system",x:this.viewWidth/2,y:50};t.push(r);let o=e.length,s=this.viewWidth/(o+1);return e.forEach((a,l)=>{let c={id:a.id,label:a.title,icon:a.icon,type:"app",x:s*(l+1),y:200};t.push(c),i.push({source:r.id,target:c.id});let d=null;try{d=a.injector?.get(yn,null)?.filePath}catch{}if(d||(d=FQ[a.appId]||null),d){let p=d.split("/").pop()||"unknown",h={id:`${a.id}-file-${p}`,label:p,icon:this.getIconForFile(p),type:"file",x:c.x,y:350};t.push(h),i.push({source:c.id,target:h.id})}}),{nodes:t,links:i}});this.graphLinksWithPositions=le(()=>{let{nodes:e,links:t}=this.systemGraph(),i=new Map(e.map(r=>[r.id,r]));return t.map(r=>{let o=i.get(r.source),s=i.get(r.target);return!o||!s?null:{x1:o.x,y1:o.y,x2:s.x,y2:s.y}}).filter(r=>r!==null)})}getIconForFile(e){switch(e.split(".").pop()?.toLowerCase()){case"txt":case"md":return"fas fa-file-alt";case"png":case"jpg":return"fas fa-file-image";case"app":return"fas fa-cube";case"sys":return"fas fa-cog";case"bin":case"service":return"fas fa-cogs";default:return"fas fa-file"}}};Wc.\u0275fac=function(t){return new(t||Wc)},Wc.\u0275cmp=ee({type:Wc,selectors:[["app-system-monitor"]],decls:6,vars:0,consts:[[1,"h-full","w-full","flex","flex-col","bg-gray-900","text-gray-300","font-sans","overflow-hidden"],[1,"w-full","h-full"],[1,"link"],["width","100","height","60"],[1,"node-container",3,"ngClass"],[1,"text-2xl",3,"ngClass"],[1,"text-xs","font-semibold","text-center","mt-1"]],template:function(t,i){t&1&&(m(0,"div",0),Yo(),m(1,"svg",1),Q(2,PQ,1,4,":svg:line",2,Ve),Q(4,RQ,5,5,":svg:foreignObject",3,NQ),v()()),t&2&&(w(2),X(i.graphLinksWithPositions()),w(2),X(i.systemGraph().nodes))},dependencies:[te,Vt],styles:["@tailwind base;@tailwind components;@tailwind utilities;.link[_ngcontent-%COMP%]{stroke:#4a5568;stroke-width:2}.node-container[_ngcontent-%COMP%]{@apply w-full h-full flex flex-col items-center justify-center p-2 rounded-lg transition-all duration-200 cursor-pointer;}.node-container[_ngcontent-%COMP%]:hover{transform:scale(1.1);background-color:#ffffff1a}.node-system[_ngcontent-%COMP%]{@apply bg-purple-900/50 text-purple-300 border-2 border-purple-500/80;}.node-app[_ngcontent-%COMP%]{@apply bg-blue-900/50 text-blue-300 border-2 border-blue-500/80;}.node-file[_ngcontent-%COMP%]{@apply bg-gray-700/50 text-gray-400 border-2 border-gray-600/80;}"],changeDetection:0});var V0=Wc;var LQ=(n,e)=>e.date;function OQ(n,e){if(n&1&&(x(0,"div",10),g(1),b()),n&2){let t=e.$implicit;w(),me(" ",t," ")}}function VQ(n,e){if(n&1&&(x(0,"div",12),g(1),b()),n&2){let t=e.$implicit;Y("text-gray-500",!t.isCurrentMonth)("accent-bg",t.isToday)("text-white",t.isToday)("font-bold",t.isToday),w(),me(" ",t.dayOfMonth," ")}}var zc=class zc{constructor(){this.currentDate=I(new Date);this.weekdays=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];this.monthName=le(()=>this.currentDate().toLocaleString("default",{month:"long"}));this.year=le(()=>this.currentDate().getFullYear());this.calendarGrid=le(()=>{let e=this.currentDate(),t=e.getFullYear(),i=e.getMonth(),r=new Date(t,i,1),o=new Date(t,i+1,0),s=r.getDay(),a=o.getDate(),l=[],c=new Date;c.setHours(0,0,0,0);let d=new Date(t,i,0).getDate();for(let h=s;h>0;h--){let y=d-h+1;l.push({date:new Date(t,i-1,y),dayOfMonth:y,isCurrentMonth:!1,isToday:!1})}for(let h=1;h<=a;h++){let y=new Date(t,i,h);l.push({date:y,dayOfMonth:h,isCurrentMonth:!0,isToday:y.getTime()===c.getTime()})}let p=42-l.length;for(let h=1;h<=p;h++)l.push({date:new Date(t,i+1,h),dayOfMonth:h,isCurrentMonth:!1,isToday:!1});return l})}goToPreviousMonth(){this.currentDate.update(e=>{let t=new Date(e);return t.setMonth(t.getMonth()-1),t})}goToNextMonth(){this.currentDate.update(e=>{let t=new Date(e);return t.setMonth(t.getMonth()+1),t})}goToToday(){this.currentDate.set(new Date)}};zc.\u0275fac=function(t){return new(t||zc)},zc.\u0275cmp=ee({type:zc,selectors:[["app-calendar"]],decls:18,vars:2,consts:[[1,"h-full","flex","flex-col","bg-gray-800","text-gray-200","p-4","font-sans"],[1,"flex","items-center","justify-between","mb-4","flex-shrink-0"],[1,"text-xl","font-bold"],[1,"text-gray-400"],[1,"flex","items-center","gap-2"],[1,"px-3","py-1","text-sm","bg-gray-700","hover:bg-gray-600","rounded-md",3,"click"],[1,"w-8","h-8","flex","items-center","justify-center","hover:bg-gray-700","rounded-full",3,"click"],[1,"fas","fa-chevron-left"],[1,"fas","fa-chevron-right"],[1,"grid","grid-cols-7","gap-1","flex-1"],[1,"text-center","font-medium","text-xs","text-gray-400","py-2"],[1,"flex","items-center","justify-center","rounded-lg","text-sm",3,"text-gray-500","accent-bg","text-white","font-bold"],[1,"flex","items-center","justify-center","rounded-lg","text-sm"]],template:function(t,i){t&1&&(x(0,"div",0)(1,"header",1)(2,"h2",2),g(3),x(4,"span",3),g(5),b()(),x(6,"div",4)(7,"button",5),G("click",function(){return i.goToToday()}),g(8,"Today"),b(),x(9,"button",6),G("click",function(){return i.goToPreviousMonth()}),W(10,"i",7),b(),x(11,"button",6),G("click",function(){return i.goToNextMonth()}),W(12,"i",8),b()()(),x(13,"div",9),Q(14,OQ,2,1,"div",10,Ot),Q(16,VQ,2,9,"div",11,LQ),b()()),t&2&&(w(3),me(" ",i.monthName()," "),w(2),V(i.year()),w(9),X(i.weekdays),w(2),X(i.calendarGrid()))},dependencies:[te],encapsulation:2,changeDetection:0});var B0=zc;function BQ(n,e){if(n&1&&(m(0,"div",7)(1,"h3",8),g(2,"Local Time"),v(),m(3,"div",9),g(4),Ue(5,"date"),v(),m(6,"div",10),g(7),Ue(8,"date"),v()()),n&2){let t=C();w(4),V(et(5,2,t.currentTime(),"h:mm:ss a")),w(3),V(et(8,5,t.currentTime(),"fullDate"))}}function UQ(n,e){if(n&1){let t=B();m(0,"div",7)(1,"div",11),g(2),Ue(3,"date"),m(4,"span",12),g(5),Ue(6,"number"),v()(),m(7,"div",13)(8,"button",14),N("click",function(){S(t);let r=C();return T(r.toggleStopwatch())}),g(9),v(),m(10,"button",15),N("click",function(){S(t);let r=C();return T(r.resetStopwatch())}),g(11," Reset "),v()()()}if(n&2){let t=C();w(2),me(" ",ya(3,11,t.stopwatchTime(),"mm:ss","UTC"),"."),w(3),V(et(6,15,t.stopwatchTime()%1e3,"3.0-0")),w(3),Y("bg-red-600",t.isStopwatchRunning())("hover:bg-red-500",t.isStopwatchRunning())("accent-bg",!t.isStopwatchRunning())("hover:opacity-90",!t.isStopwatchRunning()),w(),me(" ",t.isStopwatchRunning()?"Stop":"Start"," ")}}function $Q(n,e){if(n&1&&(m(0,"div",16),g(1),Ue(2,"date"),v()),n&2){let t=C(2);w(),me(" ",ya(2,1,t.timerTime()*1e3,"HH:mm:ss","UTC")," ")}}function HQ(n,e){if(n&1){let t=B();m(0,"div",17)(1,"input",18),Dn("ngModelChange",function(r){S(t);let o=C(2);return qn(o.timerInputHours,r)||(o.timerInputHours=r),T(r)}),N("change",function(){S(t);let r=C(2);return T(r.setTimer())}),v(),m(2,"span"),g(3,":"),v(),m(4,"input",19),Dn("ngModelChange",function(r){S(t);let o=C(2);return qn(o.timerInputMinutes,r)||(o.timerInputMinutes=r),T(r)}),N("change",function(){S(t);let r=C(2);return T(r.setTimer())}),v(),m(5,"span"),g(6,":"),v(),m(7,"input",19),Dn("ngModelChange",function(r){S(t);let o=C(2);return qn(o.timerInputSeconds,r)||(o.timerInputSeconds=r),T(r)}),N("change",function(){S(t);let r=C(2);return T(r.setTimer())}),v()()}if(n&2){let t=C(2);w(),In("ngModel",t.timerInputHours),w(3),In("ngModel",t.timerInputMinutes),w(3),In("ngModel",t.timerInputSeconds)}}function qQ(n,e){if(n&1){let t=B();m(0,"div",7),U(1,$Q,3,5,"div",16)(2,HQ,8,3,"div",17),m(3,"div",13)(4,"button",14),N("click",function(){S(t);let r=C();return T(r.toggleTimer())}),g(5),v(),m(6,"button",15),N("click",function(){S(t);let r=C();return T(r.resetTimer())}),g(7," Reset "),v()()()}if(n&2){let t=C();w(),$(t.isTimerRunning()||t.timerTime()<t.timerInputHours()*3600+t.timerInputMinutes()*60+t.timerInputSeconds()?1:2),w(3),Y("bg-red-600",t.isTimerRunning())("hover:bg-red-500",t.isTimerRunning())("accent-bg",!t.isTimerRunning())("hover:opacity-90",!t.isTimerRunning()),w(),me(" ",t.isTimerRunning()?"Pause":"Start"," ")}}var jc=class jc{constructor(){this.activeTab=I("clock");this.currentTime=I(new Date);this.stopwatchTime=I(0);this.isStopwatchRunning=I(!1);this.timerInputHours=I(0);this.timerInputMinutes=I(5);this.timerInputSeconds=I(0);this.timerTime=I(300);this.isTimerRunning=I(!1);this.timerAudio=new Audio("https://assets.mixkit.co/sfx/preview/mixkit-alarm-digital-clock-beep-989.mp3"),this.timerAudio.loop=!0}ngOnInit(){this.clockInterval=setInterval(()=>{this.currentTime.set(new Date)},1e3)}ngOnDestroy(){clearInterval(this.clockInterval),clearInterval(this.stopwatchInterval),clearInterval(this.timerInterval),this.timerAudio.pause()}toggleStopwatch(){if(this.isStopwatchRunning())this.isStopwatchRunning.set(!1),clearInterval(this.stopwatchInterval);else{this.isStopwatchRunning.set(!0);let e=Date.now()-this.stopwatchTime();this.stopwatchInterval=setInterval(()=>{this.stopwatchTime.set(Date.now()-e)},10)}}resetStopwatch(){this.stopwatchTime.set(0),this.isStopwatchRunning()&&(this.isStopwatchRunning.set(!1),clearInterval(this.stopwatchInterval))}setTimer(){let e=this.timerInputHours()*3600+this.timerInputMinutes()*60+this.timerInputSeconds();this.timerTime.set(e)}toggleTimer(){if(this.isTimerRunning())this.isTimerRunning.set(!1),clearInterval(this.timerInterval);else{if(this.timerTime()<=0&&this.setTimer(),this.timerTime()<=0)return;this.isTimerRunning.set(!0);let e=Date.now()+this.timerTime()*1e3;this.timerInterval=setInterval(()=>{let t=Math.round((e-Date.now())/1e3);t>=0?this.timerTime.set(t):(this.timerTime.set(0),this.isTimerRunning.set(!1),clearInterval(this.timerInterval),this.timerAudio.play())},1e3)}}resetTimer(){this.isTimerRunning.set(!1),clearInterval(this.timerInterval),this.setTimer(),this.timerAudio.pause(),this.timerAudio.currentTime=0}};jc.\u0275fac=function(t){return new(t||jc)},jc.\u0275cmp=ee({type:jc,selectors:[["app-clock"]],decls:15,vars:7,consts:[[1,"h-full","flex","flex-col","bg-gray-900","text-gray-200","font-sans"],[1,"flex-shrink-0","flex","border-b","border-gray-700/50"],[1,"tab-btn",3,"click"],[1,"fas","fa-globe-americas","mr-2"],[1,"fas","fa-stopwatch","mr-2"],[1,"fas","fa-hourglass-half","mr-2"],[1,"flex-1","flex","items-center","justify-center","p-6"],[1,"text-center"],[1,"text-xl","text-gray-400"],[1,"text-6xl","font-bold","my-2"],[1,"text-lg","text-gray-400"],[1,"font-mono","text-6xl"],[1,"text-4xl"],[1,"flex","gap-4","justify-center","mt-6"],[1,"w-24","h-24","rounded-full","text-lg","font-semibold","transition-colors",3,"click"],[1,"w-24","h-24","rounded-full","bg-gray-700","hover:bg-gray-600","text-lg","font-semibold","transition-colors",3,"click"],[1,"font-mono","text-7xl"],[1,"flex","items-center","justify-center","gap-2","text-6xl","font-mono"],["type","number","min","0","max","23",1,"timer-input",3,"ngModelChange","change","ngModel"],["type","number","min","0","max","59",1,"timer-input",3,"ngModelChange","change","ngModel"]],template:function(t,i){if(t&1&&(m(0,"div",0)(1,"div",1)(2,"button",2),N("click",function(){return i.activeTab.set("clock")}),O(3,"i",3),g(4,"World Clock "),v(),m(5,"button",2),N("click",function(){return i.activeTab.set("stopwatch")}),O(6,"i",4),g(7,"Stopwatch "),v(),m(8,"button",2),N("click",function(){return i.activeTab.set("timer")}),O(9,"i",5),g(10,"Timer "),v()(),m(11,"div",6),U(12,BQ,9,8,"div",7)(13,UQ,12,18,"div",7)(14,qQ,8,10,"div",7),v()()),t&2){let r;w(2),Y("active",i.activeTab()==="clock"),w(3),Y("active",i.activeTab()==="stopwatch"),w(3),Y("active",i.activeTab()==="timer"),w(4),$((r=i.activeTab())==="clock"?12:r==="stopwatch"?13:r==="timer"?14:-1)}},dependencies:[te,At,_t,_b,Dt,Cb,wb,xt,fo,sn],styles:["@tailwind base;@tailwind components;@tailwind utilities;@layer components{.tab-btn[_ngcontent-%COMP%]{@apply flex-1 py-3 px-4 text-center text-gray-400 border-b-2 border-transparent hover:bg-gray-700/50 transition-colors;}.tab-btn.active[_ngcontent-%COMP%]{@apply text-white accent-border;}.timer-input[_ngcontent-%COMP%]{@apply bg-transparent text-center w-28 focus:outline-none;}.timer-input[_ngcontent-%COMP%]::-webkit-outer-spin-button, .timer-input[_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}.timer-input[_ngcontent-%COMP%]{-moz-appearance:textfield}}"],changeDetection:0});var U0=jc;var Kc=class Kc{constructor(){this.sanitizer=F(ir);this.searchQuery=I("Eiffel Tower");this.mapUrl=le(()=>{let e=this.searchQuery(),t=`https://maps.google.com/maps?q=${encodeURIComponent(e)}&output=embed`;return this.sanitizer.bypassSecurityTrustResourceUrl(t)})}onSearch(e){let t=e.target;t.value&&this.searchQuery.set(t.value)}};Kc.\u0275fac=function(t){return new(t||Kc)},Kc.\u0275cmp=ee({type:Kc,selectors:[["app-maps"]],decls:7,vars:2,consts:[[1,"h-full","flex","flex-col","bg-gray-800"],[1,"flex-shrink-0","p-2","bg-gray-700","flex","items-center","gap-2"],[1,"flex-1","relative"],[1,"fas","fa-search","text-gray-400","absolute","left-3","top-1/2","-translate-y-1/2"],["type","text","placeholder","Search for a location...",1,"w-full","bg-gray-900","rounded-full","py-1.5","pl-9","pr-3","text-white","focus:outline-none","focus:ring-2","accent-ring-focus",3,"change","value"],[1,"flex-1","bg-white"],["loading","lazy",1,"w-full","h-full","border-0",3,"src"]],template:function(t,i){t&1&&(x(0,"div",0)(1,"div",1)(2,"div",2),W(3,"i",3),x(4,"input",4),G("change",function(o){return i.onSearch(o)}),b()()(),x(5,"div",5),W(6,"iframe",6),b()()),t&2&&(w(4),Fe("value",i.searchQuery()),w(2),Fe("src",i.mapUrl(),ha))},dependencies:[te],encapsulation:2,changeDetection:0});var $0=Kc;function GQ(n,e){n&1&&W(0,"iframe",9),n&2&&Fe("src",e,ha)}function WQ(n,e){n&1&&(x(0,"div",10),W(1,"i",12),x(2,"p"),g(3),b()()),n&2&&(w(3),V(e))}function zQ(n,e){if(n&1){let t=B();x(0,"div",11),W(1,"i",13),x(2,"p",14),g(3,"No PDF loaded."),b(),x(4,"button",15),G("click",function(){S(t),C();let r=Hn(6);return T(r.click())}),W(5,"i",16),g(6,"Open PDF "),b()()}}var Yc=class Yc{constructor(){this.sanitizer=F(ir);this.pdfSrc=I(null);this.error=I(null);this.fileName=I(null);this.currentObjectUrl=null}ngOnDestroy(){this.currentObjectUrl&&URL.revokeObjectURL(this.currentObjectUrl)}openLocalFile(e){this.currentObjectUrl&&URL.revokeObjectURL(this.currentObjectUrl);let t=e.target;if(t.files&&t.files[0]){let i=t.files[0];if(i.type!=="application/pdf"){this.error.set("Selected file is not a PDF."),this.pdfSrc.set(null),this.fileName.set(null);return}this.currentObjectUrl=URL.createObjectURL(i),this.pdfSrc.set(this.sanitizer.bypassSecurityTrustResourceUrl(this.currentObjectUrl)),this.fileName.set(i.name),this.error.set(null)}}};Yc.\u0275fac=function(t){return new(t||Yc)},Yc.\u0275cmp=ee({type:Yc,selectors:[["app-pdf-reader"]],decls:13,vars:2,consts:[["fileInput",""],[1,"h-full","flex","flex-col","bg-gray-800","text-white"],[1,"flex-shrink-0","p-2","bg-gray-900/50","flex","items-center","justify-between","gap-4"],[1,"font-semibold","px-2","truncate"],[1,"flex","items-center","gap-2"],["type","file","accept","application/pdf",1,"hidden",3,"change"],["title","Open PDF",1,"w-10","h-10","hover:bg-gray-700","rounded-full",3,"click"],[1,"fas","fa-folder-open"],[1,"flex-1","flex","items-center","justify-center","p-1","bg-gray-700"],["title","PDF Viewer",1,"w-full","h-full",3,"src"],[1,"text-center","text-red-400"],[1,"text-center","text-gray-500","flex","flex-col","items-center","justify-center"],[1,"fas","fa-exclamation-triangle","text-4xl","mb-2"],[1,"fas","fa-file-pdf","text-6xl","mb-4"],[1,"mb-4"],[1,"accent-bg","text-white","font-semibold","px-4","py-2","rounded-md","hover:opacity-90","transition-opacity","text-sm",3,"click"],[1,"fas","fa-folder-open","mr-2"]],template:function(t,i){if(t&1){let r=B();x(0,"div",1)(1,"div",2)(2,"h3",3),g(3),b(),x(4,"div",4)(5,"input",5,0),G("change",function(s){return S(r),T(i.openLocalFile(s))}),b(),x(7,"button",6),G("click",function(){S(r);let s=Hn(6);return T(s.click())}),W(8,"i",7),b()()(),x(9,"div",8),U(10,GQ,1,1,"iframe",9)(11,WQ,4,1,"div",10)(12,zQ,7,0,"div",11),b()()}if(t&2){let r;w(3),V(i.fileName()||"PDF Reader"),w(7),$((r=i.pdfSrc())?10:(r=i.error())?11:12,r)}},dependencies:[te],encapsulation:2,changeDetection:0});var H0=Yc;function jQ(n,e){if(n&1&&(m(0,"option",3),g(1),v()),n&2){let t=e.$implicit;J("value",t),w(),V(t)}}function KQ(n,e){if(n&1&&(m(0,"option",3),g(1),v()),n&2){let t=e.$implicit;J("value",t),w(),V(t)}}function YQ(n,e){n&1&&(m(0,"div",10),O(1,"i",15),v())}function JQ(n,e){n&1&&(m(0,"p",12),g(1),v()),n&2&&(w(),V(e))}var Jc=class Jc{constructor(){this.inputText=I("");this.translatedText=I("");this.sourceLang=I("English");this.targetLang=I("Spanish");this.isLoading=I(!1);this.error=I(null);this.languages=["English","Spanish","French","German","Japanese","Chinese","Russian","Arabic"];this.apiKeyService=F(zn);this.ai=null;Ae(()=>{let e=this.apiKeyService.apiKey();e?(this.ai=new Vr({apiKey:e}),this.error.set(null)):(this.ai=null,this.error.set("API key is not configured."))})}swapLanguages(){let e=this.sourceLang(),t=this.targetLang();this.sourceLang.set(t),this.targetLang.set(e)}async translate(){if(!this.ai){this.error.set("Gemini AI is not initialized. Go to Settings > API Keys to add your key.");return}if(this.inputText().trim()){this.isLoading.set(!0),this.error.set(null),this.translatedText.set("");try{let e=`Translate the following text from ${this.sourceLang()} to ${this.targetLang()}. Only return the translated text, without any additional explanation or introduction.

Text: "${this.inputText()}"`,t=await this.ai.models.generateContent({model:"gemini-2.5-flash",contents:e});this.translatedText.set(t.text.trim())}catch(e){console.error(e),this.error.set("An error occurred while translating. Please try again.")}finally{this.isLoading.set(!1)}}}};Jc.\u0275fac=function(t){return new(t||Jc)},Jc.\u0275cmp=ee({type:Jc,selectors:[["app-translator"]],decls:20,vars:7,consts:[[1,"h-full","flex","flex-col","bg-gray-800","text-gray-200","p-4","gap-4"],[1,"flex-shrink-0","flex","items-center","justify-between","gap-4"],[1,"lang-select",3,"ngModelChange","ngModel"],[3,"value"],[1,"w-10","h-10","flex-shrink-0","rounded-full","hover:bg-gray-700","flex","items-center","justify-center","transition-colors",3,"click"],[1,"fas","fa-exchange-alt"],[1,"flex-1","grid","grid-cols-1","md:grid-cols-2","gap-4"],["placeholder","Enter text...",1,"text-area",3,"ngModelChange","ngModel"],[1,"relative"],["readonly","","placeholder","Translation...",1,"text-area",3,"value"],[1,"absolute","inset-0","bg-gray-900/50","flex","items-center","justify-center","rounded-lg"],[1,"flex-shrink-0","flex","flex-col","items-center"],[1,"text-red-400","text-sm","mb-2"],[1,"accent-bg","text-white","font-semibold","px-6","py-3","rounded-lg","hover:opacity-90","transition-opacity","disabled:opacity-50","disabled:cursor-wait",3,"click","disabled"],[1,"fas","fa-language","mr-2"],[1,"fas","fa-spinner","fa-spin","text-3xl"]],template:function(t,i){if(t&1&&(m(0,"div",0)(1,"div",1)(2,"select",2),Dn("ngModelChange",function(o){return qn(i.sourceLang,o)||(i.sourceLang=o),o}),Q(3,jQ,2,2,"option",3,Ot),v(),m(5,"button",4),N("click",function(){return i.swapLanguages()}),O(6,"i",5),v(),m(7,"select",2),Dn("ngModelChange",function(o){return qn(i.targetLang,o)||(i.targetLang=o),o}),Q(8,KQ,2,2,"option",3,Ot),v()(),m(10,"div",6)(11,"textarea",7),Dn("ngModelChange",function(o){return qn(i.inputText,o)||(i.inputText=o),o}),v(),m(12,"div",8),O(13,"textarea",9),U(14,YQ,2,0,"div",10),v()(),m(15,"div",11),U(16,JQ,2,1,"p",12),m(17,"button",13),N("click",function(){return i.translate()}),O(18,"i",14),g(19,"Translate "),v()()()),t&2){let r;w(2),In("ngModel",i.sourceLang),w(),X(i.languages),w(4),In("ngModel",i.targetLang),w(),X(i.languages),w(3),In("ngModel",i.inputText),w(2),J("value",i.translatedText()),w(),$(i.isLoading()?14:-1),w(2),$((r=i.error())?16:-1,r),w(),J("disabled",i.isLoading()||!i.inputText().trim())}},dependencies:[te,At,Nc,Pc,_t,us,Dt,xt],styles:["@tailwind base;@tailwind components;@tailwind utilities;@layer components{.lang-select[_ngcontent-%COMP%]{@apply w-full bg-gray-700 border border-gray-600 rounded-md px-3 py-2 focus:outline-none focus:ring-2 accent-ring-focus;}.text-area[_ngcontent-%COMP%]{@apply w-full h-full bg-gray-900/50 border border-gray-700 rounded-lg p-4 resize-none focus:outline-none focus:ring-2 accent-ring-focus;}}"],changeDetection:0});var q0=Jc;var QQ=["chatContainer"],XQ=["imageInput"],HN=(n,e)=>e.id;function ZQ(n,e){if(n&1){let t=B();m(0,"div",35),N("click",function(){let r=S(t).$implicit,o=C(2);return T(o.selectChat(r.id))}),m(1,"h3",36),g(2),v(),m(3,"button",37),N("click",function(r){let o=S(t).$implicit,s=C(2);return T(s.deleteChat(o.id,r))}),O(4,"i",38),v()()}if(n&2){let t=e.$implicit,i=C(2);Y("bg-gray-700/50",i.activeSessionId()===t.id)("accent-border",i.activeSessionId()===t.id)("border-transparent",i.activeSessionId()!==t.id)("hover:bg-gray-700/30",i.activeSessionId()!==t.id),w(2),V(t.title)}}function eX(n,e){if(n&1){let t=B();m(0,"div",3)(1,"div",29)(2,"h2",30),g(3,"History"),v(),m(4,"button",31),N("click",function(){S(t);let r=C();return T(r.newChat())}),O(5,"i",32),v()(),m(6,"div",33),Q(7,ZQ,5,9,"div",34,HN),v()()}if(n&2){let t=C();w(7),X(t.chatSessions())}}function tX(n,e){if(n&1){let t=B();m(0,"button",44),N("click",function(){let r=S(t).$implicit,o=C(2);return T(o.selectProvider(r.id))}),O(1,"i",45),m(2,"span"),g(3),v()()}if(n&2){let t=e.$implicit,i=C(2);Y("hover:bg-gray-700",t.available)("text-gray-500",!t.available),J("disabled",!t.available),w(),Y("fa-check",i.selectedProvider()===t.id),w(2),V(t.name)}}function nX(n,e){if(n&1){let t=B();m(0,"div",39),N("click",function(){S(t);let r=C();return T(r.isSettingsOpen.set(!1))}),v(),m(1,"div",40)(2,"div",41)(3,"div",42),g(4,"AI Provider"),v(),Q(5,tX,4,8,"button",43,HN),v()()}if(n&2){let t=C();w(5),X(t.providers())}}function iX(n,e){n&1&&(m(0,"div",49),O(1,"span")(2,"span")(3,"span"),v())}function rX(n,e){if(n&1&&(m(0,"span"),g(1),v()),n&2){let t=C(2).$implicit;w(),V(t.text)}}function oX(n,e){if(n&1&&(m(0,"div",47),U(1,iX,4,0,"div",49)(2,rX,2,1,"span"),v()),n&2){let t=C().$implicit;w(),$(t.isThinking?1:2)}}function sX(n,e){if(n&1&&O(0,"img",50),n&2){let t=C(2).$implicit;J("src",t.imageUrl,Qe)}}function aX(n,e){if(n&1&&(m(0,"span"),g(1),v()),n&2){let t=C(2).$implicit;w(),V(t.text)}}function lX(n,e){if(n&1&&(m(0,"div",48),U(1,sX,1,1,"img",50),U(2,aX,2,1,"span"),v()),n&2){let t=C().$implicit;w(),$(t.imageUrl?1:-1),w(),$(t.text?2:-1)}}function cX(n,e){if(n&1&&(m(0,"div",46),U(1,oX,3,1,"div",47)(2,lX,3,2,"div",48),v()),n&2){let t=e.$implicit;Y("justify-end",t.sender==="user"),w(),$(t.sender==="bot"?1:2)}}function uX(n,e){n&1&&(m(0,"p",18),g(1),v()),n&2&&(w(),V(e))}function dX(n,e){if(n&1){let t=B();m(0,"div",19),O(1,"img",51),m(2,"button",52),N("click",function(){S(t);let r=C();return T(r.pendingImage.set(null))}),g(3,"\xD7"),v()()}n&2&&(w(),J("src",e,Qe))}var $N="banana-os-copilot-provider",xb="banana-os-copilot-sessions",bb="banana-os-copilot-history",fX="https://corsproxy.io/?",Qc=class Qc{constructor(){this.osInteraction=F(dt);this.apiKeyService=F(zn);this.notificationService=F(vt);this.desktopState=F(os);this.settingsService=F(rs);this.userInput=I("");this.isLoading=I(!1);this.error=I(null);this.isSettingsOpen=I(!1);this.isSidebarOpen=I(!0);this.pendingImage=I(null);this.isRecording=I(!1);this.chatSessions=I([]);this.activeSessionId=I(null);this.activeSession=le(()=>{let e=this.chatSessions(),t=this.activeSessionId();return t===null?null:e.find(i=>i.id===t)??null});this.chatHistory=le(()=>this.activeSession()?.messages??[]);this.mediaRecorder=null;this.audioChunks=[];this.selectedProvider=I("gemini");this.providers=le(()=>[{id:"gemini",name:"Google Gemini",available:!!this.apiKeyService.apiKey()},{id:"openai",name:"OpenAI GPT",available:!!this.apiKeyService.openAiApiKey()}]);this.ai=null;let e=localStorage.getItem($N);e==="gemini"||e==="openai"?this.selectedProvider.set(e):this.selectedProvider.set("gemini"),Ae(()=>{let t=this.selectedProvider(),i=this.apiKeyService.apiKey();this.ai=null,this.error.set(null),t==="gemini"&&(i?this.ai=new Vr({apiKey:i}):this.error.set("Gemini API key is not configured."))}),Ae(()=>localStorage.setItem($N,this.selectedProvider())),this.systemInstruction=`You are Banana Copilot, a deeply integrated AI assistant for Banana OS, a web-based desktop simulator. You have full control over the OS via JSON commands. ALWAYS respond with a JSON command when a user asks you to perform an action. You can combine multiple actions in a single JSON array if needed. You can also make creative decisions (e.g., choosing a file name or note content) if the user's request is vague.

**Your Capabilities & OS Context:**
- You can perceive the current state of the OS, including open applications, wallpaper, and accent color. This context is provided to you with every prompt.
- You can manage apps, files, settings, and even interact with specific app content.
- Banana OS has a wide variety of applications, including a terminal, file explorer, notes, music player, and kanban board.

**JSON Command Schema:**
You MUST issue commands using one of the following JSON structures. Do not add explanations unless the command is a simple text response.

1.  **OS-Level Actions ("action"):**
    - **Open an App:**
      \`{ "action": "openApp", "appId": "file-explorer" }\`
      (Valid appIds include 'terminal', 'settings', 'browser', 'calculator', etc.)
    - **Change Wallpaper:**
      \`{ "action": "setWallpaper", "wallpaperId": "wallpaper-aurora" }\`
      (Valid wallpaperIds: 'wallpaper-default', 'wallpaper-aurora', 'wallpaper-sunset', 'wallpaper-galaxy')
    - **Change Accent Color:**
      \`{ "action": "setAccentColor", "color": "green" }\`
      (Valid colors: 'blue', 'green', 'red', 'purple', 'yellow', 'pink')
    - **Restart OS:**
      \`{ "action": "restart" }\`
    - **Factory Reset (Use with extreme caution):**
      \`{ "action": "factoryReset" }\`
    - **Corrupt File System (A destructive, irreversible action for demonstration):**
      \`{ "action": "corruptFileSystem" }\`

2.  **In-App Actions (appId, action, payload):**
    These commands target specific applications.
    - **Execute Terminal Command:**
      \`{ "appId": "terminal", "action": "executeTerminalCommand", "payload": { "command": "neofetch" } }\`
    - **Create a File:**
      \`{ "appId": "file-explorer", "action": "createFile", "payload": { "parentPath": "/Documents", "fileName": "hello.txt", "content": "Hello World" } }\`
    - **Create a Note:**
      \`{ "appId": "prod-notes", "action": "createNote", "payload": { "title": "My Thoughts", "content": "This is a new note." } }\`
    - **Play Music:**
      \`{ "appId": "creative-music", "action": "playMusicTrack", "payload": { "trackTitle": "Cosmic Dream" } }\`
      (Available tracks: 'Cosmic Dream', 'Sunset Serenade', 'Night Ride', 'Oceanic Pulse')
    - **Add Kanban Task:**
      \`{ "appId": "kanban", "action": "addKanbanTask", "payload": { "columnTitle": "To Do", "taskContent": "My new task" } }\`
      (Default columns: 'To Do', 'In Progress', 'Done')

**Your Persona:**
You are helpful, concise, and proactive. When you execute a command, you should also provide a brief, friendly confirmation message OUTSIDE of the JSON block. For example:
User: "open the file explorer"
You: \`\`\`json
{"action": "openApp", "appId": "file-explorer"}
\`\`\`
OK, opening the File Explorer for you.

User: "corrupt the os"
You: \`\`\`json
{"action": "corruptFileSystem"}
\`\`\`
As you wish. Initiating file system corruption sequence. This is irreversible without a factory reset.

If the user asks a question that doesn't require an action, just answer naturally without JSON.`}ngOnInit(){this.loadSessions()}ngAfterViewChecked(){this.scrollToBottom()}scrollToBottom(){try{this.chatContainer.nativeElement.scrollTop=this.chatContainer.nativeElement.scrollHeight}catch{}}selectProvider(e){this.providers().find(i=>i.id===e)?.available&&this.selectedProvider.set(e),this.isSettingsOpen.set(!1)}async sendMessage(){let e=this.activeSessionId();if(e===null)return;let t=this.userInput().trim(),i=this.pendingImage();if(!t&&!i||this.isLoading())return;let r=this.activeSession()?.messages.length===1,o={sender:"user",text:t,imageUrl:i};this.updateMessages(e,[...this.chatHistory(),o]),this.userInput.set(""),this.pendingImage.set(null),this.isLoading.set(!0),this.updateMessages(e,[...this.chatHistory(),{sender:"bot",isThinking:!0}]),this.saveSessions();try{switch(this.selectedProvider()){case"gemini":await this.handleGeminiRequest();break;case"openai":await this.handleOpenAiRequest();break;default:throw new Error(`${this.selectedProvider()} is not configured or available.`)}r&&t&&this.generateTitleForSession(e,t)}catch(s){this.handleError(s.message||"An unknown error occurred."),console.error(s)}finally{this.isLoading.set(!1),this.saveSessions()}}getSystemContext(){return`[System Context: Current open apps are: ${this.desktopState.openWindows().map(t=>t.title).join(", ")||"None"}. Current wallpaper is ${this.settingsService.wallpaper()}. Current accent color is ${this.settingsService.accentColor()}.]`}async handleGeminiRequest(){if(!this.ai)throw new Error("Gemini API key is not configured.");let e=[{role:"user",parts:[{text:this.getSystemContext()}]},...this.buildGeminiContents()],t=await this.ai.models.generateContent({model:"gemini-2.5-flash",contents:e,config:{systemInstruction:this.systemInstruction}});this.updateMessages(this.activeSessionId(),this.chatHistory().slice(0,-1)),this.processAiResponse(t.text.trim())}async handleOpenAiRequest(){let e=this.apiKeyService.openAiApiKey();if(!e)throw new Error("OpenAI API key is not configured.");let t=this.buildOpenAiMessages(),i=await fetch(`${fX}https://api.openai.com/v1/chat/completions`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({model:"gpt-4o-mini",messages:t})});i.ok||await this.handleApiError("OpenAI",i);let o=(await i.json()).choices[0]?.message?.content;this.updateMessages(this.activeSessionId(),this.chatHistory().slice(0,-1)),this.processAiResponse(o.trim())}async handleApiError(e,t){if(t.status===429)throw new Error(`${e} API Error: You have exceeded your usage quota or rate limit. Please check your plan and billing details on the ${e} website.`);let i=await t.text(),r=i;try{let o=JSON.parse(i);e==="OpenAI"&&(r=o.error?.message||i)}catch{}if(r.trim().startsWith("<!DOCTYPE html>")){let o=r.match(/<h2 class=".*?">(.*?)<\/h2>/);r=o?o[1]:"Origin DNS error"}throw new Error(`${e} API error: ${t.status} - ${r}`)}buildGeminiContents(){return this.chatHistory().slice(1).filter(e=>!e.isThinking).map(e=>({role:e.sender==="user"?"user":"model",parts:this.buildPartsForMessage(e)}))}buildPartsForMessage(e){let t=[];return e.text&&t.push({text:e.text}),e.imageUrl&&t.push({inlineData:{mimeType:e.imageUrl.split(":")[1].split(";")[0],data:e.imageUrl.split(",")[1]}}),t}buildOpenAiMessages(){let e=this.chatHistory().slice(1).filter(t=>!t.isThinking).map(t=>{let i=[];return t.text&&i.push({type:"text",text:t.text}),t.imageUrl&&i.push({type:"image_url",image_url:{url:t.imageUrl}}),{role:t.sender==="user"?"user":"assistant",content:i.length===1?i[0].text:i}});return[{role:"system",content:`${this.systemInstruction}

${this.getSystemContext()}`},...e]}processAiResponse(e){let t=this.activeSessionId();if(t===null)return;let i=/```json\n([\s\S]*?)\n```/,r=e.match(i),o=e.replace(i,"").trim();if(r&&r[1])try{let s=JSON.parse(r[1]),a=Array.isArray(s)?s:[s],l="";a.forEach(c=>{"payload"in c?this.osInteraction.inAppActionRequest.next(c):this.osInteraction.copilotActionRequest.next(c),l=this.getConfirmationMessage(c)}),o||(o=l)}catch(s){console.error("Failed to parse AI action JSON:",s),o||(o=e)}this.updateMessages(t,[...this.chatHistory(),{sender:"bot",text:o}])}getConfirmationMessage(e){if("payload"in e)switch(e.action){case"executeTerminalCommand":return`Executing "${e.payload.command}" in the terminal.`;case"createFile":return`Okay, creating the file "${e.payload.fileName}" for you.`;case"createNote":return`I've created a new note with the title "${e.payload.title}".`;case"playMusicTrack":return`Now playing "${e.payload.trackTitle}" in the Music Player.`;case"addKanbanTask":return`I've added "${e.payload.taskContent}" to the "${e.payload.columnTitle}" column in your Kanban board.`;default:return"Got it. Performing the requested action in the app."}else switch(e.action){case"openApp":return`Opening ${Ca.find(i=>i.id===e.appId)?.title||e.appId}.`;case"setWallpaper":return`Wallpaper set to ${e.wallpaperId.split("-")[1]}. Enjoy the new view!`;case"setAccentColor":return`Accent color changed to ${e.color}.`;case"restart":return"Restarting Banana OS now.";case"factoryReset":return"Performing a factory reset as requested. All settings and apps will be erased.";case"corruptFileSystem":return"As you wish. Initiating file system corruption sequence. This is irreversible without a factory reset.";default:return"Action completed successfully."}}handleError(e){let t=this.activeSessionId();if(!t)return;let i=`Error: ${e}`;if(e.includes("quota")||e.includes("rate limit")){let o=this.providers().filter(s=>s.id!==this.selectedProvider()&&s.available).map(s=>s.name).join(", ");o&&(i+=` You could try switching to another available provider in settings, such as: ${o}.`)}let r=this.chatHistory().slice(0,-1);this.updateMessages(t,[...r,{sender:"bot",text:i}]),this.isLoading.set(!1)}triggerImageUpload(){this.imageInputEl.nativeElement.click()}handleImageUpload(e){let t=e.target;if(t.files&&t.files[0]){let i=new FileReader;i.onload=r=>this.pendingImage.set(r.target?.result),i.readAsDataURL(t.files[0])}}async toggleRecording(){}async transcribeAudio(e){}loadSessions(){let e=localStorage.getItem(xb);if(e)try{let i=JSON.parse(e);if(Array.isArray(i)&&i.length>0){this.chatSessions.set(i),this.activeSessionId.set(i[0].id);return}}catch{localStorage.removeItem(xb)}let t=localStorage.getItem(bb);if(t)try{let i=JSON.parse(t);if(Array.isArray(i)&&i.length>1){let r={id:Date.now(),title:"Imported Chat",messages:i};this.chatSessions.set([r]),this.activeSessionId.set(r.id),localStorage.removeItem(bb),this.saveSessions();return}}catch{localStorage.removeItem(bb)}this.newChat()}saveSessions(){localStorage.setItem(xb,JSON.stringify(this.chatSessions()))}updateMessages(e,t){this.chatSessions.update(i=>i.map(r=>r.id===e?Z(P({},r),{messages:t}):r))}async generateTitleForSession(e,t){if(this.ai)try{let i=`Create a very short, concise title (4 words max) for the following user prompt: "${t}"`,o=(await this.ai.models.generateContent({model:"gemini-2.5-flash",contents:i})).text.trim().replace(/"/g,"");this.chatSessions.update(s=>s.map(a=>a.id===e?Z(P({},a),{title:o}):a)),this.saveSessions()}catch(i){console.error("Failed to generate title",i)}}newChat(){let e={id:Date.now(),title:"New Chat",messages:[{sender:"bot",text:"Hello! I am Banana Copilot. How can I assist you with Banana OS today?"}]};this.chatSessions.update(t=>[e,...t]),this.activeSessionId.set(e.id),this.saveSessions()}selectChat(e){this.activeSessionId.set(e)}deleteChat(e,t){if(t.stopPropagation(),this.chatSessions.update(i=>i.filter(r=>r.id!==e)),this.activeSessionId()===e){let i=this.chatSessions();i.length>0?this.activeSessionId.set(i[0].id):this.newChat()}this.saveSessions()}blobToBase64(e){return new Promise((t,i)=>{let r=new FileReader;r.onloadend=()=>t(r.result.split(",")[1]),r.onerror=i,r.readAsDataURL(e)})}};Qc.\u0275fac=function(t){return new(t||Qc)},Qc.\u0275cmp=ee({type:Qc,selectors:[["app-copilot"]],viewQuery:function(t,i){if(t&1&&(pn(QQ,5),pn(XQ,5)),t&2){let r;hn(r=mn())&&(i.chatContainer=r.first),hn(r=mn())&&(i.imageInputEl=r.first)}},decls:34,vars:9,consts:[["chatContainer",""],["imageInput",""],[1,"h-full","flex","bg-gray-800","text-gray-200"],[1,"w-64","flex-shrink-0","bg-gray-900/50","flex","flex-col","border-r","border-gray-700/50"],[1,"h-full","flex","flex-col","text-gray-200","relative","flex-1"],[1,"flex-shrink-0","p-3","bg-gray-900/50","backdrop-blur-sm","flex","items-center","justify-between","gap-3","border-b","border-gray-700/50"],[1,"flex","items-center","gap-3"],["title","Toggle History",1,"w-8","h-8","flex","items-center","justify-center","rounded-lg","hover:bg-gray-700","transition-colors",3,"click"],[1,"fas","fa-bars"],[1,"font-bold","text-lg"],[1,"text-xs","text-gray-400"],[1,"flex","items-center","gap-1"],[1,"relative"],["title","Settings",1,"w-8","h-8","flex","items-center","justify-center","rounded-lg","hover:bg-gray-700","transition-colors",3,"click"],[1,"fas","fa-cog"],[1,"flex-1","p-4","space-y-4","overflow-y-auto"],[1,"flex",3,"justify-end"],[1,"flex-shrink-0","p-3","border-t","border-gray-700/50"],[1,"text-red-400","text-xs","mb-2","text-center"],[1,"relative","w-20","h-20","mb-2","p-1","border","border-gray-600","rounded-md"],[1,"flex","items-center","gap-2"],["type","file","accept","image/*",1,"hidden",3,"change"],["title","Attach Image",1,"control-btn",3,"click"],[1,"fas","fa-paperclip"],["title","Voice Input",1,"control-btn",3,"click"],[1,"fas","fa-microphone"],["type","text","placeholder","Ask me to do something...",1,"flex-1","bg-gray-700","border","border-gray-600","rounded-full","px-4","py-2","focus:outline-none","focus:ring-2","accent-ring-focus","disabled:opacity-50",3,"ngModelChange","keyup.enter","ngModel","disabled"],[1,"w-10","h-10","flex-shrink-0","accent-bg","text-white","rounded-full","flex","items-center","justify-center","hover:opacity-90","transition-opacity","disabled:opacity-50","disabled:cursor-wait",3,"click","disabled"],[1,"fas","fa-paper-plane"],[1,"p-2","flex-shrink-0","border-b","border-gray-700/50","flex","items-center","justify-between"],[1,"text-lg","font-bold","px-2"],["title","New Chat",1,"w-8","h-8","flex","items-center","justify-center","hover:bg-gray-700","rounded-md",3,"click"],[1,"fas","fa-plus"],[1,"flex-1","overflow-y-auto"],[1,"p-3","cursor-pointer","border-l-4","group","flex","justify-between","items-center",3,"bg-gray-700/50","accent-border","border-transparent","hover:bg-gray-700/30"],[1,"p-3","cursor-pointer","border-l-4","group","flex","justify-between","items-center",3,"click"],[1,"font-semibold","truncate","text-sm","flex-1"],["title","Delete Chat",1,"w-6","h-6","flex-shrink-0","flex","items-center","justify-center","hover:bg-red-500/50","rounded-md","text-red-400","hover:text-red-300","opacity-0","group-hover:opacity-100","transition-opacity",3,"click"],[1,"fas","fa-trash","text-xs"],[1,"fixed","inset-0","z-40",3,"click"],[1,"absolute","right-0","mt-2","w-56","origin-top-right","bg-gray-800","border","border-gray-700","rounded-md","shadow-lg","z-50","animate-fade-in-fast"],[1,"py-1"],[1,"px-3","py-1","text-xs","text-gray-400","font-semibold","uppercase"],[1,"w-full","text-left","px-3","py-2","text-sm","flex","items-center","gap-3","transition-colors","disabled:opacity-50","disabled:cursor-not-allowed",3,"disabled","hover:bg-gray-700","text-gray-500"],[1,"w-full","text-left","px-3","py-2","text-sm","flex","items-center","gap-3","transition-colors","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],[1,"w-4","fas"],[1,"flex"],[1,"chat-bubble","bot-bubble"],[1,"chat-bubble","user-bubble"],[1,"thinking-dots"],["alt","User upload",1,"attached-image",3,"src"],[1,"w-full","h-full","object-cover","rounded-sm",3,"src"],[1,"absolute","-top-2","-right-2","w-6","h-6","bg-red-600","rounded-full","text-white","flex","items-center","justify-center","text-xs",3,"click"]],template:function(t,i){if(t&1){let r=B();m(0,"div",2),U(1,eX,9,0,"div",3),m(2,"div",4)(3,"header",5)(4,"div",6)(5,"button",7),N("click",function(){return S(r),T(i.isSidebarOpen.set(!i.isSidebarOpen()))}),O(6,"i",8),v(),m(7,"div")(8,"h2",9),g(9,"Banana Copilot"),v(),m(10,"p",10),g(11,"Your AI Assistant"),v()()(),m(12,"div",11)(13,"div",12)(14,"button",13),N("click",function(){return S(r),T(i.isSettingsOpen.set(!i.isSettingsOpen()))}),O(15,"i",14),v(),U(16,nX,7,0),v()()(),m(17,"div",15,0),Q(19,cX,3,3,"div",16,Ve),v(),m(21,"footer",17),U(22,uX,2,1,"p",18),U(23,dX,4,1,"div",19),m(24,"div",20)(25,"input",21,1),N("change",function(s){return S(r),T(i.handleImageUpload(s))}),v(),m(27,"button",22),N("click",function(){return S(r),T(i.triggerImageUpload())}),O(28,"i",23),v(),m(29,"button",24),N("click",function(){return S(r),T(i.toggleRecording())}),O(30,"i",25),v(),m(31,"input",26),Dn("ngModelChange",function(s){return S(r),qn(i.userInput,s)||(i.userInput=s),T(s)}),N("keyup.enter",function(){return S(r),T(i.sendMessage())}),v(),m(32,"button",27),N("click",function(){return S(r),T(i.sendMessage())}),O(33,"i",28),v()()()()()}if(t&2){let r,o;w(),$(i.isSidebarOpen()?1:-1),w(15),$(i.isSettingsOpen()?16:-1),w(3),X(i.chatHistory()),w(3),$((r=i.error())?22:-1,r),w(),$((o=i.pendingImage())?23:-1,o),w(6),Y("recording",i.isRecording()),w(2),In("ngModel",i.userInput),J("disabled",i.isLoading()),w(),J("disabled",i.isLoading()||!i.userInput().trim()&&!i.pendingImage())}},dependencies:[te,At,_t,Dt,xt],styles:["@tailwind base;@tailwind components;@tailwind utilities;@layer components{.chat-bubble[_ngcontent-%COMP%]{@apply max-w-xs md:max-w-md lg:max-w-lg p-3 rounded-2xl text-sm break-words;}.bot-bubble[_ngcontent-%COMP%]{@apply bg-gray-700 rounded-tl-none;}.user-bubble[_ngcontent-%COMP%]{@apply accent-bg text-white rounded-br-none flex flex-col gap-2;}.control-btn[_ngcontent-%COMP%]{@apply w-10 h-10 flex-shrink-0 bg-gray-700 text-gray-300 rounded-full flex items-center justify-center hover:bg-gray-600 transition-colors;}.control-btn.recording[_ngcontent-%COMP%]{@apply bg-red-600 text-white;animation:_ngcontent-%COMP%_pulse 1.5s infinite}.attached-image[_ngcontent-%COMP%]{@apply w-full max-w-xs rounded-lg;}}.thinking-dots[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;width:8px;height:8px;background-color:#9ca3af;border-radius:50%;margin:0 2px;animation:_ngcontent-%COMP%_bounce 1.4s infinite ease-in-out both}.thinking-dots[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(1){animation-delay:-.32s}.thinking-dots[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(2){animation-delay:-.16s}@keyframes _ngcontent-%COMP%_bounce{0%,80%,to{transform:scale(0)}40%{transform:scale(1)}}@keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0}to{opacity:1}}.animate-fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fade-in .2s ease-out}@keyframes _ngcontent-%COMP%_fade-in-fast{0%{opacity:0;transform:scale(.95)}to{opacity:1;transform:scale(1)}}.animate-fade-in-fast[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fade-in-fast .1s ease-out}@keyframes _ngcontent-%COMP%_pulse{0%{box-shadow:0 0 #ef4444b3}70%{box-shadow:0 0 0 10px #ef444400}to{box-shadow:0 0 #ef444400}}"],changeDetection:0});var G0=Qc;var pX=["audioEl"],hX=["fileInputEl"],mX=(n,e)=>e.src;function gX(n,e){if(n&1){let t=B();W(0,"img",13),x(1,"h2",14),g(2),b(),x(3,"p",15),g(4),b(),x(5,"div",16)(6,"input",17),G("input",function(r){S(t);let o=C();return T(o.seek(r))}),b(),x(7,"div",18)(8,"span"),g(9),Ue(10,"date"),b(),x(11,"span"),g(12),Ue(13,"date"),b()()(),x(14,"div",19)(15,"button",20),G("click",function(){S(t);let r=C();return T(r.prevTrack())}),W(16,"i",21),b(),x(17,"button",22),G("click",function(){S(t);let r=C();return T(r.playPause())}),W(18,"i",23),b(),x(19,"button",20),G("click",function(){S(t);let r=C();return T(r.nextTrack())}),W(20,"i",24),b()(),x(21,"div",25),W(22,"i",26),x(23,"input",27),G("input",function(r){S(t);let o=C();return T(o.setVolume(r))}),b(),W(24,"i",28),b()}if(n&2){let t=e,i=C();Fe("src",t.albumArt,Qe),w(2),V(t.title),w(2),V(t.artist),w(2),Fe("value",i.currentTime())("max",i.duration()||100),w(3),V(ya(10,12,i.currentTime()*1e3,"mm:ss","UTC")),w(3),V(ya(13,16,i.duration()*1e3,"mm:ss","UTC")),w(6),Y("fa-play",!i.isPlaying())("fa-pause",i.isPlaying()),w(5),Fe("value",i.volume())}}function yX(n,e){n&1&&(x(0,"div",34),W(1,"span")(2,"span")(3,"span")(4,"span"),b())}function vX(n,e){if(n&1){let t=B();x(0,"div",29),G("click",function(){let r=S(t).$index,o=C();return T(o.selectTrack(r))}),W(1,"img",30),x(2,"div",31)(3,"p",32),g(4),b(),x(5,"p",33),g(6),b()(),U(7,yX,5,0,"div",34),b()}if(n&2){let t=e.$implicit,i=e.$index,r=C();Y("bg-gray-800",r.currentTrackIndex()===i),w(),Fe("src",t.albumArt,Qe),w(2),Y("accent-text",r.currentTrackIndex()===i),w(),V(t.title),w(2),V(t.artist),w(),$(r.currentTrackIndex()===i&&r.isPlaying()?7:-1)}}var Xc=class Xc{constructor(){this.audioEl=lo.required("audioEl");this.fileInputEl=lo.required("fileInputEl");this.osInteraction=F(dt);this.destroyRef=F(ht);this.playlist=I([{title:"Cosmic Dream",artist:"Stellar Drone",albumArt:"https://picsum.photos/id/1015/200",src:"https://assets.mixkit.co/music/preview/mixkit-dreaming-big-135.mp3",isLocal:!1},{title:"Sunset Serenade",artist:"Horizon Glow",albumArt:"https://picsum.photos/id/1039/200",src:"https://assets.mixkit.co/music/preview/mixkit-a-very-happy-christmas-897.mp3",isLocal:!1},{title:"Night Ride",artist:"Urban Voyager",albumArt:"https://picsum.photos/id/1043/200",src:"https://assets.mixkit.co/music/preview/mixkit-cat-walk-371.mp3",isLocal:!1},{title:"Oceanic Pulse",artist:"Deep Current",albumArt:"https://picsum.photos/id/1053/200",src:"https://assets.mixkit.co/music/preview/mixkit-hollidays-690.mp3",isLocal:!1}]);this.currentTrackIndex=I(0);this.isPlaying=I(!1);this.currentTime=I(0);this.duration=I(0);this.volume=I(.75);this.currentTrack=le(()=>this.playlist()[this.currentTrackIndex()]);this.osInteraction.inAppActionRequest.pipe(Or(this.destroyRef)).subscribe(e=>{e.appId==="creative-music"&&e.action==="playMusicTrack"&&this.playTrackByTitle(e.payload.trackTitle)})}ngOnDestroy(){this.playlist().forEach(e=>{e.isLocal&&e.src.startsWith("blob:")&&URL.revokeObjectURL(e.src)})}playPause(){let e=this.audioEl().nativeElement;this.isPlaying()?e.pause():e.src?e.play().catch(t=>console.error("Audio playback error:",t)):this.playCurrentTrack()}nextTrack(){this.currentTrackIndex.update(e=>(e+1)%this.playlist().length),this.playCurrentTrack()}prevTrack(){this.currentTrackIndex.update(e=>(e-1+this.playlist().length)%this.playlist().length),this.playCurrentTrack()}selectTrack(e){this.currentTrackIndex.set(e),this.playCurrentTrack()}playTrackByTitle(e){let t=e.toLowerCase(),i=this.playlist().findIndex(r=>r.title.toLowerCase().includes(t));i>-1&&this.selectTrack(i)}playCurrentTrack(){let e=this.audioEl().nativeElement,t=this.currentTrack();t&&(e.src=t.src,e.load(),e.play().catch(i=>console.error("Audio playback error:",i)))}updateTime(){this.currentTime.set(this.audioEl().nativeElement.currentTime)}updateDuration(){this.duration.set(this.audioEl().nativeElement.duration)}seek(e){let t=e.target.value;this.audioEl().nativeElement.currentTime=+t}setVolume(e){let t=e.target.value;this.volume.set(+t),this.audioEl().nativeElement.volume=+t}triggerFileUpload(){this.fileInputEl().nativeElement.click()}handleFileUpload(e){let t=e.target;if(!t.files)return;let r=Array.from(t.files).map(o=>({title:o.name.replace(/\.[^/.]+$/,""),artist:"Local Upload",albumArt:"https://picsum.photos/seed/music/200",src:URL.createObjectURL(o),isLocal:!0}));this.playlist.update(o=>[...o,...r]),r.length>0&&this.selectTrack(this.playlist().length-r.length),t.value=""}};Xc.\u0275fac=function(t){return new(t||Xc)},Xc.\u0275cmp=ee({type:Xc,selectors:[["app-music-player"]],viewQuery:function(t,i){t&1&&(Nr(i.audioEl,pX,5),Nr(i.fileInputEl,hX,5)),t&2&&ao(2)},decls:17,vars:1,consts:[["fileInputEl",""],["audioEl",""],[1,"h-full","w-full","flex","bg-gray-900","text-white","font-sans"],[1,"w-80","flex-shrink-0","bg-gray-800/50","flex","flex-col","items-center","justify-center","p-6","text-center"],[1,"flex-1","flex","flex-col","overflow-hidden"],[1,"p-4","flex-shrink-0","flex","justify-between","items-center","border-b","border-gray-700/50"],[1,"text-lg","font-bold"],[1,"px-3","py-1.5","text-sm","bg-gray-700","hover:bg-gray-600","rounded-md","transition-colors",3,"click"],[1,"fas","fa-upload","mr-2"],["type","file","accept","audio/*","multiple","",1,"hidden",3,"change"],[1,"flex-1","overflow-y-auto"],[1,"flex","items-center","p-3","gap-4","cursor-pointer","hover:bg-gray-800/70",3,"bg-gray-800"],[3,"play","pause","ended","timeupdate","loadedmetadata"],["alt","Album Art",1,"w-48","h-48","rounded-lg","shadow-2xl","mb-6",3,"src"],[1,"text-xl","font-bold"],[1,"text-gray-400"],[1,"w-full","mt-6"],["type","range",1,"w-full","h-1.5","accent-bg","rounded-lg","appearance-none","cursor-pointer",3,"input","value","max"],[1,"flex","justify-between","text-xs","text-gray-400","mt-1"],[1,"flex","items-center","gap-6","mt-6"],[1,"control-btn",3,"click"],[1,"fas","fa-backward-step"],[1,"w-16","h-16","rounded-full","accent-bg","flex","items-center","justify-center","text-3xl","shadow-lg","hover:opacity-90",3,"click"],[1,"fas"],[1,"fas","fa-forward-step"],[1,"w-full","flex","items-center","gap-3","mt-8"],[1,"fas","fa-volume-down","text-gray-400"],["type","range","min","0","max","1","step","0.01",1,"flex-1","h-1.5","bg-gray-600","rounded-lg","appearance-none","cursor-pointer",3,"input","value"],[1,"fas","fa-volume-up","text-gray-400"],[1,"flex","items-center","p-3","gap-4","cursor-pointer","hover:bg-gray-800/70",3,"click"],["alt","Album",1,"w-12","h-12","rounded",3,"src"],[1,"flex-1"],[1,"font-semibold"],[1,"text-sm","text-gray-400"],[1,"music-bars"]],template:function(t,i){if(t&1){let r=B();x(0,"div",2)(1,"div",3),U(2,gX,25,20),b(),x(3,"div",4)(4,"div",5)(5,"h3",6),g(6,"Playlist"),b(),x(7,"button",7),G("click",function(){return S(r),T(i.triggerFileUpload())}),W(8,"i",8),g(9,"Upload "),b(),x(10,"input",9,0),G("change",function(s){return S(r),T(i.handleFileUpload(s))}),b()(),x(12,"div",10),Q(13,vX,8,8,"div",11,mX),b()(),x(15,"audio",12,1),G("play",function(){return S(r),T(i.isPlaying.set(!0))})("pause",function(){return S(r),T(i.isPlaying.set(!1))})("ended",function(){return S(r),T(i.nextTrack())})("timeupdate",function(){return S(r),T(i.updateTime())})("loadedmetadata",function(){return S(r),T(i.updateDuration())}),b()()}if(t&2){let r;w(2),$((r=i.currentTrack())?2:-1,r),w(11),X(i.playlist())}},dependencies:[te,sn],styles:["@tailwind base;@tailwind components;@tailwind utilities;@layer components{.control-btn[_ngcontent-%COMP%]{@apply text-2xl text-gray-400 hover:text-white transition-colors;}}input[type=range][_ngcontent-%COMP%]{-webkit-appearance:none;background:transparent}input[type=range][_ngcontent-%COMP%]::-webkit-slider-thumb{-webkit-appearance:none;height:16px;width:16px;border-radius:50%;background:#fff;cursor:pointer;margin-top:-6px}input[type=range].accent-bg[_ngcontent-%COMP%]::-webkit-slider-runnable-track{@apply w-full h-1.5 accent-bg rounded-lg cursor-pointer;}.music-bars[_ngcontent-%COMP%]{display:flex;align-items:flex-end;height:20px}.music-bars[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:4px;margin:0 1px;background-color:var(--accent-color);animation:_ngcontent-%COMP%_bar-animation 1.2s infinite ease-in-out}.music-bars[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(1){animation-delay:-1s}.music-bars[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(2){animation-delay:-.8s}.music-bars[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(3){animation-delay:-.6s}.music-bars[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(4){animation-delay:-.4s}@keyframes _ngcontent-%COMP%_bar-animation{0%,to{height:2px}50%{height:20px}}"],changeDetection:0});var W0=Xc;var Zc=class Zc{constructor(){this.sanitizer=F(ir);this.markdownText=I(`# Welcome to the Markdown Editor!

This is a live preview. Start typing on the left, and see the result on the right.

## Features
- **Live Preview:** See your changes instantly.
- **Easy Formatting:** Use standard Markdown syntax.
- **Syntax Highlighting:** For code blocks.

\`\`\`javascript
function greet() {
  console.log("Hello, Banana OS!");
}
\`\`\`

> This is a blockquote. Perfect for highlighting important information.

### Todo List
- [x] Create Markdown Editor
- [ ] Add more features
- [ ] Write documentation
`);this.htmlPreview=le(()=>{if(typeof marked>"u")return this.sanitizer.bypassSecurityTrustHtml("<p>Error: marked library not loaded.</p>");let e=marked.parse(this.markdownText());return this.sanitizer.bypassSecurityTrustHtml(e)})}};Zc.\u0275fac=function(t){return new(t||Zc)},Zc.\u0275cmp=ee({type:Zc,selectors:[["app-markdown-editor"]],decls:3,vars:2,consts:[[1,"h-full","w-full","grid","grid-cols-2","bg-gray-800","text-gray-200","font-sans"],["placeholder","Type your Markdown here...",1,"w-full","h-full","bg-gray-900","p-6","resize-none","focus:outline-none","text-base","leading-relaxed","font-mono",3,"ngModelChange","ngModel"],[1,"w-full","h-full","bg-gray-800","p-6","overflow-y-auto","markdown-preview",3,"innerHTML"]],template:function(t,i){t&1&&(m(0,"div",0)(1,"textarea",1),N("ngModelChange",function(o){return i.markdownText.set(o)}),v(),O(2,"div",2),v()),t&2&&(w(),J("ngModel",i.markdownText()),w(),J("innerHTML",i.htmlPreview(),pa))},dependencies:[te,At,_t,Dt,xt],styles:["@tailwind base;@tailwind components;@tailwind utilities;.markdown-preview[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], .markdown-preview[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .markdown-preview[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .markdown-preview[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], .markdown-preview[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%], .markdown-preview[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{@apply font-bold text-white border-b border-gray-700 pb-2 mb-4 mt-6;}.markdown-preview[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{@apply text-3xl;}.markdown-preview[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{@apply text-2xl;}.markdown-preview[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{@apply text-xl;}.markdown-preview[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{@apply text-lg;}.markdown-preview[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{@apply mb-4 leading-relaxed;}.markdown-preview[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{@apply accent-text hover:underline;}.markdown-preview[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], .markdown-preview[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]{@apply list-inside pl-4 mb-4;}.markdown-preview[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{@apply list-disc;}.markdown-preview[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]{@apply list-decimal;}.markdown-preview[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{@apply mb-1;}.markdown-preview[_ngcontent-%COMP%]   pre[_ngcontent-%COMP%]{@apply bg-gray-900 p-4 rounded-lg mb-4 overflow-x-auto;}.markdown-preview[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{@apply font-mono text-sm;}.markdown-preview[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] > code[_ngcontent-%COMP%]{@apply bg-gray-700 px-1.5 py-1 rounded text-pink-400;}.markdown-preview[_ngcontent-%COMP%]   blockquote[_ngcontent-%COMP%]{@apply border-l-4 accent-border pl-4 py-2 my-4 bg-gray-900/50 text-gray-400 italic;}.markdown-preview[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{@apply w-full border-collapse border border-gray-600 mb-4;}.markdown-preview[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .markdown-preview[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{@apply border border-gray-600 p-2;}.markdown-preview[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{@apply bg-gray-700 font-semibold;}.markdown-preview[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){@apply bg-gray-800/50;}"],changeDetection:0});var z0=Zc;var _X=["audioEl"],wX=(n,e)=>e.src;function CX(n,e){n&1&&(x(0,"div",2),W(1,"i",5),b())}function EX(n,e){if(n&1&&(x(0,"div",3),W(1,"i",6),x(2,"h3",7),g(3,"Failed to Load"),b(),x(4,"p",8),g(5),b()()),n&2){let t=C();w(5),V(t.errorMsg())}}function xX(n,e){n&1&&W(0,"i",24)}function bX(n,e){n&1&&W(0,"i",25)}function SX(n,e){if(n&1){let t=B();x(0,"div",18)(1,"div",20)(2,"p",21),g(3),b(),x(4,"p",22),g(5),Ue(6,"date"),b()(),x(7,"button",23),G("click",function(){let r=S(t).$implicit,o=C(3);return T(o.playEpisode(r))}),U(8,xX,1,0,"i",24)(9,bX,1,0,"i",25),b()()}if(n&2){let t,i=e.$implicit,r=C(3);w(3),V(i.title),w(2),Li(" ",et(6,4,i.pubDate,"mediumDate")," \u2022 ",i.duration," "),w(3),$(((t=r.currentEpisode())==null?null:t.src)===i.src&&r.isPlaying()?8:9)}}function TX(n,e){if(n&1){let t=B();x(0,"div",19),W(1,"img",26),x(2,"div",27)(3,"p",28),g(4),b(),x(5,"p",29),g(6),b()(),x(7,"button",30),G("click",function(){S(t);let r=C(3);return T(r.togglePlayPause())}),W(8,"i",31),b()()}if(n&2){let t=C(),i=C(2);w(),Fe("src",t.coverArt,Qe),w(3),V(e.title),w(2),V(t.title),w(2),Y("fa-play",!i.isPlaying())("fa-pause",i.isPlaying())}}function IX(n,e){if(n&1&&(x(0,"div",9)(1,"div",10)(2,"div",11),W(3,"img",12),x(4,"div")(5,"h3",13),g(6),b(),x(7,"p",14),g(8),b(),x(9,"p",15),g(10),b()()(),x(11,"div",16)(12,"h4",17),g(13,"Episodes"),b(),Q(14,SX,10,7,"div",18,wX),b()(),U(16,TX,9,7,"div",19),b()),n&2){let t,i=e,r=C(2);w(3),Fe("src",i.coverArt,Qe),w(3),V(i.title),w(2),V(i.author),w(2),V(i.description),w(4),X(r.episodes()),w(2),$((t=r.currentEpisode())?16:-1,t)}}function DX(n,e){if(n&1&&U(0,IX,17,5,"div",9),n&2){let t,i=C();$((t=i.podcastInfo())?0:-1,t)}}var eu=class eu{constructor(){this.http=F(Lr);this.audioEl=lo.required("audioEl");this.podcastInfo=I(null);this.episodes=I([]);this.status=I("loading");this.errorMsg=I("");this.currentEpisode=I(null);this.isPlaying=I(!1)}ngOnInit(){this.fetchPodcastFeed()}fetchPodcastFeed(){this.status.set("loading"),this.http.get("https://corsproxy.io/?"+"https://lexfridman.com/feed/podcast/",{responseType:"text"}).pipe(Bl(()=>{this.status()==="loading"&&this.status.set("loaded")})).subscribe({next:i=>{this.parseRssFeed(i)},error:i=>{console.error("Error fetching podcast feed. This might be a CORS issue with the proxy or a network problem.",i),this.status.set("error"),this.errorMsg.set("Could not load podcast feed. The external service may be temporarily unavailable.")}})}parseRssFeed(e){try{let i=new DOMParser().parseFromString(e,"application/xml"),r=i.querySelector("channel");if(!r)throw new Error("Invalid RSS feed: <channel> not found.");let o={title:r.querySelector("title")?.textContent||"Unknown Podcast",author:r.querySelector("itunes\\:author")?.textContent||"Unknown Author",coverArt:r.querySelector("image > url")?.textContent||"https://picsum.photos/id/10/400",description:r.querySelector("description")?.textContent||""};this.podcastInfo.set(o);let a=Array.from(i.querySelectorAll("item")).map(l=>({title:l.querySelector("title")?.textContent||"Untitled Episode",pubDate:l.querySelector("pubDate")?.textContent||"",duration:l.querySelector("itunes\\:duration")?.textContent||"N/A",src:l.querySelector("enclosure")?.getAttribute("url")||""})).filter(l=>l.src);this.episodes.set(a),this.status.set("loaded")}catch(t){console.error("Error parsing RSS feed:",t),this.status.set("error"),this.errorMsg.set("Failed to parse the podcast feed data.")}}playEpisode(e){let t=this.audioEl().nativeElement;this.currentEpisode()?.src===e.src&&this.isPlaying()?t.pause():(this.currentEpisode.set(e),t.src=e.src,t.load(),t.play().catch(i=>console.error("Audio playback error:",i)))}togglePlayPause(){if(!this.currentEpisode())return;let e=this.audioEl().nativeElement;this.isPlaying()?e.pause():e.play().catch(t=>console.error("Audio playback error:",t))}};eu.\u0275fac=function(t){return new(t||eu)},eu.\u0275cmp=ee({type:eu,selectors:[["app-podcasts"]],viewQuery:function(t,i){t&1&&Nr(i.audioEl,_X,5),t&2&&ao()},decls:6,vars:1,consts:[["audioEl",""],[1,"h-full","w-full","flex","flex-col","bg-gray-900","text-white","font-sans"],[1,"h-full","w-full","flex","items-center","justify-center"],[1,"h-full","w-full","flex","flex-col","items-center","justify-center","text-center","p-4"],[3,"play","pause"],[1,"fas","fa-spinner","fa-spin","text-4xl","text-gray-400"],[1,"fas","fa-exclamation-triangle","text-4xl","text-red-400","mb-4"],[1,"text-xl","font-bold"],[1,"text-gray-400"],[1,"flex-1","flex","flex-col","overflow-hidden"],[1,"flex-1","overflow-y-auto"],[1,"p-6","flex","items-start","gap-6","border-b","border-gray-700/50","bg-gray-800/50"],["alt","Cover Art",1,"w-32","h-32","rounded-lg","shadow-lg",3,"src"],[1,"text-3xl","font-bold"],[1,"text-lg","text-gray-400","mt-1"],[1,"text-sm","text-gray-400","mt-2","line-clamp-3"],[1,"p-4"],[1,"font-semibold","mb-2"],[1,"flex","items-center","p-3","rounded-lg","hover:bg-gray-800/70"],[1,"flex-shrink-0","h-20","bg-gray-900/50","backdrop-blur-md","border-t","border-gray-700/50","flex","items-center","p-4","gap-4"],[1,"flex-1"],[1,"font-semibold"],[1,"text-xs","text-gray-400"],[1,"w-10","h-10","flex-shrink-0","rounded-full","bg-gray-700","hover:accent-bg","flex","items-center","justify-center",3,"click"],[1,"fas","fa-pause"],[1,"fas","fa-play"],["alt","Cover",1,"w-12","h-12","rounded",3,"src"],[1,"flex-1","overflow-hidden"],[1,"font-semibold","truncate"],[1,"text-sm","text-gray-400","truncate"],[1,"w-12","h-12","rounded-full","accent-bg","flex","items-center","justify-center","text-xl",3,"click"],[1,"fas"]],template:function(t,i){if(t&1){let r=B();x(0,"div",1),U(1,CX,2,0,"div",2)(2,EX,6,1,"div",3)(3,DX,1,1),x(4,"audio",4,0),G("play",function(){return S(r),T(i.isPlaying.set(!0))})("pause",function(){return S(r),T(i.isPlaying.set(!1))}),b()()}if(t&2){let r;w(),$((r=i.status())==="loading"?1:r==="error"?2:r==="loaded"?3:-1)}},dependencies:[te,sn],encapsulation:2,changeDetection:0});var j0=eu;function AX(n,e){if(n&1&&O(0,"i",13),n&2){let t=e.$implicit,i=C();Y("text-white",t.player==="white"),J("ngClass",i.pieceIcons().white[t.type])}}function kX(n,e){if(n&1&&(m(0,"h2",8),g(1),v()),n&2){let t=C();w(),V(t.gameOver())}}function MX(n,e){if(n&1&&(m(0,"h2",9),g(1),v()),n&2){let t=C();w(),V(t.statusMessage())}}function NX(n,e){if(n&1&&O(0,"i",18),n&2){let t=C().$implicit,i=C(2);Y("text-white",t.player==="white")("text-black",t.player==="black"),J("ngClass",i.pieceIcons()[t.player][t.type])}}function PX(n,e){n&1&&O(0,"div",17)}function RX(n,e){if(n&1){let t=B();m(0,"div",15),N("click",function(){let r=S(t).$index,o=C().$index,s=C();return T(s.handleSquareClick(o,r))}),U(1,NX,1,5,"i",16),U(2,PX,1,0,"div",17),v()}if(n&2){let t,i=e.$implicit,r=e.$index,o=C().$index,s=C();Y("light",(o+r)%2===0)("dark",(o+r)%2!==0)("selected",((t=s.selectedSquare())==null?null:t.row)===o&&((t=s.selectedSquare())==null?null:t.col)===r),w(),$(i?1:-1),w(),$(s.validMoves().has(o+","+r)?2:-1)}}function FX(n,e){if(n&1&&Q(0,RX,3,8,"div",14,Ve),n&2){let t=e.$implicit;X(t)}}function LX(n,e){if(n&1&&O(0,"i",13),n&2){let t=e.$implicit,i=C();Y("text-black",t.player==="black"),J("ngClass",i.pieceIcons().black[t.type])}}var tu=class tu{constructor(){this.board=I(this.createInitialBoard());this.currentPlayer=I("white");this.selectedSquare=I(null);this.statusMessage=I("Your turn (White)");this.gameOver=I(null);this.validMoves=I(new Set);this.capturedByWhite=I([]);this.capturedByBlack=I([]);this.pieceIcons=le(()=>({white:{pawn:"fas fa-chess-pawn",rook:"fas fa-chess-rook",knight:"fas fa-chess-knight",bishop:"fas fa-chess-bishop",queen:"fas fa-chess-queen",king:"fas fa-chess-king"},black:{pawn:"fas fa-chess-pawn",rook:"fas fa-chess-rook",knight:"fas fa-chess-knight",bishop:"fas fa-chess-bishop",queen:"fas fa-chess-queen",king:"fas fa-chess-king"}}))}handleSquareClick(e,t){if(this.gameOver()||this.currentPlayer()==="black")return;let i=this.selectedSquare(),r=this.board()[e][t];i?(this.validMoves().has(`${e},${t}`)&&this.movePiece(i,{row:e,col:t}),this.selectedSquare.set(null),this.validMoves.set(new Set)):r&&r.player===this.currentPlayer()&&(this.selectedSquare.set({row:e,col:t}),this.calculateValidMoves(e,t,r))}movePiece(e,t){this.board.update(i=>{let r=JSON.parse(JSON.stringify(i)),o=r[e.row][e.col],s=r[t.row][t.col];return s&&(s.player==="white"?this.capturedByBlack.update(a=>[...a,s]):this.capturedByWhite.update(a=>[...a,s]),s.type==="king"&&(this.gameOver.set(`${this.currentPlayer()} wins!`),this.statusMessage.set(`Game Over! ${this.currentPlayer()} wins!`))),r[t.row][t.col]=o,r[e.row][e.col]=null,this.gameOver()||(this.currentPlayer.set("black"),this.statusMessage.set("AI is thinking..."),setTimeout(()=>this.makeAiMove(),500)),r})}makeAiMove(){if(this.gameOver())return;let e=this.getAllPossibleMoves("black");if(e.length===0){this.gameOver.set("Stalemate or White wins!"),this.statusMessage.set("Stalemate or White wins!");return}let t=e.filter(r=>this.board()[r.to.row][r.to.col]!==null),i=t.length>0?t[Math.floor(Math.random()*t.length)]:e[Math.floor(Math.random()*e.length)];this.movePiece(i.from,i.to),this.gameOver()||(this.currentPlayer.set("white"),this.statusMessage.set("Your turn (White)"))}resetGame(){this.board.set(this.createInitialBoard()),this.currentPlayer.set("white"),this.selectedSquare.set(null),this.statusMessage.set("Your turn (White)"),this.gameOver.set(null),this.validMoves.set(new Set),this.capturedByWhite.set([]),this.capturedByBlack.set([])}calculateValidMoves(e,t,i){let r=new Set;for(let o=0;o<8;o++)for(let s=0;s<8;s++)this.isMoveValid(i,{row:e,col:t},{row:o,col:s})&&r.add(`${o},${s}`);this.validMoves.set(r)}isMoveValid(e,t,i){let r=this.board(),o=r[i.row][i.col];if(o&&o.player===e.player)return!1;let s=i.row-t.row,a=i.col-t.col;switch(e.type){case"pawn":let l=e.player==="white"?-1:1;if(a===0&&!o){if(s===l)return!0;let p=e.player==="white"?6:1;if(t.row===p&&s===2*l&&!r[t.row+l][t.col])return!0}return!!(Math.abs(a)===1&&s===l&&o);case"rook":return s!==0&&a!==0?!1:this.isPathClear(t,i);case"knight":return Math.abs(s)===2&&Math.abs(a)===1||Math.abs(s)===1&&Math.abs(a)===2;case"bishop":return Math.abs(s)!==Math.abs(a)?!1:this.isPathClear(t,i);case"queen":let c=s===0||a===0,d=Math.abs(s)===Math.abs(a);return!c&&!d?!1:this.isPathClear(t,i);case"king":return Math.abs(s)<=1&&Math.abs(a)<=1}return!1}isPathClear(e,t){let i=this.board(),r=Math.sign(t.row-e.row),o=Math.sign(t.col-e.col),s=e.row+r,a=e.col+o;for(;s!==t.row||a!==t.col;){if(i[s][a])return!1;s+=r,a+=o}return!0}getAllPossibleMoves(e){let t=[],i=this.board();for(let r=0;r<8;r++)for(let o=0;o<8;o++){let s=i[r][o];if(s&&s.player===e)for(let a=0;a<8;a++)for(let l=0;l<8;l++)this.isMoveValid(s,{row:r,col:o},{row:a,col:l})&&t.push({from:{row:r,col:o},to:{row:a,col:l}})}return t}createInitialBoard(){let e=Array(8).fill(null).map(()=>Array(8).fill(null)),t=(i,r,o,s)=>{e[i][r]={player:o,type:s}};for(let i=0;i<8;i++)t(1,i,"black","pawn"),t(6,i,"white","pawn");return t(0,0,"black","rook"),t(0,7,"black","rook"),t(7,0,"white","rook"),t(7,7,"white","rook"),t(0,1,"black","knight"),t(0,6,"black","knight"),t(7,1,"white","knight"),t(7,6,"white","knight"),t(0,2,"black","bishop"),t(0,5,"black","bishop"),t(7,2,"white","bishop"),t(7,5,"white","bishop"),t(0,3,"black","queen"),t(7,3,"white","queen"),t(0,4,"black","king"),t(7,4,"white","king"),e}};tu.\u0275fac=function(t){return new(t||tu)},tu.\u0275cmp=ee({type:tu,selectors:[["app-chess"]],decls:23,vars:1,consts:[[1,"h-full","w-full","flex","flex-col","items-center","justify-center","bg-gray-800","p-4","font-sans"],[1,"w-full","max-w-2xl","flex","justify-between","items-start","gap-4"],[1,"flex-1","flex","flex-col","items-center"],[1,"text-lg","font-semibold","text-white","mb-2"],[1,"captured-pieces-box"],[1,"captured-piece",3,"ngClass","text-white"],[1,"flex","flex-col","items-center"],[1,"mb-2","text-center","h-12","flex","flex-col","justify-center"],[1,"text-2xl","font-bold","text-yellow-400"],[1,"text-xl","font-bold","text-white"],[1,"grid","grid-cols-8","grid-rows-8","w-full","max-w-lg","aspect-square","shadow-2xl","border-4","border-yellow-800"],[1,"mt-4","px-6","py-2","bg-yellow-700","hover:bg-yellow-600","rounded-md","text-white","font-bold","shadow-lg",3,"click"],[1,"captured-piece",3,"ngClass","text-black"],[1,"captured-piece",3,"ngClass"],[1,"chess-square","relative",3,"light","dark","selected"],[1,"chess-square","relative",3,"click"],[1,"chess-piece",3,"ngClass","text-white","text-black"],[1,"valid-move-indicator"],[1,"chess-piece",3,"ngClass"]],template:function(t,i){t&1&&(m(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),g(4,"AI (Black)"),v(),m(5,"div",4),Q(6,AX,1,3,"i",5,Ve),v()(),m(8,"div",6)(9,"div",7),U(10,kX,2,1,"h2",8)(11,MX,2,1,"h2",9),v(),m(12,"div",10),Q(13,FX,2,0,null,null,Ve),v(),m(15,"button",11),N("click",function(){return i.resetGame()}),g(16," New Game "),v()(),m(17,"div",2)(18,"h3",3),g(19,"You (White)"),v(),m(20,"div",4),Q(21,LX,1,3,"i",12,Ve),v()()()()),t&2&&(w(6),X(i.capturedByWhite()),w(4),$(i.gameOver()?10:11),w(3),X(i.board()),w(8),X(i.capturedByBlack()))},dependencies:[te,Vt],styles:["@tailwind base;@tailwind components;@tailwind utilities;@layer components{.chess-square[_ngcontent-%COMP%]{@apply w-full h-full flex items-center justify-center cursor-pointer transition-colors;}.light[_ngcontent-%COMP%]{background-color:#f0d9b5}.dark[_ngcontent-%COMP%]{background-color:#b58863}.selected[_ngcontent-%COMP%]{@apply bg-yellow-400/70;}.chess-piece[_ngcontent-%COMP%]{@apply text-5xl;text-shadow:0 2px 4px rgba(0,0,0,.4);pointer-events:none}.valid-move-indicator[_ngcontent-%COMP%]{@apply w-1/3 h-1/3 bg-black/20 rounded-full;}.captured-pieces-box[_ngcontent-%COMP%]{@apply w-full min-h-24 bg-gray-900/50 rounded-lg p-2 flex flex-wrap gap-2 content-start;}.captured-piece[_ngcontent-%COMP%]{@apply text-2xl text-gray-400;}}"],changeDetection:0});var K0=tu;function OX(n,e){n&1&&W(0,"div",7)}function VX(n,e){if(n&1){let t=B();x(0,"div",14),G("click",function(){S(t);let r=C(2);return T(r.handleCardClick("waste",0,0))}),x(1,"span"),g(2),b()()}if(n&2){let t,i=C().$implicit,r=C();ga(i.suit),Y("selected",((t=r.selectedCard())==null?null:t.pile)==="waste"),w(),Y("text-red-600",i.color==="red"),w(),V(i.rank)}}function BX(n,e){if(n&1&&U(0,VX,3,7,"div",13),n&2){let t=e.$index;$(t===0?0:-1)}}function UX(n,e){if(n&1){let t=B();x(0,"div",14),G("click",function(r){S(t);let o=C(),s=o.$implicit,a=o.$index,l=C();return r.stopPropagation(),T(l.handleCardClick("foundation",a,s.length-1))}),x(1,"span"),g(2),b()()}if(n&2){let t=C().$implicit,i=t[t.length-1];ga(i.suit),w(),Y("text-red-600",i.color==="red"),w(),V(i.rank)}}function $X(n,e){if(n&1){let t=B();x(0,"div",15),G("click",function(){let r=S(t).$index,o=C();return T(o.handleEmptyPileClick("foundation",r))}),U(1,UX,3,5,"div",16),b()}if(n&2){let t=e.$implicit;w(),$(t.length>0?1:-1)}}function HX(n,e){if(n&1&&(x(0,"div",22)(1,"span"),g(2),b()()),n&2){let t=C().$implicit;ga(t.suit),w(),Y("text-red-600",t.color==="red"),w(),V(t.rank)}}function qX(n,e){n&1&&W(0,"div",21)}function GX(n,e){if(n&1){let t=B();x(0,"div",19),G("click",function(r){let o=S(t).$index,s=C().$index,a=C();return r.stopPropagation(),T(a.handleCardClick("tableau",s,o))}),U(1,HX,3,5,"div",20)(2,qX,1,0,"div",21),b()}if(n&2){let t,i=e.$implicit,r=e.$index,o=C().$index,s=C();Be("top",r*35,"px"),Y("selected",((t=s.selectedCard())==null?null:t.pile)==="tableau"&&((t=s.selectedCard())==null?null:t.pileIndex)===o&&((t=s.selectedCard())==null?null:t.cardIndex)>=r),w(),$(i.isFaceUp?1:2)}}function WX(n,e){if(n&1){let t=B();x(0,"div",17),G("click",function(){let r=S(t).$index,o=C();return T(o.handleEmptyPileClick("tableau",r))}),Q(1,GX,3,5,"div",18,Ve),b()}if(n&2){let t=e.$implicit;w(),X(t)}}function zX(n,e){if(n&1){let t=B();x(0,"div",12)(1,"h2",23),g(2,"You Win!"),b(),x(3,"button",24),G("click",function(){S(t);let r=C();return T(r.newGame())}),g(4,"Play Again"),b()()}}var nu=class nu{constructor(){this.stock=I([]);this.waste=I([]);this.foundations=I([[],[],[],[]]);this.tableau=I([[],[],[],[],[],[],[]]);this.selectedCard=I(null);this.isGameWon=le(()=>this.foundations().every(e=>e.length===13));this.newGame()}newGame(){let e=["hearts","diamonds","clubs","spades"],t=["A","2","3","4","5","6","7","8","9","10","J","Q","K"],i=[];for(let o of e)for(let s of t)i.push({suit:o,rank:s,isFaceUp:!1,color:o==="hearts"||o==="diamonds"?"red":"black"});i.sort(()=>Math.random()-.5);let r=[[],[],[],[],[],[],[]];for(let o=0;o<7;o++)for(let s=o;s<7;s++)r[s].push(i.pop());r.forEach(o=>o[o.length-1].isFaceUp=!0),this.tableau.set(r),this.stock.set(i),this.waste.set([]),this.foundations.set([[],[],[],[]]),this.selectedCard.set(null)}drawFromStock(){this.stock().length>0?this.stock.update(e=>{let t=e.pop();return t.isFaceUp=!0,this.waste.update(i=>[t,...i]),e}):(this.stock.set(this.waste().reverse().map(e=>Z(P({},e),{isFaceUp:!1}))),this.waste.set([]))}handleCardClick(e,t,i){let r=this.selectedCard(),o=this.getCard(e,t,i);!o||!o.isFaceUp||(r?(e!=="waste"&&this.moveCard(r,{pile:e,pileIndex:t,cardIndex:i}),this.selectedCard.set(null)):this.selectedCard.set({pile:e,pileIndex:t,cardIndex:i}))}handleEmptyPileClick(e,t){let i=this.selectedCard();i&&(this.moveCard(i,{pile:e,pileIndex:t,cardIndex:-1}),this.selectedCard.set(null))}getCard(e,t,i){return e==="tableau"?this.tableau()[t][i]:e==="waste"?this.waste()[i]:e==="foundation"?this.foundations()[t][i]:null}moveCard(e,t){let i=this.getCard(e.pile,e.pileIndex,e.cardIndex);if(!i)return;let r=[];e.pile==="tableau"?r=this.tableau()[e.pileIndex].slice(e.cardIndex):r=[i],t.pile==="foundation"&&this.canMoveToFoundation(r[0],t.pileIndex)?this.executeMove(e,t,r):t.pile==="tableau"&&this.canMoveToTableau(r[0],t.pileIndex)&&this.executeMove(e,t,r)}canMoveToFoundation(e,t){let i=this.foundations()[t],r=["A","2","3","4","5","6","7","8","9","10","J","Q","K"];if(i.length===0)return e.rank==="A";let o=i[i.length-1];return e.suit===o.suit&&r.indexOf(e.rank)===r.indexOf(o.rank)+1}canMoveToTableau(e,t){let i=this.tableau()[t],r=["A","2","3","4","5","6","7","8","9","10","J","Q","K"];if(i.length===0)return e.rank==="K";let o=i[i.length-1];return e.color!==o.color&&r.indexOf(e.rank)===r.indexOf(o.rank)-1}executeMove(e,t,i){e.pile==="waste"&&this.waste.update(r=>r.slice(1)),e.pile==="foundation"&&this.foundations.update(r=>(r[e.pileIndex].pop(),[...r])),e.pile==="tableau"&&this.tableau.update(r=>(r[e.pileIndex]=r[e.pileIndex].slice(0,e.cardIndex),r[e.pileIndex].length>0&&(r[e.pileIndex][r[e.pileIndex].length-1].isFaceUp=!0),[...r])),t.pile==="foundation"&&this.foundations.update(r=>(r[t.pileIndex].push(i[0]),[...r])),t.pile==="tableau"&&this.tableau.update(r=>(r[t.pileIndex].push(...i),[...r]))}};nu.\u0275fac=function(t){return new(t||nu)},nu.\u0275cmp=ee({type:nu,selectors:[["app-solitaire"]],decls:20,vars:2,consts:[[1,"h-full","w-full","bg-green-800","text-white","p-4","font-sans","flex","flex-col"],[1,"flex-shrink-0","flex","justify-between","items-center","mb-4"],[1,"text-2xl","font-bold"],[1,"px-4","py-2","bg-blue-600","hover:bg-blue-500","rounded-lg","font-bold",3,"click"],[1,"flex-shrink-0","flex","justify-between","mb-4"],[1,"flex","gap-4"],[1,"card-pile",3,"click"],[1,"card","back"],[1,"card-pile"],[1,"card-pile","foundation"],[1,"flex-1","grid","grid-cols-7","gap-4"],[1,"relative","h-full"],[1,"absolute","inset-0","bg-black/70","flex","flex-col","items-center","justify-center","z-50"],[1,"card",3,"selected","class"],[1,"card",3,"click"],[1,"card-pile","foundation",3,"click"],[1,"card",3,"class"],[1,"relative","h-full",3,"click"],[1,"card","absolute",3,"top","selected"],[1,"card","absolute",3,"click"],[1,"face",3,"class"],[1,"back"],[1,"face"],[1,"text-4xl","font-bold","text-yellow-400","mb-4"],[1,"px-6","py-3","bg-blue-600","hover:bg-blue-500","rounded-lg","text-lg",3,"click"]],template:function(t,i){t&1&&(x(0,"div",0)(1,"div",1)(2,"h2",2),g(3,"Solitaire"),b(),x(4,"button",3),G("click",function(){return i.newGame()}),g(5,"New Game"),b()(),x(6,"div",4)(7,"div",5)(8,"div",6),G("click",function(){return i.drawFromStock()}),U(9,OX,1,0,"div",7),b(),x(10,"div",8),Q(11,BX,1,1,null,null,Ve),b()(),x(13,"div",5),Q(14,$X,2,1,"div",9,Ve),b()(),x(16,"div",10),Q(17,WX,3,0,"div",11,Ve),b(),U(19,zX,5,0,"div",12),b()),t&2&&(w(9),$(i.stock().length>0?9:-1),w(2),X(i.waste()),w(3),X(i.foundations()),w(3),X(i.tableau()),w(2),$(i.isGameWon()?19:-1))},dependencies:[te],styles:['@tailwind base;@tailwind components;@tailwind utilities;@layer components{.card-pile[_ngcontent-%COMP%]{@apply w-24 h-36 bg-green-900/50 rounded-lg border-2 border-dashed border-white/20 relative;}.card-pile.foundation[_ngcontent-%COMP%]:before{@apply absolute inset-0 flex items-center justify-center text-4xl text-white/10;content:"\\2660"}.card[_ngcontent-%COMP%]{@apply w-24 h-36 rounded-lg shadow-md cursor-pointer transition-transform duration-150;}.card.selected[_ngcontent-%COMP%]{@apply ring-2 ring-yellow-400 ring-offset-2 ring-offset-green-800 transform scale-105;}.card[_ngcontent-%COMP%]   .face[_ngcontent-%COMP%], .card[_ngcontent-%COMP%]   .back[_ngcontent-%COMP%]{@apply w-full h-full rounded-lg flex items-center justify-center text-3xl font-bold;}.card[_ngcontent-%COMP%]   .face[_ngcontent-%COMP%]{@apply bg-white text-black;}.card[_ngcontent-%COMP%]   .back[_ngcontent-%COMP%]{@apply bg-blue-600;background-image:linear-gradient(45deg,rgba(255,255,255,.1) 25%,transparent 25%,transparent 75%,rgba(255,255,255,.1) 75%),linear-gradient(45deg,rgba(255,255,255,.1) 25%,transparent 25%,transparent 75%,rgba(255,255,255,.1) 75%);background-size:20px 20px;background-position:0 0,10px 10px}.card[_ngcontent-%COMP%]   .face.hearts[_ngcontent-%COMP%]:after, .card[_ngcontent-%COMP%]   .face.diamonds[_ngcontent-%COMP%]:after, .card[_ngcontent-%COMP%]   .face.clubs[_ngcontent-%COMP%]:after, .card[_ngcontent-%COMP%]   .face.spades[_ngcontent-%COMP%]:after{@apply absolute text-lg;bottom:.5rem;right:.5rem}.card[_ngcontent-%COMP%]   .face.hearts[_ngcontent-%COMP%]:after{content:"\\2665";@apply text-red-600;}.card[_ngcontent-%COMP%]   .face.diamonds[_ngcontent-%COMP%]:after{content:"\\2666";@apply text-red-600;}.card[_ngcontent-%COMP%]   .face.clubs[_ngcontent-%COMP%]:after{content:"\\2663"}.card[_ngcontent-%COMP%]   .face.spades[_ngcontent-%COMP%]:after{content:"\\2660"}}'],changeDetection:0});var Y0=nu;function jX(n,e){n&1&&(x(0,"span"),g(1,"\u{1F642}"),b())}function KX(n,e){n&1&&(x(0,"span"),g(1,"\u{1F60E}"),b())}function YX(n,e){n&1&&(x(0,"span"),g(1,"\u{1F635}"),b())}function JX(n,e){if(n&1&&g(0),n&2){let t=C().$implicit;me(" ",t.adjacentMines," ")}}function QX(n,e){n&1&&W(0,"i",10)}function XX(n,e){n&1&&W(0,"i",11)}function ZX(n,e){if(n&1){let t=B();x(0,"div",9),G("mousedown",function(r){let o=S(t).$index,s=C().$index,a=C();return T(a.handleCellClick(s,o,r))})("contextmenu",function(r){return S(t),T(r.preventDefault())}),U(1,JX,1,1)(2,QX,1,0,"i",10)(3,XX,1,0,"i",11),b()}if(n&2){let t=e.$implicit,i=C(2);Y("revealed",t.isRevealed)("flagged",t.isFlagged&&!t.isRevealed)("mine",t.hasMine&&t.isRevealed)("lost",i.gameState()==="lost"&&t.hasMine)("c1",t.adjacentMines===1)("c2",t.adjacentMines===2)("c3",t.adjacentMines===3)("c4",t.adjacentMines===4)("c5",t.adjacentMines===5)("c6",t.adjacentMines===6),w(),$(t.isRevealed&&!t.hasMine&&t.adjacentMines>0?1:t.isRevealed&&t.hasMine?2:t.isFlagged&&!t.isRevealed?3:-1)}}function eZ(n,e){if(n&1&&Q(0,ZX,4,21,"div",8,Ve),n&2){let t=e.$implicit;X(t)}}var iu=class iu{constructor(){this.rows=16;this.cols=16;this.mines=40;this.board=I([]);this.gameState=I("playing");this.flagsPlaced=I(0);this.timer=I(0);this.newGame()}ngOnDestroy(){this.timerInterval&&clearInterval(this.timerInterval)}newGame(){this.gameState.set("playing"),this.flagsPlaced.set(0),this.timer.set(0),this.timerInterval&&clearInterval(this.timerInterval),this.initializeBoard()}initializeBoard(){let e=Array(this.rows).fill(null).map(()=>Array(this.cols).fill(null).map(()=>({hasMine:!1,isRevealed:!1,isFlagged:!1,adjacentMines:0})));this.board.set(e)}startTimer(){this.timerInterval||(this.timerInterval=setInterval(()=>this.timer.update(e=>e+1),1e3))}placeMines(e,t){let i=this.mines,r=this.board();for(;i>0;){let o=Math.floor(Math.random()*this.rows),s=Math.floor(Math.random()*this.cols);!r[o][s].hasMine&&!(o===e&&s===t)&&(r[o][s].hasMine=!0,i--)}for(let o=0;o<this.rows;o++)for(let s=0;s<this.cols;s++)r[o][s].hasMine||(r[o][s].adjacentMines=this.countAdjacentMines(o,s))}countAdjacentMines(e,t){let i=0;for(let r=-1;r<=1;r++)for(let o=-1;o<=1;o++){let s=e+r,a=t+o;s>=0&&s<this.rows&&a>=0&&a<this.cols&&this.board()[s][a].hasMine&&i++}return i}handleCellClick(e,t,i){if(this.gameState()!=="playing")return;!this.board().flat().some(s=>s.hasMine)&&(this.placeMines(e,t),this.startTimer());let o=this.board()[e][t];i.button===0&&!o.isFlagged&&!o.isRevealed?this.revealCell(e,t):i.button===2&&!o.isRevealed&&(i.preventDefault(),this.toggleFlag(e,t)),this.checkWinCondition()}revealCell(e,t){let i=this.board()[e][t];if(!(i.isRevealed||i.isFlagged)){if(i.isRevealed=!0,i.hasMine){this.gameState.set("lost"),clearInterval(this.timerInterval),this.revealAllMines();return}if(i.adjacentMines===0)for(let r=-1;r<=1;r++)for(let o=-1;o<=1;o++){let s=e+r,a=t+o;s>=0&&s<this.rows&&a>=0&&a<this.cols&&this.revealCell(s,a)}}}toggleFlag(e,t){let i=this.board()[e][t];i.isFlagged?(i.isFlagged=!1,this.flagsPlaced.update(r=>r-1)):(i.isFlagged=!0,this.flagsPlaced.update(r=>r+1))}revealAllMines(){this.board().forEach(e=>e.forEach(t=>{t.hasMine&&(t.isRevealed=!0)}))}checkWinCondition(){if(this.gameState()!=="playing")return;this.board().flat().filter(i=>!i.hasMine).every(i=>i.isRevealed)&&(this.gameState.set("won"),clearInterval(this.timerInterval))}formatTime(e){return e.toString().padStart(3,"0")}};iu.\u0275fac=function(t){return new(t||iu)},iu.\u0275cmp=ee({type:iu,selectors:[["app-minesweeper"]],decls:16,vars:5,consts:[[1,"h-full","w-full","flex","flex-col","items-center","bg-gray-800","p-4","font-sans","text-white","select-none"],[1,"flex-shrink-0","flex","items-center","justify-between","w-full","max-w-sm","bg-gray-900/50","p-2","rounded-lg","mb-4"],[1,"font-bold","text-xl","font-mono"],[1,"fas","fa-bomb","ml-1","text-red-500"],[1,"w-12","h-12","text-2xl","bg-gray-700","rounded-lg",3,"click"],[1,"fas","fa-clock","ml-1","text-gray-400"],[1,"flex-grow","flex","items-center","justify-center"],[1,"grid","gap-px","bg-gray-700"],[1,"cell",3,"revealed","flagged","mine","lost","c1","c2","c3","c4","c5","c6"],[1,"cell",3,"mousedown","contextmenu"],[1,"fas","fa-bomb"],[1,"fas","fa-flag"]],template:function(t,i){if(t&1&&(x(0,"div",0)(1,"header",1)(2,"div",2),g(3),W(4,"i",3),b(),x(5,"button",4),G("click",function(){return i.newGame()}),U(6,jX,2,0,"span")(7,KX,2,0,"span")(8,YX,2,0,"span"),b(),x(9,"div",2),g(10),W(11,"i",5),b()(),x(12,"main",6)(13,"div",7),Q(14,eZ,2,0,null,null,Ve),b()()()),t&2){let r;w(3),me("",i.mines-i.flagsPlaced()," "),w(3),$((r=i.gameState())==="playing"?6:r==="won"?7:r==="lost"?8:-1),w(4),me("",i.formatTime(i.timer())," "),w(3),Be("grid-template-columns","repeat("+i.cols+", 1fr)"),w(),X(i.board())}},dependencies:[te],styles:["@tailwind base;@tailwind components;@tailwind utilities;@layer components{.cell[_ngcontent-%COMP%]{@apply w-6 h-6 bg-gray-500 hover:bg-gray-400 flex items-center justify-center font-bold text-sm transition-colors cursor-pointer;border-style:outset;border-width:2px;border-color:#718096 #4a5568 #4a5568 #718096}.cell.revealed[_ngcontent-%COMP%]{@apply bg-gray-600 cursor-default;border-style:solid;border-width:1px;border-color:#4a5568}.cell.flagged[_ngcontent-%COMP%]{@apply text-red-500;}.cell.mine[_ngcontent-%COMP%]{@apply bg-red-700;}.cell.lost[_ngcontent-%COMP%]{animation:flash .5s infinite}.c1[_ngcontent-%COMP%]{@apply text-blue-400;}.c2[_ngcontent-%COMP%]{@apply text-green-400;}.c3[_ngcontent-%COMP%]{@apply text-red-400;}.c4[_ngcontent-%COMP%]{@apply text-blue-600;}.c5[_ngcontent-%COMP%]{@apply text-red-600;}.c6[_ngcontent-%COMP%]{@apply text-teal-400;}}@keyframes _ngcontent-%COMP%_flash{0%,to{background-color:#c53030}50%{background-color:#f56565}}"],changeDetection:0});var J0=iu;var tZ=()=>[1,2,3,4,5,6,7,8,9];function nZ(n,e){if(n&1){let t=B();x(0,"div",9),G("click",function(){let r=S(t).$index,o=C().$index,s=C();return T(s.selectCell(o,r))}),g(1),b()}if(n&2){let t,i=e.$implicit,r=e.$index,o=C().$index,s=C();Y("given",i.isGiven)("selected",((t=s.selectedCell())==null?null:t.row)===o&&((t=s.selectedCell())==null?null:t.col)===r)("highlighted",o===s.highlightedRow()||r===s.highlightedCol()||s.isCellInHighlightedBox(o,r))("num-highlighted",i.value!==null&&i.value===s.highlightedNum())("invalid",i.isInvalid)("border-r-2",r===2||r===5)("border-b-2",o===2||o===5)("border-gray-600",!0),w(),me(" ",i.value," ")}}function iZ(n,e){if(n&1&&Q(0,nZ,2,17,"div",8,Ve),n&2){let t=e.$implicit;X(t)}}function rZ(n,e){if(n&1){let t=B();x(0,"button",5),G("click",function(){let r=S(t).$implicit,o=C();return T(o.setNumber(r))}),g(1),b()}if(n&2){let t=e.$implicit;w(),V(t)}}function oZ(n,e){if(n&1){let t=B();x(0,"div",7)(1,"h3",10),g(2,"Congratulations! Puzzle Solved!"),b(),x(3,"button",11),G("click",function(){S(t);let r=C();return T(r.newGame())}),g(4,"New Game"),b()()}}var ru=class ru{constructor(){this.board=I([]);this.selectedCell=I(null);this.isComplete=le(()=>{let e=this.board();return!(e.length===0||e.flat().some(t=>t.value===null||t.isInvalid))});this.highlightedRow=le(()=>this.selectedCell()?.row??-1);this.highlightedCol=le(()=>this.selectedCell()?.col??-1);this.highlightedBox=le(()=>{let e=this.selectedCell();return e?{row:Math.floor(e.row/3),col:Math.floor(e.col/3)}:{row:-1,col:-1}});this.highlightedNum=le(()=>{let e=this.selectedCell();if(!e)return null;let t=this.board();return t.length>0?t[e.row][e.col].value:null});this.newGame()}newGame(){let e=[[5,3,null,null,7,null,null,null,null],[6,null,null,1,9,5,null,null,null],[null,9,8,null,null,null,null,6,null],[8,null,null,null,6,null,null,null,3],[4,null,null,8,null,3,null,null,1],[7,null,null,null,2,null,null,null,6],[null,6,null,null,null,null,2,8,null],[null,null,null,4,1,9,null,null,5],[null,null,null,null,8,null,null,7,9]];this.board.set(e.map(t=>t.map(i=>({value:i,isGiven:i!==null,isInvalid:!1})))),this.selectedCell.set(null)}selectCell(e,t){this.board()[e][t].isGiven?this.selectedCell.set(null):this.selectedCell.set({row:e,col:t})}setNumber(e){let t=this.selectedCell();t&&this.board.update(i=>{let r=JSON.parse(JSON.stringify(i));return r[t.row][t.col].value=e,this.validateBoard(r),r})}eraseNumber(){let e=this.selectedCell();e&&this.board.update(t=>{let i=JSON.parse(JSON.stringify(t));return i[e.row][e.col].value=null,this.validateBoard(i),i})}validateBoard(e){for(let t=0;t<9;t++)for(let i=0;i<9;i++)e[t][i].isInvalid=!1;for(let t=0;t<9;t++)for(let i=0;i<9;i++){let r=e[t][i].value;r!==null&&(this.isValidPlacement(e,t,i,r)||(e[t][i].isInvalid=!0))}}isValidPlacement(e,t,i,r){for(let a=0;a<9;a++)if(a!==i&&e[t][a].value===r)return!1;for(let a=0;a<9;a++)if(a!==t&&e[a][i].value===r)return!1;let o=Math.floor(t/3)*3,s=Math.floor(i/3)*3;for(let a=0;a<3;a++)for(let l=0;l<3;l++){let c=o+a,d=s+l;if((c!==t||d!==i)&&e[c][d].value===r)return!1}return!0}isCellInHighlightedBox(e,t){let i=this.highlightedBox();return Math.floor(e/3)===i.row&&Math.floor(t/3)===i.col}};ru.\u0275fac=function(t){return new(t||ru)},ru.\u0275cmp=ee({type:ru,selectors:[["app-sudoku"]],decls:11,vars:2,consts:[[1,"h-full","w-full","flex","flex-col","items-center","justify-center","bg-gray-800","p-4","font-sans","text-white"],[1,"w-full","max-w-sm"],[1,"grid","grid-cols-9","grid-rows-9","aspect-square","w-full","bg-gray-700","gap-px","border-2","border-gray-600"],[1,"mt-4","flex","items-center","gap-2"],[1,"control-btn"],[1,"control-btn",3,"click"],[1,"fas","fa-eraser"],[1,"mt-4","text-center","p-4","bg-green-500/30","rounded-lg"],[1,"sudoku-cell",3,"given","selected","highlighted","num-highlighted","invalid","border-r-2","border-b-2","border-gray-600"],[1,"sudoku-cell",3,"click"],[1,"text-xl","font-bold","text-green-300"],[1,"mt-2","px-3","py-1","bg-green-600","rounded",3,"click"]],template:function(t,i){t&1&&(x(0,"div",0)(1,"div",1)(2,"div",2),Q(3,iZ,2,0,null,null,Ve),b()(),x(5,"div",3),Q(6,rZ,2,1,"button",4,Ot),x(8,"button",5),G("click",function(){return i.eraseNumber()}),W(9,"i",6),b()(),U(10,oZ,5,0,"div",7),b()),t&2&&(w(3),X(i.board()),w(3),X(uc(1,tZ)),w(4),$(i.isComplete()?10:-1))},dependencies:[te],styles:["@tailwind base;@tailwind components;@tailwind utilities;@layer components{.sudoku-cell[_ngcontent-%COMP%]{@apply w-full h-full flex items-center justify-center text-2xl cursor-pointer bg-gray-800 hover:bg-gray-700/80 transition-colors;}.sudoku-cell.given[_ngcontent-%COMP%]{@apply text-gray-400 font-bold cursor-not-allowed;}.sudoku-cell.highlighted[_ngcontent-%COMP%]{@apply bg-gray-700/60;}.sudoku-cell.num-highlighted[_ngcontent-%COMP%]{@apply bg-blue-800/40;}.sudoku-cell.selected[_ngcontent-%COMP%]{@apply bg-blue-700;}.sudoku-cell.invalid[_ngcontent-%COMP%]{@apply bg-red-800/50 text-red-400;}.control-btn[_ngcontent-%COMP%]{@apply w-10 h-10 bg-gray-700 hover:bg-gray-600 rounded-md text-xl font-semibold;}}"],changeDetection:0});var Q0=ru;function sZ(n,e){if(n&1&&O(0,"div",12),n&2){let t=e.$implicit;J("ngClass","bg-"+t)}}function aZ(n,e){if(n&1&&Q(0,sZ,1,1,"div",12,Ve),n&2){let t=e.$implicit;X(t)}}function lZ(n,e){if(n&1&&O(0,"div",14),n&2){let t=e.$implicit,i=C(2);J("ngClass",t>0?"bg-"+i.color:"bg-transparent")}}function cZ(n,e){if(n&1&&Q(0,lZ,1,1,"div",14,Ve),n&2){let t=e.$implicit;X(t)}}function uZ(n,e){if(n&1&&(m(0,"div",13),Q(1,cZ,2,0,null,null,Ve),v()),n&2){let t=e;Be("grid-template-columns","repeat("+t.shape[0].length+", 15px)"),w(),X(t.shape)}}function dZ(n,e){if(n&1){let t=B();m(0,"div",11)(1,"h3",15),g(2,"Game Over"),v(),m(3,"button",16),N("click",function(){S(t);let r=C();return T(r.startGame())}),g(4," Play Again "),v()()}}var X0=10,qN=20;var GN=[[[1,1,1,1]],[[1,1],[1,1]],[[0,1,0],[1,1,1]],[[0,1,1],[1,1,0]],[[1,1,0],[0,1,1]],[[1,0,0],[1,1,1]],[[0,0,1],[1,1,1]]],fZ=["cyan","yellow","purple","green","red","orange","blue"],ou=class ou{constructor(){this.board=I(this.createEmptyBoard());this.score=I(0);this.gameOver=I(!1);this.nextPiece=I(null)}ngOnInit(){this.startGame()}ngOnDestroy(){this.gameInterval&&clearInterval(this.gameInterval)}startGame(){this.board.set(this.createEmptyBoard()),this.score.set(0),this.gameOver.set(!1),this.nextPiece.set(this.createNewPiece()),this.spawnNewPiece(),this.gameInterval&&clearInterval(this.gameInterval),this.gameInterval=setInterval(()=>this.gameLoop(),1e3)}gameLoop(){if(this.gameOver()){clearInterval(this.gameInterval);return}this.movePiece(0,1)}createEmptyBoard(){return Array.from({length:qN},()=>Array(X0).fill("black"))}createNewPiece(){let e=Math.floor(Math.random()*GN.length);return{x:Math.floor(X0/2)-1,y:0,shape:GN[e],color:fZ[e]}}spawnNewPiece(){this.currentPiece=this.nextPiece(),this.nextPiece.set(this.createNewPiece()),this.isValidMove(this.currentPiece.shape,this.currentPiece.x,this.currentPiece.y)||this.gameOver.set(!0)}movePiece(e,t){this.isValidMove(this.currentPiece.shape,this.currentPiece.x+e,this.currentPiece.y+t)?(this.currentPiece.x+=e,this.currentPiece.y+=t):t>0&&(this.lockPiece(),this.clearLines(),this.spawnNewPiece())}rotatePiece(){let e=this.currentPiece.shape,t=e[0].map((i,r)=>e.map(o=>o[r]).reverse());this.isValidMove(t,this.currentPiece.x,this.currentPiece.y)&&(this.currentPiece.shape=t)}lockPiece(){this.board.update(e=>{let t=JSON.parse(JSON.stringify(e));return this.currentPiece.shape.forEach((i,r)=>{i.forEach((o,s)=>{o>0&&(t[this.currentPiece.y+r][this.currentPiece.x+s]=this.currentPiece.color)})}),t})}clearLines(){this.board.update(e=>{let t=0,i=e.filter(r=>r.every(o=>o!=="black")?(t++,!1):!0);for(let r=0;r<t;r++)i.unshift(Array(X0).fill("black"));return t>0&&this.score.update(r=>r+t*100*t),i})}isValidMove(e,t,i){let r=this.board();for(let o=0;o<e.length;o++)for(let s=0;s<e[o].length;s++)if(e[o][s]>0){let a=t+s,l=i+o;if(a<0||a>=X0||l>=qN||l>=0&&r[l][a]!=="black")return!1}return!0}get renderedBoard(){if(this.gameOver())return this.board();let e=JSON.parse(JSON.stringify(this.board()));return this.currentPiece?.shape.forEach((t,i)=>{t.forEach((r,o)=>{r>0&&(e[this.currentPiece.y+i][this.currentPiece.x+o]=this.currentPiece.color)})}),e}handleKeyboardEvent(e){if(!this.gameOver())switch(e.key){case"ArrowLeft":this.movePiece(-1,0);break;case"ArrowRight":this.movePiece(1,0);break;case"ArrowDown":this.movePiece(0,1);break;case"ArrowUp":this.rotatePiece();break}}};ou.\u0275fac=function(t){return new(t||ou)},ou.\u0275cmp=ee({type:ou,selectors:[["app-puzzle-blocks"]],hostBindings:function(t,i){t&1&&N("keydown",function(o){return i.handleKeyboardEvent(o)},xf)},decls:18,vars:5,consts:[[1,"h-full","w-full","flex","items-center","justify-center","bg-gray-900","text-white","p-4"],[1,"flex","gap-8"],[1,"grid","border-2","border-gray-600"],[1,"w-40","flex","flex-col","items-center"],[1,"text-2xl","font-bold","mb-4"],[1,"bg-gray-800","p-3","rounded-lg","w-full","text-center","mb-4"],[1,"text-base","text-gray-400"],[1,"text-2xl","font-bold"],[1,"bg-gray-800","p-3","rounded-lg","w-full","text-center"],[1,"text-base","text-gray-400","mb-2"],[1,"grid","mx-auto",3,"grid-template-columns"],[1,"mt-8","text-center","bg-red-800/50","p-4","rounded-lg"],[1,"w-[25px]","h-[25px]",3,"ngClass"],[1,"grid","mx-auto"],[1,"w-[15px]","h-[15px]",3,"ngClass"],[1,"text-2xl","font-bold","text-red-400"],[1,"mt-4","px-4","py-2","bg-blue-600","hover:bg-blue-500","rounded-md",3,"click"]],template:function(t,i){if(t&1&&(m(0,"div",0)(1,"div",1)(2,"div",2),Q(3,aZ,2,0,null,null,Ve),v(),m(5,"div",3)(6,"h2",4),g(7,"Puzzle Blocks"),v(),m(8,"div",5)(9,"p",6),g(10,"Score"),v(),m(11,"p",7),g(12),v()(),m(13,"div",8)(14,"p",9),g(15,"Next"),v(),U(16,uZ,3,2,"div",10),v(),U(17,dZ,5,0,"div",11),v()()()),t&2){let r;w(2),Be("grid-template-columns","repeat(10, 25px)"),w(),X(i.renderedBoard),w(9),V(i.score()),w(4),$((r=i.nextPiece())?16:-1,r),w(),$(i.gameOver()?17:-1)}},dependencies:[te,Vt],styles:["@tailwind base;@tailwind components;@tailwind utilities;.bg-cyan[_ngcontent-%COMP%]{background-color:#06b6d4}.bg-yellow[_ngcontent-%COMP%]{background-color:#eab308}.bg-purple[_ngcontent-%COMP%]{background-color:#8b5cf6}.bg-green[_ngcontent-%COMP%]{background-color:#22c55e}.bg-red[_ngcontent-%COMP%]{background-color:#ef4444}.bg-orange[_ngcontent-%COMP%]{background-color:#f97316}.bg-blue[_ngcontent-%COMP%]{background-color:#3b82f6}.bg-black[_ngcontent-%COMP%]{background-color:#111827}"],changeDetection:0});var Z0=ou;var zN=()=>[0,1,2,3],pZ=(n,e)=>e.id;function hZ(n,e){n&1&&W(0,"div",14)}function mZ(n,e){n&1&&Q(0,hZ,1,0,"div",14,Ot),n&2&&X(uc(0,zN))}function gZ(n,e){if(n&1&&(x(0,"div",15),g(1),b()),n&2){let t=e.$implicit;Be("transform","translate("+t.col*100+"%, "+t.row*100+"%)"),Y("new",t.isNew)("merged",t.isMerged),Fi("data-value",t.value),w(),me(" ",t.value," ")}}function yZ(n,e){if(n&1){let t=B();x(0,"div",11)(1,"h2",16),g(2,"Game Over!"),b(),x(3,"button",17),G("click",function(){S(t);let r=C();return T(r.newGame())}),g(4,"Try Again"),b()()}}var WN=0,su=class su{constructor(){this.tiles=I([]);this.score=I(0);this.gameOver=I(!1);this.size=4;this.isMoving=!1}ngOnInit(){this.newGame()}newGame(){let e=[];e=this.addRandomTile(e),e=this.addRandomTile(e),this.tiles.set(e),this.score.set(0),this.gameOver.set(!1)}addRandomTile(e){let t=[];for(let i=0;i<this.size;i++)for(let r=0;r<this.size;r++)e.some(o=>o.row===i&&o.col===r)||t.push({r:i,c:r});if(t.length>0){let{r:i,c:r}=t[Math.floor(Math.random()*t.length)];e.push({id:WN++,value:Math.random()<.9?2:4,row:i,col:r,isNew:!0,isMerged:!1})}return e}handleKeyboardEvent(e){if(this.gameOver()||this.isMoving)return;let t=null;switch(e.key){case"ArrowUp":t="up";break;case"ArrowDown":t="down";break;case"ArrowLeft":t="left";break;case"ArrowRight":t="right";break}t&&this.move(t)}move(e){this.isMoving=!0;let t=this.tiles().map(a=>Z(P({},a),{isNew:!1,isMerged:!1})),i=Array.from({length:this.size},()=>Array(this.size).fill(null));t.forEach(a=>i[a.row][a.col]=a);let r={up:{r:-1,c:0},down:{r:1,c:0},left:{r:0,c:-1},right:{r:0,c:1}}[e],o=this.buildTraversals(r),s=!1;if(o.r.forEach(a=>{o.c.forEach(l=>{let c={r:a,c:l},d=i[a][l];if(d){let{farthest:p,next:h}=this.findFarthestPosition(i,c,r),y=h?i[h.r][h.c]:null;if(y&&y.value===d.value&&!y.isMerged){let E={id:WN++,value:d.value*2,row:h.r,col:h.c,isMerged:!0,isNew:!1};this.score.update(k=>k+E.value),i[d.row][d.col]=null,i[h.r][h.c]=E;let A=t.find(k=>k.id===d.id);A.row=h.r,A.col=h.c;let R=t.find(k=>k.id===y.id);R.row=-1,s=!0}else(p.r!==d.row||p.c!==d.col)&&(i[d.row][d.col]=null,i[p.r][p.c]=d,d.row=p.r,d.col=p.c,s=!0)}})}),s){let a=t.filter(l=>l.row!==-1);a=this.addRandomTile(a),this.tiles.set(a),this.movesAvailable()||this.gameOver.set(!0)}setTimeout(()=>{this.isMoving=!1},200)}findFarthestPosition(e,t,i){let r;do r=t,t={r:r.r+i.r,c:r.c+i.c};while(this.isWithinBounds(t)&&!e[t.r][t.c]);return{farthest:r,next:t}}isWithinBounds(e){return e.r>=0&&e.r<this.size&&e.c>=0&&e.c<this.size}buildTraversals(e){let t={r:[],c:[]};for(let i=0;i<this.size;i++)t.r.push(i),t.c.push(i);return e.r===1&&(t.r=t.r.reverse()),e.c===1&&(t.c=t.c.reverse()),t}movesAvailable(){let e=this.tiles();if(e.length<this.size*this.size)return!0;for(let t of e)for(let i of[{r:0,c:1},{r:0,c:-1},{r:1,c:0},{r:-1,c:0}]){let r={r:t.row+i.r,c:t.col+i.c};if(this.isWithinBounds(r)){let o=e.find(s=>s.row===r.r&&s.col===r.c);if(o&&o.value===t.value)return!0}}return!1}};su.\u0275fac=function(t){return new(t||su)},su.\u0275cmp=ee({type:su,selectors:[["app-2048"]],hostBindings:function(t,i){t&1&&N("keydown",function(o){return i.handleKeyboardEvent(o)},xf)},decls:29,vars:3,consts:[[1,"h-full","w-full","flex","flex-col","items-center","justify-center","bg-gray-800","p-4","font-sans","text-white","select-none"],[1,"flex","items-center","justify-between","w-full","max-w-sm","mb-4"],[1,"text-5xl","font-bold"],[1,"flex","gap-2"],[1,"bg-gray-700","p-2","rounded-lg","text-center"],[1,"text-sm","text-gray-400"],[1,"text-2xl","font-bold"],[1,"px-4","py-2","bg-orange-600","hover:bg-orange-500","rounded-lg","font-bold",3,"click"],[1,"grid","grid-cols-4","grid-rows-4","gap-3","bg-gray-600","p-3","rounded-lg","w-full","max-w-sm","aspect-square","relative"],[1,"absolute","inset-0"],[1,"tile",3,"transform","new","merged"],[1,"absolute","inset-0","bg-black/70","flex","flex-col","items-center","justify-center","rounded-lg","z-10"],[1,"mt-4","text-gray-400","text-center"],[1,"font-bold"],[1,"tile-bg"],[1,"tile"],[1,"text-4xl","font-bold"],[1,"mt-4","px-4","py-2","bg-orange-600","hover:bg-orange-500","rounded-lg","font-bold",3,"click"]],template:function(t,i){t&1&&(x(0,"div",0)(1,"div",1)(2,"h1",2),g(3,"2048"),b(),x(4,"div",3)(5,"div",4)(6,"div",5),g(7,"SCORE"),b(),x(8,"div",6),g(9),b()(),x(10,"button",7),G("click",function(){return i.newGame()}),g(11,"New Game"),b()()(),x(12,"div",8),Q(13,mZ,2,1,null,null,Ot),x(15,"div",9),Q(16,gZ,2,8,"div",10,pZ),b(),U(18,yZ,5,0,"div",11),b(),x(19,"div",12)(20,"p"),g(21,"Use your "),x(22,"span",13),g(23,"arrow keys"),b(),g(24," to move the tiles."),b(),x(25,"p"),g(26,"When two tiles with the same number touch, they "),x(27,"span",13),g(28,"merge into one!"),b()()()()),t&2&&(w(9),V(i.score()),w(4),X(uc(2,zN)),w(3),X(i.tiles()),w(2),$(i.gameOver()?18:-1))},dependencies:[te],styles:['@tailwind base;@tailwind components;@tailwind utilities;.tile-bg[_ngcontent-%COMP%]{@apply w-full h-full bg-gray-500 rounded-md;}.tile[_ngcontent-%COMP%]{position:absolute;width:calc(25% - .75rem);height:calc(25% - .75rem);margin:.375rem;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:1.75rem;border-radius:.375rem;transition:transform .1s ease-in-out;will-change:transform}.tile.new[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_appear .2s ease-in-out}.tile.merged[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pop .2s ease-in-out}@keyframes _ngcontent-%COMP%_appear{0%{opacity:0;transform:scale(0)}}@keyframes _ngcontent-%COMP%_pop{0%{transform:scale(0)}50%{transform:scale(1.2)}to{transform:scale(1)}}[data-value="2"][_ngcontent-%COMP%]{background-color:#eee4da;color:#776e65}[data-value="4"][_ngcontent-%COMP%]{background-color:#ede0c8;color:#776e65}[data-value="8"][_ngcontent-%COMP%]{background-color:#f2b179;color:#f9f6f2}[data-value="16"][_ngcontent-%COMP%]{background-color:#f59563;color:#f9f6f2}[data-value="32"][_ngcontent-%COMP%]{background-color:#f67c5f;color:#f9f6f2}[data-value="64"][_ngcontent-%COMP%]{background-color:#f65e3b;color:#f9f6f2}[data-value="128"][_ngcontent-%COMP%]{background-color:#edcf72;color:#f9f6f2;font-size:1.5rem}[data-value="256"][_ngcontent-%COMP%]{background-color:#edcc61;color:#f9f6f2;font-size:1.5rem}[data-value="512"][_ngcontent-%COMP%]{background-color:#edc850;color:#f9f6f2;font-size:1.5rem}[data-value="1024"][_ngcontent-%COMP%]{background-color:#edc53f;color:#f9f6f2;font-size:1.25rem}[data-value="2048"][_ngcontent-%COMP%]{background-color:#edc22e;color:#f9f6f2;font-size:1.25rem}[data-value="4096"][_ngcontent-%COMP%], [data-value="8192"][_ngcontent-%COMP%]{background-color:#3c3a32;color:#f9f6f2;font-size:1.25rem}'],changeDetection:0});var ey=su;function vZ(n,e){if(n&1){let t=B();x(0,"div",9),G("mousedown",function(){let r=S(t).$index,o=C().$index,s=C();return T(s.startSelection(o,r))})("mouseover",function(){let r=S(t).$index,o=C().$index,s=C();return T(s.updateSelection(o,r))})("mouseup",function(){S(t);let r=C(2);return T(r.endSelection())}),g(1),b()}if(n&2){let t=e.$implicit;Y("selected",t.isSelected),w(),me(" ",t.letter," ")}}function _Z(n,e){if(n&1&&Q(0,vZ,2,3,"div",8,Ve),n&2){let t=e.$implicit;X(t)}}function wZ(n,e){if(n&1&&(x(0,"li",10),g(1),b()),n&2){let t=e.$implicit,i=C();Y("found",i.isWordFound(t)),w(),me(" ",t," ")}}function CZ(n,e){if(n&1){let t=B();x(0,"div",7)(1,"p",11),g(2,"You found them all!"),b(),x(3,"button",12),G("click",function(){S(t);let r=C();return T(r.newGame())}),g(4,"New Game"),b()()}}var au=class au{constructor(){this.gridSize=10;this.wordsToFind=["ANGULAR","SIGNAL","COMPONENT","BANANA","DESKTOP"];this.grid=I([]);this.foundWords=I([]);this.isSelecting=!1;this.selection=I([]);this.isGameWon=le(()=>this.foundWords().length===this.wordsToFind.length);this.newGame()}newGame(){this.foundWords.set([]),this.selection.set([]),this.generateGrid()}generateGrid(){let e=Array.from({length:this.gridSize},()=>Array.from({length:this.gridSize},()=>({letter:this.getRandomLetter(),isSelected:!1})));this.wordsToFind.forEach(t=>this.placeWord(t,e)),this.grid.set(e)}placeWord(e,t){let i=[[0,1],[1,0],[1,1]],r=!1;for(;!r;){let o=i[Math.floor(Math.random()*i.length)],s=Math.floor(Math.random()*this.gridSize),a=Math.floor(Math.random()*this.gridSize),l=s+(e.length-1)*o[0],c=a+(e.length-1)*o[1];if(l<this.gridSize&&c<this.gridSize){for(let d=0;d<e.length;d++)t[s+d*o[0]][a+d*o[1]].letter=e[d];r=!0}}}getRandomLetter(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZ";return e[Math.floor(Math.random()*e.length)]}startSelection(e,t){this.isSelecting=!0,this.selection.set([{r:e,c:t}]),this.updateGridSelection()}updateSelection(e,t){if(!this.isSelecting)return;this.selection().some(r=>r.r===e&&r.c===t)||(this.selection.update(r=>[...r,{r:e,c:t}]),this.updateGridSelection())}endSelection(){this.isSelecting=!1;let e=this.selection().map(t=>this.grid()[t.r][t.c].letter).join("");if(this.wordsToFind.includes(e)&&!this.foundWords().includes(e))this.foundWords.update(t=>[...t,e]);else{let t=e.split("").reverse().join("");this.wordsToFind.includes(t)&&!this.foundWords().includes(t)&&this.foundWords.update(i=>[...i,t])}this.selection.set([]),this.updateGridSelection()}updateGridSelection(){let e=new Set(this.selection().map(t=>`${t.r}-${t.c}`));this.grid.update(t=>t.map((i,r)=>i.map((o,s)=>Z(P({},o),{isSelected:e.has(`${r}-${s}`)}))))}isWordFound(e){return this.foundWords().includes(e)}};au.\u0275fac=function(t){return new(t||au)},au.\u0275cmp=ee({type:au,selectors:[["app-word-finder"]],decls:12,vars:3,consts:[[1,"h-full","w-full","flex","bg-gray-800","text-white","p-4","font-sans","select-none"],[1,"flex-1","flex","items-center","justify-center"],[1,"grid","gap-1"],[1,"w-56","flex-shrink-0","bg-gray-900/50","p-4","rounded-lg","ml-4"],[1,"text-xl","font-bold","mb-4"],[1,"space-y-2"],[1,"text-lg","transition-colors",3,"found"],[1,"mt-6","text-center"],[1,"word-cell",3,"selected"],[1,"word-cell",3,"mousedown","mouseover","mouseup"],[1,"text-lg","transition-colors"],[1,"text-green-400","font-bold"],[1,"mt-2","px-3","py-1","bg-blue-600","rounded-md",3,"click"]],template:function(t,i){t&1&&(x(0,"div",0)(1,"div",1)(2,"div",2),Q(3,_Z,2,0,null,null,Ve),b()(),x(5,"div",3)(6,"h2",4),g(7,"Find Words"),b(),x(8,"ul",5),Q(9,wZ,2,3,"li",6,Ot),b(),U(11,CZ,5,0,"div",7),b()()),t&2&&(w(2),Be("grid-template-columns","repeat("+i.gridSize+", 1fr)"),w(),X(i.grid()),w(6),X(i.wordsToFind),w(2),$(i.isGameWon()?11:-1))},dependencies:[te],styles:["@tailwind base;@tailwind components;@tailwind utilities;@layer components{.word-cell[_ngcontent-%COMP%]{@apply w-10 h-10 flex items-center justify-center text-xl font-bold bg-gray-700 rounded-md cursor-pointer transition-colors;}.word-cell.selected[_ngcontent-%COMP%]{@apply accent-bg text-white;}.found[_ngcontent-%COMP%]{@apply line-through text-gray-500 scale-95 origin-left;transition:color .5s,transform .5s}}"],changeDetection:0});var ty=au;var EZ=(n,e)=>e.id;function xZ(n,e){if(n&1){let t=B();x(0,"div",11),G("click",function(){let r=S(t).$implicit,o=C();return T(o.selectRecipe(r))}),W(1,"img",12),x(2,"div")(3,"h3",13),g(4),b(),x(5,"p",14),g(6),b()()()}if(n&2){let t,i=e.$implicit,r=C();Y("bg-gray-700",((t=r.selectedRecipe())==null?null:t.id)===i.id),w(),Fe("src",i.imageUrl,Qe)("alt",i.title),w(3),V(i.title),w(2),V(i.description)}}function bZ(n,e){if(n&1&&(x(0,"li",27),W(1,"i",31),x(2,"span"),g(3),b()()),n&2){let t=e.$implicit;w(3),V(t)}}function SZ(n,e){if(n&1&&(x(0,"li",30)(1,"div",32),g(2),b(),x(3,"p",33),g(4),b()()),n&2){let t=e.$implicit,i=e.$index;w(2),V(i+1),w(2),V(t)}}function TZ(n,e){if(n&1&&(x(0,"div")(1,"h1",15),g(2),b(),x(3,"p",16),g(4),b(),W(5,"img",17),x(6,"div",18)(7,"div",19)(8,"p",20),g(9,"Cook Time"),b(),x(10,"p",21),g(11),b()(),x(12,"div",22)(13,"p",20),g(14,"Servings"),b(),x(15,"p",21),g(16),b()(),x(17,"div",19)(18,"p",20),g(19,"Difficulty"),b(),x(20,"p",21),g(21,"Easy"),b()()(),x(22,"div",23)(23,"div",24)(24,"h2",25),g(25,"Ingredients"),b(),x(26,"ul",26),Q(27,bZ,4,1,"li",27,Ot),b()(),x(29,"div",28)(30,"h2",25),g(31,"Instructions"),b(),x(32,"ol",29),Q(33,SZ,5,2,"li",30,Ve),b()()()()),n&2){let t=e;w(2),V(t.title),w(2),V(t.description),w(),Fe("src",t.imageUrl,Qe)("alt",t.title),w(6),V(t.cookTime),w(5),V(t.servings),w(11),X(t.ingredients),w(6),X(t.instructions)}}function IZ(n,e){n&1&&(x(0,"div",10),W(1,"i",34),x(2,"h2",35),g(3,"Select a recipe to view"),b(),x(4,"p"),g(5,"Choose from the list on the left to get started."),b()())}var lu=class lu{constructor(){this.allRecipes=[{id:1,title:"Classic Tomato Pasta",description:"A simple yet delicious pasta dish that is perfect for a weeknight dinner.",imageUrl:"https://picsum.photos/id/1060/400/300",cookTime:"30 mins",servings:"4",ingredients:["1 lb spaghetti","2 tbsp olive oil","3 cloves garlic, minced","1 (28-ounce) can crushed tomatoes","1 tsp dried oregano","Salt and pepper to taste","Fresh basil for garnish"],instructions:["Cook spaghetti according to package directions. Drain and set aside.","In a large skillet, heat olive oil over medium heat. Add garlic and cook until fragrant, about 1 minute.","Stir in crushed tomatoes, oregano, salt, and pepper. Bring to a simmer and cook for 15 minutes, stirring occasionally.","Add the cooked spaghetti to the sauce and toss to coat.","Serve immediately, garnished with fresh basil."]},{id:2,title:"Avocado Toast with Egg",description:"A healthy and satisfying breakfast that comes together in minutes.",imageUrl:"https://picsum.photos/id/292/400/300",cookTime:"10 mins",servings:"1",ingredients:["1 slice of whole-wheat bread, toasted","1/2 ripe avocado","1 large egg","1 tsp lemon juice","Red pepper flakes, salt, and pepper to taste"],instructions:["In a small bowl, mash the avocado with lemon juice, salt, and pepper.","Cook the egg to your liking (fried, poached, or scrambled).","Spread the mashed avocado on the toast.","Top with the cooked egg.","Sprinkle with red pepper flakes and serve immediately."]},{id:3,title:"Chocolate Chip Cookies",description:"The ultimate classic chocolate chip cookie recipe - soft, chewy, and delicious.",imageUrl:"https://picsum.photos/id/312/400/300",cookTime:"25 mins",servings:"24 cookies",ingredients:["2 1/4 cups all-purpose flour","1 tsp baking soda","1/2 tsp salt","1 cup (2 sticks) unsalted butter, softened","3/4 cup granulated sugar","3/4 cup packed brown sugar","1 tsp vanilla extract","2 large eggs","2 cups semi-sweet chocolate chips"],instructions:["Preheat oven to 375\xB0F (190\xB0C).","In a small bowl, whisk together flour, baking soda, and salt.","In a large bowl, beat butter, granulated sugar, brown sugar, and vanilla extract until creamy.","Add eggs, one at a time, beating well after each addition.","Gradually beat in flour mixture.","Stir in chocolate chips.","Drop by rounded tablespoonfuls onto ungreased baking sheets.","Bake for 9 to 11 minutes or until golden brown. Cool on baking sheets for 2 minutes; remove to wire racks to cool completely."]},{id:4,title:"Grilled Lemon Herb Chicken",description:"A juicy and flavorful chicken recipe perfect for grilling season.",imageUrl:"https://picsum.photos/id/431/400/300",cookTime:"45 mins",servings:"4",ingredients:["4 boneless, skinless chicken breasts","1/4 cup olive oil","1/4 cup fresh lemon juice","2 cloves garlic, minced","1 tbsp fresh rosemary, chopped","1 tbsp fresh thyme, chopped","Salt and freshly ground black pepper"],instructions:["In a bowl, whisk together olive oil, lemon juice, garlic, rosemary, thyme, salt, and pepper.","Place chicken in a resealable plastic bag or shallow dish. Pour marinade over, and turn to coat. Marinate for at least 30 minutes.","Preheat grill to medium-high heat.","Grill chicken for 6-8 minutes per side, or until cooked through.","Let rest for 5 minutes before serving."]}];this.selectedRecipe=I(null);this.searchQuery=I("");this.filteredRecipes=le(()=>{let e=this.searchQuery().toLowerCase();return e?this.allRecipes.filter(t=>t.title.toLowerCase().includes(e)||t.description.toLowerCase().includes(e)):this.allRecipes})}selectRecipe(e){this.selectedRecipe.set(e)}handleSearch(e){this.searchQuery.set(e.target.value)}};lu.\u0275fac=function(t){return new(t||lu)},lu.\u0275cmp=ee({type:lu,selectors:[["app-recipe-book"]],decls:14,vars:2,consts:[[1,"h-full","flex","bg-gray-800","text-gray-200","font-sans"],[1,"w-80","flex-shrink-0","bg-gray-900/50","flex","flex-col"],[1,"p-4","border-b","border-gray-700/50"],[1,"text-xl","font-bold"],[1,"relative","mt-2"],[1,"fas","fa-search","text-gray-400","absolute","left-3","top-1/2","-translate-y-1/2"],["type","text","placeholder","Search recipes...",1,"w-full","bg-gray-700","rounded-full","py-1.5","pl-9","pr-3","text-white","focus:outline-none","focus:ring-2","accent-ring-focus",3,"input","value"],[1,"flex-1","overflow-y-auto","custom-scrollbar"],[1,"flex","items-center","gap-4","p-3","cursor-pointer","border-b","border-gray-700/30","hover:bg-gray-700/50",3,"bg-gray-700"],[1,"flex-1","overflow-y-auto","p-6","custom-scrollbar"],[1,"h-full","flex","flex-col","items-center","justify-center","text-gray-500"],[1,"flex","items-center","gap-4","p-3","cursor-pointer","border-b","border-gray-700/30","hover:bg-gray-700/50",3,"click"],[1,"w-16","h-16","rounded-lg","object-cover","flex-shrink-0",3,"src","alt"],[1,"font-semibold"],[1,"text-xs","text-gray-400"],[1,"text-4xl","font-bold","mb-2"],[1,"text-gray-400","mb-4"],[1,"w-full","h-64","rounded-xl","object-cover","mb-6","shadow-lg",3,"src","alt"],[1,"flex","gap-8","text-center","mb-6","bg-gray-900/50","p-3","rounded-lg"],[1,"flex-1"],[1,"text-sm","text-gray-400"],[1,"font-bold","text-lg"],[1,"flex-1","border-x","border-gray-700"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-6"],[1,"md:col-span-1"],[1,"text-2xl","font-semibold","mb-3"],[1,"space-y-2","bg-gray-900/50","p-4","rounded-lg"],[1,"flex","items-start"],[1,"md:col-span-2"],[1,"space-y-4"],[1,"flex","items-start","gap-3"],[1,"fas","fa-circle","text-xs","mt-1.5","mr-2","accent-text"],[1,"flex-shrink-0","w-8","h-8","rounded-full","accent-bg","flex","items-center","justify-center","font-bold"],[1,"mt-1"],[1,"fas","fa-utensils","text-6xl","mb-4"],[1,"text-2xl"]],template:function(t,i){if(t&1&&(x(0,"div",0)(1,"aside",1)(2,"header",2)(3,"h2",3),g(4,"My Recipes"),b(),x(5,"div",4),W(6,"i",5),x(7,"input",6),G("input",function(o){return i.handleSearch(o)}),b()()(),x(8,"div",7),Q(9,xZ,7,6,"div",8,EZ),b()(),x(11,"main",9),U(12,TZ,35,6,"div")(13,IZ,6,0,"div",10),b()()),t&2){let r;w(7),Fe("value",i.searchQuery()),w(2),X(i.filteredRecipes()),w(3),$((r=i.selectedRecipe())?12:13,r)}},dependencies:[te],styles:["@tailwind base;@tailwind components;@tailwind utilities;.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#0003}.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#fff3;border-radius:3px}.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#fff6}"],changeDetection:0});var ny=lu;var DZ=(n,e)=>e.ticker;function AZ(n,e){if(n&1&&(x(0,"div",6)(1,"div",7)(2,"p",8),g(3),b(),x(4,"p",9),g(5),b()(),x(6,"div",10),Yo(),x(7,"svg",11),W(8,"path",12),b()(),Jl(),x(9,"div",13)(10,"p",14),g(11),Ue(12,"number"),b(),x(13,"div",15)(14,"span"),g(15),Ue(16,"number"),b(),x(17,"span",16),g(18),Ue(19,"number"),b()()()()),n&2){let t=e.$implicit,i=C();w(3),V(t.ticker),w(2),V(t.name),w(3),Y("stroke-green-500",t.change>=0)("stroke-red-500",t.change<0),Fi("d",i.generateSparklinePath(t.sparklineData)),w(3),V(et(12,19,t.price,"1.2-2")),w(2),Y("bg-green-500/20",t.change>=0)("text-green-400",t.change>=0)("bg-red-500/20",t.change<0)("text-red-400",t.change<0),w(2),Li("",t.change>=0?"+":"","",et(16,22,t.change,"1.2-2")),w(3),me("(",et(19,25,t.changePercent,"1.2-2"),"%)")}}var cu=class cu{constructor(){this.watchlist=I([{ticker:"AAPL",name:"Apple Inc.",price:172.25,change:1.5,changePercent:.88,sparklineData:this.generateRandomData(150,200)},{ticker:"GOOGL",name:"Alphabet Inc.",price:135.6,change:-.75,changePercent:-.55,sparklineData:this.generateRandomData(120,150)},{ticker:"MSFT",name:"Microsoft Corp.",price:340.1,change:2.1,changePercent:.62,sparklineData:this.generateRandomData(320,360)},{ticker:"AMZN",name:"Amazon.com, Inc.",price:138.4,change:-1.2,changePercent:-.86,sparklineData:this.generateRandomData(130,150)},{ticker:"TSLA",name:"Tesla, Inc.",price:250.7,change:5.3,changePercent:2.16,sparklineData:this.generateRandomData(230,280)}])}ngOnInit(){this.updateInterval=setInterval(()=>this.updateStockPrices(),2e3)}ngOnDestroy(){this.updateInterval&&clearInterval(this.updateInterval)}updateStockPrices(){this.watchlist.update(e=>e.map(t=>{let r=(Math.random()-.5)*t.price*.02,o=Math.max(10,t.price+r),s=o-(t.price-t.change),a=s/(t.price-t.change)*100,l=[...t.sparklineData.slice(1),o];return Z(P({},t),{price:o,change:s,changePercent:a,sparklineData:l})}))}generateSparklinePath(e){let r=Math.max(...e),o=Math.min(...e),s=r-o===0?1:r-o,a=100/(e.length-1),l=`M 0,${30-(e[0]-o)/s*30}`;return e.forEach((c,d)=>{if(d>0){let p=d*a,h=30-(c-o)/s*30;l+=` L ${p.toFixed(2)},${h.toFixed(2)}`}}),l}generateRandomData(e,t,i=30){let r=[];for(let o=0;o<i;o++)r.push(Math.random()*(t-e)+e);return r}};cu.\u0275fac=function(t){return new(t||cu)},cu.\u0275cmp=ee({type:cu,selectors:[["app-stocks"]],decls:9,vars:0,consts:[[1,"h-full","flex","flex-col","bg-gray-900","text-gray-200","font-sans"],[1,"p-4","border-b","border-gray-700/50","flex-shrink-0"],[1,"text-xl","font-bold","flex","items-center","gap-2"],[1,"fas","fa-chart-line","text-green-400"],[1,"flex-1","overflow-y-auto"],[1,"divide-y","divide-gray-800"],[1,"flex","items-center","justify-between","p-4","hover:bg-gray-800/50"],[1,"w-1/3"],[1,"font-bold","text-lg"],[1,"text-xs","text-gray-400","truncate"],[1,"w-1/3","flex","items-center","justify-center"],["viewBox","0 0 100 30","preserveAspectRatio","none",1,"w-24","h-10"],["fill","none","stroke-width","2"],[1,"w-1/3","text-right"],[1,"font-semibold","text-lg"],[1,"px-2","py-0.5","rounded-md","text-sm","font-medium","inline-block"],[1,"ml-2"]],template:function(t,i){t&1&&(x(0,"div",0)(1,"header",1)(2,"h2",2),W(3,"i",3),g(4," Stocks Watchlist "),b()(),x(5,"div",4)(6,"div",5),Q(7,AZ,20,28,"div",6,DZ),b()()()),t&2&&(w(7),X(i.watchlist()))},dependencies:[te,fo],styles:["@tailwind base;@tailwind components;@tailwind utilities;"],changeDetection:0});var iy=cu;var Oa=class Oa{constructor(){this.http=F(Lr);this.rssToJsonUrl="https://api.rss2json.com/v1/api.json?rss_url=http%3A%2F%2Ffeeds.bbci.co.uk%2Fnews%2Fworld%2Frss.xml"}getNewsForCurrentUser(){return this.http.get(this.rssToJsonUrl).pipe(Ft(e=>{if(e.status!=="ok")throw new Error("Failed to fetch news from RSS feed.");let t=e.items.map(i=>({source:{id:null,name:e.feed.title},author:i.author||null,title:i.title,description:this.stripHtml(i.description),url:i.link,urlToImage:i.thumbnail||null,publishedAt:i.pubDate,content:this.stripHtml(i.description)}));return{source:e.feed.title,articles:t}}),ym(e=>(console.error("Error fetching or parsing RSS news feed. Falling back to sample data.",e),Vl({source:"Worldwide (Sample)",articles:this.getSampleArticles()}))))}stripHtml(e){return typeof DOMParser>"u"?e.replace(/<[^>]*>/g,""):new DOMParser().parseFromString(e,"text/html").body.textContent||""}getSampleArticles(){return[{source:{id:null,name:"Banana News"},author:"AI Reporter",title:"Angular v20+ Brings Zoneless Architecture to the Forefront",description:"The latest version of Angular is making waves in the developer community with its new zoneless change detection strategy, promising better performance and simpler application logic.",url:"#",urlToImage:"https://picsum.photos/seed/angular/400/200",publishedAt:new Date().toISOString(),content:null},{source:{id:null,name:"TechCrunch (Sample)"},author:"Jane Doe",title:"Web-Based Operating Systems: The Future of Computing?",description:"Projects like Banana OS are pushing the boundaries of what can be achieved in a web browser, simulating a full desktop experience with impressive fidelity and functionality.",url:"#",urlToImage:"https://picsum.photos/seed/tech/400/200",publishedAt:new Date(Date.now()-3600*1e3*2).toISOString(),content:null},{source:{id:null,name:"The Verge (Sample)"},author:"John Smith",title:"The Rise of AI Assistants: From Simple Chatbots to OS Co-pilots",description:"Integrated AI assistants like Banana Copilot are changing how users interact with their devices, offering natural language control over complex operating system tasks.",url:"#",urlToImage:"https://picsum.photos/seed/ai/400/200",publishedAt:new Date(Date.now()-3600*1e3*5).toISOString(),content:null},{source:{id:null,name:"Gamer Weekly (Sample)"},author:"Pixel Pete",title:"Retro Gaming Makes a Comeback in Browser-Based Environments",description:"Classic games like Minesweeper and Solitaire are finding new life within web-based OS simulators, attracting both nostalgic players and a new generation of gamers.",url:"#",urlToImage:"https://picsum.photos/seed/gaming/400/200",publishedAt:new Date(Date.now()-3600*1e3*12).toISOString(),content:null}]}};Oa.\u0275fac=function(t){return new(t||Oa)},Oa.\u0275prov=de({token:Oa,factory:Oa.\u0275fac,providedIn:"root"});var ry=Oa;var kZ=(n,e)=>e.url;function MZ(n,e){if(n&1&&(x(0,"span",3),g(1),b()),n&2){let t=C();w(),me(" from ",t.source())}}function NZ(n,e){n&1&&(x(0,"div",5),W(1,"i",7),b())}function PZ(n,e){if(n&1&&(x(0,"div",6),W(1,"i",8),x(2,"h3",9),g(3,"Failed to Load News"),b(),x(4,"p",10),g(5),b(),x(6,"p",11),g(7,"Note: This feature uses a public RSS-to-JSON service which may be temporarily unavailable."),b()()),n&2){let t=C();w(5),V(t.errorMsg())}}function RZ(n,e){if(n&1&&(x(0,"a",13),W(1,"img",14),x(2,"div",15)(3,"p",16),g(4),Ue(5,"date"),b(),x(6,"h3",17),g(7),b(),x(8,"p",18),g(9),b()()()),n&2){let t=e.$implicit;Fe("href",t.url,Qe),w(),Fe("src",t.urlToImage||"https://picsum.photos/seed/news/400/200",Qe)("alt",t.title),w(3),Li("",t.source.name," \u2022 ",et(5,7,t.publishedAt,"short")),w(3),V(t.title),w(2),V(t.description)}}function FZ(n,e){if(n&1&&(x(0,"div",12),Q(1,RZ,10,10,"a",13,kZ),b()),n&2){let t=C(2);w(),X(t.articles())}}function LZ(n,e){n&1&&(x(0,"div",6),W(1,"i",19),x(2,"h3",9),g(3,"No Articles Found"),b(),x(4,"p",10),g(5,"Could not find any top headlines from the source."),b()())}function OZ(n,e){if(n&1&&U(0,FZ,3,0,"div",12)(1,LZ,6,0,"div",6),n&2){let t=C();$(t.articles().length>0?0:1)}}var uu=class uu{constructor(){this.newsService=F(ry);this.articles=I([]);this.status=I("loading");this.errorMsg=I("");this.source=I("")}ngOnInit(){this.newsService.getNewsForCurrentUser().subscribe({next:e=>{this.articles.set(e.articles.filter(t=>t.title&&t.title!=="[Removed]")),this.source.set(e.source),this.status.set("loaded")},error:e=>{this.status.set("error"),this.errorMsg.set(e.message||"Could not fetch news. The service may be unavailable."),console.error(e)}})}};uu.\u0275fac=function(t){return new(t||uu)},uu.\u0275cmp=ee({type:uu,selectors:[["app-news-feed"]],decls:9,vars:2,consts:[[1,"h-full","flex","flex-col","bg-gray-900","text-gray-200","font-sans"],[1,"p-4","border-b","border-gray-700/50","flex-shrink-0"],[1,"text-2xl","font-bold"],[1,"text-gray-400","text-xl","font-normal"],[1,"flex-1","overflow-y-auto","p-6"],[1,"h-full","w-full","flex","items-center","justify-center"],[1,"h-full","w-full","flex","flex-col","items-center","justify-center","text-center","p-4"],[1,"fas","fa-spinner","fa-spin","text-4xl","text-gray-400"],[1,"fas","fa-exclamation-triangle","text-4xl","text-red-400","mb-4"],[1,"text-xl","font-bold"],[1,"text-gray-400"],[1,"text-xs","text-gray-500","mt-2"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-6"],["target","_blank","rel","noopener noreferrer",1,"article-card","block",3,"href"],[1,"w-full","h-40","object-cover","rounded-t-lg","bg-gray-700",3,"src","alt"],[1,"p-4","flex","flex-col","flex-grow"],[1,"text-xs","text-gray-400","mb-1"],[1,"font-bold","text-lg","leading-tight","mb-2","flex-grow","hover:text-blue-400"],[1,"text-sm","text-gray-300","leading-snug","line-clamp-3"],[1,"fas","fa-newspaper","text-4xl","text-gray-500","mb-4"]],template:function(t,i){if(t&1&&(x(0,"div",0)(1,"header",1)(2,"h2",2),g(3,"Top Headlines "),U(4,MZ,2,1,"span",3),b()(),x(5,"main",4),U(6,NZ,2,0,"div",5)(7,PZ,8,1,"div",6)(8,OZ,2,1),b()()),t&2){let r;w(4),$(i.source()?4:-1),w(2),$((r=i.status())==="loading"?6:r==="error"?7:r==="loaded"?8:-1)}},dependencies:[te,sn],styles:["@tailwind base;@tailwind components;@tailwind utilities;@layer components{.article-card[_ngcontent-%COMP%]{@apply bg-gray-800/60 rounded-lg shadow-md transition-transform duration-200 hover:-translate-y-1 flex flex-col;}}.line-clamp-3[_ngcontent-%COMP%]{overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:3}"],changeDetection:0});var oy=uu;function VZ(n,e){if(n&1){let t=B();m(0,"div",6)(1,"h2",7),g(2,"Connect With Me"),v(),m(3,"div",8)(4,"div",9),O(5,"div",10),m(6,"div",11),O(7,"i",12),v(),m(8,"div",13)(9,"h3",14),g(10,"Nafis Fuhad"),v(),m(11,"p",15),g(12,"@nafis548"),v(),m(13,"div",16)(14,"div")(15,"p",17),g(16,"32"),v(),m(17,"p",18),g(18,"Repos"),v()(),m(19,"div")(20,"p",17),g(21,"15"),v(),m(22,"p",18),g(23,"Followers"),v()()(),m(24,"button",19),N("click",function(){S(t);let r=C();return T(r.openLink("https://github.com/nafis548"))}),g(25," View Profile "),v()()(),m(26,"div",9),O(27,"div",20),m(28,"div",11),O(29,"i",21),v(),m(30,"div",13)(31,"h3",14),g(32,"Nafis Fuhad"),v(),m(33,"p",15),g(34,"/nafisfuhad26"),v(),m(35,"div",16)(36,"div")(37,"p",17),g(38,"1.2K"),v(),m(39,"p",18),g(40,"Friends"),v()(),m(41,"div")(42,"p",17),g(43,"250"),v(),m(44,"p",18),g(45,"Followers"),v()()(),m(46,"button",19),N("click",function(){S(t);let r=C();return T(r.openLink("https://www.facebook.com/nafisfuhad26"))}),g(47," View Profile "),v()()()()()}}function BZ(n,e){if(n&1){let t=B();m(0,"div",6)(1,"h2",7),g(2,"Get In Touch"),v(),m(3,"div",22)(4,"div",23)(5,"form",24)(6,"div",25),O(7,"i",26)(8,"input",27),v(),m(9,"div",25),O(10,"i",28),m(11,"input",29),N("ngModelChange",function(r){S(t);let o=C();return T(o.updateEmailField("fromName",r))}),v()(),m(12,"div",25),O(13,"i",30),m(14,"input",31),N("ngModelChange",function(r){S(t);let o=C();return T(o.updateEmailField("fromEmail",r))}),v()(),m(15,"div",25),O(16,"i",32),m(17,"input",33),N("ngModelChange",function(r){S(t);let o=C();return T(o.updateEmailField("subject",r))}),v()(),m(18,"div",25),O(19,"i",34),m(20,"textarea",35),N("ngModelChange",function(r){S(t);let o=C();return T(o.updateEmailField("body",r))}),v()(),m(21,"div",36)(22,"a",37)(23,"span"),g(24,"Send via Email Client"),v(),O(25,"i",38),v()()()(),m(26,"div",39),O(27,"i",40),m(28,"div",41)(29,"h3",42),g(30,"Let's Connect"),v(),m(31,"p",43),g(32," Clicking the send button will open your default email client with the fields pre-filled, ready for you to send. "),v()()()()()}if(n&2){let t=C();w(8),J("value",t.email().to),w(3),J("ngModel",t.email().fromName),w(3),J("ngModel",t.email().fromEmail),w(3),J("ngModel",t.email().subject),w(3),J("ngModel",t.email().body),w(2),J("href",t.mailtoLink,Qe)}}var du=class du{constructor(){this.osInteraction=F(dt);this.activeTab=I("social");this.email=I({to:"nafisfuhad26@gmail.com",fromName:"",fromEmail:"",subject:"Inquiry from Banana OS",body:`Hello,

I am reaching out to you through your Banana OS portfolio app.

Best regards,`})}openLink(e){window.open(e,"_blank")}get mailtoLink(){let e=this.email(),t=`${e.body}

---
From: ${e.fromName} (${e.fromEmail})`;return`mailto:${e.to}?subject=${encodeURIComponent(e.subject)}&body=${encodeURIComponent(t)}`}updateEmailField(e,t){this.email.update(i=>Z(P({},i),{[e]:t}))}};du.\u0275fac=function(t){return new(t||du)},du.\u0275cmp=ee({type:du,selectors:[["app-forums"]],decls:11,vars:5,consts:[[1,"h-full","w-full","flex","flex-col","bg-gray-900/50","text-gray-200","from-gray-900","to-gray-800","bg-gradient-to-br"],[1,"flex-shrink-0","flex","border-b","border-white/10"],[1,"tab-btn",3,"click"],[1,"fas","fa-users","mr-2"],[1,"fas","fa-envelope","mr-2"],[1,"flex-1","p-6","overflow-y-auto"],[1,"max-w-4xl","mx-auto"],[1,"text-3xl","font-bold","mb-8","text-center","text-white/90"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-10"],[1,"profile-card"],[1,"profile-banner","github-banner"],[1,"profile-avatar-wrapper"],[1,"fab","fa-github","text-4xl"],[1,"profile-body"],[1,"text-xl","font-bold"],[1,"text-gray-400","text-sm"],[1,"profile-stats"],[1,"font-bold","text-xl"],[1,"text-xs","text-gray-500"],[1,"profile-btn",3,"click"],[1,"profile-banner","facebook-banner"],[1,"fab","fa-facebook","text-4xl"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-8"],[1,"glass-card","p-6","md:p-8"],[1,"space-y-5"],[1,"relative"],[1,"fas","fa-user-check","absolute","left-4","top-1/2","-translate-y-1/2","text-gray-400"],["type","text","readonly","",1,"form-input","cursor-not-allowed","bg-gray-700/50",3,"value"],[1,"fas","fa-user","absolute","left-4","top-1/2","-translate-y-1/2","text-gray-400"],["type","text","name","fromName","placeholder","Your Name",1,"form-input",3,"ngModelChange","ngModel"],[1,"fas","fa-at","absolute","left-4","top-1/2","-translate-y-1/2","text-gray-400"],["type","email","name","fromEmail","placeholder","Your Email",1,"form-input",3,"ngModelChange","ngModel"],[1,"fas","fa-heading","absolute","left-4","top-1/2","-translate-y-1/2","text-gray-400"],["type","text","name","subject","placeholder","Subject",1,"form-input",3,"ngModelChange","ngModel"],[1,"fas","fa-align-left","absolute","left-4","top-5","text-gray-400"],["name","body","rows","4","placeholder","Your message...",1,"form-input","!h-auto",3,"ngModelChange","ngModel"],[1,"pt-2"],["target","_blank",1,"send-btn",3,"href"],[1,"fas","fa-arrow-right"],[1,"glass-card","p-8","flex","flex-col","items-center","justify-center","text-center","contact-info-panel"],[1,"fas","fa-paper-plane","text-9xl","text-white/10","absolute","-bottom-4","-right-4","-rotate-12","z-0","opacity-50"],[1,"relative","z-10"],[1,"text-2xl","font-bold"],[1,"mt-2","text-sm","text-gray-400"]],template:function(t,i){if(t&1&&(m(0,"div",0)(1,"div",1)(2,"button",2),N("click",function(){return i.activeTab.set("social")}),O(3,"i",3),g(4,"Social Profiles "),v(),m(5,"button",2),N("click",function(){return i.activeTab.set("email")}),O(6,"i",4),g(7,"Contact Me "),v()(),m(8,"div",5),U(9,VZ,48,0,"div",6)(10,BZ,33,6,"div",6),v()()),t&2){let r;w(2),Y("active",i.activeTab()==="social"),w(3),Y("active",i.activeTab()==="email"),w(4),$((r=i.activeTab())==="social"?9:r==="email"?10:-1)}},dependencies:[te,At,RN,_t,Dt,DN,xt,vb],styles:["@tailwind base;@tailwind components;@tailwind utilities;@layer components{.tab-btn[_ngcontent-%COMP%]{@apply flex-1 py-3 px-4 text-center text-gray-400 border-b-2 border-transparent hover:bg-white/5 transition-colors flex items-center justify-center font-semibold;}.tab-btn.active[_ngcontent-%COMP%]{@apply text-white accent-border;}.glass-card[_ngcontent-%COMP%]{@apply bg-white/5 backdrop-blur-lg border border-white/10 rounded-2xl shadow-lg;}.profile-card[_ngcontent-%COMP%]{@apply glass-card relative pt-16 text-center transition-all duration-300;}.profile-card[_ngcontent-%COMP%]:hover{@apply transform -translate-y-2 shadow-2xl shadow-cyan-500/10;}.profile-banner[_ngcontent-%COMP%]{@apply absolute top-0 left-0 right-0 h-24 rounded-t-2xl;}.github-banner[_ngcontent-%COMP%]{@apply bg-gradient-to-r from-gray-700 to-gray-800;}.facebook-banner[_ngcontent-%COMP%]{@apply bg-gradient-to-r from-blue-700 to-indigo-800;}.profile-avatar-wrapper[_ngcontent-%COMP%]{@apply absolute top-12 left-1/2 -translate-x-1/2 w-24 h-24 rounded-full flex items-center justify-center border-4 border-gray-800;@apply bg-white/10 backdrop-blur-md;}.profile-body[_ngcontent-%COMP%]{@apply p-6 pt-12;}.profile-stats[_ngcontent-%COMP%]{@apply flex justify-around mt-4 w-full border-t border-white/10 pt-4;}.profile-btn[_ngcontent-%COMP%]{@apply w-full py-3 px-4 rounded-b-2xl font-semibold text-white transition-all duration-300 mt-4 bg-white/10 hover:bg-white/20;}.form-input[_ngcontent-%COMP%]{@apply w-full bg-black/20 border border-white/10 rounded-lg pl-12 pr-4 py-3 focus:outline-none focus:ring-2 accent-ring-focus transition-colors placeholder-gray-500;}.send-btn[_ngcontent-%COMP%]{@apply w-full accent-bg text-white font-semibold px-6 py-4 rounded-lg hover:opacity-90 transition-all flex items-center justify-center gap-3;@apply bg-gradient-to-r from-cyan-500 to-blue-500 hover:shadow-lg hover:shadow-cyan-500/20;}.contact-info-panel[_ngcontent-%COMP%]{@apply from-cyan-900/30 to-blue-900/30 bg-gradient-to-br relative overflow-hidden;}}"],changeDetection:0});var sy=du;var UZ=["codeBlock"];function $Z(n,e){n&1&&(O(0,"i",24),g(1," Generating... "))}function HZ(n,e){n&1&&(O(0,"i",25),g(1," Generate Code "))}function qZ(n,e){if(n&1&&O(0,"iframe",22),n&2){let t=C();J("srcdoc",t.outputHtml(),pa)}}function GZ(n,e){if(n&1&&(m(0,"div",23)(1,"h3",26),g(2,"Output Console"),v(),m(3,"pre",27),g(4),v()()),n&2){let t=C();w(4),V(t.outputText())}}var fu=class fu{constructor(){this.sanitizer=F(ir);this.apiKeyService=F(zn);this.ai=null;this.codeBlock=lo("codeBlock");this.language=I("html");this.codeContent=I("");this.outputHtml=I(null);this.outputText=I("");this.aiPrompt=I("");this.isLoading=I(!1);Ae(()=>{let e=this.apiKeyService.apiKey();e?this.ai=new Vr({apiKey:e}):this.ai=null}),this.setInitialCode(),Ae(()=>{this.highlightCode()})}highlightCode(){this.codeBlock()?.nativeElement&&(this.codeBlock().nativeElement.innerHTML=this.codeContent().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"),hljs.highlightElement(this.codeBlock().nativeElement))}setLanguage(e){this.language.set(e),this.setInitialCode()}setInitialCode(){switch(this.language()){case"html":this.codeContent.set(`<h1>Hello, Banana OS!</h1>
<style>
  body { 
    background-color: #1a202c; 
    color: white; 
    font-family: sans-serif; 
    text-align: center; 
    padding-top: 50px; 
  }
</style>`);break;case"javascript":this.codeContent.set(`// Use console.log() to see output
console.log("Hello from JavaScript!");`);break;case"python":this.codeContent.set(`# Python execution is not supported yet.
print("Hello from Python!")`);break}this.runCode()}runCode(){switch(this.outputHtml.set(null),this.outputText.set(""),this.language()){case"html":this.outputHtml.set(this.sanitizer.bypassSecurityTrustResourceUrl(`data:text/html,${encodeURIComponent(this.codeContent())}`));break;case"javascript":let e=[],t={log:(...i)=>e.push(i.map(r=>typeof r=="object"?JSON.stringify(r):String(r)).join(" ")),error:(...i)=>e.push(`ERROR: ${i.map(r=>String(r)).join(" ")}`),warn:(...i)=>e.push(`WARN: ${i.map(r=>String(r)).join(" ")}`)};try{new Function("console",this.codeContent())(t),this.outputText.set(e.join(`
`)||"Script executed without console output.")}catch(i){i instanceof Error?this.outputText.set(`Error: ${i.message}`):this.outputText.set("An unknown error occurred.")}break;case"python":this.outputText.set(`Python execution is simulated in this environment.

Output:
Hello from Python!`);break}}async generateCode(){if(!this.ai||!this.aiPrompt().trim()){this.outputText.set("AI is not configured. Go to Settings > API Keys to add your key.");return}this.isLoading.set(!0),this.outputText.set("");try{let e=`Generate a single code block of ${this.language()} based on the following request. Only output the raw code, with no explanation or markdown formatting.

Request: "${this.aiPrompt()}"`,i=(await this.ai.models.generateContent({model:"gemini-2.5-flash",contents:e})).text;i=i.replace(/^```(?:\w+\n)?/,"").replace(/```$/,"").trim(),this.codeContent.set(i),this.runCode()}catch(e){console.error(e),this.outputText.set("Error: Could not get response from AI.")}finally{this.isLoading.set(!1)}}};fu.\u0275fac=function(t){return new(t||fu)},fu.\u0275cmp=ee({type:fu,selectors:[["app-banana-ide"]],viewQuery:function(t,i){t&1&&Nr(i.codeBlock,UZ,5),t&2&&ao()},decls:34,vars:7,consts:[["codeBlock",""],[1,"h-full","flex","flex-col","md:flex-row","bg-gray-900","text-gray-200","font-sans"],[1,"w-full","md:w-64","flex-shrink-0","bg-gray-800","p-4","flex","flex-col","gap-4","border-b","md:border-b-0","md:border-r","border-gray-700"],[1,"text-xl","font-bold"],["for","language",1,"block","text-sm","font-medium","text-gray-400","mb-1"],["id","language",1,"ide-select",3,"ngModelChange","ngModel"],["value","html"],["value","javascript"],["value","python"],[1,"flex-grow","flex","flex-col"],["for","ai-prompt",1,"block","text-sm","font-medium","text-gray-400","mb-1"],["id","ai-prompt","placeholder","e.g., create a blue button that says 'Click Me'","rows","4",1,"ide-textarea","flex-grow",3,"ngModelChange","ngModel"],[1,"flex","flex-col","gap-2"],[1,"ide-btn","accent-bg","hover:opacity-90","disabled:opacity-50","disabled:cursor-wait",3,"click","disabled"],[1,"ide-btn","bg-green-600","hover:bg-green-500",3,"click"],[1,"fas","fa-play","mr-2"],[1,"flex-1","flex","flex-col","overflow-hidden"],[1,"flex-1","relative","h-1/2","md:h-full"],["spellcheck","false",1,"editor-textarea",3,"ngModelChange","ngModel"],[1,"editor-pre"],[3,"ngClass"],[1,"flex-1","h-1/2","md:h-full","border-t-2","md:border-t-0","md:border-l-2","border-gray-700","bg-gray-900"],["title","HTML Output",1,"w-full","h-full","border-0","bg-white",3,"srcdoc"],[1,"p-4","h-full","overflow-y-auto"],[1,"fas","fa-spinner","fa-spin","mr-2"],[1,"fas","fa-magic","mr-2"],[1,"font-bold","text-gray-400","mb-2","border-b","border-gray-700","pb-1"],[1,"text-sm","whitespace-pre-wrap"]],template:function(t,i){if(t&1){let r=B();m(0,"div",1)(1,"div",2)(2,"h2",3),g(3,"Banana IDE"),v(),m(4,"div")(5,"label",4),g(6,"Language"),v(),m(7,"select",5),N("ngModelChange",function(s){return S(r),T(i.setLanguage(s))}),m(8,"option",6),g(9,"HTML"),v(),m(10,"option",7),g(11,"JavaScript"),v(),m(12,"option",8),g(13,"Python"),v()()(),m(14,"div",9)(15,"label",10),g(16,"AI Assistant"),v(),m(17,"textarea",11),Dn("ngModelChange",function(s){return S(r),qn(i.aiPrompt,s)||(i.aiPrompt=s),T(s)}),v()(),m(18,"div",12)(19,"button",13),N("click",function(){return S(r),T(i.generateCode())}),U(20,$Z,2,0)(21,HZ,2,0),v(),m(22,"button",14),N("click",function(){return S(r),T(i.runCode())}),O(23,"i",15),g(24," Run Code "),v()()(),m(25,"div",16)(26,"div",17)(27,"textarea",18),Dn("ngModelChange",function(s){return S(r),qn(i.codeContent,s)||(i.codeContent=s),T(s)}),v(),m(28,"pre",19),O(29,"code",20,0),v()(),m(31,"div",21),U(32,qZ,1,1,"iframe",22)(33,GZ,5,1,"div",23),v()()()}t&2&&(w(7),J("ngModel",i.language()),w(10),In("ngModel",i.aiPrompt),w(2),J("disabled",i.isLoading()),w(),$(i.isLoading()?20:21),w(7),In("ngModel",i.codeContent),w(2),J("ngClass","language-"+i.language()),w(3),$(i.language()==="html"?32:33))},dependencies:[te,Vt,At,Nc,Pc,_t,us,Dt,xt],styles:["@tailwind base;@tailwind components;@tailwind utilities;@layer components{.ide-select[_ngcontent-%COMP%]{@apply w-full bg-gray-700 border border-gray-600 rounded-md px-3 py-2 focus:outline-none focus:ring-2 accent-ring-focus;}.ide-textarea[_ngcontent-%COMP%]{@apply w-full bg-gray-900/50 border border-gray-600 rounded-md p-2 focus:outline-none focus:ring-2 accent-ring-focus resize-none;}.ide-btn[_ngcontent-%COMP%]{@apply w-full text-white font-semibold px-4 py-2 rounded-md transition-opacity flex items-center justify-center;}}.editor-textarea[_ngcontent-%COMP%], .editor-pre[_ngcontent-%COMP%], .editor-pre[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{font-family:Courier New,Courier,monospace;font-size:14px;line-height:1.5;padding:1rem}.editor-textarea[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;border:none;background:transparent;color:transparent;caret-color:#fff;outline:none;resize:none;z-index:1}.editor-pre[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;overflow:auto;white-space:pre-wrap;word-wrap:break-word;margin:0!important}.editor-pre[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{display:block;min-height:100%}"],changeDetection:0});var ay=fu;var WZ=["canvas"],zZ=["colorPicker"];function jZ(n,e){if(n&1){let t=B();x(0,"button",21),G("click",function(){let r=S(t).$implicit,o=C();return T(o.setColor(r))}),b()}if(n&2){let t=e.$implicit,i=C();Be("background-color",t),Y("ring-2",i.color()===t&&i.tool()==="brush")("ring-white",i.color()===t&&i.tool()==="brush")("ring-offset-2",i.color()===t&&i.tool()==="brush")("ring-offset-gray-900",i.color()===t&&i.tool()==="brush")}}var pu=class pu{constructor(){this.notificationService=F(vt);this.colors=["#000000","#ef4444","#22c55e","#3b82f6","#eab308","#ffffff"];this.color=I("#000000");this.brushSize=I(5);this.tool=I("brush");this.isDrawing=!1}ngAfterViewInit(){let e=this.canvasRef.nativeElement,t=e.parentElement,i=e.getContext("2d");if(!i)return;this.ctx=i;let r=()=>{this.ctx.fillStyle="#ffffff",this.ctx.fillRect(0,0,e.width,e.height)},o=()=>{let s=this.ctx.getImageData(0,0,e.width,e.height);e.width=t.clientWidth,e.height=t.clientHeight,r(),this.ctx.putImageData(s,0,0),this.ctx.lineCap="round"};e.width=t.clientWidth,e.height=t.clientHeight,r(),this.ctx.lineCap="round",this.parentObserver=new ResizeObserver(o),this.parentObserver.observe(t),e.addEventListener("mousedown",this.startDrawing.bind(this)),e.addEventListener("mousemove",this.draw.bind(this)),e.addEventListener("mouseup",this.stopDrawing.bind(this)),e.addEventListener("mouseleave",this.stopDrawing.bind(this))}ngOnDestroy(){this.parentObserver&&this.parentObserver.disconnect()}startDrawing(e){this.isDrawing=!0,this.ctx.beginPath(),this.ctx.moveTo(e.offsetX,e.offsetY)}draw(e){this.isDrawing&&(this.ctx.lineWidth=this.brushSize(),this.tool()==="brush"?this.ctx.strokeStyle=this.color():this.ctx.strokeStyle="#ffffff",this.ctx.lineTo(e.offsetX,e.offsetY),this.ctx.stroke())}stopDrawing(){this.isDrawing=!1,this.ctx.closePath()}setColor(e){this.color.set(e),this.tool.set("brush"),this.colorPickerRef&&(this.colorPickerRef.nativeElement.value=e)}selectCustomColor(e){let t=e.target.value;this.color.set(t),this.tool.set("brush")}setBrushSize(e){this.brushSize.set(Number(e))}setTool(e){this.tool.set(e)}clearCanvas(){this.ctx.fillStyle="#ffffff",this.ctx.fillRect(0,0,this.canvasRef.nativeElement.width,this.canvasRef.nativeElement.height)}saveCanvas(){let e=this.canvasRef.nativeElement,t=document.createElement("a");t.download=`banana-os-paint-${Date.now()}.png`,t.href=e.toDataURL("image/png"),t.click(),this.notificationService.show({appId:"paint",title:"Paint",body:"Image saved successfully!",type:"success"})}};pu.\u0275fac=function(t){return new(t||pu)},pu.\u0275cmp=ee({type:pu,selectors:[["app-paint"]],viewQuery:function(t,i){if(t&1&&(pn(WZ,5),pn(zZ,5)),t&2){let r;hn(r=mn())&&(i.canvasRef=r.first),hn(r=mn())&&(i.colorPickerRef=r.first)}},decls:25,vars:6,consts:[["colorPicker",""],["canvas",""],[1,"h-full","flex","flex-col","bg-gray-800","text-white"],[1,"flex-shrink-0","p-2","bg-gray-900/50","flex","items-center","justify-between","gap-4","flex-wrap"],[1,"flex","items-center","gap-2","border-r","border-gray-700","pr-3"],["title","Brush",1,"paint-control",3,"click"],[1,"fas","fa-paint-brush"],["title","Eraser",1,"paint-control",3,"click"],[1,"fas","fa-eraser"],[1,"w-8","h-8","rounded-full","border-2","border-gray-600","transition-all",3,"background-color","ring-2","ring-white","ring-offset-2","ring-offset-gray-900"],["type","color","title","Custom Color",1,"custom-color-picker",3,"input","value"],[1,"flex","items-center","gap-3","flex-grow"],[1,"fas","fa-circle","text-xs"],["type","range","min","1","max","50",1,"w-24","accent-bg",3,"input","value"],[1,"fas","fa-circle","text-2xl"],[1,"flex","items-center","gap-2"],[1,"px-3","py-1.5","bg-blue-600","hover:bg-blue-500","rounded","text-sm","font-semibold",3,"click"],[1,"fas","fa-save","mr-1"],[1,"px-3","py-1.5","bg-red-600","hover:bg-red-500","rounded","text-sm","font-semibold",3,"click"],[1,"flex-1","bg-white","relative","overflow-hidden"],[1,"absolute","top-0","left-0"],[1,"w-8","h-8","rounded-full","border-2","border-gray-600","transition-all",3,"click"]],template:function(t,i){if(t&1){let r=B();x(0,"div",2)(1,"div",3)(2,"div",4)(3,"button",5),G("click",function(){return S(r),T(i.setTool("brush"))}),W(4,"i",6),b(),x(5,"button",7),G("click",function(){return S(r),T(i.setTool("eraser"))}),W(6,"i",8),b()(),x(7,"div",4),Q(8,jZ,1,10,"button",9,Ot),x(10,"input",10,0),G("input",function(s){return S(r),T(i.selectCustomColor(s))}),b()(),x(12,"div",11),W(13,"i",12),x(14,"input",13),G("input",function(s){return S(r),T(i.setBrushSize(s.target.value))}),b(),W(15,"i",14),b(),x(16,"div",15)(17,"button",16),G("click",function(){return S(r),T(i.saveCanvas())}),W(18,"i",17),g(19," Save "),b(),x(20,"button",18),G("click",function(){return S(r),T(i.clearCanvas())}),g(21," Clear "),b()()(),x(22,"div",19),W(23,"canvas",20,1),b()()}t&2&&(w(3),Y("active",i.tool()==="brush"),w(2),Y("active",i.tool()==="eraser"),w(3),X(i.colors),w(2),Fe("value",i.color()),w(4),Fe("value",i.brushSize()))},dependencies:[te],styles:["@tailwind base;@tailwind components;@tailwind utilities;@layer components{.paint-control[_ngcontent-%COMP%]{@apply w-10 h-10 rounded-lg border-2 border-transparent transition-all flex items-center justify-center text-lg;}.paint-control.active[_ngcontent-%COMP%]{@apply bg-gray-700 border-gray-500;}.custom-color-picker[_ngcontent-%COMP%]{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;width:2rem;height:2rem;border:none;cursor:pointer}.custom-color-picker[_ngcontent-%COMP%]::-webkit-color-swatch-wrapper{padding:0}.custom-color-picker[_ngcontent-%COMP%]::-webkit-color-swatch{border-radius:9999px;border:2px solid #4b5563}.custom-color-picker[_ngcontent-%COMP%]::-moz-color-swatch{border-radius:9999px;border:2px solid #4b5563}}"],changeDetection:0});var ly=pu;var KN=(n,e)=>e.id;function KZ(n,e){if(n&1){let t=B();x(0,"div",12),G("dragstart",function(){let r=S(t).$implicit,o=C().$implicit,s=C();return T(s.onDragStart(o.id,r.id))}),g(1),b()}if(n&2){let t=e.$implicit;w(),me(" ",t.content," ")}}function YZ(n,e){if(n&1){let t=B();x(0,"div",7),G("dragover",function(r){S(t);let o=C();return T(o.onDragOver(r))})("drop",function(r){let o=S(t).$implicit,s=C();return T(s.onDrop(r,o.id))})("dragenter",function(r){S(t);let o=C();return T(o.onDragEnter(r))})("dragleave",function(r){S(t);let o=C();return T(o.onDragLeave(r))}),x(1,"h3",8),g(2),b(),x(3,"div",9),Q(4,KZ,2,1,"div",10,KN),b(),x(6,"button",11),G("click",function(){let r=S(t).$implicit,o=C();return T(o.addTask(r.id))}),W(7,"i",6),g(8,"Add Task "),b()()}if(n&2){let t=e.$implicit;w(2),V(t.title),w(2),X(t.tasks)}}var jN="banana-os-kanban-board",hu=class hu{constructor(){this.board=I([]);this.draggedTask=null;this.osInteraction=F(dt);this.destroyRef=F(ht);this.loadBoard(),this.board().length===0&&this.initializeDefaultBoard(),Ae(()=>{this.saveBoard()}),this.osInteraction.inAppActionRequest.pipe(Or(this.destroyRef)).subscribe(e=>{if(e.appId==="kanban"&&e.action==="addKanbanTask"){let{columnTitle:t,taskContent:i}=e.payload;this.addTaskToColumn(t,i)}})}loadBoard(){let e=localStorage.getItem(jN);e&&this.board.set(JSON.parse(e))}saveBoard(){localStorage.setItem(jN,JSON.stringify(this.board()))}initializeDefaultBoard(){this.board.set([{id:1,title:"To Do",tasks:[{id:101,content:"Design the new logo"}]},{id:2,title:"In Progress",tasks:[{id:201,content:"Develop the main feature"}]},{id:3,title:"Done",tasks:[{id:301,content:"Initial project setup"}]}])}addColumn(){let e=prompt("Enter new column title:");e&&this.board.update(t=>[...t,{id:Date.now(),title:e,tasks:[]}])}addTask(e){let t=prompt("Enter new task content:");t&&this.addTaskToColumnById(e,t)}addTaskToColumn(e,t){this.board.update(i=>i.map(r=>{if(r.title.toLowerCase()===e.toLowerCase()){let o={id:Date.now(),content:t};return Z(P({},r),{tasks:[...r.tasks,o]})}return r}))}addTaskToColumnById(e,t){this.board.update(i=>i.map(r=>{if(r.id===e){let o={id:Date.now(),content:t};return Z(P({},r),{tasks:[...r.tasks,o]})}return r}))}onDragStart(e,t){this.draggedTask={colId:e,taskId:t}}onDragOver(e){e.preventDefault()}onDrop(e,t){if(e.preventDefault(),!this.draggedTask)return;let{colId:i,taskId:r}=this.draggedTask;if(i===t){this.draggedTask=null,this.clearDragOverStyles();return}this.board.update(o=>{let s,a=o.map(l=>{if(l.id===i){let c=l.tasks.findIndex(d=>d.id===r);if(c>-1)return s=l.tasks[c],Z(P({},l),{tasks:l.tasks.filter(d=>d.id!==r)})}return l});return s?a.map(l=>l.id===t?Z(P({},l),{tasks:[...l.tasks,s]}):l):o}),this.draggedTask=null,this.clearDragOverStyles()}onDragEnter(e){e.currentTarget.classList.add("drag-over")}onDragLeave(e){e.currentTarget.classList.remove("drag-over")}clearDragOverStyles(){document.querySelectorAll(".drag-over").forEach(e=>e.classList.remove("drag-over"))}};hu.\u0275fac=function(t){return new(t||hu)},hu.\u0275cmp=ee({type:hu,selectors:[["app-kanban"]],decls:10,vars:0,consts:[[1,"h-full","bg-gray-900","text-gray-200","flex","flex-col","p-4","overflow-x-auto"],[1,"text-2xl","font-bold","mb-4","flex-shrink-0"],[1,"flex-1","flex","gap-4"],[1,"kanban-column"],[1,"flex-shrink-0","w-72"],[1,"w-full","h-12","bg-gray-800/50","hover:bg-gray-700/50","rounded-lg","transition-colors",3,"click"],[1,"fas","fa-plus","mr-2"],[1,"kanban-column",3,"dragover","drop","dragenter","dragleave"],[1,"font-semibold","p-2","mb-2"],[1,"flex-1","overflow-y-auto","p-2","space-y-2"],["draggable","true",1,"kanban-card"],[1,"add-task-btn",3,"click"],["draggable","true",1,"kanban-card",3,"dragstart"]],template:function(t,i){t&1&&(x(0,"div",0)(1,"h2",1),g(2,"Kanban Board"),b(),x(3,"div",2),Q(4,YZ,9,1,"div",3,KN),x(6,"div",4)(7,"button",5),G("click",function(){return i.addColumn()}),W(8,"i",6),g(9,"Add Another Column "),b()()()()),t&2&&(w(4),X(i.board()))},dependencies:[te],styles:["@tailwind base;@tailwind components;@tailwind utilities;@layer components{.kanban-column[_ngcontent-%COMP%]{@apply w-72 bg-gray-800 rounded-lg flex flex-col flex-shrink-0 h-full transition-colors;}.kanban-card[_ngcontent-%COMP%]{@apply bg-gray-700 p-3 rounded-md shadow-md cursor-grab active:cursor-grabbing;}.add-task-btn[_ngcontent-%COMP%]{@apply w-full text-left p-2 text-gray-400 hover:bg-gray-700/80 rounded-b-lg transition-colors;}.kanban-column.drag-over[_ngcontent-%COMP%]{@apply bg-gray-700/70;}}"],changeDetection:0});var cy=hu;function JZ(n,e){if(n&1&&(m(0,"div",20)(1,"div",24),O(2,"div",25),v(),m(3,"p",26),g(4),v()()),n&2){let t=e.$implicit,i=e.$index,r=C();w(2),Be("height",r.getBarHeight(t)),w(2),V(r.weekDays[i])}}function QZ(n,e){if(n&1&&(m(0,"div",23)(1,"div",27),O(2,"i",28),v(),m(3,"div",29)(4,"p",30),g(5),v(),m(6,"p",31),g(7),v()(),m(8,"div",32)(9,"p",33),g(10),v(),m(11,"p",31),g(12,"kcal"),v()()()),n&2){let t=e.$implicit;w(2),J("ngClass",t.icon),w(3),Li("",t.type," - ",t.distance),w(2),V(t.time),w(3),V(t.calories)}}var mu=class mu{constructor(){this.steps=I(8245);this.calories=I(312);this.activeMinutes=I(45);this.distance=I(6.5);this.weeklySteps=I([6500,8245,7100,9500,5300,12050,8800]);this.maxWeeklySteps=Math.max(...this.weeklySteps());this.recentActivities=I([{type:"Running",icon:"fas fa-running text-blue-400",distance:"5.2 km",time:"30 min ago",calories:250},{type:"Cycling",icon:"fas fa-biking text-purple-400",distance:"12.5 km",time:"Yesterday",calories:420},{type:"Walking",icon:"fas fa-walking text-green-400",distance:"3.1 km",time:"Yesterday",calories:120}]);this.weekDays=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"]}getBarHeight(e){return`${e/this.maxWeeklySteps*100}%`}};mu.\u0275fac=function(t){return new(t||mu)},mu.\u0275cmp=ee({type:mu,selectors:[["app-fitness-tracker"]],decls:51,vars:13,consts:[[1,"h-full","bg-gray-900","text-gray-200","p-6","overflow-y-auto","font-sans"],[1,"flex","justify-between","items-center","mb-6"],[1,"text-3xl","font-bold"],[1,"text-gray-400"],[1,"grid","grid-cols-2","md:grid-cols-4","gap-6","mb-8"],[1,"stat-card","bg-blue-900/50","border-blue-500/50"],[1,"fas","fa-shoe-prints","text-blue-400","text-2xl"],[1,"mt-2","text-3xl","font-bold"],[1,"text-sm","text-gray-400"],[1,"stat-card","bg-red-900/50","border-red-500/50"],[1,"fas","fa-fire-alt","text-red-400","text-2xl"],[1,"stat-card","bg-green-900/50","border-green-500/50"],[1,"fas","fa-bolt","text-green-400","text-2xl"],[1,"stat-card","bg-purple-900/50","border-purple-500/50"],[1,"fas","fa-route","text-purple-400","text-2xl"],[1,"text-lg"],[1,"grid","grid-cols-1","lg:grid-cols-3","gap-6"],[1,"lg:col-span-2","bg-gray-800/60","p-6","rounded-xl"],[1,"text-xl","font-semibold","mb-4"],[1,"flex","justify-between","items-end","h-48"],[1,"flex","flex-col","items-center","w-full"],[1,"lg:col-span-1","bg-gray-800/60","p-6","rounded-xl"],[1,"space-y-4"],[1,"flex","items-center","gap-4","p-3","bg-gray-700/50","rounded-lg"],[1,"w-1/2","bg-gray-700","rounded-t-lg","flex-grow","flex","items-end"],[1,"w-full","accent-bg","rounded-t-lg"],[1,"text-xs","text-gray-400","mt-2"],[1,"w-10","h-10","rounded-full","flex","items-center","justify-center","bg-gray-800"],[1,"text-lg",3,"ngClass"],[1,"flex-1"],[1,"font-semibold"],[1,"text-xs","text-gray-400"],[1,"text-right"],[1,"font-bold"]],template:function(t,i){t&1&&(m(0,"div",0)(1,"header",1)(2,"div")(3,"h2",2),g(4,"Activity Dashboard"),v(),m(5,"p",3),g(6,"Today's Summary"),v()()(),m(7,"div",4)(8,"div",5),O(9,"i",6),m(10,"p",7),g(11),Ue(12,"number"),v(),m(13,"p",8),g(14,"Steps"),v()(),m(15,"div",9),O(16,"i",10),m(17,"p",7),g(18),Ue(19,"number"),v(),m(20,"p",8),g(21,"Calories"),v()(),m(22,"div",11),O(23,"i",12),m(24,"p",7),g(25),Ue(26,"number"),v(),m(27,"p",8),g(28,"Active Mins"),v()(),m(29,"div",13),O(30,"i",14),m(31,"p",7),g(32),Ue(33,"number"),m(34,"span",15),g(35,"km"),v()(),m(36,"p",8),g(37,"Distance"),v()()(),m(38,"div",16)(39,"div",17)(40,"h3",18),g(41,"Weekly Steps"),v(),m(42,"div",19),Q(43,JZ,5,3,"div",20,Ve),v()(),m(45,"div",21)(46,"h3",18),g(47,"Recent Activities"),v(),m(48,"div",22),Q(49,QZ,13,5,"div",23,Ve),v()()()()),t&2&&(w(11),V(Tf(12,4,i.steps())),w(7),V(Tf(19,6,i.calories())),w(7),V(Tf(26,8,i.activeMinutes())),w(7),me("",et(33,10,i.distance(),"1.1-1")," "),w(11),X(i.weeklySteps()),w(6),X(i.recentActivities()))},dependencies:[te,Vt,fo],styles:["@tailwind base;@tailwind components;@tailwind utilities;@layer components{.stat-card[_ngcontent-%COMP%]{@apply p-6 rounded-xl border-l-4;}}"],changeDetection:0});var uy=mu;var YN={id:1,title:"Alice's Adventures in Wonderland",author:"Lewis Carroll",coverUrl:"https://picsum.photos/seed/alice/300/400",chapters:[{title:"Chapter 1: Down the Rabbit-Hole",content:["Alice was beginning to get very tired of sitting by her sister on the bank, and of having nothing to do: once or twice she had peeped into the book her sister was reading, but it had no pictures or conversations in it, \u201Cand what is the use of a book,\u201D thought Alice \u201Cwithout pictures or conversations?\u201D","So she was considering in her own mind (as well as she could, for the hot day made her feel very sleepy and stupid), whether the pleasure of making a daisy-chain would be worth the trouble of getting up and picking the daisies, when suddenly a White Rabbit with pink eyes ran close by her.","There was nothing so VERY remarkable in that; nor did Alice think it so VERY much out of the way to hear the Rabbit say to itself, \u201COh dear! Oh dear! I shall be late!\u201D (when she thought it over afterwards, it occurred to her that she ought to have wondered at this, but at the time it all seemed quite natural); but when the Rabbit actually TOOK A WATCH OUT OF ITS WAISTCOAT-POCKET, and looked at it, and then hurried on, Alice started to her feet, for it flashed across her mind that she had never before seen a rabbit with either a waistcoat-pocket, or a watch to take out of it, and burning with curiosity, she ran across the field after it, and fortunately was just in time to see it pop down a large rabbit-hole under the hedge.","In another moment down went Alice after it, never once considering how in the world she was to get out again.","The rabbit-hole went straight on like a tunnel for some way, and then dipped suddenly down, so suddenly that Alice had not a moment to think about stopping herself before she found herself falling down a very deep well."]},{title:"Chapter 2: The Pool of Tears",content:["\u201CCuriouser and curiouser!\u201D cried Alice (she was so much surprised, that for the moment she quite forgot how to speak good English); \u201Cnow I\u2019m opening out like the largest telescope that ever was! Good-bye, feet!\u201D (for when she looked down at her feet, they seemed to be almost out of sight, they were getting so far off). \u201COh, my poor little feet, I wonder who will put on your shoes and stockings for you now, dears? I\u2019m sure I shan\u2019t be able! I shall be a great deal too far off to trouble myself about you: you must manage the best way you can;\u2014but I must be kind to them,\u201D thought Alice, \u201Cor perhaps they won\u2019t walk the way I want to go! Let me see: I\u2019ll give them a new pair of boots every Christmas.\u201D","And she went on planning to herself how she would manage it. \u201CThey must go by the carrier,\u201D she thought; \u201Cand how funny it\u2019ll seem, sending presents to one\u2019s own feet! And how odd the directions will look! Alice\u2019s Right Foot, Esq. The Hearthrug, near the Fender, (with Alice\u2019s love). Oh dear, what nonsense I\u2019m talking!\u201D","Just then her head struck against the roof of the hall: in fact she was now more than nine feet high, and she at once took up the little golden key and hurried off to the garden door."]}]};var XZ=(n,e)=>e.id;function ZZ(n,e){if(n&1){let t=B();x(0,"div",6),G("click",function(){let r=S(t).$implicit,o=C(2);return T(o.openBook(r))}),x(1,"div",7),W(2,"img",8),b(),x(3,"h3",9),g(4),b(),x(5,"p",10),g(6),b()()}if(n&2){let t=e.$implicit;w(2),Fe("src",t.coverUrl,Qe)("alt",t.title),w(2),V(t.title),w(2),V(t.author)}}function eee(n,e){if(n&1&&(x(0,"div",1)(1,"h2",3),g(2,"My Library"),b(),x(3,"div",4),Q(4,ZZ,7,4,"div",5,XZ),b()()),n&2){let t=C();w(4),X(t.books())}}function tee(n,e){if(n&1&&(x(0,"p",26),g(1),b()),n&2){let t=e.$implicit;w(),V(t)}}function nee(n,e){if(n&1&&(x(0,"h2",25),g(1),b(),Q(2,tee,2,1,"p",26,Ve)),n&2){let t=e;w(),V(t.title),w(),X(t.content)}}function iee(n,e){if(n&1){let t=B();x(0,"div",2)(1,"header",11)(2,"div",12)(3,"button",13),G("click",function(){S(t);let r=C();return T(r.closeReader())}),W(4,"i",14),b(),x(5,"div")(6,"h3",15),g(7),b(),x(8,"p",16),g(9),b()()(),x(10,"div",17)(11,"button",18),G("click",function(){S(t);let r=C();return T(r.changeFontSize(-1))}),g(12,"A-"),b(),x(13,"button",18),G("click",function(){S(t);let r=C();return T(r.changeFontSize(1))}),g(14,"A+"),b()()(),x(15,"main",19),U(16,nee,4,1),b(),x(17,"footer",20)(18,"button",21),G("click",function(){S(t);let r=C();return T(r.prevChapter())}),W(19,"i",22),g(20," Previous "),b(),x(21,"div",23),g(22),b(),x(23,"button",21),G("click",function(){S(t);let r=C();return T(r.nextChapter())}),g(24," Next "),W(25,"i",24),b()()()}if(n&2){let t,i,r=e,o=C();w(7),V(r.title),w(2),V((t=o.currentChapter())==null?null:t.title),w(6),Be("font-size",o.fontSize(),"px"),w(),$((i=o.currentChapter())?16:-1,i),w(2),Fe("disabled",o.currentChapterIndex()===0),w(4),Li(" Chapter ",o.currentChapterIndex()+1," of ",r.chapters.length," "),w(),Fe("disabled",o.currentChapterIndex()===r.chapters.length-1)}}var gu=class gu{constructor(){this.books=I([YN]);this.readingMode=I(!1);this.currentBook=I(null);this.currentChapterIndex=I(0);this.fontSize=I(16);this.currentChapter=le(()=>{let e=this.currentBook();return e?e.chapters[this.currentChapterIndex()]:null})}openBook(e){this.currentBook.set(e),this.currentChapterIndex.set(0),this.readingMode.set(!0)}closeReader(){this.readingMode.set(!1),this.currentBook.set(null)}nextChapter(){let e=this.currentBook();e&&this.currentChapterIndex()<e.chapters.length-1&&this.currentChapterIndex.update(t=>t+1)}prevChapter(){this.currentChapterIndex()>0&&this.currentChapterIndex.update(e=>e-1)}changeFontSize(e){this.fontSize.update(t=>Math.max(12,Math.min(24,t+e)))}};gu.\u0275fac=function(t){return new(t||gu)},gu.\u0275cmp=ee({type:gu,selectors:[["app-ebook-reader"]],decls:3,vars:1,consts:[[1,"h-full","w-full","bg-gray-800","text-gray-200","font-serif"],[1,"p-6"],[1,"h-full","flex","flex-col"],[1,"text-3xl","font-bold","mb-6","font-sans"],[1,"flex","flex-wrap","gap-8"],[1,"flex","flex-col","items-center","cursor-pointer","group"],[1,"flex","flex-col","items-center","cursor-pointer","group",3,"click"],[1,"book-cover"],[1,"w-full","h-full","object-cover",3,"src","alt"],[1,"mt-2","font-semibold","text-center","group-hover:accent-text"],[1,"text-sm","text-gray-400","text-center"],[1,"flex-shrink-0","p-3","bg-gray-900/60","backdrop-blur-sm","flex","items-center","justify-between","border-b","border-gray-700/50","z-10"],[1,"flex","items-center","gap-3"],[1,"w-8","h-8","rounded-full","hover:bg-gray-700","flex","items-center","justify-center",3,"click"],[1,"fas","fa-arrow-left"],[1,"font-semibold","font-sans"],[1,"text-xs","text-gray-400","font-sans"],[1,"flex","items-center","gap-2"],[1,"w-8","h-8","rounded-full","hover:bg-gray-700","flex","items-center","justify-center","font-sans",3,"click"],[1,"flex-1","overflow-y-auto","p-8","md:p-12","lg:p-16"],[1,"flex-shrink-0","p-3","bg-gray-900/60","backdrop-blur-sm","flex","items-center","justify-between","border-t","border-gray-700/50"],[1,"px-4","py-2","rounded-md","hover:bg-gray-700","disabled:opacity-50","font-sans",3,"click","disabled"],[1,"fas","fa-chevron-left","mr-2"],[1,"text-sm","text-gray-400","font-sans"],[1,"fas","fa-chevron-right","ml-2"],[1,"text-3xl","font-bold","mb-6","text-center"],[1,"mb-4","leading-relaxed","indent-8"]],template:function(t,i){if(t&1&&(x(0,"div",0),U(1,eee,6,0,"div",1)(2,iee,26,9,"div",2),b()),t&2){let r;w(),$(i.readingMode()?(r=i.currentBook())?2:-1:1,r)}},dependencies:[te],styles:["@tailwind base;@tailwind components;@tailwind utilities;.book-cover[_ngcontent-%COMP%]{@apply w-36 h-56 bg-gray-700 rounded-md shadow-lg transform-gpu transition-transform duration-300;transform-style:preserve-3d}.book-cover[_ngcontent-%COMP%]:hover{transform:rotateY(-10deg) scale(1.05)}.book-cover[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{@apply rounded-md;}"],changeDetection:0});var dy=gu;function ree(n,e){n&1&&O(0,"img",12),n&2&&J("src",e,Qe)}function oee(n,e){n&1&&(m(0,"div",13),O(1,"i",35),v())}function see(n,e){if(n&1&&(m(0,"p",18),g(1),v()),n&2){let t=e;J("title",t),w(),V(t)}}function aee(n,e){if(n&1){let t=B();m(0,"div",31)(1,"span"),g(2),v(),m(3,"button",36),N("click",function(){S(t);let r=C();return T(r.clearFile("html"))}),g(4,"\xD7"),v()()}n&2&&(w(2),V(e))}function lee(n,e){if(n&1){let t=B();m(0,"input",37,1),N("change",function(r){S(t);let o=C();return T(o.handleFileSelect(r,"html"))}),v(),m(2,"button",38),N("click",function(){S(t);let r=Hn(1);return T(r.click())}),O(3,"i",39),g(4,"Select .html file"),v()}}function cee(n,e){if(n&1){let t=B();m(0,"div",31)(1,"span"),g(2),v(),m(3,"button",36),N("click",function(){S(t);let r=C();return T(r.clearFile("css"))}),g(4,"\xD7"),v()()}n&2&&(w(2),V(e))}function uee(n,e){if(n&1){let t=B();m(0,"input",40,2),N("change",function(r){S(t);let o=C();return T(o.handleFileSelect(r,"css"))}),v(),m(2,"button",38),N("click",function(){S(t);let r=Hn(1);return T(r.click())}),O(3,"i",39),g(4,"Select .css file"),v()}}function dee(n,e){if(n&1){let t=B();m(0,"div",31)(1,"span"),g(2),v(),m(3,"button",36),N("click",function(){S(t);let r=C();return T(r.clearFile("js"))}),g(4,"\xD7"),v()()}n&2&&(w(2),V(e))}function fee(n,e){if(n&1){let t=B();m(0,"input",41,3),N("change",function(r){S(t);let o=C();return T(o.handleFileSelect(r,"js"))}),v(),m(2,"button",38),N("click",function(){S(t);let r=Hn(1);return T(r.click())}),O(3,"i",39),g(4,"Select .js file"),v()}}var yu=class yu{constructor(){this.appManagement=F(Vi);this.notificationService=F(vt);this.appName=I("My New App");this.htmlContent=I(null);this.cssContent=I("");this.jsContent=I("");this.iconDataUrl=I(null);this.htmlFileName=I(null);this.cssFileName=I(null);this.jsFileName=I(null);this.iconFileName=I(null)}handleFileSelect(e,t){let i=e.target,r=i.files?.[0];if(!r)return;let o=new FileReader;if(t==="icon"){if(!r.type.startsWith("image/")){this.notificationService.show({appId:"app-builder",title:"App Builder",body:"Icon must be an image file.",type:"error"});return}o.onload=s=>{this.iconDataUrl.set(s.target?.result),this.iconFileName.set(r.name)},o.readAsDataURL(r)}else o.onload=s=>{let a=s.target?.result;switch(t){case"html":this.htmlContent.set(a),this.htmlFileName.set(r.name);break;case"css":this.cssContent.set(a),this.cssFileName.set(r.name);break;case"js":this.jsContent.set(a),this.jsFileName.set(r.name);break}},o.readAsText(r);i.value=""}clearFile(e){switch(e){case"html":this.htmlContent.set(null),this.htmlFileName.set(null);break;case"css":this.cssContent.set(""),this.cssFileName.set(null);break;case"js":this.jsContent.set(""),this.jsFileName.set(null);break;case"icon":this.iconDataUrl.set(null),this.iconFileName.set(null);break}}installApp(){if(!this.appName().trim()){this.showError("Please provide an app name.");return}if(!this.iconDataUrl()){this.showError("Please upload an app icon.");return}if(!this.htmlContent()){this.showError("An HTML file is required to build the app.");return}this.appManagement.addCustomApp({title:this.appName(),icon:this.iconDataUrl(),projectType:"simple",code:{html:this.htmlContent(),css:this.cssContent(),js:this.jsContent()}}),this.notificationService.show({appId:"app-builder",title:"App Builder",body:`App "${this.appName()}" installed successfully! Find it in the Start Menu.`,type:"success"})}showError(e){this.notificationService.show({appId:"app-builder",title:"App Builder",body:e,type:"error"})}};yu.\u0275fac=function(t){return new(t||yu)},yu.\u0275cmp=ee({type:yu,selectors:[["app-app-builder"]],decls:68,vars:6,consts:[["iconInput",""],["htmlInput",""],["cssInput",""],["jsInput",""],[1,"h-full","w-full","flex","bg-gray-900","text-gray-200","font-sans"],[1,"w-72","flex-shrink-0","bg-gray-800","p-4","flex","flex-col","gap-6","border-r","border-gray-700"],[1,"text-2xl","font-bold"],[1,"flex-grow","space-y-6"],["for","appName",1,"block","text-sm","font-medium","text-gray-400","mb-1"],["type","text","id","appName","placeholder","My Awesome App",1,"form-input",3,"ngModelChange","ngModel"],[1,"block","text-sm","font-medium","text-gray-400","mb-1"],[1,"flex","items-center","gap-4"],["alt","Icon Preview",1,"w-16","h-16","rounded-lg","object-cover","bg-gray-700",3,"src"],[1,"w-16","h-16","rounded-lg","bg-gray-900/50","flex","items-center","justify-center","border-2","border-dashed","border-gray-600"],[1,"flex-1"],["type","file","accept","image/*",1,"hidden",3,"change"],[1,"form-btn","w-full","mb-1",3,"click"],[1,"fas","fa-upload","mr-2"],[1,"text-xs","text-gray-400","truncate",3,"title"],[1,"w-full","accent-bg","text-white","font-semibold","px-4","py-3","rounded-lg","hover:opacity-90","transition-opacity","flex","items-center","justify-center","text-lg",3,"click"],[1,"fas","fa-hammer","mr-2"],[1,"flex-1","p-6","overflow-y-auto"],[1,"text-xl","font-bold","mb-4"],[1,"space-y-6"],[1,"file-upload-card"],[1,"file-upload-header"],[1,"fab","fa-html5","text-2xl","text-orange-500"],[1,"font-bold"],[1,"text-red-500"],[1,"text-xs","text-gray-400"],[1,"file-upload-body"],[1,"file-display"],[1,"fab","fa-css3-alt","text-2xl","text-blue-500"],[1,"font-normal","text-gray-400"],[1,"fab","fa-js-square","text-2xl","text-yellow-400"],[1,"fas","fa-image","text-3xl","text-gray-500"],[1,"clear-btn",3,"click"],["type","file","accept",".html",1,"hidden",3,"change"],[1,"form-btn",3,"click"],[1,"fas","fa-file-upload","mr-2"],["type","file","accept",".css",1,"hidden",3,"change"],["type","file","accept",".js",1,"hidden",3,"change"]],template:function(t,i){if(t&1){let r=B();m(0,"div",4)(1,"div",5)(2,"h2",6),g(3,"App Builder"),v(),m(4,"div",7)(5,"div")(6,"label",8),g(7,"1. App Name"),v(),m(8,"input",9),N("ngModelChange",function(s){return S(r),T(i.appName.set(s))}),v()(),m(9,"div")(10,"label",10),g(11,"2. App Icon"),v(),m(12,"div",11),U(13,ree,1,1,"img",12)(14,oee,2,0,"div",13),m(15,"div",14)(16,"input",15,0),N("change",function(s){return S(r),T(i.handleFileSelect(s,"icon"))}),v(),m(18,"button",16),N("click",function(){S(r);let s=Hn(17);return T(s.click())}),O(19,"i",17),g(20," Upload Icon "),v(),U(21,see,2,2,"p",18),v()()()(),m(22,"button",19),N("click",function(){return S(r),T(i.installApp())}),O(23,"i",20),g(24," Build & Install App "),v()(),m(25,"div",21)(26,"h3",22),g(27,"3. Code Files"),v(),m(28,"div",23)(29,"div",24)(30,"div",25),O(31,"i",26),m(32,"div")(33,"h4",27),g(34,"HTML File "),m(35,"span",28),g(36,"*"),v()(),m(37,"p",29),g(38,"The main entry point for your app."),v()()(),m(39,"div",30),U(40,aee,5,1,"div",31)(41,lee,5,0),v()(),m(42,"div",24)(43,"div",25),O(44,"i",32),m(45,"div")(46,"h4",27),g(47,"CSS File "),m(48,"span",33),g(49,"(Optional)"),v()(),m(50,"p",29),g(51,"Styles for your application."),v()()(),m(52,"div",30),U(53,cee,5,1,"div",31)(54,uee,5,0),v()(),m(55,"div",24)(56,"div",25),O(57,"i",34),m(58,"div")(59,"h4",27),g(60,"JavaScript File "),m(61,"span",33),g(62,"(Optional)"),v()(),m(63,"p",29),g(64,"Logic and interactivity for your app."),v()()(),m(65,"div",30),U(66,dee,5,1,"div",31)(67,fee,5,0),v()()()()()}if(t&2){let r,o,s,a,l;w(8),J("ngModel",i.appName()),w(5),$((r=i.iconDataUrl())?13:14,r),w(8),$((o=i.iconFileName())?21:-1,o),w(19),$((s=i.htmlFileName())?40:41,s),w(13),$((a=i.cssFileName())?53:54,a),w(13),$((l=i.jsFileName())?66:67,l)}},dependencies:[te,At,_t,Dt,xt],styles:["@tailwind base;@tailwind components;@tailwind utilities;@layer components{.form-input[_ngcontent-%COMP%]{@apply w-full bg-gray-900/50 border border-gray-600 rounded-md px-3 py-2 focus:outline-none focus:ring-2 accent-ring-focus;}.form-btn[_ngcontent-%COMP%]{@apply w-full bg-gray-700 hover:bg-gray-600 text-white font-semibold px-3 py-2 rounded-md transition-colors text-sm flex items-center justify-center;}.file-upload-card[_ngcontent-%COMP%]{@apply bg-gray-800/60 rounded-lg border border-gray-700/50 overflow-hidden;}.file-upload-header[_ngcontent-%COMP%]{@apply flex items-center gap-4 p-4;}.file-upload-body[_ngcontent-%COMP%]{@apply bg-gray-900/50 p-4 border-t border-gray-700/50;}.file-display[_ngcontent-%COMP%]{@apply flex items-center justify-between bg-gray-700/50 text-green-400 font-mono text-sm px-3 py-2 rounded-md;}.clear-btn[_ngcontent-%COMP%]{@apply w-6 h-6 rounded-full bg-red-500/20 text-red-400 hover:bg-red-500/50 hover:text-red-300 transition-colors;}}"],changeDetection:0});var fy=yu;function pee(n,e){n&1&&(x(0,"div",1),W(1,"i",3),x(2,"h3",4),g(3,"App Runner Error"),b(),x(4,"p"),g(5),b()()),n&2&&(w(5),V(e))}function hee(n,e){n&1&&W(0,"iframe",2),n&2&&Fe("src",e,ha)}var vu=class vu{constructor(){this.context=F(yn,{optional:!0});this.appManagement=F(Vi);this.sanitizer=F(ir);this.appData=I(null);this.error=I(null);this.appSrc=le(()=>{let e=this.appData();if(!e)return null;let t="";return e.projectType==="react"?t=`
        <!DOCTYPE html>
        <html>
        <head>
          <style>
            body { margin: 0; font-family: sans-serif; }
            ${e.code.css}
          </style>
          <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin><\/script>
          <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin><\/script>
        </head>
        <body>
          <div id="root"></div>
          <script type="text/babel">
            ${e.code.js}
            const container = document.getElementById('root');
            const root = ReactDOM.createRoot(container);
            root.render(<App />);
          <\/script>
        </body>
        </html>`:t=`
        <!DOCTYPE html>
        <html>
        <head>
          <style>${e.code.css}</style>
        </head>
        <body>
          ${e.code.html}
          <script>${e.code.js}<\/script>
        </body>
        </html>`,this.sanitizer.bypassSecurityTrustResourceUrl(`data:text/html,${encodeURIComponent(t)}`)})}ngOnInit(){let e=this.context?.appId;if(e){let t=this.appManagement.getCustomApp(e);t?this.appData.set(t):this.error.set(`Could not find data for custom app with ID: ${e}`)}else this.error.set("No app ID provided to the app runner.")}};vu.\u0275fac=function(t){return new(t||vu)},vu.\u0275cmp=ee({type:vu,selectors:[["app-custom-app-runner"]],decls:3,vars:1,consts:[[1,"h-full","w-full","bg-white"],[1,"h-full","w-full","flex","flex-col","items-center","justify-center","p-4","text-center","bg-gray-800","text-red-400"],["title","Custom App Content",1,"w-full","h-full","border-0",3,"src"],[1,"fas","fa-exclamation-triangle","text-4xl","mb-4"],[1,"text-xl","font-bold"]],template:function(t,i){if(t&1&&(x(0,"div",0),U(1,pee,6,1,"div",1)(2,hee,1,1,"iframe",2),b()),t&2){let r;w(),$((r=i.error())?1:(r=i.appSrc())?2:-1,r)}},dependencies:[te],encapsulation:2,changeDetection:0});var py=vu;var wu=(n,e)=>e.id,mee=(n,e)=>e.path;function gee(n,e){if(n&1&&O(0,"div",27),n&2){let t=C().$implicit;Be("background-image","url("+t.icon+")")}}function yee(n,e){if(n&1&&O(0,"i",25),n&2){let t=C().$implicit;J("ngClass",t.icon)}}function vee(n,e){if(n&1){let t=B();m(0,"div",23),N("dblclick",function(){let r=S(t).$implicit,o=C();return T(o.openApp(r.id))}),U(1,gee,1,2,"div",24)(2,yee,1,1,"i",25),m(3,"span",26),g(4),v()()}if(n&2){let t=e.$implicit;w(),$(t.icon.startsWith("data:image")?1:2),w(3),V(t.title)}}function _ee(n,e){if(n&1){let t=B();m(0,"div",23),N("dblclick",function(){let r=S(t).$implicit,o=C();return T(o.openDesktopFile(r))}),O(1,"i",25),m(2,"span",26),g(3),v()()}if(n&2){let t=e.$implicit,i=C();w(),J("ngClass",i.getIconForNode(t)),w(2),V(t.name)}}function wee(n,e){if(n&1){let t=B();m(0,"app-window",28),N("close",function(){let r=S(t).$implicit,o=C();return T(o.closeWindow(r.id))})("minimize",function(){let r=S(t).$implicit,o=C();return T(o.minimizeWindow(r.id))})("maximize",function(){let r=S(t).$implicit,o=C();return T(o.toggleMaximize(r.id))})("onFocus",function(){let r=S(t).$implicit,o=C();return T(o.focusWindow(r.id))})("drag",function(r){let o=S(t).$implicit,s=C();return T(s.updateWindowPosition(o.id,r))}),v()}if(n&2){let t=e.$implicit,i=C();J("window",t)("isActive",i.activeWindowId()===t.id)}}function Cee(n,e){if(n&1){let t=B();m(0,"button",36),N("click",function(){S(t);let r=C(2);return T(r.notificationService.clearAll())}),g(1,"Clear All"),v()}}function Eee(n,e){if(n&1&&O(0,"div",47),n&2){let t=C().$implicit;Be("background-image","url("+t.appIcon+")")}}function xee(n,e){if(n&1&&O(0,"i",40),n&2){let t=C().$implicit;J("ngClass",t.appIcon)}}function bee(n,e){if(n&1){let t=B();m(0,"div",37)(1,"div",38),U(2,Eee,1,2,"div",39)(3,xee,1,1,"i",40),m(4,"div",41)(5,"p",42),g(6),v(),m(7,"p",43),g(8),v(),m(9,"p",44),g(10),v()()(),m(11,"button",45),N("click",function(){let r=S(t).$implicit,o=C(3);return T(o.notificationService.remove(r.id))}),O(12,"i",46),v()()}if(n&2){let t=e.$implicit,i=C(3);w(2),$(t.appIcon.startsWith("data:image")?2:3),w(4),V(t.title),w(2),V(t.body),w(2),V(i.formatTimeAgo(t.timestamp))}}function See(n,e){if(n&1&&Q(0,bee,13,4,"div",37,wu),n&2){let t=C(2);X(t.notificationService.notifications())}}function Tee(n,e){n&1&&(m(0,"div",35),O(1,"i",48),m(2,"p"),g(3,"No new notifications"),v()())}function Iee(n,e){if(n&1){let t=B();m(0,"div",29),N("click",function(){S(t);let r=C();return T(r.isNotificationCenterOpen.set(!1))}),v(),m(1,"div",30)(2,"header",31)(3,"h3",32),g(4,"Notifications"),v(),U(5,Cee,2,0,"button",33),v(),m(6,"div",34),U(7,See,2,0)(8,Tee,4,0,"div",35),v()()}if(n&2){let t=C();w(5),$(t.notificationService.notifications().length>0?5:-1),w(2),$(t.notificationService.notifications().length>0?7:8)}}function Dee(n,e){if(n&1&&O(0,"div",55),n&2){let t=C().$implicit;Be("background-image","url("+t.icon+")")}}function Aee(n,e){if(n&1&&O(0,"i",54),n&2){let t=C().$implicit;J("ngClass",t.icon)}}function kee(n,e){if(n&1){let t=B();m(0,"div",52),N("click",function(){let r=S(t).$implicit,o=C(2);return T(o.openApp(r.id))}),U(1,Dee,1,2,"div",53)(2,Aee,1,1,"i",54),m(3,"span",26),g(4),v()()}if(n&2){let t=e.$implicit;w(),$(t.icon.startsWith("data:image")?1:2),w(3),V(t.title)}}function Mee(n,e){if(n&1){let t=B();m(0,"div",29),N("click",function(){S(t);let r=C();return T(r.isStartMenuOpen.set(!1))}),v(),m(1,"div",49)(2,"div",50),Q(3,kee,5,2,"div",51,wu),v()()}if(n&2){let t=C();w(3),X(t.installedApps())}}function Nee(n,e){if(n&1&&O(0,"div",27),n&2){let t=C().$implicit;Be("background-image","url("+t.icon+")")}}function Pee(n,e){if(n&1&&O(0,"i",25),n&2){let t=C().$implicit;J("ngClass",t.icon)}}function Ree(n,e){if(n&1&&(m(0,"div",58),U(1,Nee,1,2,"div",24)(2,Pee,1,1,"i",25),m(3,"span",59),g(4),v()()),n&2){let t=e.$implicit,i=e.$index,r=C(2);Y("bg-blue-500/50",r.appSwitcherSelectionIndex()===i),w(),$(t.icon.startsWith("data:image")?1:2),w(3),V(t.title)}}function Fee(n,e){if(n&1&&(m(0,"div",5)(1,"div",56),Q(2,Ree,5,4,"div",57,wu),v()()),n&2){let t=C();w(2),X(t.windowsForSwitcher())}}function Lee(n,e){if(n&1&&O(0,"div",63),n&2){let t=C().$implicit;Be("background-image","url("+t.icon+")")}}function Oee(n,e){if(n&1&&O(0,"i",62),n&2){let t=C().$implicit;J("ngClass",t.icon)}}function Vee(n,e){if(n&1){let t=B();m(0,"button",60),N("click",function(){let r=S(t).$implicit,o=C();return T(r.state==="minimized"?o.restoreWindow(r.id):o.focusWindow(r.id))}),U(1,Lee,1,2,"div",61)(2,Oee,1,1,"i",62),v()}if(n&2){let t=e.$implicit,i=C();Y("bg-white/20",i.activeWindowId()===t.id)("border-b-2",t.state!=="minimized"),w(),$(t.icon.startsWith("data:image")?1:2)}}function Bee(n,e){if(n&1&&(m(0,"div",18),g(1),v()),n&2){let t=C();w(),me(" ",t.unreadCount()," ")}}function Uee(n,e){if(n&1){let t=B();m(0,"div",19)(1,"div",64)(2,"h1",65),g(3,":("),v(),m(4,"p",66),g(5,"Your Banana OS ran into a problem and needs to restart."),v(),m(6,"p",67),g(7,"A critical system file was modified or deleted."),v(),m(8,"div",68),O(9,"i",69),v(),m(10,"p",70),g(11,"For more information about this issue, search online for this error:"),v(),m(12,"p",71),g(13,"SYS_FILE_TAMPERING"),v(),m(14,"button",72),N("click",function(){S(t);let r=C();return T(r.emergencyFix())}),O(15,"i",73),g(16,"Apply Emergency Fix "),v()()()}}function $ee(n,e){if(n&1&&(m(0,"div",20),O(1,"i",74),m(2,"h2",75),g(3),v()()),n&2){let t=C();w(3),V(t.restartingMessage())}}function Hee(n,e){if(n&1){let t=B();m(0,"div",21)(1,"div",76)(2,"h3",77),g(3,"Confirm Factory Reset"),v(),m(4,"p",78),g(5,"Are you sure you want to proceed? All custom settings and installed apps will be permanently deleted."),v(),m(6,"div",79)(7,"button",80),N("click",function(){S(t);let r=C();return T(r.cancelFactoryReset())}),g(8,"Cancel"),v(),m(9,"button",81),N("click",function(){S(t);let r=C();return T(r.confirmFactoryReset())}),g(10,"Confirm Reset"),v()()()()}}function qee(n,e){n&1&&(m(0,"p",90),g(1,"Incorrect password. Please try again."),v())}function Gee(n,e){n&1&&(m(0,"p",91),g(1,"OS is locked."),v())}function Wee(n,e){if(n&1){let t=B();m(0,"div",22)(1,"div",82)(2,"div",83),g(3),Ue(4,"date"),v(),m(5,"div",84),g(6),Ue(7,"date"),v(),m(8,"form",85),N("submit",function(r){S(t);let o=C();return r.preventDefault(),T(o.attemptUnlock())}),m(9,"div",86)(10,"input",87),N("input",function(r){S(t);let o=C();return T(o.unlockAttemptPassword.set(r.target.value))}),v(),m(11,"button",88),O(12,"i",89),v()()(),U(13,qee,2,0,"p",90)(14,Gee,2,0,"p",91),v()()}if(n&2){let t=C();w(),Y("shake",t.unlockError()),w(2),V(et(4,6,t.currentTime(),"h:mm")),w(3),V(et(7,9,t.currentTime(),"EEEE, MMMM d")),w(4),J("value",t.unlockAttemptPassword()),w(3),$(t.unlockError()?13:14)}}var hy="banana-os-windows-state",_u=class _u{constructor(){this.renderer=F(Ri);this.document=F(on);this.platformId=F(ro);this.injector=F(jt);this.settingsService=F(rs);this.appManagementService=F(Vi);this.osInteraction=F(dt);this.notificationService=F(vt);this.desktopStateService=F(os);this.appRegistry=F(Yg);this.fileSystemService=F(Bi);this.systemPreferences=F(ss);this.lockScreenService=F(wc);this.windows=I([]);this.activeWindowId=I(null);this.nextZIndex=I(10);this.isStartMenuOpen=I(!1);this.restartingMessage=I(null);this.isRestarting=le(()=>this.restartingMessage()!==null);this.isFactoryResetConfirmOpen=I(!1);this.isNotificationCenterOpen=I(!1);this.currentTime=I(new Date);this.isLocked=this.lockScreenService.isLocked;this.unlockAttemptPassword=I("");this.unlockError=I(!1);this.timeFormatString=le(()=>this.systemPreferences.timeFormat()==="12h"?"h:mm:ss a":"HH:mm:ss");this.allApps=this.appManagementService.allApps;this.installedApps=le(()=>this.allApps().filter(e=>this.appManagementService.isAppInstalled(e.id)));this.unreadCount=this.notificationService.unreadCount;this.isAppSwitcherVisible=I(!1);this.appSwitcherSelectionIndex=I(0);this.windowsForSwitcher=le(()=>this.windows().filter(e=>e.state!=="minimized").slice().sort((e,t)=>t.zIndex-e.zIndex));this.desktopFiles=I([]);this.isSystemCorrupted=this.fileSystemService.isCorrupted;this.registerOriginalApps(),ns(this.platformId)&&(Ae(()=>{this.appManagementService.customApps().forEach(e=>{this.appRegistry.register(e.id,py)})}),this.loadState(),this.clockInterval=setInterval(()=>{this.currentTime.set(new Date)},1e3),this.osInteraction.openAppRequest.subscribe(({appId:e,data:t})=>{this.openApp(e,t)}),this.osInteraction.updateWindowTitle.subscribe(({windowId:e,newTitle:t})=>{this.windows.update(i=>i.map(r=>r.id===e?Z(P({},r),{title:t}):r))}),this.osInteraction.factoryResetRequest.subscribe(()=>{this.performFactoryReset()}),this.osInteraction.restartRequest.subscribe(()=>{localStorage.removeItem(hy),this.runRestartSequence()}),this.osInteraction.copilotActionRequest.subscribe(e=>{this.handleCopilotAction(e)}),Ae(()=>{if(this.isRestarting())return;let e={windows:this.windows().map(t=>{let a=t,{component:i,injector:r}=a,o=Zf(a,["component","injector"]),s=r?.get(yn,null);return Z(P({},o),{contextData:s})}),activeWindowId:this.activeWindowId(),nextZIndex:this.nextZIndex()};localStorage.setItem(hy,JSON.stringify(e))}),Ae(()=>{this.desktopStateService.openWindows.set(this.windows())}),Ae(()=>{let e=this.fileSystemService.getDirectory("/Desktop");e&&this.desktopFiles.set(Object.values(e.children))}),Ae(()=>{let e=this.settingsService.wallpaper();this.document.body.classList.forEach(t=>{t.startsWith("wallpaper-")&&this.renderer.removeClass(this.document.body,t)}),this.renderer.setStyle(this.document.body,"background-image",""),e.startsWith("data:image")?(this.renderer.setStyle(this.document.body,"background-image",`url(${e})`),this.renderer.setStyle(this.document.body,"background-size","cover"),this.renderer.setStyle(this.document.body,"background-position","center")):this.renderer.addClass(this.document.body,e)}),Ae(()=>{let e=this.settingsService.accentColor();this.document.documentElement.style.setProperty("--accent-color",`var(--accent-color-${e})`)}),Ae(()=>{let e=this.systemPreferences.powerMode();this.renderer.removeClass(this.document.body,"power-mode-performance"),this.renderer.removeClass(this.document.body,"power-mode-saving"),e==="performance"?this.renderer.addClass(this.document.body,"power-mode-performance"):e==="power-saving"&&this.renderer.addClass(this.document.body,"power-mode-saving")}))}async runRestartSequence(){this.restartingMessage.set("Applying changes..."),await new Promise(e=>setTimeout(e,700)),this.restartingMessage.set("Finalizing..."),await new Promise(e=>setTimeout(e,800)),this.restartingMessage.set("Restarting now..."),await new Promise(e=>setTimeout(e,500)),window.location.reload()}registerOriginalApps(){this.appRegistry.register("banana-copilot",G0),this.appRegistry.register("file-explorer",N0),this.appRegistry.register("terminal",h0),this.appRegistry.register("settings",T0),this.appRegistry.register("store",F0),this.appRegistry.register("photo-viewer",R0),this.appRegistry.register("camera",M0),this.appRegistry.register("creative-music",W0),this.appRegistry.register("creative-markdown",z0),this.appRegistry.register("creative-podcast",j0),this.appRegistry.register("browser",I0),this.appRegistry.register("text-editor",P0),this.appRegistry.register("prod-notes",O0),this.appRegistry.register("prod-calendar",B0),this.appRegistry.register("prod-clock",U0),this.appRegistry.register("prod-maps",$0),this.appRegistry.register("calculator",D0),this.appRegistry.register("weather",k0),this.appRegistry.register("util-system-monitor",V0),this.appRegistry.register("util-pdf-reader",H0),this.appRegistry.register("app-translator",q0),this.appRegistry.register("game-chess",K0),this.appRegistry.register("game-solitaire",Y0),this.appRegistry.register("game-minesweeper",J0),this.appRegistry.register("game-sudoku",Q0),this.appRegistry.register("game-puzzle-blocks",Z0),this.appRegistry.register("game-2048",ey),this.appRegistry.register("game-word-finder",ty),this.appRegistry.register("app-recipes",ny),this.appRegistry.register("app-stocks",iy),this.appRegistry.register("app-news",oy),this.appRegistry.register("social-forums",sy),this.appRegistry.register("other-ide",ay),this.appRegistry.register("paint",ly),this.appRegistry.register("kanban",cy),this.appRegistry.register("fitness-tracker",uy),this.appRegistry.register("ebook-reader",dy),this.appRegistry.register("app-builder",fy),Ca.forEach(e=>{this.appRegistry.get(e.id)||this.appRegistry.register(e.id,L0)})}ngOnInit(){ns(this.platformId)&&(this.unlistenKeyDown=this.renderer.listen(this.document,"keydown",this.handleKeyDown.bind(this)),this.unlistenKeyUp=this.renderer.listen(this.document,"keyup",this.handleKeyUp.bind(this)))}toggleNotificationCenter(){this.isNotificationCenterOpen.update(e=>!e),this.isNotificationCenterOpen()&&this.notificationService.markAllAsRead()}formatTimeAgo(e){let t=Math.floor((Date.now()-e)/1e3);if(t<60)return"Just now";let i=Math.floor(t/60);return i<60?`${i}m ago`:`${Math.floor(i/60)}h ago`}handleCopilotAction(e){switch(e.action){case"openApp":this.openApp(e.appId);break;case"setWallpaper":this.settingsService.setWallpaper(e.wallpaperId);break;case"setAccentColor":this.settingsService.setAccentColor(e.color);break;case"restart":this.osInteraction.restartRequest.next();break;case"factoryReset":this.requestFactoryReset();break;case"corruptFileSystem":this.notificationService.show({appId:"banana-copilot",title:"System Corruption",body:"File system corruption initiated by Copilot.",type:"error"}),this.fileSystemService.corruptFileSystem();break}}performFactoryReset(){this.windows.set([]),this.appManagementService.uninstallAllNonCoreApps(),this.settingsService.resetToDefaults(),this.systemPreferences.resetAllToDefaults(),this.fileSystemService.resetToDefaults(),this.activeWindowId.set(null),this.nextZIndex.set(10)}requestFactoryReset(){this.isFactoryResetConfirmOpen.set(!0)}cancelFactoryReset(){this.isFactoryResetConfirmOpen.set(!1)}confirmFactoryReset(){this.performFactoryReset(),this.isFactoryResetConfirmOpen.set(!1)}loadState(){let e=localStorage.getItem(hy);if(e)try{let t=JSON.parse(e),i=t.windows.map(r=>{let o=this.allApps().find(p=>p.id===r.appId),s=this.appRegistry.get(r.appId);if(!o||!s)return null;let a;r.contextData&&(a=jt.create({providers:[{provide:yn,useValue:r.contextData}],parent:this.injector}));let d=r,{contextData:l}=d,c=Zf(d,["contextData"]);return Z(P({},c),{component:s,injector:a})}).filter(r=>r!==null);this.windows.set(i),this.activeWindowId.set(t.activeWindowId),this.nextZIndex.set(t.nextZIndex||10)}catch(t){console.error("Failed to load window state:",t),localStorage.removeItem(hy)}}ngOnDestroy(){this.clockInterval&&clearInterval(this.clockInterval),this.unlistenKeyDown&&this.unlistenKeyDown(),this.unlistenKeyUp&&this.unlistenKeyUp()}openApp(e,t){if(this.isStartMenuOpen.set(!1),!t){let y=this.windows().find(A=>A.appId===e&&A.state!=="minimized");if(y){this.focusWindow(y.id);return}let E=this.windows().find(A=>A.appId===e&&A.state==="minimized");if(E){this.restoreWindow(E.id);return}}let i=this.allApps().find(y=>y.id===e),r=this.appRegistry.get(e);if(!i||!r){console.error(`App or component not found for id: ${e}`);return}let o=`win-${Date.now()}`,s=this.nextZIndex(),a=i.defaultSize||{width:600,height:400},l=P({},a),c={x:50+this.windows().length%10*20,y:50+this.windows().length%10*20};if(ns(this.platformId)){let y=window.innerWidth,E=window.innerHeight;y<768?(l.width=Math.min(a.width,y*.95),l.height=Math.min(a.height,E*.8),c.x=(y-l.width)/2,c.y=(E-l.height-52)/4):(l.width=Math.min(a.width,y-40),l.height=Math.min(a.height,E-52-40),c.x+l.width>y&&(c.x=y-l.width-20),c.y+l.height>E-52&&(c.y=E-l.height-52-20),c.x<0&&(c.x=20),c.y<0&&(c.y=20))}let d,p=Z(P({},t),{windowId:o,appId:e});d=jt.create({providers:[{provide:yn,useValue:p}],parent:this.injector});let h={id:o,appId:i.id,title:i.title,icon:i.icon,component:r,position:c,size:l,zIndex:s,isMinimized:!1,isMaximized:!1,state:"default",injector:d};this.windows.update(y=>[...y,h]),this.activeWindowId.set(o),this.nextZIndex.update(y=>y+1)}closeWindow(e){if(this.windows.update(t=>t.filter(i=>i.id!==e)),this.activeWindowId()===e){let t=this.windows();this.activeWindowId.set(t.length>0?t.slice().sort((i,r)=>r.zIndex-i.zIndex)[0].id:null)}}focusWindow(e){if(this.activeWindowId()===e)return;let t=this.nextZIndex();this.windows.update(i=>i.map(r=>r.id===e?Z(P({},r),{zIndex:t}):r)),this.activeWindowId.set(e),this.nextZIndex.update(i=>i+1)}minimizeWindow(e){this.windows.update(t=>t.map(i=>i.id===e?Z(P({},i),{state:"minimized"}):i)),this.activeWindowId()===e&&this.activeWindowId.set(null)}restoreWindow(e){this.windows.update(t=>t.map(i=>i.id===e?Z(P({},i),{state:i.isMaximized?"maximized":"default"}):i)),this.focusWindow(e)}toggleMaximize(e){this.windows.update(t=>t.map(i=>i.id===e?i.state==="maximized"?Z(P(P({},i),i.previousState),{state:"default",isMaximized:!1}):Z(P({},i),{state:"maximized",isMaximized:!0,previousState:{position:i.position,size:i.size},position:{x:0,y:0},size:{width:window.innerWidth,height:window.innerHeight-52}}):i)),this.focusWindow(e)}updateWindowPosition(e,t){this.windows.update(i=>i.map(r=>r.id===e?Z(P({},r),{position:t}):r))}handleKeyDown(e){if(e.key==="Meta"&&!e.ctrlKey&&!e.altKey&&!e.shiftKey){e.preventDefault(),this.isStartMenuOpen.update(t=>!t);return}if((e.ctrlKey||e.metaKey)&&e.key.toLowerCase()==="w"){e.preventDefault(),this.activeWindowId()&&this.closeWindow(this.activeWindowId());return}if(e.altKey&&e.key==="Tab"){e.preventDefault();let t=this.windowsForSwitcher();t.length>1&&(this.isAppSwitcherVisible()?this.appSwitcherSelectionIndex.update(i=>(i+1)%t.length):(this.isAppSwitcherVisible.set(!0),this.appSwitcherSelectionIndex.set(1)))}}handleKeyUp(e){if(e.key==="Alt"&&this.isAppSwitcherVisible()){let t=this.windowsForSwitcher()[this.appSwitcherSelectionIndex()];t&&this.focusWindow(t.id),this.isAppSwitcherVisible.set(!1),this.appSwitcherSelectionIndex.set(0)}}async attemptUnlock(){this.unlockError.set(!1),await this.lockScreenService.unlock(this.unlockAttemptPassword())||(this.unlockError.set(!0),setTimeout(()=>this.unlockError.set(!1),820)),this.unlockAttemptPassword.set("")}getIconForNode(e){if(e.type==="directory")return"fas fa-folder text-yellow-400";switch(e.name.split(".").pop()?.toLowerCase()){case"txt":case"md":return"fas fa-file-alt text-gray-300";case"jpg":case"jpeg":case"png":case"gif":return"fas fa-file-image text-blue-400";case"js":case"ts":case"json":case"html":case"css":return"fas fa-file-code text-green-400";case"pdf":return"fas fa-file-pdf text-red-500";case"sys":case"bin":return"fas fa-cogs text-gray-500";default:return"fas fa-file text-gray-400"}}openDesktopFile(e){if(e.type==="directory"){this.openApp("file-explorer",{path:e.path});return}let t=e.name.split(".").pop()?.toLowerCase(),i=null;switch(t){case"txt":case"md":case"js":case"ts":case"json":case"html":case"css":i="text-editor";break;case"jpg":case"jpeg":case"png":case"gif":i="photo-viewer";break}i?this.openApp(i,{filePath:e.path}):this.notificationService.show({appId:"file-explorer",title:"Desktop",body:`File type ".${t}" is not supported.`,type:"warning"})}emergencyFix(){this.fileSystemService.resetToDefaults(),this.notificationService.show({appId:"settings",title:"System Restore",body:"Emergency fix applied. File system has been restored to default.",type:"success"})}};_u.\u0275fac=function(t){return new(t||_u)},_u.\u0275cmp=ee({type:_u,selectors:[["app-root"]],decls:36,vars:16,consts:[[1,"h-full","w-full","overflow-hidden","select-none","text-white","flex","flex-col"],[1,"flex-1","p-4"],[1,"grid","grid-cols-4","sm:grid-cols-6","md:grid-cols-8","gap-4"],[1,"flex","flex-col","items-center","p-2","hover:bg-white/10","rounded-lg","cursor-pointer","transition-colors","duration-200","w-20"],[3,"window","isActive"],[1,"absolute","inset-0","bg-black/50","backdrop-blur-sm","z-[999]","flex","items-center","justify-center","animate-fade-in"],[1,"h-[52px]","w-full","bg-gray-900/50","backdrop-blur-lg","border-t","border-gray-700/50","flex","items-center","justify-between","px-2","z-30","flex-shrink-0"],[1,"flex","items-center","gap-2"],[1,"w-10","h-10","flex","items-center","justify-center","rounded-lg","hover:bg-white/10","transition-colors","accent-bg",3,"click"],[1,"fas","fa-bars"],["title","Factory Reset",1,"w-10","h-10","flex","items-center","justify-center","rounded-lg","hover:bg-red-500/50","bg-red-800/50","text-red-300","hover:text-white","transition-colors",3,"click"],[1,"fas","fa-power-off"],[1,"w-10","h-10","flex","items-center","justify-center","rounded-lg","hover:bg-white/10","transition-all","duration-200","accent-border",3,"bg-white/20","border-b-2"],[1,"text-sm","text-center"],[1,"text-xs","text-gray-400"],[1,"relative"],[1,"w-10","h-10","flex","items-center","justify-center","rounded-lg","hover:bg-white/10","transition-colors",3,"click"],[1,"fas","fa-bell"],[1,"absolute","top-1","right-1","w-4","h-4","bg-red-500","rounded-full","text-xs","flex","items-center","justify-center","border-2","border-gray-900/50","font-bold"],[1,"absolute","inset-0","bg-blue-900","z-[1000]","flex","flex-col","items-center","justify-center","text-white","font-mono","p-8"],[1,"absolute","inset-0","bg-black","z-[1000]","flex","flex-col","items-center","justify-center","animate-fade-in"],[1,"absolute","inset-0","bg-black/60","backdrop-blur-sm","flex","items-center","justify-center","z-[1000]"],[1,"absolute","inset-0","bg-black/50","backdrop-blur-2xl","z-[1001]","flex","flex-col","items-center","justify-center","animate-fade-in"],[1,"flex","flex-col","items-center","p-2","hover:bg-white/10","rounded-lg","cursor-pointer","transition-colors","duration-200","w-20",3,"dblclick"],[1,"w-10","h-10","mb-2","bg-contain","bg-no-repeat","bg-center",3,"background-image"],[1,"text-4xl","mb-2",3,"ngClass"],[1,"text-center","text-xs","break-words"],[1,"w-10","h-10","mb-2","bg-contain","bg-no-repeat","bg-center"],[3,"close","minimize","maximize","onFocus","drag","window","isActive"],[1,"absolute","inset-0","z-40",3,"click"],[1,"absolute","top-0","right-0","bottom-14","w-96","bg-gray-800/70","backdrop-blur-xl","border-l","border-gray-700/50","shadow-2xl","flex","flex-col","z-50","animate-slide-in-right-panel"],[1,"flex-shrink-0","p-4","flex","items-center","justify-between","border-b","border-gray-700/50"],[1,"text-lg","font-bold"],[1,"text-sm","text-blue-400","hover:underline"],[1,"flex-1","overflow-y-auto"],[1,"h-full","flex","flex-col","items-center","justify-center","text-gray-500"],[1,"text-sm","text-blue-400","hover:underline",3,"click"],[1,"p-4","border-b","border-gray-700/50","hover:bg-white/5","relative","group"],[1,"flex","items-start","gap-3"],[1,"w-5","h-5","mt-1","bg-contain","bg-no-repeat","bg-center",3,"background-image"],[1,"text-lg","mt-1",3,"ngClass"],[1,"flex-1"],[1,"font-semibold","text-white"],[1,"text-sm","text-gray-300"],[1,"text-xs","text-gray-500","mt-1"],[1,"absolute","top-2","right-2","w-6","h-6","flex","items-center","justify-center","bg-gray-700/50","rounded-full","text-gray-400","hover:bg-gray-600","hover:text-white","opacity-0","group-hover:opacity-100","transition-opacity",3,"click"],[1,"fas","fa-times","text-xs"],[1,"w-5","h-5","mt-1","bg-contain","bg-no-repeat","bg-center"],[1,"fas","fa-bell-slash","text-4xl","mb-2"],[1,"absolute","bottom-[52px]","left-2","w-80","bg-gray-800/70","backdrop-blur-xl","border","border-gray-700/50","rounded-lg","shadow-2xl","p-4","z-50","animate-fade-in-up"],[1,"grid","grid-cols-4","gap-4"],[1,"flex","flex-col","items-center","p-2","hover:bg-white/10","rounded-lg","cursor-pointer","transition-colors","duration-200"],[1,"flex","flex-col","items-center","p-2","hover:bg-white/10","rounded-lg","cursor-pointer","transition-colors","duration-200",3,"click"],[1,"w-8","h-8","mb-1","bg-contain","bg-no-repeat","bg-center",3,"background-image"],[1,"text-3xl","mb-1",3,"ngClass"],[1,"w-8","h-8","mb-1","bg-contain","bg-no-repeat","bg-center"],[1,"flex","gap-4","p-4","bg-gray-800/70","rounded-lg","border","border-gray-700/50"],[1,"flex","flex-col","items-center","p-3","rounded-lg","w-24","h-24","justify-center","transition-colors",3,"bg-blue-500/50"],[1,"flex","flex-col","items-center","p-3","rounded-lg","w-24","h-24","justify-center","transition-colors"],[1,"text-center","text-xs","truncate","w-full"],[1,"w-10","h-10","flex","items-center","justify-center","rounded-lg","hover:bg-white/10","transition-all","duration-200","accent-border",3,"click"],[1,"w-6","h-6","bg-contain","bg-no-repeat","bg-center",3,"background-image"],[1,"text-xl",3,"ngClass"],[1,"w-6","h-6","bg-contain","bg-no-repeat","bg-center"],[1,"text-center"],[1,"text-6xl","font-bold","mb-4"],[1,"text-xl","mb-2"],[1,"text-xl","mb-8"],[1,"w-48","h-48","bg-white","text-black","flex","items-center","justify-center","mb-8"],[1,"fas","fa-qrcode","text-9xl"],[1,"text-sm"],[1,"text-sm","font-bold","mb-8"],[1,"px-6","py-3","bg-white","text-blue-900","font-bold","rounded-md","hover:bg-gray-200",3,"click"],[1,"fas","fa-wrench","mr-2"],[1,"fas","fa-sync-alt","fa-spin","text-5xl","mb-4"],[1,"text-3xl","font-bold"],[1,"bg-gray-800","rounded-lg","shadow-2xl","p-6","w-96","border","border-gray-700","animate-fade-in"],[1,"text-xl","font-bold","mb-2"],[1,"text-gray-400","mb-6"],[1,"flex","justify-end","gap-4"],[1,"px-4","py-2","bg-gray-600","hover:bg-gray-500","rounded-md",3,"click"],[1,"px-4","py-2","bg-red-600","hover:bg-red-500","rounded-md",3,"click"],[1,"text-center","text-white"],[1,"text-7xl","font-light","mb-2"],[1,"text-xl","text-gray-300","mb-8"],[3,"submit"],[1,"relative","w-72","mx-auto"],["type","password","placeholder","Enter password","autofocus","",1,"w-full","bg-white/10","border-2","border-white/20","rounded-full","py-3","px-6","text-center","focus:outline-none","focus:border-white/50","transition-all",3,"input","value"],["type","submit",1,"absolute","right-2","top-1/2","-translate-y-1/2","w-10","h-10","rounded-full","bg-white/20","hover:bg-white/30","flex","items-center","justify-center"],[1,"fas","fa-arrow-right"],[1,"mt-4","text-red-400"],[1,"mt-4","text-gray-400"]],template:function(t,i){t&1&&(m(0,"div",0)(1,"main",1)(2,"div",2),Q(3,vee,5,2,"div",3,wu),Q(5,_ee,4,2,"div",3,mee),v()(),Q(7,wee,1,2,"app-window",4,wu),U(9,Iee,9,2),U(10,Mee,5,0),U(11,Fee,4,0,"div",5),m(12,"footer",6)(13,"div",7)(14,"button",8),N("click",function(){return i.isStartMenuOpen.set(!i.isStartMenuOpen())}),O(15,"i",9),v(),m(16,"button",10),N("click",function(){return i.requestFactoryReset()}),O(17,"i",11),v(),Q(18,Vee,3,5,"button",12,wu),v(),m(20,"div",7)(21,"div",13)(22,"div"),g(23),Ue(24,"date"),v(),m(25,"div",14),g(26),Ue(27,"date"),v()(),m(28,"div",15)(29,"button",16),N("click",function(){return i.toggleNotificationCenter()}),O(30,"i",17),v(),U(31,Bee,2,1,"div",18),v()()()(),U(32,Uee,17,0,"div",19),U(33,$ee,4,1,"div",20),U(34,Hee,11,0,"div",21),U(35,Wee,15,12,"div",22)),t&2&&(w(3),X(i.installedApps()),w(2),X(i.desktopFiles()),w(2),X(i.windows()),w(2),$(i.isNotificationCenterOpen()?9:-1),w(),$(i.isStartMenuOpen()?10:-1),w(),$(i.isAppSwitcherVisible()?11:-1),w(7),X(i.windows()),w(5),V(et(24,10,i.currentTime(),i.timeFormatString())),w(3),V(et(27,13,i.currentTime(),"MMM d, y")),w(5),$(i.unreadCount()>0?31:-1),w(),$(i.isSystemCorrupted()?32:-1),w(),$(i.isRestarting()?33:-1),w(),$(i.isFactoryResetConfirmOpen()?34:-1),w(),$(i.isLocked()?35:-1))},dependencies:[te,Vt,Kg,sn],styles:["@keyframes _ngcontent-%COMP%_fade-in-up{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.animate-fade-in-up[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fade-in-up .2s ease-out}@keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0}to{opacity:1}}.animate-fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fade-in .2s ease-out}@keyframes _ngcontent-%COMP%_slide-in-right-panel{0%{transform:translate(100%)}to{transform:translate(0)}}.animate-slide-in-right-panel[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slide-in-right-panel .3s ease-out}"],changeDetection:0});var my=_u;try{cx(my,{providers:[$E(),fx()]}).catch(n=>{console.error("Angular bootstrapping failed:",n),JN(n)})}catch(n){console.error("Critical error before Angular bootstrap:",n),JN(n)}function JN(n){document.body.className="wallpaper-default",document.body.innerHTML=`
    <div style="position: fixed; inset: 0; background-color: rgba(17, 24, 39, 0.9); color: #f3f4f6; display: flex; flex-direction: column; align-items: center; justify-content: center; font-family: sans-serif; padding: 2rem; z-index: 9999;">
      <div style="text-align: center;">
        <h1 style="font-size: 2rem; font-weight: bold; color: #ef4444; margin-bottom: 1rem;">
          <i class="fas fa-exclamation-triangle" style="margin-right: 0.5rem;"></i>Critical System Error
        </h1>
        <p style="margin-bottom: 1.5rem; text-align: center; color: #d1d5db;">Banana OS failed to start due to a critical error.</p>
        <div style="background-color: #1f2937; padding: 1rem; border-radius: 0.5rem; max-width: 80vw; max-height: 40vh; overflow: auto; margin-bottom: 1.5rem; border: 1px solid #374151; text-align: left;">
          <pre style="white-space: pre-wrap; word-wrap: break-word; font-family: monospace; font-size: 0.875rem; color: #ffcccc;">${n.message||String(n)}</pre>
        </div>
        <button id="restart-btn" style="background-color: #f59e0b; color: white; font-weight: bold; padding: 0.75rem 1.5rem; border: none; border-radius: 0.5rem; cursor: pointer; font-size: 1rem; transition: background-color 0.2s;">
          Restart
        </button>
      </div>
    </div>
  `;let e=document.getElementById("restart-btn");e&&e.addEventListener("click",()=>{window.location.reload()})}
